2026-02-10T10:55:40.212+09:00  INFO 20428 --- [main] c.i.backend.BackendApplication           : Starting BackendApplication using Java 17.0.17 with PID 20428 (C:\InnerSignature\backend\target\classes started by owner in C:\InnerSignature\backend)
2026-02-10T10:55:40.222+09:00 DEBUG 20428 --- [main] c.i.backend.BackendApplication           : Running with Spring Boot v3.5.8, Spring v6.2.14
2026-02-10T10:55:40.226+09:00  INFO 20428 --- [main] c.i.backend.BackendApplication           : The following 1 profile is active: "dev"
2026-02-10T10:55:41.979+09:00 DEBUG 20428 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Searching for mappers annotated with @Mapper
2026-02-10T10:55:41.983+09:00 DEBUG 20428 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Using auto-configuration base package 'com.innersignature.backend'
2026-02-10T10:55:42.301+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AccountCodeMappingMapper.class]
2026-02-10T10:55:42.302+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditLogMapper.class]
2026-02-10T10:55:42.304+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditRuleMapper.class]
2026-02-10T10:55:42.305+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\BudgetMapper.class]
2026-02-10T10:55:42.306+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyCardMapper.class]
2026-02-10T10:55:42.308+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyMapper.class]
2026-02-10T10:55:42.309+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CreditMapper.class]
2026-02-10T10:55:42.309+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseCategoryMapper.class]
2026-02-10T10:55:42.310+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseMapper.class]
2026-02-10T10:55:42.310+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\MonthlyClosingMapper.class]
2026-02-10T10:55:42.311+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PasswordResetTokenMapper.class]
2026-02-10T10:55:42.312+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PaymentMapper.class]
2026-02-10T10:55:42.312+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionMapper.class]
2026-02-10T10:55:42.313+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionPlanMapper.class]
2026-02-10T10:55:42.315+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserApproverMapper.class]
2026-02-10T10:55:42.316+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserCardMapper.class]
2026-02-10T10:55:42.317+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserMapper.class]
2026-02-10T10:55:42.318+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserSignatureMapper.class]
2026-02-10T10:55:42.323+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'accountCodeMappingMapper' and 'com.innersignature.backend.mapper.AccountCodeMappingMapper' mapperInterface
2026-02-10T10:55:42.331+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditLogMapper' and 'com.innersignature.backend.mapper.AuditLogMapper' mapperInterface
2026-02-10T10:55:42.333+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditRuleMapper' and 'com.innersignature.backend.mapper.AuditRuleMapper' mapperInterface
2026-02-10T10:55:42.336+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'budgetMapper' and 'com.innersignature.backend.mapper.BudgetMapper' mapperInterface
2026-02-10T10:55:42.340+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyCardMapper' and 'com.innersignature.backend.mapper.CompanyCardMapper' mapperInterface
2026-02-10T10:55:42.343+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyMapper' and 'com.innersignature.backend.mapper.CompanyMapper' mapperInterface
2026-02-10T10:55:42.344+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'creditMapper' and 'com.innersignature.backend.mapper.CreditMapper' mapperInterface
2026-02-10T10:55:42.348+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseCategoryMapper' and 'com.innersignature.backend.mapper.ExpenseCategoryMapper' mapperInterface
2026-02-10T10:55:42.351+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseMapper' and 'com.innersignature.backend.mapper.ExpenseMapper' mapperInterface
2026-02-10T10:55:42.357+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'monthlyClosingMapper' and 'com.innersignature.backend.mapper.MonthlyClosingMapper' mapperInterface
2026-02-10T10:55:42.358+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'passwordResetTokenMapper' and 'com.innersignature.backend.mapper.PasswordResetTokenMapper' mapperInterface
2026-02-10T10:55:42.359+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'paymentMapper' and 'com.innersignature.backend.mapper.PaymentMapper' mapperInterface
2026-02-10T10:55:42.361+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionMapper' and 'com.innersignature.backend.mapper.SubscriptionMapper' mapperInterface
2026-02-10T10:55:42.363+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionPlanMapper' and 'com.innersignature.backend.mapper.SubscriptionPlanMapper' mapperInterface
2026-02-10T10:55:42.365+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userApproverMapper' and 'com.innersignature.backend.mapper.UserApproverMapper' mapperInterface
2026-02-10T10:55:42.368+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userCardMapper' and 'com.innersignature.backend.mapper.UserCardMapper' mapperInterface
2026-02-10T10:55:42.375+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userMapper' and 'com.innersignature.backend.mapper.UserMapper' mapperInterface
2026-02-10T10:55:42.376+09:00 DEBUG 20428 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userSignatureMapper' and 'com.innersignature.backend.mapper.UserSignatureMapper' mapperInterface
2026-02-10T10:55:43.211+09:00  INFO 20428 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-02-10T10:55:43.241+09:00  INFO 20428 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-02-10T10:55:43.243+09:00  INFO 20428 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-02-10T10:55:43.373+09:00  INFO 20428 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-02-10T10:55:43.374+09:00  INFO 20428 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3071 ms
2026-02-10T10:55:43.490+09:00 DEBUG 20428 --- [main] c.i.b.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2026-02-10T10:55:43.499+09:00 DEBUG 20428 --- [main] c.i.backend.security.RateLimitFilter     : Filter 'rateLimitFilter' configured for use
2026-02-10T10:55:43.904+09:00 DEBUG 20428 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AccountCodeMappingMapper.xml]'
2026-02-10T10:55:43.920+09:00 DEBUG 20428 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditLogMapper.xml]'
2026-02-10T10:55:43.957+09:00 DEBUG 20428 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditRuleMapper.xml]'
2026-02-10T10:55:43.973+09:00 DEBUG 20428 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\BudgetMapper.xml]'
2026-02-10T10:55:43.995+09:00 DEBUG 20428 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyCardMapper.xml]'
2026-02-10T10:55:44.016+09:00 DEBUG 20428 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyMapper.xml]'
2026-02-10T10:55:44.026+09:00 DEBUG 20428 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CreditMapper.xml]'
2026-02-10T10:55:44.061+09:00 DEBUG 20428 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseCategoryMapper.xml]'
2026-02-10T10:55:44.131+09:00 DEBUG 20428 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseMapper.xml]'
2026-02-10T10:55:44.145+09:00 DEBUG 20428 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\MonthlyClosingMapper.xml]'
2026-02-10T10:55:44.158+09:00 DEBUG 20428 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PasswordResetTokenMapper.xml]'
2026-02-10T10:55:44.173+09:00 DEBUG 20428 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PaymentMapper.xml]'
2026-02-10T10:55:44.191+09:00 DEBUG 20428 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionMapper.xml]'
2026-02-10T10:55:44.199+09:00 DEBUG 20428 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionPlanMapper.xml]'
2026-02-10T10:55:44.216+09:00 DEBUG 20428 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserApproverMapper.xml]'
2026-02-10T10:55:44.230+09:00 DEBUG 20428 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserCardMapper.xml]'
2026-02-10T10:55:44.254+09:00 DEBUG 20428 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserMappeer.xml]'
2026-02-10T10:55:44.273+09:00 DEBUG 20428 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserSignatureMapper.xml]'
2026-02-10T10:55:45.102+09:00 DEBUG 20428 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 164 mappings in 'requestMappingHandlerMapping'
2026-02-10T10:55:45.239+09:00 DEBUG 20428 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /api/uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-02-10T10:55:45.270+09:00  WARN 20428 --- [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: bc81342e-4199-4446-ba94-1f3bffffe701

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-02-10T10:55:45.281+09:00  INFO 20428 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-02-10T10:55:45.427+09:00 DEBUG 20428 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RateLimitFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-02-10T10:55:45.542+09:00 DEBUG 20428 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-02-10T10:55:45.610+09:00 DEBUG 20428 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-02-10T10:55:45.616+09:00 DEBUG 20428 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2026-02-10T10:55:45.843+09:00  INFO 20428 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-02-10T10:55:45.858+09:00  INFO 20428 --- [main] c.i.backend.BackendApplication           : Started BackendApplication in 6.482 seconds (process running for 7.423)
2026-02-10T10:56:12.949+09:00  INFO 20428 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-10T10:56:12.949+09:00  INFO 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-02-10T10:56:12.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2026-02-10T10:56:12.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2026-02-10T10:56:12.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2026-02-10T10:56:12.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@24eecabf
2026-02-10T10:56:12.953+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@75a226ea
2026-02-10T10:56:12.953+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-02-10T10:56:12.955+09:00  INFO 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms
2026-02-10T10:56:12.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-02-10T10:56:13.026+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-02-10T10:56:13.033+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-02-10T10:56:13.037+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-02-10T10:56:13.040+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-02-10T10:56:13.043+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-02-10T10:56:13.123+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_user, password=1234)]
2026-02-10T10:56:13.132+09:00  INFO 20428 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 로그인 시도 - username: test_user
2026-02-10T10:56:13.146+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T10:56:13.153+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ea4fa6f] was not registered for synchronization because synchronization is not active
2026-02-10T10:56:13.203+09:00  INFO 20428 --- [http-nio-8080-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-02-10T10:56:13.647+09:00  INFO 20428 --- [http-nio-8080-exec-2] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@63eb9e51
2026-02-10T10:56:13.650+09:00  INFO 20428 --- [http-nio-8080-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-02-10T10:56:13.659+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@955197710 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T10:56:13.668+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-02-10T10:56:13.709+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_user(String)
2026-02-10T10:56:13.749+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-02-10T10:56:13.755+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ea4fa6f]
2026-02-10T10:56:13.887+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T10:56:13.894+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74e7cb00] was not registered for synchronization because synchronization is not active
2026-02-10T10:56:13.901+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@699038264 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T10:56:13.903+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T10:56:13.908+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 6(Long)
2026-02-10T10:56:13.920+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-02-10T10:56:13.921+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74e7cb00]
2026-02-10T10:56:14.068+09:00  INFO 20428 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 로그인 성공 - userId: 6, role: USER, companyId: 3
2026-02-10T10:56:14.071+09:00  INFO 20428 --- [http-nio-8080-exec-2] SECURITY                                 : LOGIN_SUCCESS userId=6 username=test_user role=USER
2026-02-10T10:56:14.102+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T10:56:14.117+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=6, username=test_user, password= (truncated)...]
2026-02-10T10:56:14.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T10:56:15.102+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-10T10:56:15.131+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-10T10:56:15.206+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/companies
2026-02-10T10:56:15.207+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-10T10:56:15.208+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-10T10:56:15.209+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-10T10:56:15.213+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T10:56:15.215+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@374992cb] was not registered for synchronization because synchronization is not active
2026-02-10T10:56:15.221+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1989137928 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T10:56:15.222+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-10T10:56:15.223+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 6(Long)
2026-02-10T10:56:15.227+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-02-10T10:56:15.228+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@374992cb]
2026-02-10T10:56:15.233+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T10:56:15.238+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-10T10:56:15.242+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T10:56:16.209+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T10:56:16.211+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T10:56:16.216+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T10:56:16.217+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T10:56:16.225+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T10:56:16.218+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T10:56:16.218+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T10:56:16.235+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T10:56:16.235+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T10:56:16.253+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses
2026-02-10T10:56:16.253+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T10:56:16.264+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T10:56:16.265+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T10:56:16.269+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T10:56:16.272+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T10:56:16.270+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user", parameters={masked}
2026-02-10T10:56:16.273+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T10:56:16.273+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T10:56:16.274+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2381d600] was not registered for synchronization because synchronization is not active
2026-02-10T10:56:16.282+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T10:56:16.283+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7810ef0a] was not registered for synchronization because synchronization is not active
2026-02-10T10:56:16.314+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2137349073 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T10:56:16.314+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2054980500 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T10:56:16.321+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T10:56:16.321+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T10:56:16.324+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-10T10:56:16.326+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T10:56:16.343+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T10:56:16.348+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7810ef0a]
2026-02-10T10:56:16.349+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T10:56:16.352+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@331aebc] was not registered for synchronization because synchronization is not active
2026-02-10T10:56:16.355+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1775968957 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T10:56:16.357+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T10:56:16.359+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T10:56:16.365+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T10:56:16.365+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T10:56:16.366+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2381d600]
2026-02-10T10:56:16.368+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@331aebc]
2026-02-10T10:56:16.368+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T10:56:16.373+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T10:56:16.374+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T10:56:16.376+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@319b32f3] was not registered for synchronization because synchronization is not active
2026-02-10T10:56:16.377+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T10:56:16.394+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T10:56:16.407+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1483667905 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T10:56:16.417+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T10:56:16.422+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T10:56:16.422+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T10:56:16.423+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T10:56:16.424+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T10:56:16.424+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-10T10:56:16.425+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T10:56:16.426+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7aeba167] was not registered for synchronization because synchronization is not active
2026-02-10T10:56:16.430+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@362772329 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T10:56:16.435+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T10:56:16.437+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-10T10:56:16.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-10T10:56:16.485+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@319b32f3]
2026-02-10T10:56:16.488+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T10:56:16.491+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40c391af] was not registered for synchronization because synchronization is not active
2026-02-10T10:56:16.492+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T10:56:16.501+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@327916503 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T10:56:16.504+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7aeba167]
2026-02-10T10:56:16.506+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T10:56:16.507+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T10:56:16.507+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T10:56:16.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T10:56:16.513+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T10:56:16.530+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T10:56:16.542+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T10:56:16.544+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T10:56:16.553+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40c391af]
2026-02-10T10:56:16.554+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T10:56:16.554+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T10:56:16.555+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T10:56:16.556+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28add0ad] was not registered for synchronization because synchronization is not active
2026-02-10T10:56:16.557+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T10:56:16.563+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1918895775 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T10:56:16.564+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T10:56:16.565+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T10:56:16.567+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36037e70] was not registered for synchronization because synchronization is not active
2026-02-10T10:56:16.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long)
2026-02-10T10:56:16.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@952407744 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T10:56:16.576+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T10:56:16.591+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-10T10:56:16.596+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-02-10T10:56:16.598+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28add0ad]
2026-02-10T10:56:16.599+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T10:56:16.600+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T10:56:16.600+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2095b6fc] was not registered for synchronization because synchronization is not active
2026-02-10T10:56:16.601+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36037e70]
2026-02-10T10:56:16.602+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1581546168 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T10:56:16.602+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T10:56:16.602+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T10:56:16.604+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T10:56:16.605+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-10T10:56:16.606+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T10:56:16.609+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T10:56:16.623+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T10:56:16.626+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-10T10:56:16.635+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T10:56:16.636+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2095b6fc]
2026-02-10T10:56:16.642+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T10:56:16.642+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T10:56:16.643+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T10:56:16.643+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e3a7f20] was not registered for synchronization because synchronization is not active
2026-02-10T10:56:16.650+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T10:56:16.650+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@232964340 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T10:56:16.651+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72d7dd0] was not registered for synchronization because synchronization is not active
2026-02-10T10:56:16.652+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T10:56:16.652+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@166363973 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T10:56:16.653+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T10:56:16.654+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T10:56:16.657+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-10T10:56:16.673+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T10:56:16.678+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e3a7f20]
2026-02-10T10:56:16.681+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T10:56:16.682+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T10:56:16.688+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72d7dd0]
2026-02-10T10:56:16.700+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b50c1ba] was not registered for synchronization because synchronization is not active
2026-02-10T10:56:16.701+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T10:56:16.701+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@377385615 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T10:56:16.703+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T10:56:16.703+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T10:56:16.704+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T10:56:16.707+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long)
2026-02-10T10:56:16.716+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T10:56:16.723+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T10:56:16.738+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T10:56:16.750+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T10:56:16.751+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T10:56:16.753+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-02-10T10:56:16.756+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T10:56:16.757+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b50c1ba]
2026-02-10T10:56:16.767+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@783792f1] was not registered for synchronization because synchronization is not active
2026-02-10T10:56:16.769+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T10:56:16.774+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1995469703 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T10:56:16.776+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T10:56:16.781+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-10T10:56:16.796+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T10:56:16.853+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T10:56:16.864+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T10:56:16.868+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@783792f1]
2026-02-10T10:56:16.900+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T10:56:16.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T10:56:16.906+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T10:56:16.922+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses
2026-02-10T10:56:16.939+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T10:56:16.940+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T10:56:16.949+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user", parameters={masked}
2026-02-10T10:56:16.949+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T10:56:16.958+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T10:56:16.967+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@626a4813] was not registered for synchronization because synchronization is not active
2026-02-10T10:56:16.970+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@468222877 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T10:56:16.971+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T10:56:16.972+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T10:56:16.986+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T10:56:16.987+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@626a4813]
2026-02-10T10:56:16.988+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T10:56:16.989+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a36f2ef] was not registered for synchronization because synchronization is not active
2026-02-10T10:56:16.990+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1306114952 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T10:56:16.992+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T10:56:16.993+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T10:56:17.009+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T10:56:17.011+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a36f2ef]
2026-02-10T10:56:17.019+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T10:56:17.021+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a07673f] was not registered for synchronization because synchronization is not active
2026-02-10T10:56:17.023+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@118184218 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T10:56:17.032+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T10:56:17.043+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-10T10:56:17.118+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-10T10:56:17.139+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a07673f]
2026-02-10T10:56:17.157+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T10:56:17.172+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484dc130] was not registered for synchronization because synchronization is not active
2026-02-10T10:56:17.172+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1508014489 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T10:56:17.189+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T10:56:17.190+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T10:56:17.217+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T10:56:17.218+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484dc130]
2026-02-10T10:56:17.219+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T10:56:17.222+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@763c6dd6] was not registered for synchronization because synchronization is not active
2026-02-10T10:56:17.232+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1356756576 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T10:56:17.239+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T10:56:17.249+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long)
2026-02-10T10:56:17.290+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-02-10T10:56:17.297+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@763c6dd6]
2026-02-10T10:56:17.299+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T10:56:17.307+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fe2d5ba] was not registered for synchronization because synchronization is not active
2026-02-10T10:56:17.311+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1789216077 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T10:56:17.317+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T10:56:17.339+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-10T10:56:17.376+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-10T10:56:17.386+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fe2d5ba]
2026-02-10T10:56:17.392+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T10:56:17.402+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@406910a] was not registered for synchronization because synchronization is not active
2026-02-10T10:56:17.405+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1839254325 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T10:56:17.405+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T10:56:17.409+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T10:56:17.420+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T10:56:17.423+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@406910a]
2026-02-10T10:56:17.424+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T10:56:17.441+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e8f3968] was not registered for synchronization because synchronization is not active
2026-02-10T10:56:17.449+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@246505842 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T10:56:17.451+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T10:56:17.457+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long)
2026-02-10T10:56:17.503+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-02-10T10:56:17.505+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e8f3968]
2026-02-10T10:56:17.506+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T10:56:17.508+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T10:56:17.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T10:59:48.938+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-02-10T10:59:48.944+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T10:59:48.938+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-02-10T10:59:48.948+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T10:59:48.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-02-10T10:59:48.955+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T10:59:48.962+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T10:59:48.964+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/me/signatures
2026-02-10T10:59:48.978+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T10:59:48.978+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-02-10T10:59:48.979+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T10:59:48.981+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-02-10T10:59:48.981+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fe171] was not registered for synchronization because synchronization is not active
2026-02-10T10:59:48.982+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-02-10T10:59:48.987+09:00  INFO 20428 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 6, companyId: 3
2026-02-10T10:59:48.993+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T10:59:48.995+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@665369957 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T10:59:48.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@333d52db] was not registered for synchronization because synchronization is not active
2026-02-10T10:59:49.000+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T10:59:49.004+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-10T10:59:49.043+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1904295097 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T10:59:49.060+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-02-10T10:59:49.065+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T10:59:49.076+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : ==> Parameters: 6(Long), 3(Long)
2026-02-10T10:59:49.080+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fe171]
2026-02-10T10:59:49.082+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T10:59:49.083+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T10:59:49.096+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T10:59:49.110+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-02-10T10:59:49.112+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@333d52db]
2026-02-10T10:59:49.113+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T10:59:49.117+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=10, userId=6, s (truncated)...]
2026-02-10T10:59:49.120+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T10:59:49.125+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-02-10T10:59:49.134+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/me/signatures
2026-02-10T10:59:49.137+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-02-10T10:59:49.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-02-10T10:59:49.145+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-02-10T10:59:49.145+09:00  INFO 20428 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 6, companyId: 3
2026-02-10T10:59:49.146+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T10:59:49.147+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16db3b22] was not registered for synchronization because synchronization is not active
2026-02-10T10:59:49.148+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@404539273 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T10:59:49.149+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-02-10T10:59:49.152+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==> Parameters: 6(Long), 3(Long)
2026-02-10T10:59:49.184+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-02-10T10:59:49.184+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16db3b22]
2026-02-10T10:59:49.185+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T10:59:49.185+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=10, userId=6, s (truncated)...]
2026-02-10T10:59:49.187+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T10:59:58.499+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-02-10T10:59:58.502+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/me/signatures
2026-02-10T10:59:58.503+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-02-10T10:59:58.503+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-02-10T10:59:58.504+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-02-10T10:59:58.504+09:00  INFO 20428 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 6, companyId: 3
2026-02-10T10:59:58.504+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T10:59:58.504+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c0419bf] was not registered for synchronization because synchronization is not active
2026-02-10T10:59:58.507+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@922514127 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T10:59:58.510+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-02-10T10:59:58.510+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : ==> Parameters: 6(Long), 3(Long)
2026-02-10T10:59:58.513+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-02-10T10:59:58.514+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c0419bf]
2026-02-10T10:59:58.514+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T10:59:58.515+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=10, userId=6, s (truncated)...]
2026-02-10T10:59:58.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:01:20.898+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:01:20.899+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-10T11:01:20.901+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/companies
2026-02-10T11:01:20.901+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:01:20.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-10T11:01:20.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:01:20.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-10T11:01:20.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:01:20.903+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-10T11:01:20.903+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:01:20.905+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:01:20.906+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:01:20.906+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5470016c] was not registered for synchronization because synchronization is not active
2026-02-10T11:01:20.906+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79f99cfb] was not registered for synchronization because synchronization is not active
2026-02-10T11:01:20.909+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@770322339 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:01:20.910+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1221223304 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:01:20.910+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-10T11:01:20.910+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:01:20.911+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 6(Long)
2026-02-10T11:01:20.914+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-10T11:01:20.920+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:01:20.921+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-02-10T11:01:20.922+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79f99cfb]
2026-02-10T11:01:20.923+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5470016c]
2026-02-10T11:01:20.924+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:01:20.924+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:01:20.924+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:01:20.925+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-10T11:01:20.926+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:01:20.927+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:01:21.095+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:01:21.097+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:01:21.099+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:01:21.102+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:01:21.103+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:01:21.105+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:01:21.110+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7955e128] was not registered for synchronization because synchronization is not active
2026-02-10T11:01:21.110+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1544591540 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:01:21.116+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:01:21.131+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-10T11:01:21.141+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:01:21.141+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7955e128]
2026-02-10T11:01:21.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:01:21.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:01:21.145+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:01:21.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:01:21.697+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-02-10T11:01:21.729+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:01:21.739+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:01:21.740+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/me/signatures
2026-02-10T11:01:21.758+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:01:21.766+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-02-10T11:01:21.777+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:01:21.777+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-02-10T11:01:21.777+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:01:21.777+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-02-10T11:01:21.777+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@212f6c85] was not registered for synchronization because synchronization is not active
2026-02-10T11:01:21.777+09:00  INFO 20428 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 6, companyId: 3
2026-02-10T11:01:21.778+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:01:21.796+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a1db441] was not registered for synchronization because synchronization is not active
2026-02-10T11:01:21.814+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@82962696 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:01:21.823+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:01:21.832+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-10T11:01:21.833+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1924944405 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:01:21.840+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-02-10T11:01:21.847+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : ==> Parameters: 6(Long), 3(Long)
2026-02-10T11:01:21.880+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:01:21.888+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@212f6c85]
2026-02-10T11:01:21.891+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:01:21.899+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-02-10T11:01:21.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:01:21.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a1db441]
2026-02-10T11:01:21.904+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:01:21.906+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:01:21.913+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=10, userId=6, s (truncated)...]
2026-02-10T11:01:21.919+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:01:21.922+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:01:21.929+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:01:21.972+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-02-10T11:01:21.990+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:01:22.000+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/me/signatures
2026-02-10T11:01:22.000+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:01:22.000+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-02-10T11:01:22.001+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:01:22.001+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-02-10T11:01:22.002+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:01:22.002+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-02-10T11:01:22.002+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5921cdb2] was not registered for synchronization because synchronization is not active
2026-02-10T11:01:22.006+09:00  INFO 20428 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 6, companyId: 3
2026-02-10T11:01:22.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@384630687 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:01:22.007+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:01:22.021+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:01:22.036+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-10T11:01:22.033+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f2bdc55] was not registered for synchronization because synchronization is not active
2026-02-10T11:01:22.043+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1111988327 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:01:22.051+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-02-10T11:01:22.052+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : ==> Parameters: 6(Long), 3(Long)
2026-02-10T11:01:22.067+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:01:22.074+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5921cdb2]
2026-02-10T11:01:22.074+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:01:22.075+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-02-10T11:01:22.080+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:01:22.081+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f2bdc55]
2026-02-10T11:01:22.082+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:01:22.098+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:01:22.101+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:01:22.107+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=10, userId=6, s (truncated)...]
2026-02-10T11:01:22.112+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:01:22.114+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:01:22.122+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:01:22.124+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:01:22.125+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:01:22.174+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:01:22.183+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@772633d2] was not registered for synchronization because synchronization is not active
2026-02-10T11:01:22.195+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1551668815 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:01:22.208+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:01:22.228+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-10T11:01:22.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:01:22.250+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@772633d2]
2026-02-10T11:01:22.255+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:01:22.256+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:01:22.260+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:02:40.492+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:02:40.493+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:02:40.494+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:02:40.495+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:02:40.495+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:02:40.726+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:02:40.727+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:02:40.771+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:02:40.779+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:02:40.792+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:02:40.782+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:02:40.784+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:02:40.785+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses
2026-02-10T11:02:40.792+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:02:40.794+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:02:40.796+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:02:40.797+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses
2026-02-10T11:02:40.798+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:02:40.909+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:02:40.917+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:02:40.998+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:02:41.055+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:02:41.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user", parameters={masked}
2026-02-10T11:02:41.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:02:41.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:02:41.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:02:41.079+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user", parameters={masked}
2026-02-10T11:02:41.079+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:02:41.079+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:02:41.080+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:02:41.087+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19d663b4] was not registered for synchronization because synchronization is not active
2026-02-10T11:02:41.081+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:02:41.081+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:02:41.081+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:02:41.084+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:02:41.090+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13d1153b] was not registered for synchronization because synchronization is not active
2026-02-10T11:02:41.091+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:02:41.091+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5de73e4] was not registered for synchronization because synchronization is not active
2026-02-10T11:02:41.092+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4322341c] was not registered for synchronization because synchronization is not active
2026-02-10T11:02:41.161+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1915030415 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:02:41.172+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@358e7edd] was not registered for synchronization because synchronization is not active
2026-02-10T11:02:41.173+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:02:41.174+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-10T11:02:41.183+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1548983026 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:02:41.197+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@57333878 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:02:41.198+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1710495398 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:02:41.198+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1636275959 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:02:41.241+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:02:41.242+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:02:41.242+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:02:41.243+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:02:41.245+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-10T11:02:41.245+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:02:41.248+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:02:41.259+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:02:41.264+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-10T11:02:41.265+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19d663b4]
2026-02-10T11:02:41.267+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:02:41.273+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:02:41.281+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:02:41.300+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:02:41.300+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:02:41.326+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13d1153b]
2026-02-10T11:02:41.300+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:02:41.300+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:02:41.326+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4322341c]
2026-02-10T11:02:41.326+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5de73e4]
2026-02-10T11:02:41.326+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:02:41.327+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@358e7edd]
2026-02-10T11:02:41.327+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:02:41.328+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:02:41.329+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:02:41.345+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:02:41.345+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:02:41.345+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53e2e3f1] was not registered for synchronization because synchronization is not active
2026-02-10T11:02:41.346+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:02:41.365+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f4beaf9] was not registered for synchronization because synchronization is not active
2026-02-10T11:02:41.366+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:02:41.374+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@444248190 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:02:41.383+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2078858989 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:02:41.396+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:02:41.396+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:02:41.397+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:02:41.421+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:02:41.440+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:02:41.440+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:02:41.450+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53e2e3f1]
2026-02-10T11:02:41.450+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f4beaf9]
2026-02-10T11:02:41.456+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:02:41.465+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:02:41.466+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54733991] was not registered for synchronization because synchronization is not active
2026-02-10T11:02:41.466+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a1645aa] was not registered for synchronization because synchronization is not active
2026-02-10T11:02:41.467+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@273331589 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:02:41.477+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@172651059 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:02:41.478+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:02:41.480+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:02:41.482+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:02:41.493+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:02:41.511+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-10T11:02:41.524+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54733991]
2026-02-10T11:02:41.528+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:02:41.528+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-10T11:02:41.529+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@760e12b0] was not registered for synchronization because synchronization is not active
2026-02-10T11:02:41.531+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a1645aa]
2026-02-10T11:02:41.532+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1006371409 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:02:41.532+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:02:41.532+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:02:41.533+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39f6ac22] was not registered for synchronization because synchronization is not active
2026-02-10T11:02:41.533+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:02:41.534+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1094030755 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:02:41.566+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:02:41.590+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:02:41.618+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:02:41.632+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@760e12b0]
2026-02-10T11:02:41.633+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:02:41.645+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4169e6d1] was not registered for synchronization because synchronization is not active
2026-02-10T11:02:41.645+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1198847966 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:02:41.678+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:02:41.694+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:02:41.698+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39f6ac22]
2026-02-10T11:02:41.715+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long)
2026-02-10T11:02:41.715+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:02:41.716+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@697f44b9] was not registered for synchronization because synchronization is not active
2026-02-10T11:02:41.788+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1709470216 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:02:41.804+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-02-10T11:02:41.811+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:02:41.811+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4169e6d1]
2026-02-10T11:02:41.878+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long)
2026-02-10T11:02:41.889+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:02:41.898+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19ea689b] was not registered for synchronization because synchronization is not active
2026-02-10T11:02:41.957+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-02-10T11:02:41.959+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@389765657 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:02:41.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@697f44b9]
2026-02-10T11:02:41.976+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:02:41.977+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:02:42.021+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:02:42.023+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a519070] was not registered for synchronization because synchronization is not active
2026-02-10T11:02:42.024+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@263701834 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:02:42.028+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:02:42.043+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:02:42.051+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-10T11:02:42.060+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19ea689b]
2026-02-10T11:02:42.062+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:02:42.066+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-10T11:02:42.076+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@671f56ed] was not registered for synchronization because synchronization is not active
2026-02-10T11:02:42.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a519070]
2026-02-10T11:02:42.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@463384960 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:02:42.093+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:02:42.095+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:02:42.096+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fa1e2a5] was not registered for synchronization because synchronization is not active
2026-02-10T11:02:42.097+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:02:42.101+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1281292424 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:02:42.106+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:02:42.107+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:02:42.130+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:02:42.132+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@671f56ed]
2026-02-10T11:02:42.134+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:02:42.134+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:02:42.140+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fa1e2a5]
2026-02-10T11:02:42.141+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a5c9fdc] was not registered for synchronization because synchronization is not active
2026-02-10T11:02:42.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:02:42.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1674435263 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:02:42.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b6f47a4] was not registered for synchronization because synchronization is not active
2026-02-10T11:02:42.144+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:02:42.145+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@677875233 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:02:42.147+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long)
2026-02-10T11:02:42.148+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:02:42.150+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long)
2026-02-10T11:02:42.165+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-02-10T11:02:42.166+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a5c9fdc]
2026-02-10T11:02:42.175+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:02:42.175+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-02-10T11:02:42.179+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:02:42.181+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b6f47a4]
2026-02-10T11:02:42.183+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:02:42.187+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:02:42.201+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:02:42.237+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:05:23.660+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:05:23.660+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:05:23.660+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-10T11:05:23.856+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:05:23.867+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:05:23.922+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-10T11:05:23.938+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:05:23.979+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:05:23.986+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/companies
2026-02-10T11:05:23.991+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:05:23.993+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:05:23.994+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-10T11:05:23.995+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:05:24.002+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:05:24.003+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-10T11:05:24.004+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:05:24.005+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:05:24.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-10T11:05:24.007+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:24.007+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:24.011+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:24.011+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71682092] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:24.011+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e521837] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:24.012+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dad49ab] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:24.053+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1614654559 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:05:24.054+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1122091135 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:05:24.055+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1093742590 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:05:24.067+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:05:24.085+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:05:24.085+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-10T11:05:24.087+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-10T11:05:24.088+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-10T11:05:24.088+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 6(Long)
2026-02-10T11:05:24.095+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:05:24.095+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:05:24.097+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-02-10T11:05:24.097+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e521837]
2026-02-10T11:05:24.100+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71682092]
2026-02-10T11:05:24.102+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dad49ab]
2026-02-10T11:05:24.102+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:05:24.103+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:05:24.103+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:05:24.104+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:05:24.104+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:05:24.105+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-10T11:05:24.106+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:05:24.108+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:05:24.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:05:24.270+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:05:24.300+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:05:24.308+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:05:24.350+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:05:24.358+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:05:24.369+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:05:24.373+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:24.381+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e45b593] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:24.406+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1404937161 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:05:24.425+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:05:24.486+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-10T11:05:24.557+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:05:24.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e45b593]
2026-02-10T11:05:24.646+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:05:24.652+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:05:24.679+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:05:47.654+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:05:47.676+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:05:47.688+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:05:47.733+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:05:47.735+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-10T11:05:47.740+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:05:47.808+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:05:47.813+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:05:47.818+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:05:47.844+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:05:47.845+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:05:47.846+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-10T11:05:47.858+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:05:47.860+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:05:47.915+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/companies
2026-02-10T11:05:47.917+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses
2026-02-10T11:05:47.868+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:05:47.877+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:05:47.910+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses
2026-02-10T11:05:47.919+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:05:47.916+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:05:47.917+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-10T11:05:47.917+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:05:47.918+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:05:47.919+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:05:47.920+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user", parameters={masked}
2026-02-10T11:05:47.921+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:05:47.922+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-10T11:05:47.922+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user", parameters={masked}
2026-02-10T11:05:47.922+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:05:47.923+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:05:47.923+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:05:47.923+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:05:47.924+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-10T11:05:47.924+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:05:47.924+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:05:47.924+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:05:47.925+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:05:47.926+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:47.926+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:47.927+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:47.939+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:47.939+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:05:47.940+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:47.941+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@536003b0] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:47.942+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e953ec0] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:47.942+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d989ecb] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:47.942+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20ffe578] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:47.943+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:47.943+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19a52a7d] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:47.958+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@179f6a4b] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:47.970+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2103997829 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:05:47.971+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1215242820 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:05:47.971+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1776671326 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:05:47.971+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1019387965 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:05:47.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:05:47.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-10T11:05:47.976+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:05:47.977+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:05:47.977+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1071502327 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:05:47.980+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-10T11:05:47.982+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 6(Long)
2026-02-10T11:05:47.983+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:05:47.983+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:05:47.983+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:05:47.992+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-10T11:05:47.994+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-02-10T11:05:47.994+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:05:48.000+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e953ec0]
2026-02-10T11:05:48.000+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20ffe578]
2026-02-10T11:05:48.001+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@944679323 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:05:48.001+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:05:48.001+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:05:48.003+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:05:48.003+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-10T11:05:48.004+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:05:48.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:05:48.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-10T11:05:48.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:05:48.013+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:05:48.021+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:05:48.022+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:05:48.043+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d989ecb]
2026-02-10T11:05:48.044+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:48.045+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b529e68] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:48.030+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:05:48.037+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:05:48.042+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@536003b0]
2026-02-10T11:05:48.045+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1319629134 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:05:48.049+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:05:48.050+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:05:48.051+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:48.051+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:05:48.052+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:05:48.052+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:05:48.052+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b4658c7] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:48.053+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:05:48.053+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:05:48.053+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:05:48.054+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@343785081 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:05:48.055+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:05:48.055+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:48.056+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:05:48.056+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:48.056+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60f08911] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:48.057+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:05:48.057+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@324d460d] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:48.057+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1331986723 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:05:48.090+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:05:48.117+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:05:48.117+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:05:48.117+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:05:48.117+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:05:48.120+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19a52a7d]
2026-02-10T11:05:48.123+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b4658c7]
2026-02-10T11:05:48.123+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@179f6a4b]
2026-02-10T11:05:48.124+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b529e68]
2026-02-10T11:05:48.128+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-10T11:05:48.128+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1523138379 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:05:48.128+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:48.131+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@608d1aa5] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:48.128+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:05:48.129+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:05:48.129+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:48.130+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:05:48.133+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@427095571 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:05:48.134+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:05:48.134+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:05:48.138+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32284c01] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:48.140+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:05:48.140+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-10T11:05:48.140+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:05:48.141+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:05:48.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1842755058 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:05:48.145+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:05:48.146+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:05:48.152+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:05:48.153+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:05:48.162+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:05:48.162+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60f08911]
2026-02-10T11:05:48.175+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:05:48.294+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-10T11:05:48.295+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:05:48.323+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:05:48.350+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:05:48.377+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:05:48.391+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:05:48.387+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:05:48.394+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:05:48.388+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@608d1aa5]
2026-02-10T11:05:48.388+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@324d460d]
2026-02-10T11:05:48.392+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:05:48.395+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:05:48.394+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:05:48.395+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:48.396+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:05:48.401+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:48.409+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:05:48.410+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64ac159e] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:48.451+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-10T11:05:48.454+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:05:48.473+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses
2026-02-10T11:05:48.475+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:05:48.477+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user", parameters={masked}
2026-02-10T11:05:48.454+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:05:48.459+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@137b14c4] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:48.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1828483996 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:05:48.470+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:05:48.471+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32284c01]
2026-02-10T11:05:48.479+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:05:48.491+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1083927418 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:05:48.495+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:05:48.503+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-10T11:05:48.492+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:05:48.492+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:05:48.493+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:48.505+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a44fa6d] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:48.495+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:48.504+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:05:48.505+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:05:48.506+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1518138208 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:05:48.507+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e8888d2] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:48.507+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:05:48.508+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:05:48.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:48.508+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@392752841 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:05:48.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:05:48.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62d8f20b] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:48.519+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:05:48.520+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@141150308 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:05:48.522+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:05:48.523+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:05:48.523+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:05:48.524+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:05:48.525+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64ac159e]
2026-02-10T11:05:48.525+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@137b14c4]
2026-02-10T11:05:48.526+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:05:48.528+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-10T11:05:48.529+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:48.530+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a44fa6d]
2026-02-10T11:05:48.530+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:05:48.530+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a143981] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:48.531+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:48.534+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:05:48.535+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ebf3688] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:48.535+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@772856248 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:05:48.536+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:05:48.540+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:05:48.544+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1126513312 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:05:48.544+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:05:48.555+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e8888d2]
2026-02-10T11:05:48.555+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:05:48.556+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long)
2026-02-10T11:05:48.556+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:48.556+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long)
2026-02-10T11:05:48.558+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:05:48.559+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43f8cf79] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:48.560+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62d8f20b]
2026-02-10T11:05:48.560+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@969675212 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:05:48.561+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:05:48.561+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:05:48.561+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:05:48.562+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:05:48.563+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:05:48.605+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:05:48.606+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-02-10T11:05:48.610+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-02-10T11:05:48.613+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43f8cf79]
2026-02-10T11:05:48.616+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ebf3688]
2026-02-10T11:05:48.616+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a143981]
2026-02-10T11:05:48.618+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:48.618+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:48.620+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:48.620+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fbd158b] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:48.620+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31ca2704] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:48.621+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@453e3a10] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:48.621+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@180060162 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:05:48.623+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@108416195 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:05:48.623+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1315822343 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:05:48.623+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:05:48.623+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:05:48.623+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:05:48.626+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:05:48.628+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:05:48.632+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:05:48.639+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-10T11:05:48.639+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-10T11:05:48.639+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-10T11:05:48.640+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fbd158b]
2026-02-10T11:05:48.641+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@453e3a10]
2026-02-10T11:05:48.642+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31ca2704]
2026-02-10T11:05:48.643+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:48.643+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:48.643+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:48.643+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2faa3078] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:48.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ec4095a] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:48.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ba658c3] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:48.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1222408523 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:05:48.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@178149928 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:05:48.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@196386996 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:05:48.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:05:48.645+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:05:48.645+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:05:48.647+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:05:48.647+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:05:48.650+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:05:48.654+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:05:48.654+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:05:48.654+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:05:48.654+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ba658c3]
2026-02-10T11:05:48.654+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2faa3078]
2026-02-10T11:05:48.655+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ec4095a]
2026-02-10T11:05:48.656+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:48.656+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:48.656+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:48.656+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37c0141e] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:48.657+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c066dfb] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:48.657+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48d00d0e] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:48.657+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1861825125 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:05:48.658+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@906481052 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:05:48.658+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@311831544 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:05:48.658+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:05:48.659+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:05:48.659+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:05:48.660+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long)
2026-02-10T11:05:48.660+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long)
2026-02-10T11:05:48.661+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long)
2026-02-10T11:05:48.707+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-02-10T11:05:48.707+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-02-10T11:05:48.708+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-02-10T11:05:48.709+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37c0141e]
2026-02-10T11:05:48.710+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48d00d0e]
2026-02-10T11:05:48.711+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c066dfb]
2026-02-10T11:05:48.721+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:05:48.721+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:48.721+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:05:48.722+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:05:48.722+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9414b08] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:48.722+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:05:48.723+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:05:48.723+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1102159699 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:05:48.724+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:05:48.724+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:05:48.727+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:05:48.789+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-10T11:05:48.807+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9414b08]
2026-02-10T11:05:48.808+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:48.813+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c34f94] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:48.818+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@5856751 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:05:48.819+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:05:48.820+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:05:48.823+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:05:48.824+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c34f94]
2026-02-10T11:05:48.825+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:48.825+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12dca5ae] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:48.827+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@192604046 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:05:48.830+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:05:48.832+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long)
2026-02-10T11:05:48.876+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-02-10T11:05:48.880+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12dca5ae]
2026-02-10T11:05:48.887+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:05:48.890+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:05:48.892+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:05:54.410+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:05:54.434+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:05:54.438+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses
2026-02-10T11:05:54.442+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:05:54.444+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user", parameters={masked}
2026-02-10T11:05:54.449+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:05:54.453+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:54.460+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dbb22e3] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:54.492+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@23891432 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:05:54.497+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:05:54.502+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:05:54.527+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:05:54.529+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dbb22e3]
2026-02-10T11:05:54.535+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:54.543+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20f373b4] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:54.544+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1661313431 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:05:54.546+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:05:54.547+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:05:54.552+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:05:54.553+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20f373b4]
2026-02-10T11:05:54.554+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:54.557+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dbc08d9] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:54.560+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@912897033 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:05:54.561+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:05:54.568+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:05:54.589+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-10T11:05:54.595+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dbc08d9]
2026-02-10T11:05:54.603+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:54.604+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73ebb120] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:54.605+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2128245237 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:05:54.608+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:05:54.610+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:05:54.636+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:05:54.638+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73ebb120]
2026-02-10T11:05:54.639+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:54.643+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aac677b] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:54.647+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@73441727 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:05:54.655+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:05:54.656+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long)
2026-02-10T11:05:54.692+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-02-10T11:05:54.706+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aac677b]
2026-02-10T11:05:54.707+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:54.707+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c56035f] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:54.709+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1963473937 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:05:54.711+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:05:54.718+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:05:54.732+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-10T11:05:54.735+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c56035f]
2026-02-10T11:05:54.737+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:54.738+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cfcad10] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:54.739+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@280758571 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:05:54.741+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:05:54.742+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:05:54.746+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:05:54.747+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cfcad10]
2026-02-10T11:05:54.750+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:05:54.757+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7062b3f5] was not registered for synchronization because synchronization is not active
2026-02-10T11:05:54.758+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@160371908 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:05:54.782+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:05:54.784+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long)
2026-02-10T11:05:54.793+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-02-10T11:05:54.797+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7062b3f5]
2026-02-10T11:05:54.801+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:05:54.802+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:05:54.810+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:23.156+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/switch-company
2026-02-10T11:06:23.161+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/users/switch-company
2026-02-10T11:06:23.164+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/switch-company
2026-02-10T11:06:23.170+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/users/switch-company
2026-02-10T11:06:23.173+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/users/switch-company", parameters={}
2026-02-10T11:06:23.175+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#switchCompany(CompanySwitchRequest)
2026-02-10T11:06:23.178+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.CompanySwitchRequest(companyId=4, currentToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiI2Iiwid (truncated)...]
2026-02-10T11:06:23.183+09:00  INFO 20428 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 회사 전환 시도 - userId: 6, companyId: 4
2026-02-10T11:06:23.196+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:23.199+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ba28fd4] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:23.208+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@900057000 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:06:23.211+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:06:23.216+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 6(Long)
2026-02-10T11:06:23.231+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-02-10T11:06:23.234+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ba28fd4]
2026-02-10T11:06:23.256+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:23.259+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@530a98e1]
2026-02-10T11:06:23.261+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@39597176 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will be managed by Spring
2026-02-10T11:06:23.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:06:23.264+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 6(Long)
2026-02-10T11:06:23.267+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-02-10T11:06:23.269+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@530a98e1]
2026-02-10T11:06:23.270+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@530a98e1] from current transaction
2026-02-10T11:06:23.271+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.setPrimaryCompany     : ==>  Preparing: UPDATE user_company_tb SET is_primary = CASE WHEN user_id = ? AND company_id = ? THEN 1 ELSE 0 END, updated_at = NOW() WHERE user_id = ?
2026-02-10T11:06:23.272+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.setPrimaryCompany     : ==> Parameters: 6(Long), 4(Long), 6(Long)
2026-02-10T11:06:23.275+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.setPrimaryCompany     : <==    Updates: 2
2026-02-10T11:06:23.276+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@530a98e1]
2026-02-10T11:06:23.277+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@530a98e1] from current transaction
2026-02-10T11:06:23.277+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.updateUserCompanyId   : ==>  Preparing: UPDATE user_tb SET company_id = ? WHERE user_id = ?
2026-02-10T11:06:23.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.updateUserCompanyId   : ==> Parameters: 4(Long), 6(Long)
2026-02-10T11:06:23.284+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.updateUserCompanyId   : <==    Updates: 1
2026-02-10T11:06:23.285+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@530a98e1]
2026-02-10T11:06:23.286+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@530a98e1]
2026-02-10T11:06:23.287+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@530a98e1]
2026-02-10T11:06:23.289+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@530a98e1]
2026-02-10T11:06:23.330+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:23.331+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c5136d8] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:23.332+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@918807631 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:06:23.332+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:23.333+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:06:23.338+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:23.339+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c5136d8]
2026-02-10T11:06:23.341+09:00  INFO 20428 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 회사 전환 완료 - userId: 6, companyId: 4
2026-02-10T11:06:23.342+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:23.343+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 전환이 완료되었습니다., data={user=UserDto(userId=6, username=test_user,  (truncated)...]
2026-02-10T11:06:23.345+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:24.333+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:06:24.334+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-10T11:06:24.334+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:06:24.372+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:06:24.377+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-10T11:06:24.449+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:06:24.457+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 4, uri: /api/companies
2026-02-10T11:06:24.458+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-10T11:06:24.459+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-10T11:06:24.456+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 4, uri: /api/expenses/pending-approvals
2026-02-10T11:06:24.458+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 4, uri: /api/expenses/pending-approvals
2026-02-10T11:06:24.460+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-10T11:06:24.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:06:24.539+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:06:24.681+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:06:24.670+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:24.682+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:06:24.682+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:06:24.682+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18b4f3b6] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:24.682+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:06:24.683+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:24.734+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@76028433 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:06:24.738+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:24.750+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7864610a] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:24.760+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-10T11:06:24.760+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74e1ae2a] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:24.785+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 6(Long)
2026-02-10T11:06:24.822+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1761514341 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:06:24.838+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:06:24.839+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 4(Long)
2026-02-10T11:06:24.858+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-02-10T11:06:24.860+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1602049464 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:06:24.870+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18b4f3b6]
2026-02-10T11:06:24.870+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:06:24.871+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:24.872+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 4(Long)
2026-02-10T11:06:24.872+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=4, companyCode=ECCKUE, companyNa (truncated)...]
2026-02-10T11:06:24.873+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:24.960+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:06:24.960+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:06:24.967+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74e1ae2a]
2026-02-10T11:06:24.968+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7864610a]
2026-02-10T11:06:24.969+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:24.969+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:24.969+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:06:24.970+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:06:24.971+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:24.973+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:24.993+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:06:25.166+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:06:25.242+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:06:25.248+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:06:25.253+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:06:25.258+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:06:25.260+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:06:25.375+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 4, uri: /api/expenses/pending-approvals
2026-02-10T11:06:25.451+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:06:25.492+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:06:25.499+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:06:25.526+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 4, uri: /api/expenses/pending-approvals
2026-02-10T11:06:25.528+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:06:25.538+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 4, uri: /api/expenses
2026-02-10T11:06:25.529+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:06:25.534+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:06:25.534+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:06:25.543+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:06:25.539+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:06:25.541+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 4, uri: /api/expenses/pending-approvals
2026-02-10T11:06:25.542+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:06:25.544+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:06:25.544+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user", parameters={masked}
2026-02-10T11:06:25.545+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:06:25.662+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:06:25.546+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:25.546+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:25.675+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5449b731] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:25.577+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:06:25.578+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:06:25.643+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:06:25.664+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:06:25.675+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f3717f5] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:25.696+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:25.677+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 4, uri: /api/expenses
2026-02-10T11:06:25.691+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 4, uri: /api/expenses/pending-approvals
2026-02-10T11:06:25.696+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:25.699+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1590876354 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:06:25.720+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:06:25.699+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@472b2822] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:25.700+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:06:25.706+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:06:25.717+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@941719807 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:06:25.718+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a16554] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:25.722+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 4(Long)
2026-02-10T11:06:25.725+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user", parameters={masked}
2026-02-10T11:06:25.725+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:06:25.725+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:06:25.740+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:06:25.756+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:06:25.758+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 4(Long)
2026-02-10T11:06:25.759+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:25.761+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@191234572 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:06:25.761+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@929950394 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:25.762+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:06:25.766+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:25.772+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@759132d7] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:25.772+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:25.775+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:06:25.776+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5449b731]
2026-02-10T11:06:25.776+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67dc4572] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:25.778+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:06:25.782+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:06:25.786+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 4(Long)
2026-02-10T11:06:25.787+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:25.788+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1915635879 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:06:25.788+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f3717f5]
2026-02-10T11:06:25.789+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:06:25.790+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:06:25.790+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:25.791+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:25.801+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@202114988 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:06:25.813+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:25.804+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 4(Long)
2026-02-10T11:06:25.805+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:06:25.810+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:06:25.817+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:06:25.838+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:25.839+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:06:25.842+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:25.851+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:06:25.854+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 4, uri: /api/expenses/pending-approvals
2026-02-10T11:06:25.855+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@472b2822]
2026-02-10T11:06:25.857+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a16554]
2026-02-10T11:06:25.858+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67dc4572]
2026-02-10T11:06:25.859+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:06:25.865+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:25.880+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:25.889+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:25.890+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:06:25.890+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a454140] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:25.891+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:06:25.892+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:06:25.895+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:25.901+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:06:25.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@63071471 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:06:25.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:25.904+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:25.909+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@759132d7]
2026-02-10T11:06:25.909+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:25.909+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:25.917+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:25.918+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@182bdc06] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:25.918+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:06:25.918+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69107623] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:25.919+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1074695200 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:06:25.920+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1469328956 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:25.920+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:25.920+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:06:25.922+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:06:25.923+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 4(Long)
2026-02-10T11:06:25.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:06:25.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:25.976+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:25.991+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@182bdc06]
2026-02-10T11:06:26.000+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69107623]
2026-02-10T11:06:26.000+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a454140]
2026-02-10T11:06:26.001+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:26.003+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:26.004+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:26.004+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:06:26.005+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71a631ce] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:26.005+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@442cc549] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:26.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:26.011+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@460189879 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:26.018+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@69452749 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:06:26.042+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:06:26.043+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:06:26.045+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 4(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:06:26.051+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 4(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:06:26.070+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-10T11:06:26.070+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-10T11:06:26.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71a631ce]
2026-02-10T11:06:26.079+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@442cc549]
2026-02-10T11:06:26.082+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:26.082+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:26.082+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d5746d8] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:26.083+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@579d8861] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:26.084+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1564421373 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:26.084+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1975060822 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:06:26.084+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:06:26.085+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:06:26.091+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 4(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:06:26.092+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 4(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:06:26.111+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-10T11:06:26.111+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-10T11:06:26.116+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d5746d8]
2026-02-10T11:06:26.117+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@579d8861]
2026-02-10T11:06:26.118+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:26.119+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:26.119+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=1000, totalE (truncated)...]
2026-02-10T11:06:26.126+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=1000, totalE (truncated)...]
2026-02-10T11:06:26.127+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:26.128+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:28.397+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/switch-company
2026-02-10T11:06:28.408+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/users/switch-company
2026-02-10T11:06:28.411+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 4, uri: /api/users/switch-company
2026-02-10T11:06:28.425+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/users/switch-company
2026-02-10T11:06:28.427+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/users/switch-company", parameters={}
2026-02-10T11:06:28.432+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#switchCompany(CompanySwitchRequest)
2026-02-10T11:06:28.433+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.CompanySwitchRequest(companyId=3, currentToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiI2Iiwid (truncated)...]
2026-02-10T11:06:28.521+09:00  INFO 20428 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 회사 전환 시도 - userId: 6, companyId: 3
2026-02-10T11:06:28.575+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:28.586+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@134246eb] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:28.643+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1891857019 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:06:28.656+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:06:28.676+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 6(Long)
2026-02-10T11:06:28.686+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-02-10T11:06:28.687+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@134246eb]
2026-02-10T11:06:28.690+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:28.691+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d8d5270]
2026-02-10T11:06:28.691+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2112035151 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will be managed by Spring
2026-02-10T11:06:28.692+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:06:28.693+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 6(Long)
2026-02-10T11:06:28.696+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-02-10T11:06:28.699+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d8d5270]
2026-02-10T11:06:28.700+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d8d5270] from current transaction
2026-02-10T11:06:28.701+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.setPrimaryCompany     : ==>  Preparing: UPDATE user_company_tb SET is_primary = CASE WHEN user_id = ? AND company_id = ? THEN 1 ELSE 0 END, updated_at = NOW() WHERE user_id = ?
2026-02-10T11:06:28.702+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.setPrimaryCompany     : ==> Parameters: 6(Long), 3(Long), 6(Long)
2026-02-10T11:06:28.708+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.setPrimaryCompany     : <==    Updates: 2
2026-02-10T11:06:28.709+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d8d5270]
2026-02-10T11:06:28.710+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d8d5270] from current transaction
2026-02-10T11:06:28.711+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.updateUserCompanyId   : ==>  Preparing: UPDATE user_tb SET company_id = ? WHERE user_id = ?
2026-02-10T11:06:28.716+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.updateUserCompanyId   : ==> Parameters: 3(Long), 6(Long)
2026-02-10T11:06:28.771+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.updateUserCompanyId   : <==    Updates: 1
2026-02-10T11:06:28.773+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d8d5270]
2026-02-10T11:06:28.773+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d8d5270]
2026-02-10T11:06:28.774+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d8d5270]
2026-02-10T11:06:28.776+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d8d5270]
2026-02-10T11:06:28.794+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:28.799+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bf985b8] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:28.800+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2141072905 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:06:28.801+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:28.802+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:06:28.809+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:28.810+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bf985b8]
2026-02-10T11:06:28.811+09:00  INFO 20428 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 회사 전환 완료 - userId: 6, companyId: 3
2026-02-10T11:06:28.814+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:28.817+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 전환이 완료되었습니다., data={user=UserDto(userId=6, username=test_user,  (truncated)...]
2026-02-10T11:06:28.821+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:29.548+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:06:29.551+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-10T11:06:29.554+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:06:29.672+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:06:29.833+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-10T11:06:29.837+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:06:29.838+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/companies
2026-02-10T11:06:29.842+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:06:29.862+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:06:29.862+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-10T11:06:29.921+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:06:29.992+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:06:29.997+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-10T11:06:29.998+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:06:29.998+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:06:29.998+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-10T11:06:30.039+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:06:30.062+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:30.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:30.193+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:06:30.266+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@363d10f9] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:30.350+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:06:30.352+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:06:30.354+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:06:30.366+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e8a1cea] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:30.411+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:30.515+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:06:30.492+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:06:30.495+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2118911509 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:30.512+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:06:30.515+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a92097b] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:30.516+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:06:30.521+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:06:30.522+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:06:30.522+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:06:30.523+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-10T11:06:30.579+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@138724844 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:06:30.579+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@731063588 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:06:30.599+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:06:30.625+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:06:30.652+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses
2026-02-10T11:06:30.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:06:30.686+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user", parameters={masked}
2026-02-10T11:06:30.662+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:06:30.682+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-10T11:06:30.683+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:06:30.684+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:06:30.687+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:06:30.689+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-10T11:06:30.690+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 6(Long)
2026-02-10T11:06:30.690+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:06:30.691+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:06:30.699+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:30.700+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:06:30.701+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:06:30.711+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:06:30.712+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a387524] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:30.712+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:30.724+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@363d10f9]
2026-02-10T11:06:30.725+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:30.726+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c520424] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:30.726+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:30.727+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@403a6a73] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:30.727+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-02-10T11:06:30.727+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:06:30.765+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e8a1cea]
2026-02-10T11:06:30.750+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@993424127 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:30.751+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:06:30.762+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1276343878 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:06:30.765+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a92097b]
2026-02-10T11:06:30.766+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:30.774+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:06:30.775+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:30.778+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:30.784+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:06:30.779+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:30.782+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-10T11:06:30.783+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-10T11:06:30.786+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:06:30.787+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:30.791+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:06:30.803+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2115045940 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:06:30.808+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:30.818+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:06:30.824+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:06:30.825+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:06:30.826+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:30.831+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:06:30.834+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:06:30.835+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:06:30.835+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses
2026-02-10T11:06:30.836+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c520424]
2026-02-10T11:06:30.837+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a387524]
2026-02-10T11:06:30.851+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-10T11:06:30.852+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:06:30.852+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:06:30.852+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:06:30.852+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:30.853+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:30.883+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:06:30.875+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:06:30.882+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user", parameters={masked}
2026-02-10T11:06:30.882+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:06:30.897+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:06:30.883+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e021a68] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:30.884+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:30.891+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:06:30.895+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:30.898+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:06:30.899+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1179908616 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:06:30.899+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:30.905+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:06:30.915+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@403a6a73]
2026-02-10T11:06:30.916+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b0d07f9] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:30.933+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:06:30.945+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:30.945+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aba05f4] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:30.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:06:30.964+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:30.970+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1880877416 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:30.972+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:30.973+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:06:30.974+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1812584193 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:06:30.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:06:30.977+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:06:30.978+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:06:30.978+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3207a521] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:30.988+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-10T11:06:30.982+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:30.983+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:30.987+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:06:30.988+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@364987455 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:06:30.989+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:06:30.990+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:06:30.992+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:06:30.993+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:06:30.995+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:06:30.998+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses
2026-02-10T11:06:31.003+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-10T11:06:31.003+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:06:31.005+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-10T11:06:31.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:31.007+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user", parameters={masked}
2026-02-10T11:06:31.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:06:31.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:31.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:31.012+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fd5955a] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:31.015+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:06:31.017+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b0d07f9]
2026-02-10T11:06:31.017+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aba05f4]
2026-02-10T11:06:31.018+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e021a68]
2026-02-10T11:06:31.022+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1436286439 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:06:31.023+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:31.023+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:31.023+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:31.024+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:06:31.026+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:31.026+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:06:31.026+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47fc4f42] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:31.027+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ea2f766] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:31.028+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:06:31.028+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3207a521]
2026-02-10T11:06:31.028+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1019ae98] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:31.032+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-10T11:06:31.033+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@36204359 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:31.034+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@608027363 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:06:31.034+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:31.036+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:31.037+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1585850281 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:06:31.052+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:06:31.045+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:31.045+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:31.051+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:06:31.056+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:06:31.056+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:06:31.057+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:06:31.062+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:31.067+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:06:31.083+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fd5955a]
2026-02-10T11:06:31.084+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:31.085+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:06:31.101+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:31.108+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:31.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-10T11:06:31.115+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ea2f766]
2026-02-10T11:06:31.115+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:31.116+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47fc4f42]
2026-02-10T11:06:31.117+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1019ae98]
2026-02-10T11:06:31.126+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:31.134+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:31.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:31.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63bb564] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:31.136+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7be7234d] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:31.136+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e6e8bf7] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:31.137+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1058765570 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:06:31.138+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1589966124 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:31.140+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1675534284 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:06:31.161+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:06:31.168+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:31.176+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:31.178+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:06:31.178+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:06:31.179+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:06:31.200+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:31.211+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7be7234d]
2026-02-10T11:06:31.232+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:31.232+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-10T11:06:31.232+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:31.232+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e6e8bf7]
2026-02-10T11:06:31.233+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63bb564]
2026-02-10T11:06:31.241+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e71e6ac] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:31.242+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:31.242+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:31.251+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@483281764 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:31.251+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b1ff976] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:31.251+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66381a5] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:31.252+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:06:31.257+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@568649425 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:06:31.258+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1571329176 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:06:31.259+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:06:31.259+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:06:31.260+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:31.260+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long)
2026-02-10T11:06:31.279+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:06:31.289+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-10T11:06:31.317+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e71e6ac]
2026-02-10T11:06:31.320+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:31.321+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-02-10T11:06:31.322+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:31.323+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66381a5]
2026-02-10T11:06:31.323+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b1ff976]
2026-02-10T11:06:31.324+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45f26fc0] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:31.324+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:31.325+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:31.348+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@350729556 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:31.354+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10bb71e1] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:31.354+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@683cd5aa] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:31.364+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:31.365+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@172995834 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:06:31.368+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2096911762 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:06:31.369+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:06:31.369+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:06:31.374+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:06:31.374+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long)
2026-02-10T11:06:31.382+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:06:31.389+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:31.393+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45f26fc0]
2026-02-10T11:06:31.395+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:31.399+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-02-10T11:06:31.400+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-10T11:06:31.402+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a748e50] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:31.411+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10bb71e1]
2026-02-10T11:06:31.411+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@683cd5aa]
2026-02-10T11:06:31.412+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@481195185 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:31.413+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:31.418+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:31.418+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:06:31.419+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@532fcd47] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:31.421+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55ba99e4] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:31.421+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long)
2026-02-10T11:06:31.422+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@416324282 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:06:31.422+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1529190268 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:06:31.424+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:06:31.424+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:31.427+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:06:31.427+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:06:31.438+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:31.439+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-02-10T11:06:31.439+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-10T11:06:31.442+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55ba99e4]
2026-02-10T11:06:31.443+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a748e50]
2026-02-10T11:06:31.444+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@532fcd47]
2026-02-10T11:06:31.445+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:31.449+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:31.452+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:31.465+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@784bfa36] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:31.469+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d800a6a] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:31.469+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b3a3cbd] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:31.478+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2034186594 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:06:31.479+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1139283844 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:31.488+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@114461032 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:06:31.490+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:06:31.491+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:06:31.491+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:31.491+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long)
2026-02-10T11:06:31.493+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:06:31.493+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:06:31.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:31.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-02-10T11:06:31.510+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-10T11:06:31.515+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b3a3cbd]
2026-02-10T11:06:31.515+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@784bfa36]
2026-02-10T11:06:31.522+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d800a6a]
2026-02-10T11:06:31.525+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:31.533+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:31.534+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:31.534+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dba56d0] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:31.534+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:06:31.534+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48d95b47] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:31.535+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2006928398 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:06:31.536+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1705499500 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:31.536+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:06:31.536+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:31.536+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:31.537+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long)
2026-02-10T11:06:31.553+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-10T11:06:31.635+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:31.636+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-02-10T11:06:31.652+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48d95b47]
2026-02-10T11:06:31.652+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dba56d0]
2026-02-10T11:06:31.652+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:31.669+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:31.671+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2df23949] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:31.672+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:06:31.675+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@796089555 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:31.677+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:31.677+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:06:31.678+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long)
2026-02-10T11:06:31.718+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-02-10T11:06:31.726+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2df23949]
2026-02-10T11:06:31.726+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:31.743+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:06:31.759+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:52.739+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-02-10T11:06:52.745+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-02-10T11:06:52.792+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/logout
2026-02-10T11:06:52.815+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-02-10T11:06:52.850+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-02-10T11:06:52.906+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-02-10T11:06:52.933+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiI2IiwidXNlcm5hbWUiOiJ (truncated)...]
2026-02-10T11:06:52.953+09:00  INFO 20428 --- [http-nio-8080-exec-6] SECURITY                                 : LOGOUT userId=6
2026-02-10T11:06:52.972+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:52.985+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-02-10T11:06:53.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:56.076+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-02-10T11:06:56.083+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-02-10T11:06:56.087+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-02-10T11:06:56.088+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-02-10T11:06:56.094+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-02-10T11:06:56.098+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-02-10T11:06:56.104+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_exec, password=1234)]
2026-02-10T11:06:56.106+09:00  INFO 20428 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 로그인 시도 - username: test_exec
2026-02-10T11:06:56.106+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:56.108+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@100d3a7b] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:56.122+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@914846676 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:06:56.136+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-02-10T11:06:56.136+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_exec(String)
2026-02-10T11:06:56.153+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-02-10T11:06:56.155+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@100d3a7b]
2026-02-10T11:06:56.260+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:56.265+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71e52280] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:56.269+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1024616081 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:06:56.274+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:06:56.277+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:06:56.299+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:06:56.304+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71e52280]
2026-02-10T11:06:56.305+09:00  INFO 20428 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 로그인 성공 - userId: 9, role: ADMIN, companyId: 3
2026-02-10T11:06:56.308+09:00  INFO 20428 --- [http-nio-8080-exec-3] SECURITY                                 : LOGIN_SUCCESS userId=9 username=test_exec role=ADMIN
2026-02-10T11:06:56.309+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:56.315+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=9, username=test_exec, password= (truncated)...]
2026-02-10T11:06:56.320+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:56.636+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-10T11:06:56.666+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-10T11:06:56.718+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies
2026-02-10T11:06:56.743+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-10T11:06:56.790+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-10T11:06:56.809+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:06:56.814+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:06:56.818+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:06:56.819+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:06:56.819+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:06:56.858+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-10T11:06:56.861+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:06:56.865+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:56.866+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:56.867+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:56.881+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:56.882+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:06:56.884+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:56.894+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:06:56.900+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:06:56.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:06:56.906+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@496fd93] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:56.916+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:06:56.914+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:06:56.916+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:06:56.918+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:06:56.920+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:56.918+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:56.919+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:56.922+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:06:56.922+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:56.923+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:06:56.924+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:06:56.925+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:06:56.926+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:06:56.926+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:06:56.927+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:06:56.927+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:06:56.931+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:06:56.931+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:06:56.938+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:06:56.938+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:06:56.940+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:06:56.942+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@348660600 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:06:56.943+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:06:56.943+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-10T11:06:56.944+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:06:56.944+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:06:56.944+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:06:56.945+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-10T11:06:56.947+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:06:56.954+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:06:56.956+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:06:56.956+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:06:56.957+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:06:56.957+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 9(Long)
2026-02-10T11:06:56.958+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:06:56.966+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:06:56.967+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:56.967+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:06:56.967+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:06:56.972+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:06:56.974+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-10T11:06:56.974+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28241032] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:56.974+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:56.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:56.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:56.977+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:06:56.981+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17642fe7] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:56.982+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-10T11:06:56.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ca83c38] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:56.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21a9217a] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:56.986+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@496fd93]
2026-02-10T11:06:56.988+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:56.997+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1585774842 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:06:57.001+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-10T11:06:57.001+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:06:57.001+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:06:57.002+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:57.007+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:06:57.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a27c858] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.010+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:06:57.021+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@507519064 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:57.022+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1938305956 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:06:57.022+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1890988707 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:06:57.043+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:06:57.043+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:06:57.044+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:06:57.044+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:06:57.045+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:06:57.047+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:06:57.049+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:06:57.051+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:06:57.053+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:06:57.056+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:06:57.070+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1237114442 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:06:57.085+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:06:57.085+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:06:57.104+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21a9217a]
2026-02-10T11:06:57.086+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.094+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-10T11:06:57.094+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17642fe7]
2026-02-10T11:06:57.095+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:06:57.095+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:06:57.106+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.106+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@136a0eaa] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.115+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-10T11:06:57.115+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.116+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28241032]
2026-02-10T11:06:57.116+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ca83c38]
2026-02-10T11:06:57.121+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77a8b017] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.122+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@886561979 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:57.123+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@789e4b92] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.132+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:57.133+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:57.133+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1158654037 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:06:57.134+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:06:57.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-10T11:06:57.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:06:57.139+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1358424414 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:06:57.140+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:06:57.141+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:06:57.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:06:57.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a27c858]
2026-02-10T11:06:57.144+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:06:57.147+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:57.148+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:57.148+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:06:57.149+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:57.149+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:06:57.158+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:57.167+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:57.169+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-10T11:06:57.176+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-10T11:06:57.177+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:57.178+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-10T11:06:57.181+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:57.182+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:57.183+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:57.183+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:06:57.190+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:06:57.190+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:06:57.190+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-10T11:06:57.191+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:57.191+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-10T11:06:57.197+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:06:57.205+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:06:57.206+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:06:57.226+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:06:57.227+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@136a0eaa]
2026-02-10T11:06:57.230+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:06:57.230+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:06:57.231+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:06:57.231+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:06:57.231+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:06:57.233+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.238+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.235+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@789e4b92]
2026-02-10T11:06:57.237+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77a8b017]
2026-02-10T11:06:57.237+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.238+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c37121f] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.239+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@134768df] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.239+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@651e2eac] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.240+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:57.240+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:57.241+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bc0eee8] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.242+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1332429421 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:57.243+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2834600 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:06:57.247+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@603331679 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:06:57.250+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:06:57.256+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:06:57.257+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@704873798 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:06:57.257+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:06:57.259+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-10T11:06:57.260+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-10T11:06:57.265+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:57.267+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:57.268+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:57.269+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:06:57.272+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-10T11:06:57.273+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-10T11:06:57.289+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:57.300+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:06:57.300+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:06:57.317+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:06:57.317+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:06:57.318+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:57.318+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:06:57.319+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:06:57.320+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:06:57.320+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:06:57.337+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:06:57.340+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.341+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.354+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78b675fc] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.356+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5372f1cc] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.356+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1212497777 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:06:57.357+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:57.357+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:06:57.359+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-10T11:06:57.359+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:06:57.359+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:57.369+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@651e2eac]
2026-02-10T11:06:57.370+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c37121f]
2026-02-10T11:06:57.370+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bc0eee8]
2026-02-10T11:06:57.371+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:57.371+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.372+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:06:57.372+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1176f162] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.373+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:57.374+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:57.375+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@232651274 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:06:57.376+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:06:57.376+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-10T11:06:57.377+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:57.404+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:06:57.378+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:06:57.406+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:57.410+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:57.410+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-10T11:06:57.411+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@514009158 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:06:57.421+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:06:57.417+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:06:57.423+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:06:57.419+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:06:57.419+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78b675fc]
2026-02-10T11:06:57.419+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@134768df]
2026-02-10T11:06:57.423+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:06:57.426+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.426+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-10T11:06:57.435+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:57.441+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:06:57.441+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d973a64] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.442+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:06:57.451+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-10T11:06:57.452+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.452+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1724232639 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:06:57.452+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:06:57.471+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-10T11:06:57.473+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:06:57.455+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@527873f8] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.455+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:57.459+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:57.476+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:06:57.492+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1134836772 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:57.495+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:06:57.495+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:57.497+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:57.498+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:06:57.500+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.506+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:06:57.524+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-10T11:06:57.537+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:06:57.534+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1176f162]
2026-02-10T11:06:57.534+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5372f1cc]
2026-02-10T11:06:57.535+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a3dddd1] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.538+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:57.539+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.540+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:57.540+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@938206276 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:06:57.540+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:06:57.550+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:57.563+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@304ee3ef] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.565+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:06:57.566+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:06:57.567+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-10T11:06:57.567+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-10T11:06:57.570+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d973a64]
2026-02-10T11:06:57.571+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@378923365 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:06:57.571+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@527873f8]
2026-02-10T11:06:57.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:57.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-10T11:06:57.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:06:57.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.578+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:06:57.585+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.586+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:57.592+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ebd4b6] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.592+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:06:57.593+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7beda28f] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.594+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:06:57.595+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-10T11:06:57.605+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@373004949 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:06:57.610+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.611+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1788602809 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:57.611+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:57.612+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-10T11:06:57.622+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:06:57.625+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:06:57.627+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f55004f] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.628+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:06:57.633+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:06:57.633+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a3dddd1]
2026-02-10T11:06:57.635+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:06:57.640+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@304ee3ef]
2026-02-10T11:06:57.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1305423802 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:06:57.650+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:06:57.652+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-10T11:06:57.654+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:57.655+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.656+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-10T11:06:57.656+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:06:57.666+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-10T11:06:57.666+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c2addad] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.667+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-10T11:06:57.667+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:06:57.671+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:57.672+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@465308764 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:06:57.675+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:57.673+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.675+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:06:57.676+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:06:57.676+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:06:57.688+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:06:57.688+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1170eaf9] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.690+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7beda28f]
2026-02-10T11:06:57.691+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:06:57.692+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ebd4b6]
2026-02-10T11:06:57.693+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2116181136 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:06:57.693+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:57.697+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-10T11:06:57.698+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:06:57.699+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.699+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-10T11:06:57.699+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:06:57.700+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f55004f]
2026-02-10T11:06:57.710+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:57.700+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:06:57.700+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f55911c] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.702+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-10T11:06:57.703+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:57.716+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-10T11:06:57.721+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:57.722+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:57.717+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:06:57.718+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1405594148 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:06:57.724+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:06:57.725+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:06:57.749+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:57.728+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.755+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16fd9521] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.730+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:57.740+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:57.742+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-10T11:06:57.749+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:06:57.749+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:06:57.756+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1117478700 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:57.756+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c2addad]
2026-02-10T11:06:57.756+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:06:57.757+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1170eaf9]
2026-02-10T11:06:57.757+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:06:57.772+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:06:57.773+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:57.773+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.774+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:57.776+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:06:57.776+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.777+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:06:57.777+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@467ea37] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.778+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-10T11:06:57.782+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@237672611 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:06:57.778+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:06:57.781+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77acc2e4] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.783+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:57.784+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:06:57.785+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.786+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@119924763 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:06:57.789+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:06:57.790+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:06:57.799+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77785040] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.800+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:57.803+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:06:57.804+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1607589856 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:06:57.805+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:57.805+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:57.810+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:06:57.815+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:06:57.816+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:06:57.822+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:06:57.824+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16fd9521]
2026-02-10T11:06:57.828+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f55911c]
2026-02-10T11:06:57.838+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:06:57.839+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:06:57.839+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@467ea37]
2026-02-10T11:06:57.840+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.842+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.843+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:06:57.844+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:57.848+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.855+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dc6f39f] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.855+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8ea0da] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.866+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:06:57.869+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:06:57.869+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77acc2e4]
2026-02-10T11:06:57.869+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f2a0290] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.870+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1206398363 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:57.873+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@594549926 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:06:57.877+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77785040]
2026-02-10T11:06:57.880+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:06:57.881+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.881+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@875001616 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:06:57.883+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:57.884+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:06:57.884+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:57.885+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.886+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a5dc70d] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.886+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:06:57.887+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:06:57.887+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:06:57.888+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:06:57.888+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e088e68] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.889+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@997694272 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:06:57.891+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:06:57.901+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:57.903+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@241645846 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:06:57.908+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:57.920+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:06:57.920+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:06:57.936+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:06:57.937+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:06:57.938+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:06:57.939+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:57.940+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:06:57.940+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:06:57.960+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:57.988+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a5dc70d]
2026-02-10T11:06:57.969+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:06:57.978+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dc6f39f]
2026-02-10T11:06:57.983+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8ea0da]
2026-02-10T11:06:57.988+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f2a0290]
2026-02-10T11:06:57.989+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.989+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:06:57.989+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.990+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.990+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:57.990+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@115aa6e3] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.991+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:06:57.994+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:06:57.997+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@534b5489] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:57.999+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@470fa589] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:06:58.004+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66cbd9a8] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.005+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e088e68]
2026-02-10T11:06:58.005+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1442541162 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:06:58.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1503334260 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:58.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@846353858 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:06:58.007+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@959080803 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:06:58.007+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:06:58.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:58.011+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:06:58.011+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:06:58.014+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:06:58.014+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:58.015+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:58.015+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:06:58.018+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:06:58.023+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:06:58.024+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:06:58.031+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:06:58.032+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a56e7e3] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.032+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:58.041+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1588685869 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:06:58.045+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:06:58.044+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:06:58.047+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:06:58.055+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:06:58.058+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:06:58.059+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:58.060+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:06:58.061+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:06:58.061+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:06:58.065+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:06:58.066+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66cbd9a8]
2026-02-10T11:06:58.069+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@470fa589]
2026-02-10T11:06:58.069+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@534b5489]
2026-02-10T11:06:58.070+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@115aa6e3]
2026-02-10T11:06:58.073+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:06:58.073+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:58.074+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:58.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:58.081+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:58.088+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:58.088+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48a3c167] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.089+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c62e77c] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.089+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1304ff6f] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.090+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17e65bb0] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.090+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b27e1e9] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.091+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1889355586 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:06:58.091+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@645606036 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:06:58.091+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@451026586 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:58.092+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1397725713 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:06:58.092+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@759743960 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:06:58.093+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:06:58.099+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:58.100+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:58.100+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:58.100+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:06:58.101+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:06:58.101+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:06:58.103+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:06:58.103+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:06:58.106+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:06:58.111+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:06:58.121+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a56e7e3]
2026-02-10T11:06:58.139+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:58.140+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:58.140+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:06:58.140+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:58.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:06:58.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:58.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1304ff6f]
2026-02-10T11:06:58.149+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c62e77c]
2026-02-10T11:06:58.149+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48a3c167]
2026-02-10T11:06:58.150+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17e65bb0]
2026-02-10T11:06:58.150+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b27e1e9]
2026-02-10T11:06:58.151+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:06:58.151+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:58.159+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:58.160+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:58.161+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:58.161+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:58.170+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:58.174+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f27cc79] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.174+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@302569c0] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.182+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:06:58.183+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d05ea9] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.183+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55cf95a8] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.192+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:06:58.202+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@996980085 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:58.206+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@997663167 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:06:58.208+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:58.290+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@542031480 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:06:58.299+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1139453051 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:06:58.299+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:06:58.299+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:06:58.300+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:06:58.400+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:06:58.355+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:58.381+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:06:58.399+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:06:58.400+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:06:58.400+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:06:58.402+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:06:58.444+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:06:58.448+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:06:58.450+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:06:58.459+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:06:58.465+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:58.475+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@302569c0]
2026-02-10T11:06:58.475+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:06:58.483+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:06:58.484+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:06:58.485+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:58.488+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f27cc79]
2026-02-10T11:06:58.490+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:58.491+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:06:58.491+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:06:58.492+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:58.493+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:06:58.493+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:06:58.495+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45e15fbe] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.497+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:58.498+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:58.498+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3062c5c5] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.502+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55cf95a8]
2026-02-10T11:06:58.508+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d05ea9]
2026-02-10T11:06:58.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@308373557 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:06:58.511+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ff88dc1] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.511+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:06:58.512+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@18322356 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:58.516+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:58.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:58.528+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b1288e7] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.530+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@481339450 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:06:58.526+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:58.527+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@701079525 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:06:58.527+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:06:58.528+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:06:58.528+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:06:58.531+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:06:58.532+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:06:58.540+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:06:58.532+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:58.534+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:06:58.535+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:06:58.536+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:58.542+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:06:58.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:58.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:06:58.575+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:06:58.591+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:06:58.598+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45e15fbe]
2026-02-10T11:06:58.599+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b1288e7]
2026-02-10T11:06:58.601+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:06:58.602+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:06:58.603+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:58.603+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:06:58.604+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:58.605+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:58.625+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3062c5c5]
2026-02-10T11:06:58.627+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:58.631+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21986d] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.632+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:06:58.632+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37630354] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.632+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2059aa00] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.633+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:58.633+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ff88dc1]
2026-02-10T11:06:58.634+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1341275000 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:06:58.634+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:06:58.634+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@943321327 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:06:58.652+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@362152987 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:58.652+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d9e6a49] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.652+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:58.652+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:58.653+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:06:58.653+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:58.653+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:06:58.654+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1265948370 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:06:58.654+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75f0b40e] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.654+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:06:58.655+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:06:58.655+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:06:58.658+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:06:58.657+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:06:58.657+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:58.657+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@236825076 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:06:58.659+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:58.668+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:06:58.668+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:58.668+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ac5345] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.675+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:06:58.676+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1932392406 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:06:58.680+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:06:58.681+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:58.682+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:58.683+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:06:58.684+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2059aa00]
2026-02-10T11:06:58.684+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37630354]
2026-02-10T11:06:58.684+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21986d]
2026-02-10T11:06:58.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:06:58.686+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:58.686+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:58.687+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:58.694+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:06:58.694+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bc6cf12] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.700+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:58.700+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:58.701+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@490a4151] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.703+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:58.706+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d9e6a49]
2026-02-10T11:06:58.706+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@68161693 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:06:58.707+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75f0b40e]
2026-02-10T11:06:58.707+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1164200685 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:06:58.709+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:06:58.716+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:06:58.720+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:58.720+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:06:58.721+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:58.722+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:06:58.722+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ac5345]
2026-02-10T11:06:58.723+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b2f00b4] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.723+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:06:58.723+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:06:58.724+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32f0c39c] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.786+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:06:58.788+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:58.789+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1174267322 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:06:58.789+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:06:58.803+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1112559880 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:06:58.804+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:06:58.804+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:06:58.805+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:06:58.805+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:06:58.806+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:58.807+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:06:58.807+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:06:58.810+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:06:58.811+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:06:58.812+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:06:58.816+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:06:58.816+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:06:58.818+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:58.819+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:58.821+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:06:58.821+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4338984c] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.822+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:06:58.838+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1032586200 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:58.839+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bc6cf12]
2026-02-10T11:06:58.839+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:06:58.839+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:06:58.840+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:58.848+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:06:58.848+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:06:58.848+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:06:58.851+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:06:58.851+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:06:58.852+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:06:58.852+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b2f00b4]
2026-02-10T11:06:58.857+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@490a4151]
2026-02-10T11:06:58.858+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32f0c39c]
2026-02-10T11:06:58.860+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:06:58.860+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:58.861+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:58.861+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:58.862+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:58.867+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:06:58.868+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:06:58.869+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:58.869+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13c39189] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.869+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bfe92e7] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.871+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:58.897+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@262556199 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:06:58.878+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:58.885+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:06:58.885+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:58.897+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@140003945 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:06:58.910+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:58.899+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:58.899+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:06:58.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:06:58.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4338984c]
2026-02-10T11:06:58.923+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:58.909+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:06:58.910+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:06:58.927+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:06:58.919+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:06:58.932+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:06:58.923+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:58.924+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:58.947+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:06:58.926+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:58.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:58.934+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:06:58.954+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:58.935+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:06:58.951+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:58.951+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:58.955+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:06:58.955+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:06:58.957+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:06:58.973+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:58.971+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:06:58.971+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13c39189]
2026-02-10T11:06:58.979+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:58.972+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bfe92e7]
2026-02-10T11:06:58.972+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:06:58.973+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:06:58.974+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:06:58.974+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:06:58.981+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@681ec20e] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.982+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:58.985+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1742625117 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:06:58.983+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:06:58.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:06:58.985+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:06:58.985+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:06:58.985+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66631578] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.985+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:06:58.986+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:06:58.986+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:06:58.988+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:58.989+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:06:58.990+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@692443897 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:06:58.990+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:06:58.992+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.000+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e3375c3] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:58.992+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:06:58.993+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@283aadf5] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.004+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@24190863 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:06:58.999+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:58.999+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:06:59.001+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@64478127 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:59.003+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:06:59.005+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:59.005+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@454d300e] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:06:59.007+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:06:59.011+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:06:59.011+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:06:59.011+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1715774131 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:06:59.012+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:06:59.018+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:06:59.018+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.021+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:06:59.021+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@681ec20e]
2026-02-10T11:06:59.022+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c7fdbbe] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.027+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:59.027+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:06:59.033+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:06:59.035+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.035+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@704746927 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:06:59.043+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:06:59.044+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@283aadf5]
2026-02-10T11:06:59.052+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66631578]
2026-02-10T11:06:59.052+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20cba2f1] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.052+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:06:59.052+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e3375c3]
2026-02-10T11:06:59.053+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.058+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.059+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1046157908 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:06:59.060+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:06:59.060+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:59.062+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:06:59.067+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c80084e] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.067+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f1ca20d] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.067+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:06:59.068+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:06:59.069+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@454d300e]
2026-02-10T11:06:59.071+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@556286766 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:06:59.076+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1370139203 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:06:59.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:06:59.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:59.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:59.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:06:59.083+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:06:59.083+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@582fc15c] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.084+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:06:59.085+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c7fdbbe]
2026-02-10T11:06:59.086+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:06:59.089+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:06:59.090+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1077563524 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:06:59.091+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:59.092+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:06:59.092+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:06:59.092+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:06:59.093+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:06:59.094+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:06:59.094+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:59.102+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:06:59.106+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:59.107+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:06:59.107+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:06:59.114+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:06:59.116+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:06:59.117+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c80084e]
2026-02-10T11:06:59.132+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20cba2f1]
2026-02-10T11:06:59.133+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:06:59.145+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f1ca20d]
2026-02-10T11:06:59.152+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:06:59.157+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:06:59.158+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.158+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.161+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cf4e0f1] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.158+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@582fc15c]
2026-02-10T11:06:59.159+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.159+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:06:59.160+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:06:59.161+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48b751da] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.163+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@22354356 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:06:59.164+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:59.169+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@380a0ba4] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.170+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:06:59.170+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.171+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@346678010 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:06:59.174+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:59.175+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:06:59.175+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1917639266 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:06:59.175+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:06:59.176+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fa5f5d0] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.176+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:06:59.177+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:06:59.178+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:59.183+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:59.183+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.184+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1683355789 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:59.191+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:06:59.194+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-02-10T11:06:59.198+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:06:59.198+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@93cad58] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.199+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:06:59.201+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:06:59.213+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@742465159 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:06:59.213+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:06:59.214+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:06:59.214+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:06:59.215+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:59.215+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:59.216+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:06:59.220+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@380a0ba4]
2026-02-10T11:06:59.217+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:06:59.219+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:06:59.219+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cf4e0f1]
2026-02-10T11:06:59.220+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48b751da]
2026-02-10T11:06:59.221+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.221+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:06:59.222+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:06:59.226+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.227+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.227+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59a4e359] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.228+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fa5f5d0]
2026-02-10T11:06:59.228+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:06:59.230+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19dd0fc4] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.230+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a751adb] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.230+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:06:59.231+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@823891170 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:06:59.232+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:59.233+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.234+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1123391334 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:06:59.234+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1220453838 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:06:59.234+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@93cad58]
2026-02-10T11:06:59.235+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:06:59.235+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:06:59.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@346dbf0b] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:06:59.237+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:59.237+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.238+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:06:59.239+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:59.248+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1590381077 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:59.249+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:06:59.250+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:06:59.250+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1923dc91] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.253+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:06:59.254+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:06:59.261+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1964635264 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:06:59.277+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:06:59.280+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:06:59.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-10T11:06:59.274+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:59.274+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:06:59.275+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:06:59.277+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:06:59.281+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:06:59.281+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a751adb]
2026-02-10T11:06:59.282+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19dd0fc4]
2026-02-10T11:06:59.282+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59a4e359]
2026-02-10T11:06:59.284+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:06:59.284+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.284+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:59.287+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:59.287+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-10T11:06:59.287+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b9b387a] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.287+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:06:59.288+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:06:59.288+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:06:59.288+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@699031056 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:06:59.289+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:59.296+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:59.301+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:06:59.302+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:06:59.303+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:59.307+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:59.319+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-10T11:06:59.315+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.315+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:06:59.316+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-10T11:06:59.320+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:59.320+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d9a371b] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.321+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:59.322+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:06:59.323+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1492308486 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:06:59.323+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:06:59.323+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-10T11:06:59.324+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-10T11:06:59.324+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-10T11:06:59.325+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:06:59.326+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-10T11:06:59.327+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:06:59.327+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:06:59.329+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:06:59.332+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.333+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18486bff] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.334+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@451473763 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:06:59.335+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-10T11:06:59.337+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-10T11:06:59.331+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.338+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@403ce5c2] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.339+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1715464632 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:06:59.339+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:06:59.339+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:06:59.352+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-10T11:06:59.354+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:06:59.354+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-10T11:06:59.354+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-10T11:06:59.365+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1923dc91]
2026-02-10T11:06:59.365+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@346dbf0b]
2026-02-10T11:06:59.366+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b9b387a]
2026-02-10T11:06:59.366+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-10T11:06:59.366+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18486bff]
2026-02-10T11:06:59.372+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d9a371b]
2026-02-10T11:06:59.372+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:59.400+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:06:59.373+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.381+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.389+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:59.391+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:59.399+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-10T11:06:59.401+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:59.402+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fbda78a] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.403+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e96ff17] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.403+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-10T11:06:59.404+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-10T11:06:59.405+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@403ce5c2]
2026-02-10T11:06:59.407+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:59.413+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@108121745 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:59.413+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1009534039 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:06:59.414+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:59.415+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:59.418+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:59.419+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:06:59.419+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:06:59.419+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:06:59.421+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:06:59.422+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:59.434+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-10T11:06:59.442+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:06:59.434+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:06:59.434+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:59.441+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:06:59.445+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:06:59.442+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-10T11:06:59.443+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:06:59.443+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:59.446+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:06:59.457+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:59.460+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.457+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:06:59.459+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:06:59.460+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:06:59.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fdec3a2] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:06:59.466+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-10T11:06:59.477+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.466+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-10T11:06:59.466+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@941872877 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:06:59.476+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:06:59.476+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:06:59.477+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:06:59.477+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e6c8980] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.493+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:06:59.493+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:59.494+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fbda78a]
2026-02-10T11:06:59.494+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e96ff17]
2026-02-10T11:06:59.497+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:06:59.507+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1312285928 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:06:59.523+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:06:59.531+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:06:59.532+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:59.533+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.540+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.540+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:06:59.540+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-10T11:06:59.541+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b57572d] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.541+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:06:59.542+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42e99b97] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.543+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:06:59.543+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:06:59.543+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@47211287 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:06:59.556+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:06:59.544+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:59.545+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@202514681 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:06:59.556+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:59.559+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:06:59.559+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.564+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57a4cb4f] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.559+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-10T11:06:59.560+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:06:59.561+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:06:59.566+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@694437065 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:06:59.568+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-10T11:06:59.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:59.576+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:06:59.588+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-10T11:06:59.590+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fdec3a2]
2026-02-10T11:06:59.590+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:06:59.596+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-10T11:06:59.596+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.597+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:06:59.600+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3124be8d] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.601+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.601+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2024716504 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:06:59.601+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@483ccf57] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.602+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:59.603+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1333548437 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:59.603+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:06:59.614+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:06:59.615+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:06:59.618+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-10T11:06:59.618+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:06:59.618+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-10T11:06:59.618+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:59.665+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42e99b97]
2026-02-10T11:06:59.665+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e6c8980]
2026-02-10T11:06:59.667+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57a4cb4f]
2026-02-10T11:06:59.669+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b57572d]
2026-02-10T11:06:59.672+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:59.673+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.673+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:06:59.674+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.675+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-10T11:06:59.675+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@977b5a0] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.676+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-10T11:06:59.677+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@751c884d] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.681+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:59.682+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1940725127 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:06:59.684+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:06:59.688+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@614680572 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:06:59.790+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:59.689+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:06:59.768+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:06:59.790+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:06:59.792+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-10T11:06:59.793+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:06:59.794+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:06:59.794+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:06:59.795+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:06:59.796+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:06:59.798+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:06:59.797+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:06:59.798+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:06:59.798+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-10T11:06:59.799+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.800+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:06:59.800+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f0abfba] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.803+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@885405239 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:06:59.801+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:06:59.811+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:59.834+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.812+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:06:59.821+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:06:59.834+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@483ccf57]
2026-02-10T11:06:59.835+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@660a818f] was not registered for synchronization because synchronization is not active
2026-02-10T11:06:59.836+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:06:59.838+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:06:59.853+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3124be8d]
2026-02-10T11:06:59.854+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:06:59.925+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:06:59.945+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@441729210 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:06:59.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@751c884d]
2026-02-10T11:07:00.000+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@977b5a0]
2026-02-10T11:07:00.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:00.010+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@672d365a] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:00.011+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-10T11:07:00.021+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:07:00.039+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:07:00.039+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f766dbf] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:00.039+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1237650335 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:07:00.040+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-10T11:07:00.040+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:07:00.043+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:07:00.043+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:07:00.176+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:07:00.111+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1261592586 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:07:00.188+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:07:00.190+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:07:00.148+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:07:00.193+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:07:00.154+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f0abfba]
2026-02-10T11:07:00.171+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:07:00.186+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:07:00.195+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:00.198+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:07:00.200+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:07:00.200+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40a89d35] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:00.201+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:07:00.201+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2053447157 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:07:00.201+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:07:00.202+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:07:00.202+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:07:00.202+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:07:00.202+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:07:00.222+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-10T11:07:00.262+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:07:00.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:07:00.264+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:07:00.333+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:07:00.337+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:00.340+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3062c923] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:00.338+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@660a818f]
2026-02-10T11:07:00.339+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@672d365a]
2026-02-10T11:07:00.339+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f766dbf]
2026-02-10T11:07:00.340+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:07:00.341+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:07:00.342+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:00.350+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:00.351+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-10T11:07:00.351+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:00.351+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49c68533] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:00.353+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c9decf5] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:00.381+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@275414348 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:07:00.381+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:07:00.381+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:07:00.354+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6587dac6] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:00.384+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1463066635 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:07:00.384+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:07:00.385+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:07:00.354+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:07:00.376+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1196942775 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:07:00.387+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-02-10T11:07:00.388+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:07:00.389+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/monthly-trend
2026-02-10T11:07:00.399+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:07:00.412+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:07:00.412+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@555009645 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:07:00.414+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-02-10T11:07:00.436+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:07:00.436+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:07:00.458+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40a89d35]
2026-02-10T11:07:00.458+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:07:00.459+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-02-10T11:07:00.466+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:07:00.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6587dac6]
2026-02-10T11:07:00.591+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c9decf5]
2026-02-10T11:07:00.610+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:07:00.610+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:07:00.611+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-02-10T11:07:00.723+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:07:00.724+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:07:00.687+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49c68533]
2026-02-10T11:07:00.730+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:00.694+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:00.694+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:00.706+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:07:00.728+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:00.730+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dcd81a] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:00.731+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@281d5692] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:00.733+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3564e4be] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:00.745+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:07:00.748+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@699f9fa5] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:00.768+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:07:00.774+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1544569327 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:07:00.783+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1930946749 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:07:00.783+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@646794403 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:07:00.791+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:07:00.806+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1738834978 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:07:00.819+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3062c923]
2026-02-10T11:07:00.820+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:07:00.820+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:07:00.846+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:07:00.820+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:07:00.842+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? AND status = 'APPROVED' GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-10T11:07:00.844+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:00.844+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:07:00.849+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:07:00.850+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:07:00.870+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 3(Long)
2026-02-10T11:07:00.870+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6be2e7ee] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:00.890+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1877922636 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:07:00.890+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:07:00.891+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:07:00.892+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:07:00.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:07:00.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@281d5692]
2026-02-10T11:07:00.907+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:07:00.907+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:07:00.914+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dcd81a]
2026-02-10T11:07:00.911+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:07:00.911+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:00.913+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3564e4be]
2026-02-10T11:07:00.914+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:00.937+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 3
2026-02-10T11:07:00.940+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:07:00.968+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11317315] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:00.969+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:00.969+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36fa8795] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:00.969+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@699f9fa5]
2026-02-10T11:07:00.969+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:07:00.994+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:07:00.998+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1398414951 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:07:00.998+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2eee9754] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:01.009+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1451656536 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:07:01.010+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:07:01.020+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6be2e7ee]
2026-02-10T11:07:01.023+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:07:01.025+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:07:01.034+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1010685731 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:07:01.034+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:07:01.089+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-02-10T11:07:01.125+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:01.184+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d319c56] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:01.167+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:07:01.174+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:07:01.182+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:07:01.182+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:07:01.184+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:07:01.185+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@563142025 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:07:01.188+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:07:01.188+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:07:01.194+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:07:01.195+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:07:01.204+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:07:01.206+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:07:01.206+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:07:01.206+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:07:01.214+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:07:01.219+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:07:01.227+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2eee9754]
2026-02-10T11:07:01.227+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36fa8795]
2026-02-10T11:07:01.233+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11317315]
2026-02-10T11:07:01.235+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:07:01.235+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:07:01.235+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:01.235+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:01.249+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:01.249+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:07:01.253+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:07:01.254+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:07:01.256+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63edc8ae] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:01.256+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@508cd44a] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:01.256+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@174c9f2f] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:01.256+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:07:01.257+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d319c56]
2026-02-10T11:07:01.257+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:07:01.267+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:07:01.257+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@962832304 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:07:01.258+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@841496545 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:07:01.259+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@226488072 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:07:01.260+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:07:01.261+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:01.268+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:01.268+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:07:01.269+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:07:01.269+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:07:01.276+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:01.281+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22122bee] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:01.284+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@682acfb0] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:01.288+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:07:01.292+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:07:01.295+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:07:01.297+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67bd45e3] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:01.298+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1930481878 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:07:01.298+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1548004768 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:07:01.307+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:07:01.307+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:07:01.308+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:07:01.308+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:07:01.309+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:07:01.310+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:07:01.310+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@174c9f2f]
2026-02-10T11:07:01.310+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63edc8ae]
2026-02-10T11:07:01.310+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@508cd44a]
2026-02-10T11:07:01.310+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@494622971 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:07:01.319+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:07:01.320+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:01.326+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:01.326+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:01.327+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:07:01.329+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3399cf53] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:01.331+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@507579b1] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:01.338+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:07:01.340+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65de86a2] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:01.342+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:07:01.343+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1080003560 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:07:01.344+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1573938089 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:07:01.345+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22122bee]
2026-02-10T11:07:01.348+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1405493463 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:07:01.361+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:07:01.373+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:07:01.382+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:07:01.383+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:01.383+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:07:01.386+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:07:01.387+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@682acfb0]
2026-02-10T11:07:01.389+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:07:01.390+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:07:01.390+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4149c4b] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:01.390+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:07:01.390+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67bd45e3]
2026-02-10T11:07:01.391+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:01.393+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@938117756 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:07:01.399+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:07:01.401+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2008ec80] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:01.402+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:07:01.403+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:07:01.404+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@509730942 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:07:01.410+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:07:01.411+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:07:01.411+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:07:01.416+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:07:01.418+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:07:01.421+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:07:01.422+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:07:01.422+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:07:01.422+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:07:01.429+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:07:01.431+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65de86a2]
2026-02-10T11:07:01.433+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@507579b1]
2026-02-10T11:07:01.434+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:07:01.434+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:07:01.435+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3399cf53]
2026-02-10T11:07:01.435+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:07:01.437+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:01.439+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2008ec80]
2026-02-10T11:07:01.439+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:07:01.439+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4149c4b]
2026-02-10T11:07:01.444+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:01.444+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:07:01.445+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@466735dc] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:01.446+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:07:01.447+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:07:01.453+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:01.453+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@175536a6] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:01.458+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:07:01.459+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1461538852 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:07:01.459+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:07:01.460+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:07:01.460+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ff2e3b9] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:01.465+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1791725640 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:07:01.466+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:07:01.484+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:07:01.485+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:07:01.486+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:07:01.489+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1873070280 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:07:01.502+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:07:01.490+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:07:01.491+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:01.491+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:07:01.501+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:07:01.502+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:07:01.504+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:07:01.507+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:07:01.507+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dbd6a5e] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:01.508+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:07:01.508+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:07:01.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1827851076 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:07:01.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:07:01.515+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:07:01.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:07:01.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:07:01.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:07:01.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:07:01.518+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:07:01.518+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:07:01.518+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:07:01.519+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@466735dc]
2026-02-10T11:07:01.519+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@175536a6]
2026-02-10T11:07:01.519+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ff2e3b9]
2026-02-10T11:07:01.520+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:01.523+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:07:01.524+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:07:01.524+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:01.525+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:01.525+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6db20c29] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:01.530+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:07:01.534+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:07:01.580+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dbd6a5e]
2026-02-10T11:07:01.534+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:07:01.542+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35e4b7b3] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:01.555+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52f8d50] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:01.570+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1391981429 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:07:01.571+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:07:01.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:07:01.582+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@188372911 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:07:01.582+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:07:01.582+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1570261351 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:07:01.589+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:07:01.583+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:07:01.584+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:01.587+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:07:01.587+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:07:01.589+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:07:01.590+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:07:01.590+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:07:01.591+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1af34c4f] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:01.596+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:07:01.597+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:07:01.598+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:07:01.598+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@684171367 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:07:01.609+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:07:01.600+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:07:01.609+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:07:01.610+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:07:01.610+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:07:01.611+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:07:01.611+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:07:01.612+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:07:01.615+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:07:01.615+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:07:01.616+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:07:01.616+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:07:01.616+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:01.617+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:07:01.617+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53125f55] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:01.622+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:07:01.622+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:07:01.656+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6db20c29]
2026-02-10T11:07:01.624+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:07:01.628+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:07:01.628+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:07:01.657+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1af34c4f]
2026-02-10T11:07:01.630+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1473720631 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:07:01.655+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52f8d50]
2026-02-10T11:07:01.657+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:07:01.657+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:01.657+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35e4b7b3]
2026-02-10T11:07:01.658+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:07:01.658+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:07:01.659+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:01.669+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ff21245] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:01.670+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:01.670+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:07:01.670+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:07:01.670+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:07:01.671+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6800237e] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:01.671+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2036456471 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:07:01.671+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@516fc80c] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:01.676+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:07:01.678+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@289170979 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:07:01.680+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:07:01.681+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:07:01.681+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1093051581 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:07:01.682+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:07:01.683+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:07:01.686+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:07:01.691+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:07:01.691+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:07:01.692+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:07:01.694+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:07:01.693+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:07:01.694+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:07:01.701+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:07:01.701+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:07:01.702+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:07:01.702+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53125f55]
2026-02-10T11:07:01.705+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:07:01.705+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:07:01.706+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:07:01.707+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:07:01.707+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:07:01.709+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:07:01.718+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:07:01.718+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:07:01.723+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@516fc80c]
2026-02-10T11:07:01.725+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6800237e]
2026-02-10T11:07:01.904+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:07:01.737+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ff21245]
2026-02-10T11:07:01.790+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:07:01.884+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:01.903+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:07:01.904+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:07:01.905+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:07:01.905+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:07:01.906+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d009baa] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:01.906+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:07:01.907+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:07:01.907+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:07:01.938+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:07:01.909+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:07:01.909+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:07:01.910+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1178850634 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:07:01.914+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:07:01.917+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:01.946+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:07:01.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:07:01.954+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:07:01.955+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@560af341] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:01.970+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:07:01.970+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:07:01.977+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@830564844 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:07:02.007+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:07:02.007+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:07:02.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:07:02.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:07:02.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:07:02.021+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:07:02.024+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:07:02.025+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ba3f44] was not registered for synchronization because synchronization is not active
2026-02-10T11:07:02.025+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2123113338 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:07:02.029+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:07:02.035+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:07:02.065+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:07:02.065+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:07:02.065+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:07:02.066+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@560af341]
2026-02-10T11:07:02.066+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ba3f44]
2026-02-10T11:07:02.066+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d009baa]
2026-02-10T11:07:02.067+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:07:02.067+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:07:02.067+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:07:02.068+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:07:02.069+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:07:02.069+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:07:02.070+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:07:02.071+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:07:02.074+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:28.095+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:10:28.097+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:10:28.098+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-02-10T11:10:28.098+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-02-10T11:10:28.112+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:10:28.112+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:10:28.112+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-02-10T11:10:28.116+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:10:28.117+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:10:28.117+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-02-10T11:10:28.124+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/companies
2026-02-10T11:10:28.127+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:10:28.128+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:10:28.132+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/companies
2026-02-10T11:10:28.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-02-10T11:10:28.137+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:10:28.138+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:10:28.138+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-02-10T11:10:28.138+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-02-10T11:10:28.139+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:10:28.139+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:10:28.153+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-02-10T11:10:28.154+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-02-10T11:10:28.155+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:28.155+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-02-10T11:10:28.155+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:28.156+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:28.156+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dcf527] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:28.159+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:28.161+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49635cab] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:28.162+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1da96ef2] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:28.163+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4500a0c7] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:28.166+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@387714225 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:28.167+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2053408749 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:28.167+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1320136495 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:28.167+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:10:28.168+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1780048110 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:28.168+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:28.168+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:28.169+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:10:28.169+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:28.170+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:28.170+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:28.171+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:28.176+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:28.177+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:28.177+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:10:28.178+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1da96ef2]
2026-02-10T11:10:28.179+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49635cab]
2026-02-10T11:10:28.179+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dcf527]
2026-02-10T11:10:28.180+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:28.181+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:28.181+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:28.182+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:28.182+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4500a0c7]
2026-02-10T11:10:28.182+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1270e1c1] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:28.183+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:10:28.183+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:28.183+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1590794872 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:28.184+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:28.186+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:10:28.189+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=7, userId=9, companyId=3 (truncated)...]
2026-02-10T11:10:28.189+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=7, userId=9, companyId=3 (truncated)...]
2026-02-10T11:10:28.192+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:10:28.195+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:28.197+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:28.205+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/3/applications
2026-02-10T11:10:28.206+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company/3
2026-02-10T11:10:28.209+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/3/applications
2026-02-10T11:10:28.210+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company/3
2026-02-10T11:10:28.226+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:10:28.227+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/3/applications
2026-02-10T11:10:28.228+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/3
2026-02-10T11:10:28.229+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/3/applications
2026-02-10T11:10:28.229+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/3
2026-02-10T11:10:28.233+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1270e1c1]
2026-02-10T11:10:28.235+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies/3/applications
2026-02-10T11:10:28.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/company/3
2026-02-10T11:10:28.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies/3/applications
2026-02-10T11:10:28.237+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/company/3
2026-02-10T11:10:28.238+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:28.239+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/3/applications
2026-02-10T11:10:28.239+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/3
2026-02-10T11:10:28.244+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/3/applications", parameters={}
2026-02-10T11:10:28.240+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/3/applications
2026-02-10T11:10:28.242+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/3
2026-02-10T11:10:28.243+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:10:28.244+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/3", parameters={}
2026-02-10T11:10:28.245+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/3/applications", parameters={}
2026-02-10T11:10:28.245+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-02-10T11:10:28.245+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/3", parameters={}
2026-02-10T11:10:28.248+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:28.250+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-02-10T11:10:28.251+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-02-10T11:10:28.252+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-10T11:10:28.253+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-02-10T11:10:28.255+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-10T11:10:28.256+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-10T11:10:28.258+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-10T11:10:28.258+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-10T11:10:28.260+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-10T11:10:28.260+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-10T11:10:28.261+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-10T11:10:28.262+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:28.262+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:28.262+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:28.262+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:28.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c540a7d] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:28.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@315fbfbf] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:28.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1163e8af] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:28.264+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d1e36f5] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:28.264+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1002596230 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:28.265+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@146522101 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:28.265+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1912717695 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:28.266+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:28.266+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:28.266+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:28.266+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@248036833 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:28.267+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:28.268+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:28.269+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:28.270+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:28.272+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:28.273+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:28.273+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:28.273+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:28.274+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c540a7d]
2026-02-10T11:10:28.274+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@315fbfbf]
2026-02-10T11:10:28.274+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d1e36f5]
2026-02-10T11:10:28.275+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:28.275+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:28.276+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:28.276+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b27836d] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:28.277+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f517cc] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:28.277+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5611681] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:28.277+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@66142168 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:28.277+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:28.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1357141136 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:28.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@433332550 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:28.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-02-10T11:10:28.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1163e8af]
2026-02-10T11:10:28.279+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-02-10T11:10:28.279+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-02-10T11:10:28.280+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 3(Long)
2026-02-10T11:10:28.280+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:28.280+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 3(Long)
2026-02-10T11:10:28.281+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 3(Long)
2026-02-10T11:10:28.281+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e0b154e] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:28.282+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@637111884 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:28.284+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-02-10T11:10:28.286+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 3(Long)
2026-02-10T11:10:28.287+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 1
2026-02-10T11:10:28.288+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b27836d]
2026-02-10T11:10:28.288+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 5
2026-02-10T11:10:28.288+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 5
2026-02-10T11:10:28.291+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:28.291+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f517cc]
2026-02-10T11:10:28.291+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5611681]
2026-02-10T11:10:28.292+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 1
2026-02-10T11:10:28.292+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=30, userId=29, companyId (truncated)...]
2026-02-10T11:10:28.292+09:00  INFO 20428 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 3, count: 5
2026-02-10T11:10:28.292+09:00  INFO 20428 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 3, count: 5
2026-02-10T11:10:28.293+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e0b154e]
2026-02-10T11:10:28.293+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:28.293+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:28.293+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:28.294+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:28.297+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=5, username=test_ceo, passw (truncated)...]
2026-02-10T11:10:28.297+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=5, username=test_ceo, passw (truncated)...]
2026-02-10T11:10:28.298+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=30, userId=29, companyId (truncated)...]
2026-02-10T11:10:28.299+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:28.299+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:28.300+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:30.505+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:10:30.505+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:10:30.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-10T11:10:30.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:10:30.512+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:10:30.603+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:10:30.720+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:10:30.741+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:10:30.742+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:10:30.742+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:10:30.745+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-10T11:10:30.760+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:10:30.745+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:10:30.755+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:10:30.758+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:10:30.761+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies
2026-02-10T11:10:30.763+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:10:30.770+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:10:30.811+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:10:30.816+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:10:30.825+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:10:30.834+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:10:30.825+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-10T11:10:30.826+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:10:30.831+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:10:30.833+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:30.834+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:10:30.836+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-02-10T11:10:30.843+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-10T11:10:30.844+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:10:30.850+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:10:30.872+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5189e360] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:30.873+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:10:30.879+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:10:30.883+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-10T11:10:30.883+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:30.884+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:10:30.884+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:30.886+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:10:30.886+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:30.886+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@484268009 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:30.886+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d4a513e] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:30.887+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:30.887+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cd29647] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:30.888+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c45ed5c] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:30.889+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:10:30.889+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-02-10T11:10:30.894+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@830251795 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:30.890+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22435508] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:30.894+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:10:30.894+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@40140032 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:30.894+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@463607676 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:30.895+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:30.896+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:10:30.896+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:10:30.896+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-10T11:10:30.898+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:30.899+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@402477179 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:30.899+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:10:30.899+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:10:30.901+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5189e360]
2026-02-10T11:10:30.900+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 9(Long)
2026-02-10T11:10:30.901+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:30.900+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:10:30.900+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:30.903+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:10:30.903+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:30.903+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:10:30.903+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-10T11:10:30.903+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:10:30.905+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:30.905+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cd29647]
2026-02-10T11:10:30.905+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d4a513e]
2026-02-10T11:10:30.905+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:30.905+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c45ed5c]
2026-02-10T11:10:30.906+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:10:30.908+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:30.909+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:30.910+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:30.911+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:10:30.912+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:30.913+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:10:30.913+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74dd7317] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:30.914+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:10:30.915+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22435508]
2026-02-10T11:10:30.918+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:30.919+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5af0da36] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:30.917+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:10:30.917+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-10T11:10:30.917+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:30.917+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@100084315 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:30.918+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:30.920+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@693006021 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:30.927+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:10:30.922+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:10:30.922+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:30.922+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b54e709] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:30.923+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:10:30.926+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-02-10T11:10:30.929+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:10:30.929+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:10:30.932+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:10:30.933+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@617902535 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:30.935+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:10:30.937+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/companies
2026-02-10T11:10:30.938+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:10:30.943+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:10:30.944+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:10:30.946+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-02-10T11:10:30.946+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:10:30.948+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:30.949+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:10:30.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:10:30.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-02-10T11:10:30.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:10:30.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5af0da36]
2026-02-10T11:10:30.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38a28c0] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:30.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:10:30.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-02-10T11:10:30.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74dd7317]
2026-02-10T11:10:30.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:30.953+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:10:30.954+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:10:30.955+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:30.955+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:30.955+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:10:30.958+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b54e709]
2026-02-10T11:10:30.959+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@403152414 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:30.959+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:30.960+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22766bc6] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:30.960+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:10:30.961+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:30.961+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:30.962+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:30.962+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c928a8c] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:30.963+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1299789303 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:30.963+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:30.964+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:10:30.965+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:10:30.967+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:30.968+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1300490404 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:30.968+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:30.971+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-02-10T11:10:30.972+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:10:30.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:30.976+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:10:30.978+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:30.979+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:10:30.979+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/companies
2026-02-10T11:10:30.981+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:10:30.982+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:10:30.982+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-02-10T11:10:30.983+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:10:30.983+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-02-10T11:10:30.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:30.985+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-02-10T11:10:30.985+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e870088] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:30.986+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:30.995+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1904706160 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:30.995+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@676845b] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:30.995+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:30.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1246311080 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:31.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:31.009+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:31.009+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:10:31.010+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:31.010+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:31.015+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22766bc6]
2026-02-10T11:10:31.016+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c928a8c]
2026-02-10T11:10:31.016+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38a28c0]
2026-02-10T11:10:31.018+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:31.021+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:31.021+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:31.022+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:31.024+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:31.027+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=7, userId=9, companyId=3 (truncated)...]
2026-02-10T11:10:31.027+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e870088]
2026-02-10T11:10:31.027+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:10:31.028+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42d16dbb] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:31.029+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:31.029+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:31.032+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:31.034+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1870958077 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:31.036+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3799ef90] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:31.040+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:10:31.042+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1556247726 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:31.043+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:10:31.045+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:10:31.046+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:10:31.052+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:31.052+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:10:31.054+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@676845b]
2026-02-10T11:10:31.059+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:10:31.061+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:10:31.061+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-02-10T11:10:31.063+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42d16dbb]
2026-02-10T11:10:31.064+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:31.065+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:10:31.068+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/3/applications
2026-02-10T11:10:31.068+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company/3
2026-02-10T11:10:31.070+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:31.071+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=7, userId=9, companyId=3 (truncated)...]
2026-02-10T11:10:31.072+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3799ef90]
2026-02-10T11:10:31.074+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:10:31.076+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:10:31.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:31.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:31.079+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:31.079+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:10:31.081+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:10:31.082+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:10:31.082+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-02-10T11:10:31.087+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/3/applications
2026-02-10T11:10:31.091+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/3
2026-02-10T11:10:31.093+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:10:31.096+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:31.098+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:10:31.100+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/companies
2026-02-10T11:10:31.102+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies/3/applications
2026-02-10T11:10:31.102+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:10:31.102+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/company/3
2026-02-10T11:10:31.104+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:10:31.105+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-02-10T11:10:31.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/3/applications
2026-02-10T11:10:31.110+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:10:31.110+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/3
2026-02-10T11:10:31.115+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:31.111+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:10:31.117+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:10:31.115+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-02-10T11:10:31.115+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/3/applications", parameters={}
2026-02-10T11:10:31.115+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/3", parameters={}
2026-02-10T11:10:31.116+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@823246d] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:31.118+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:31.121+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5306d1d5] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:31.118+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/3/applications
2026-02-10T11:10:31.119+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-02-10T11:10:31.119+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-02-10T11:10:31.120+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-02-10T11:10:31.120+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@610526927 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:31.121+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1119856680 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:31.122+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:31.124+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company/3
2026-02-10T11:10:31.125+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-10T11:10:31.127+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-10T11:10:31.130+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:10:31.132+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:31.133+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47d83a20] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:31.134+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-10T11:10:31.138+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:31.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/3/applications
2026-02-10T11:10:31.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-10T11:10:31.136+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:10:31.137+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:31.137+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@533073597 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:31.138+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e3bfe0e] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:31.139+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:31.139+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies/3/applications
2026-02-10T11:10:31.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:31.144+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1205633882 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:31.145+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f562739] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:31.146+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:31.146+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:10:31.146+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/3/applications
2026-02-10T11:10:31.147+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:31.147+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:31.148+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1940613519 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:31.148+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5306d1d5]
2026-02-10T11:10:31.148+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@823246d]
2026-02-10T11:10:31.149+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/3/applications", parameters={}
2026-02-10T11:10:31.151+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:31.154+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-02-10T11:10:31.151+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:31.152+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:31.153+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:31.154+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-10T11:10:31.155+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:31.156+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:31.156+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2efa472] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:31.160+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:10:31.161+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-10T11:10:31.162+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47d83a20]
2026-02-10T11:10:31.163+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1728202115 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:31.163+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:31.163+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:31.164+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:31.165+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:31.166+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:10:31.166+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e3bfe0e]
2026-02-10T11:10:31.168+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/3
2026-02-10T11:10:31.169+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73dec395] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:31.170+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=7, userId=9, companyId=3 (truncated)...]
2026-02-10T11:10:31.171+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:31.171+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:10:31.171+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:31.175+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/company/3
2026-02-10T11:10:31.175+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1094239721 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:31.176+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f562739]
2026-02-10T11:10:31.177+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:31.178+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bee34eb] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:31.178+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/3
2026-02-10T11:10:31.178+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:31.178+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:31.180+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@988053014 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:31.183+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/3", parameters={}
2026-02-10T11:10:31.186+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:31.187+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11545c3a] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:31.188+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-02-10T11:10:31.194+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/3/applications
2026-02-10T11:10:31.195+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 3(Long)
2026-02-10T11:10:31.194+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-02-10T11:10:31.195+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@262528710 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:31.197+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-10T11:10:31.197+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-02-10T11:10:31.197+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company/3
2026-02-10T11:10:31.198+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-10T11:10:31.198+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 3(Long)
2026-02-10T11:10:31.201+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:31.202+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27aede16] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:31.214+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:10:31.218+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1851511789 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:31.217+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/3/applications
2026-02-10T11:10:31.218+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2efa472]
2026-02-10T11:10:31.219+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:31.220+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:31.220+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies/3/applications
2026-02-10T11:10:31.225+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:31.225+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:10:31.226+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/3/applications
2026-02-10T11:10:31.229+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:31.229+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 1
2026-02-10T11:10:31.229+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 5
2026-02-10T11:10:31.230+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:31.233+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:31.233+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/3/applications", parameters={}
2026-02-10T11:10:31.234+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73dec395]
2026-02-10T11:10:31.234+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bee34eb]
2026-02-10T11:10:31.234+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11545c3a]
2026-02-10T11:10:31.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/3
2026-02-10T11:10:31.241+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27aede16]
2026-02-10T11:10:31.248+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:31.244+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-02-10T11:10:31.245+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:31.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:31.247+09:00  INFO 20428 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 3, count: 5
2026-02-10T11:10:31.249+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/company/3
2026-02-10T11:10:31.250+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5694b98d] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:31.250+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-10T11:10:31.250+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14dc78a1] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:31.250+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=30, userId=29, companyId (truncated)...]
2026-02-10T11:10:31.251+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:31.251+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/3
2026-02-10T11:10:31.251+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@127632167 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:31.252+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-10T11:10:31.252+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@295424964 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:31.253+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:31.253+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=5, username=test_ceo, passw (truncated)...]
2026-02-10T11:10:31.253+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/3", parameters={}
2026-02-10T11:10:31.254+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-02-10T11:10:31.255+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:31.256+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-02-10T11:10:31.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:31.267+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-02-10T11:10:31.268+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 3(Long)
2026-02-10T11:10:31.270+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61322f00] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:31.272+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 3(Long)
2026-02-10T11:10:31.275+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-10T11:10:31.277+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2002112105 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:31.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-10T11:10:31.280+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:31.282+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:31.284+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:31.284+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a81494c] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:31.284+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2073036861 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:31.289+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 1
2026-02-10T11:10:31.290+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 5
2026-02-10T11:10:31.291+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:31.292+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14dc78a1]
2026-02-10T11:10:31.292+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5694b98d]
2026-02-10T11:10:31.293+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:31.293+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:31.293+09:00  INFO 20428 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 3, count: 5
2026-02-10T11:10:31.293+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=30, userId=29, companyId (truncated)...]
2026-02-10T11:10:31.294+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:31.297+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:31.299+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:31.302+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:31.306+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=5, username=test_ceo, passw (truncated)...]
2026-02-10T11:10:31.306+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61322f00]
2026-02-10T11:10:31.312+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a81494c]
2026-02-10T11:10:31.316+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:31.317+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:31.318+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:31.320+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ea34af3] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:31.321+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@149a6d55] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:31.321+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2115579400 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:31.322+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1949404579 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:31.322+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-02-10T11:10:31.322+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-02-10T11:10:31.325+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 3(Long)
2026-02-10T11:10:31.326+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 3(Long)
2026-02-10T11:10:31.330+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 5
2026-02-10T11:10:31.331+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 1
2026-02-10T11:10:31.331+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@149a6d55]
2026-02-10T11:10:31.331+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ea34af3]
2026-02-10T11:10:31.332+09:00  INFO 20428 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 3, count: 5
2026-02-10T11:10:31.332+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:31.332+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:31.332+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=30, userId=29, companyId (truncated)...]
2026-02-10T11:10:31.333+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=5, username=test_ceo, passw (truncated)...]
2026-02-10T11:10:31.333+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:31.334+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:39.108+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:10:39.110+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:10:39.111+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-10T11:10:39.114+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:10:39.115+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:10:39.179+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:10:39.193+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-10T11:10:39.192+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:10:39.193+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:10:39.193+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:10:39.193+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:10:39.217+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:10:39.194+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies
2026-02-10T11:10:39.208+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:10:39.208+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:10:39.215+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:10:39.220+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:10:39.221+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-10T11:10:39.224+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-10T11:10:39.222+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:10:39.222+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:10:39.222+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:10:39.223+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:10:39.229+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-10T11:10:39.229+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:10:39.230+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:10:39.230+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:10:39.231+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:10:39.231+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:39.242+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@609c9ad4] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:39.231+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:10:39.239+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:39.239+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:10:39.242+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:39.243+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:39.243+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46897ee9] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:39.244+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:39.245+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39330139] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:39.245+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@744b4235] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:39.262+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6214ccbe] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:39.275+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@296457727 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:39.284+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-10T11:10:39.291+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1101721445 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:39.291+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1417538583 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:39.292+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@111207801 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:39.305+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:10:39.292+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1736817698 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:39.296+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 9(Long)
2026-02-10T11:10:39.296+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:10:39.305+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:39.309+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:10:39.313+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:39.310+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:39.311+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:10:39.314+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-10T11:10:39.316+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:39.317+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@609c9ad4]
2026-02-10T11:10:39.317+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:39.318+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:39.318+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:10:39.319+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-10T11:10:39.319+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39330139]
2026-02-10T11:10:39.319+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46897ee9]
2026-02-10T11:10:39.320+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:39.320+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:39.321+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:39.328+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:10:39.322+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75e5e258] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:39.326+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:39.327+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:10:39.330+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:39.331+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@715271968 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:39.335+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@744b4235]
2026-02-10T11:10:39.336+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6214ccbe]
2026-02-10T11:10:39.344+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:10:39.344+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:39.344+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:39.345+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:10:39.346+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f041994] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:39.346+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:10:39.350+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1652060910 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:39.350+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:39.350+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:10:39.353+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:10:39.360+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:10:39.362+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75e5e258]
2026-02-10T11:10:39.365+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:39.363+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:10:39.364+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:10:39.364+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:10:39.366+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:10:39.367+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f041994]
2026-02-10T11:10:39.368+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:39.368+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:39.371+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:10:39.375+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:10:39.371+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:10:39.376+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:10:39.376+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:39.377+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:10:39.377+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:10:39.378+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:10:39.417+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:10:39.418+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:10:39.420+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:10:39.422+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:10:39.426+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:39.428+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:39.428+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30008d4f] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:39.429+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@715f227d] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:39.430+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@802817427 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:39.432+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:39.435+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:39.486+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2075637251 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:39.491+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:10:39.495+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:10:39.495+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:39.501+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30008d4f]
2026-02-10T11:10:39.501+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:39.505+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79403169] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:39.506+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1293857275 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:39.508+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:10:39.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:10:39.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:10:39.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@715f227d]
2026-02-10T11:10:39.521+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:39.530+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:10:39.532+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:39.532+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:10:39.540+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79403169]
2026-02-10T11:10:39.542+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:39.543+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:10:39.545+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:39.549+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:10:39.550+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:10:39.552+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:10:39.552+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-10T11:10:39.553+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:10:39.554+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-10T11:10:39.568+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:10:39.568+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:10:39.569+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:10:39.569+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-10T11:10:39.569+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:10:39.571+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-10T11:10:39.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:10:39.576+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:10:39.576+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:10:39.577+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-10T11:10:39.578+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:10:39.580+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:10:39.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:10:39.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-10T11:10:39.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:10:39.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-10T11:10:39.582+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:10:39.582+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:10:39.604+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:10:39.604+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-10T11:10:39.620+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:10:39.620+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-10T11:10:39.621+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:10:39.621+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:10:39.621+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:10:39.621+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-10T11:10:39.622+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:10:39.622+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-10T11:10:39.622+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:10:39.624+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:39.629+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:39.625+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:39.625+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-10T11:10:39.627+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:39.628+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-10T11:10:39.629+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f2b0d41] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:39.629+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f0d6585] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:39.629+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c69e74f] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:39.629+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-10T11:10:39.630+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b63e78a] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:39.631+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-10T11:10:39.631+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1426508254 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:39.631+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@417534389 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:39.631+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@601787887 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:39.632+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-10T11:10:39.632+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1129337590 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:39.632+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:39.632+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:10:39.633+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:39.633+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:39.633+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:39.633+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:10:39.634+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@338ed8f8] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:39.635+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:10:39.636+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:39.637+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:39.637+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@397a7cb] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:39.638+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:10:39.638+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@878285180 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:39.642+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1343642665 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:39.643+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:39.643+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:10:39.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-10T11:10:39.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-10T11:10:39.645+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f0d6585]
2026-02-10T11:10:39.645+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:39.645+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:10:39.645+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f2b0d41]
2026-02-10T11:10:39.647+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-10T11:10:39.648+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:39.648+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c69e74f]
2026-02-10T11:10:39.648+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b63e78a]
2026-02-10T11:10:39.648+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-10T11:10:39.648+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:39.649+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b327a3b] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:39.649+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:39.650+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:39.651+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:10:39.651+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@529991061 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:39.651+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f6addcb] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:39.651+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:10:39.652+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:39.652+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:10:39.653+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@212468470 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:39.653+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:39.655+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:10:39.661+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:10:39.663+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:10:39.669+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:10:39.672+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b327a3b]
2026-02-10T11:10:39.672+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:39.673+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:10:39.675+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:10:39.677+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-10T11:10:39.677+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-10T11:10:39.677+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f6addcb]
2026-02-10T11:10:39.677+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@338ed8f8]
2026-02-10T11:10:39.677+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:39.677+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@397a7cb]
2026-02-10T11:10:39.678+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:39.678+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:39.681+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:39.681+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:10:39.682+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-10T11:10:39.683+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-10T11:10:39.688+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:39.694+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:39.699+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:42.098+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:10:42.098+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:10:42.100+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:10:42.102+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:42.118+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.128+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:10:42.129+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:10:42.130+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.130+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.130+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:42.131+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:10:42.131+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:10:42.131+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:10:42.134+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:10:42.134+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-10T11:10:42.134+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:10:42.134+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:10:42.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:10:42.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:42.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:10:42.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:10:42.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:10:42.136+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:10:42.136+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:10:42.137+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:42.138+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-10T11:10:42.138+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.139+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:10:42.139+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-10T11:10:42.139+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77785354] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:10:42.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.145+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76c4b1e] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.146+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:42.146+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:10:42.148+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.151+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:10:42.152+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:42.152+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@310745842 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:42.153+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-10T11:10:42.154+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16e3ee1d] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.155+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@681254306 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:42.156+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.158+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:10:42.159+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:10:42.160+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:42.160+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:42.160+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63f2b0e5] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.164+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:10:42.166+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:10:42.166+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:42.167+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:42.169+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.169+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.170+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fdfd4f7] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.171+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-10T11:10:42.173+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1370992222 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:42.176+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.176+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:42.176+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:10:42.178+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@461750522 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:42.178+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:10:42.179+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1317315743 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:42.179+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:42.180+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:42.180+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-10T11:10:42.181+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-10T11:10:42.182+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77785354]
2026-02-10T11:10:42.182+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-10T11:10:42.182+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76c4b1e]
2026-02-10T11:10:42.183+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:42.183+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-10T11:10:42.185+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:42.186+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-10T11:10:42.186+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.187+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:42.187+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:42.187+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:10:42.189+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c6973d1] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.189+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16e3ee1d]
2026-02-10T11:10:42.191+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:42.190+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.192+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@730529388 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:42.193+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.195+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.195+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47db5e4] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.196+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-10T11:10:42.196+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-10T11:10:42.198+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:10:42.199+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f523eee] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.200+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2095067028 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:42.200+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fdfd4f7]
2026-02-10T11:10:42.200+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:10:42.200+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63f2b0e5]
2026-02-10T11:10:42.201+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:10:42.205+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:42.202+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2111891878 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:42.202+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-10T11:10:42.203+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:42.203+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.205+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-10T11:10:42.206+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:10:42.206+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-10T11:10:42.208+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-10T11:10:42.209+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:10:42.210+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:42.211+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:10:42.212+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:10:42.213+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:42.213+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:10:42.214+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:10:42.214+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c6973d1]
2026-02-10T11:10:42.217+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:42.219+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.220+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:42.221+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.223+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.222+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35c64dc] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.222+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:10:42.226+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.227+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@89343917 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:42.228+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:42.228+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:42.228+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:42.229+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.230+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:10:42.231+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:10:42.231+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:42.232+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-10T11:10:42.233+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:10:42.235+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:10:42.237+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:42.239+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.241+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47db5e4]
2026-02-10T11:10:42.243+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f523eee]
2026-02-10T11:10:42.245+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:42.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:10:42.248+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:10:42.248+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:10:42.249+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:42.249+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:42.249+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35c64dc]
2026-02-10T11:10:42.250+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:42.251+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.251+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:10:42.251+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-10T11:10:42.251+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:10:42.251+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.252+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:10:42.252+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:10:42.252+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:10:42.253+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:42.253+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:42.253+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77599767] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.254+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:10:42.254+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:10:42.256+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:10:42.259+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:10:42.260+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:10:42.260+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@390297556 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:42.261+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.262+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.262+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:10:42.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:10:42.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:42.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:10:42.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dd86c82] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.264+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@659042fb] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.264+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.267+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c854339] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.264+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:10:42.265+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:42.265+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:10:42.266+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@868059772 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:42.266+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@842027619 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:42.268+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@813132257 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:42.269+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:10:42.270+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:10:42.270+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:42.270+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:42.271+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:42.271+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:10:42.272+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:10:42.272+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:10:42.272+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:42.272+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:42.273+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77599767]
2026-02-10T11:10:42.275+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:10:42.276+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:10:42.276+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:10:42.277+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:42.279+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:10:42.279+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:42.279+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:10:42.280+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a3d0a06] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.280+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dd86c82]
2026-02-10T11:10:42.280+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:10:42.280+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.280+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@659042fb]
2026-02-10T11:10:42.280+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.281+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1642351753 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:42.281+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.281+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c854339]
2026-02-10T11:10:42.281+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c0ff01] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.282+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.282+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5afe4bdc] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.283+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:10:42.283+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f7e7aec] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.283+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:42.283+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1448524669 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:42.283+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@718323b3] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.284+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@330514893 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:42.285+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@822912509 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:42.285+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:10:42.285+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:10:42.285+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:10:42.285+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@375595234 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:42.285+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:10:42.286+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:42.286+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:42.289+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:10:42.289+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:42.290+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:10:42.291+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:10:42.291+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:42.293+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:10:42.293+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:42.297+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a3d0a06]
2026-02-10T11:10:42.302+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:10:42.302+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:10:42.304+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.304+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c0ff01]
2026-02-10T11:10:42.304+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:42.304+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:10:42.305+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:42.306+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:10:42.306+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@749bb46e] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.308+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:42.308+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f7e7aec]
2026-02-10T11:10:42.308+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5afe4bdc]
2026-02-10T11:10:42.308+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@718323b3]
2026-02-10T11:10:42.309+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:10:42.309+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1178926529 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:42.309+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:10:42.309+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.310+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.310+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:42.313+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:10:42.310+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:10:42.310+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:42.311+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:42.311+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@526faf5] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.312+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45b8ff15] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.314+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:42.315+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.362+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a4a75b1] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.317+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:42.321+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.323+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@159599015 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:42.367+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:10:42.361+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@768524970 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:42.363+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.463+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:10:42.366+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-10T11:10:42.369+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:10:42.413+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:42.413+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@262991658 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:42.493+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:42.445+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:10:42.464+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.485+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.488+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@749bb46e]
2026-02-10T11:10:42.495+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:42.499+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:10:42.499+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:10:42.499+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:10:42.499+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.500+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:10:42.501+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:10:42.502+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-10T11:10:42.503+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43016b58] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.503+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@526faf5]
2026-02-10T11:10:42.507+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.503+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.505+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:42.506+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1779474322 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:42.508+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5af05924] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45852754] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.511+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:42.511+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:10:42.511+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1748234717 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:42.512+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@742287509 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:42.512+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:42.513+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:10:42.514+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.554+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@110d2652] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.514+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:10:42.514+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:42.515+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:42.553+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a4a75b1]
2026-02-10T11:10:42.553+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45b8ff15]
2026-02-10T11:10:42.554+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1609338464 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:42.562+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:42.563+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:42.563+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.563+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.564+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-10T11:10:42.565+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:10:42.565+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bc3660] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.566+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22d4c61] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.566+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:42.567+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43016b58]
2026-02-10T11:10:42.567+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-10T11:10:42.567+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:42.567+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1854359273 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:42.568+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@7293798 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:42.568+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5af05924]
2026-02-10T11:10:42.569+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.569+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45852754]
2026-02-10T11:10:42.570+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:10:42.570+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:42.570+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.570+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35ee964a] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.571+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.571+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-10T11:10:42.571+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:10:42.571+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:42.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d79749] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20fbf2c3] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2113757188 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:42.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@110d2652]
2026-02-10T11:10:42.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1597425646 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:42.576+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1277746703 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:42.577+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:10:42.579+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:42.579+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:42.579+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:10:42.579+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:10:42.579+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:42.580+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-10T11:10:42.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:10:42.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22d4c61]
2026-02-10T11:10:42.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bc3660]
2026-02-10T11:10:42.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:10:42.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:42.582+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:42.582+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.583+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:42.588+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55da2974] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.589+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:10:42.588+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:42.590+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1031547370 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:42.593+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:42.595+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:10:42.595+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:10:42.596+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:10:42.598+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:10:42.599+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:42.599+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:10:42.599+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35ee964a]
2026-02-10T11:10:42.601+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:42.601+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:10:42.603+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:10:42.603+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20fbf2c3]
2026-02-10T11:10:42.603+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d79749]
2026-02-10T11:10:42.603+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.604+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:10:42.605+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:10:42.605+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.608+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.609+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@469ec750] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.612+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:10:42.612+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:10:42.613+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:10:42.613+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3908e691] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.614+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2183a0e5] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.614+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@126047503 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:42.615+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:10:42.616+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.616+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55da2974]
2026-02-10T11:10:42.617+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1176135321 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:42.618+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@450168387 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:42.618+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:42.618+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:10:42.619+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@629b13d2] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.619+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.619+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:10:42.619+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:10:42.620+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:42.620+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:10:42.621+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1284564001 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:42.621+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@646c8e77] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.622+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:10:42.627+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:10:42.627+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.627+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:42.628+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1618577927 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:42.630+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a33c5ce] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.630+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:42.631+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:10:42.631+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@478790970 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:42.633+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:42.636+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:10:42.636+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:10:42.636+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@469ec750]
2026-02-10T11:10:42.637+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:10:42.637+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:10:42.637+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:42.637+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:10:42.638+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.638+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2183a0e5]
2026-02-10T11:10:42.638+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3908e691]
2026-02-10T11:10:42.638+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@629b13d2]
2026-02-10T11:10:42.640+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e19d81c] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.643+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.643+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.646+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:10:42.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:10:42.645+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.645+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1309484232 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:42.645+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@384497e2] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.646+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3453ef20] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.646+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a33c5ce]
2026-02-10T11:10:42.646+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@646c8e77]
2026-02-10T11:10:42.646+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c3c13b3] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.646+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:10:42.647+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@75275399 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:42.647+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1242671957 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:42.647+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.647+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:42.647+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1443076197 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:42.648+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:10:42.648+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:42.648+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:42.649+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68fa42f0] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.649+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:10:42.649+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:42.650+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:42.650+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:42.650+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1751479982 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:42.651+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:42.652+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:42.654+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:42.658+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:42.660+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:42.662+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-10T11:10:42.664+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:42.665+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:42.665+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:42.665+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:42.665+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:10:42.667+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:42.666+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:10:42.666+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@384497e2]
2026-02-10T11:10:42.667+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3453ef20]
2026-02-10T11:10:42.667+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c3c13b3]
2026-02-10T11:10:42.667+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e19d81c]
2026-02-10T11:10:42.667+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68fa42f0]
2026-02-10T11:10:42.667+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-10T11:10:42.667+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.668+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.668+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.668+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.668+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:42.669+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:42.669+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6818a76b] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.669+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53e97eae] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.669+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17fa2cf2] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.669+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e189e04] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.670+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:10:42.670+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:42.670+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1962923533 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:42.671+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2028511516 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:42.672+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@34402390 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:42.672+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1959770357 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:42.673+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:42.674+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.674+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:10:42.676+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:10:42.676+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:10:42.676+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:10:42.680+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:10:42.677+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a7f2431] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.678+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.678+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:10:42.679+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:10:42.680+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:10:42.682+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1816262280 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:42.684+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-10T11:10:42.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:10:42.687+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-10T11:10:42.688+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:10:42.688+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:10:42.689+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.689+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17fa2cf2]
2026-02-10T11:10:42.691+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-10T11:10:42.691+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6818a76b]
2026-02-10T11:10:42.692+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:10:42.692+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53e97eae]
2026-02-10T11:10:42.693+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:10:42.693+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.694+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:42.694+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e189e04]
2026-02-10T11:10:42.694+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.695+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-10T11:10:42.695+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6782934a] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.696+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:10:42.696+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-10T11:10:42.696+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:42.696+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31d1e8b9] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.699+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:10:42.696+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:42.697+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1574521239 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:42.697+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:42.699+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a7f2431]
2026-02-10T11:10:42.700+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@693496867 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:42.701+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:42.701+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:42.701+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:42.702+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:42.702+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.703+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:10:42.705+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:10:42.710+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.711+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:42.711+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-10T11:10:42.714+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:10:42.715+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:10:42.722+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:10:42.724+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@761cbde3] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.726+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:42.728+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.729+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:10:42.735+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:10:42.738+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:10:42.730+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1578412119 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:42.740+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-10T11:10:42.731+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:10:42.733+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:10:42.738+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.742+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-10T11:10:42.742+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:10:42.743+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e28a050] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.743+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:10:42.763+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.764+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:42.764+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:10:42.765+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1330027715 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:42.765+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:10:42.775+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14b45378] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.780+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6782934a]
2026-02-10T11:10:42.781+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31d1e8b9]
2026-02-10T11:10:42.785+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-10T11:10:42.820+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:10:42.822+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:10:42.822+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1819527178 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:42.828+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.828+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.829+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@761cbde3]
2026-02-10T11:10:42.830+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:10:42.831+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:10:42.832+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:42.832+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4215cf7c] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.832+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cc642cc] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.833+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:42.837+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:10:42.837+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:42.838+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@830348471 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:42.839+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@846002125 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:42.844+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-10T11:10:42.845+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:10:42.846+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:10:42.847+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:10:42.847+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:42.849+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:42.852+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.854+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:42.854+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e28a050]
2026-02-10T11:10:42.854+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:10:42.855+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:42.861+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:10:42.862+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1510701c] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.862+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14b45378]
2026-02-10T11:10:42.862+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:42.866+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:10:42.869+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@824826565 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:42.869+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.870+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:10:42.872+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:42.872+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:42.872+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:10:42.872+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:10:42.875+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30dbc000] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.875+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:42.877+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cc642cc]
2026-02-10T11:10:42.883+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.884+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62428570] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.877+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.878+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4215cf7c]
2026-02-10T11:10:42.888+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.878+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:10:42.879+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@113404656 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:42.881+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.887+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1554807766 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:42.890+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.891+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a83e557] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.893+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:42.894+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:10:42.896+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:42.898+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:10:42.901+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1711387988 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:42.901+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:42.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:10:42.903+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:10:42.905+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:42.908+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.910+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:10:42.911+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1510701c]
2026-02-10T11:10:42.913+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.914+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.915+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:10:42.918+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:42.921+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:42.922+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:42.922+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:10:42.929+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:10:42.930+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:10:42.930+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30dbc000]
2026-02-10T11:10:42.931+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62428570]
2026-02-10T11:10:42.932+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:10:42.934+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:42.934+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:10:42.934+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.935+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:42.936+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:10:42.937+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:10:42.938+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:10:42.939+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d9e2fd4] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.943+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:10:42.944+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:10:42.946+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:10:42.946+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1932208039 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:42.947+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:42.948+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:42.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:10:42.955+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:10:42.957+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.951+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:10:42.951+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:10:42.953+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-10T11:10:42.954+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.957+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cc2de55] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.958+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:10:42.960+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.964+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:42.964+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:10:42.965+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@662949309 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:42.965+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a83e557]
2026-02-10T11:10:42.965+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@747fde60] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.965+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-10T11:10:42.966+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:10:42.970+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:42.971+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.971+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2115868245 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:42.971+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:10:42.972+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:42.972+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-10T11:10:42.973+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:42.974+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6295971c] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.974+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:42.974+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d9e2fd4]
2026-02-10T11:10:42.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:10:42.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:42.977+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2007596868 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:42.978+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:42.978+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.978+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-10T11:10:42.979+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:42.979+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:42.979+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ccfc5a6] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.980+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:42.980+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.981+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:42.981+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:42.982+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1615047524 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:42.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:42.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a482cde] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cc2de55]
2026-02-10T11:10:42.985+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:42.985+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:42.986+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.987+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@430472145 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:42.987+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.988+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@747fde60]
2026-02-10T11:10:42.988+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:42.988+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:42.988+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@540b8bdb] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.988+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-10T11:10:42.988+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56aed106] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.988+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.989+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6295971c]
2026-02-10T11:10:42.990+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1195795399 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:42.991+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@205823472 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:42.991+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-10T11:10:42.991+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23929514] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.992+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:42.992+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-10T11:10:42.993+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:10:42.994+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@689230808 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:42.994+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@677d1d44] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:42.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-10T11:10:42.997+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:42.999+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:10:42.999+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:10:43.000+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-10T11:10:43.000+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@689851328 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:43.000+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ccfc5a6]
2026-02-10T11:10:43.001+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:10:43.002+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a482cde]
2026-02-10T11:10:43.003+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:10:43.009+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.012+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:10:43.012+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:43.012+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76de2cd5] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.013+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-10T11:10:43.013+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:10:43.014+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-10T11:10:43.014+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@72230237 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:43.014+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@540b8bdb]
2026-02-10T11:10:43.015+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:10:43.015+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:10:43.015+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56aed106]
2026-02-10T11:10:43.016+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:10:43.016+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:43.016+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:43.019+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@677d1d44]
2026-02-10T11:10:43.019+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23929514]
2026-02-10T11:10:43.019+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:43.023+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:10:43.020+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:10:43.020+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-10T11:10:43.021+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:43.022+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:43.022+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:43.025+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:43.029+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:43.029+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:10:43.029+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-10T11:10:43.029+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:10:43.034+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:43.041+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:10:43.044+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:43.044+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:43.044+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:43.052+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:10:43.052+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:10:43.053+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:10:43.062+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:43.063+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:43.068+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:43.085+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:10:43.074+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-10T11:10:43.074+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:10:43.082+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:10:43.083+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:10:43.085+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-10T11:10:43.085+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:10:43.086+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:43.086+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:10:43.086+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76de2cd5]
2026-02-10T11:10:43.087+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:43.087+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:43.092+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.095+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:43.097+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:10:43.097+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.104+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e953ec4] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.098+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:10:43.098+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:10:43.100+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52a07ff0] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.101+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.102+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.105+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1227496263 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:43.106+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:10:43.106+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-10T11:10:43.107+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1518166828 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:43.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:43.108+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69f938b9] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.108+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20dbe158] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:10:43.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:43.110+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:43.111+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1148713234 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:43.111+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@920511951 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:43.112+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c3ae1ea] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.113+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:10:43.113+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:43.113+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-10T11:10:43.113+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.114+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:43.114+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@975537176 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:43.115+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-10T11:10:43.115+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2501f861] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.117+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:43.119+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1849309764 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:43.117+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:43.120+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-10T11:10:43.121+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:43.122+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-10T11:10:43.126+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:43.126+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:10:43.126+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:43.128+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52a07ff0]
2026-02-10T11:10:43.129+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-10T11:10:43.131+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e953ec4]
2026-02-10T11:10:43.131+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20dbe158]
2026-02-10T11:10:43.131+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.131+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69f938b9]
2026-02-10T11:10:43.133+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.134+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@be45e84] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:43.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1805c820] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.136+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7170e3d6] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.137+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1516961783 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:43.139+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-10T11:10:43.139+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:43.140+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-10T11:10:43.141+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2130814714 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:43.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@241044865 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:43.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:43.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2501f861]
2026-02-10T11:10:43.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c3ae1ea]
2026-02-10T11:10:43.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:43.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:43.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:10:43.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:43.144+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:43.144+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.149+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:43.153+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:43.156+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:10:43.156+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-10T11:10:43.160+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55fb4c48] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.164+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-10T11:10:43.168+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:43.185+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:43.188+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1314243244 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:43.188+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:43.191+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@be45e84]
2026-02-10T11:10:43.192+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:43.194+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:43.194+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:10:43.195+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:10:43.195+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:43.196+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.197+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:43.197+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-10T11:10:43.197+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-10T11:10:43.197+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7170e3d6]
2026-02-10T11:10:43.198+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1805c820]
2026-02-10T11:10:43.198+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e14938e] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.199+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:43.199+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:43.204+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:43.204+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.204+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1731065014 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:43.207+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:10:43.205+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:10:43.206+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:43.206+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:10:43.206+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76db97a] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.209+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-10T11:10:43.209+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:10:43.210+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.211+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:43.212+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@832513407 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:43.213+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:43.216+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:43.217+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26bd29ef] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.217+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55fb4c48]
2026-02-10T11:10:43.218+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:10:43.220+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:43.228+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:43.229+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@155080351 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:43.231+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.232+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:10:43.235+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:10:43.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-10T11:10:43.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cb80941] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.237+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:43.237+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12a51452] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.238+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-10T11:10:43.238+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@330207122 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:43.239+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:10:43.240+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@407705438 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:43.241+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:10:43.241+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:10:43.242+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-10T11:10:43.243+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:10:43.244+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:10:43.250+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.252+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:10:43.252+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-10T11:10:43.252+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-10T11:10:43.253+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e14938e]
2026-02-10T11:10:43.253+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@473519e9] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.256+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76db97a]
2026-02-10T11:10:43.256+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26bd29ef]
2026-02-10T11:10:43.258+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.258+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1210956662 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:43.259+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:43.259+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:10:43.261+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:43.262+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d01bf1b] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:43.264+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-10T11:10:43.264+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:10:43.264+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cb80941]
2026-02-10T11:10:43.264+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-10T11:10:43.265+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@392420310 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:43.268+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:43.265+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:43.265+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12a51452]
2026-02-10T11:10:43.266+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:43.266+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.267+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:43.269+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:43.270+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:43.271+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ff5bce8] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.271+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:43.273+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:10:43.277+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-10T11:10:43.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1130060886 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:43.279+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:10:43.283+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:10:43.284+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:43.285+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:43.286+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:43.286+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:10:43.287+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:43.288+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-02-10T11:10:43.288+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:43.288+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:43.290+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:10:43.290+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:10:43.294+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@473519e9]
2026-02-10T11:10:43.295+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d01bf1b]
2026-02-10T11:10:43.296+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:10:43.296+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:10:43.299+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-02-10T11:10:43.299+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.301+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.303+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cc246e5] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.302+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.302+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.303+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c4f4ff4] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.303+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/monthly-trend
2026-02-10T11:10:43.304+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:43.304+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@743162625 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:43.306+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:10:43.304+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28ad5e9e] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.305+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65bb5724] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.305+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1666905541 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:43.305+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-02-10T11:10:43.306+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ff5bce8]
2026-02-10T11:10:43.307+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:10:43.308+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@530597034 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:43.308+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1168607194 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:43.308+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:43.308+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-02-10T11:10:43.310+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.311+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:43.311+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:43.314+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:43.314+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-02-10T11:10:43.315+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@241f4be3] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.316+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:43.318+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@373272948 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:43.317+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:43.318+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:43.319+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:10:43.319+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:10:43.326+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:43.328+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:10:43.329+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cc246e5]
2026-02-10T11:10:43.330+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.331+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.331+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@717e2223] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.332+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22358c17] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.332+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@124129673 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:43.333+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1812857818 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:43.334+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? AND status = 'APPROVED' GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-10T11:10:43.334+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:43.334+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:43.335+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:43.336+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:10:43.338+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 3(Long)
2026-02-10T11:10:43.338+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28ad5e9e]
2026-02-10T11:10:43.344+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65bb5724]
2026-02-10T11:10:43.345+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c4f4ff4]
2026-02-10T11:10:43.346+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:10:43.351+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:10:43.351+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.357+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.358+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.358+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@241f4be3]
2026-02-10T11:10:43.362+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61c196df] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.362+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@600e859e] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.363+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60568c83] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.364+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.364+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@593133015 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:43.365+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1597242572 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:43.365+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@378560402 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:43.365+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fec4d43] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.366+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:43.366+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:10:43.366+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:10:43.367+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@32658702 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:43.367+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:43.369+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:10:43.372+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:10:43.372+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:10:43.378+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:10:43.380+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 3
2026-02-10T11:10:43.386+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@717e2223]
2026-02-10T11:10:43.392+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:43.421+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:10:43.422+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:10:43.422+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:10:43.430+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@600e859e]
2026-02-10T11:10:43.432+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:43.423+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:43.429+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61c196df]
2026-02-10T11:10:43.429+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60568c83]
2026-02-10T11:10:43.430+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22358c17]
2026-02-10T11:10:43.431+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:10:43.433+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:10:43.439+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:43.434+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-02-10T11:10:43.435+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.436+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.437+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.438+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fec4d43]
2026-02-10T11:10:43.444+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:43.448+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@adc839] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.449+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c71d34d] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.449+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@430c53d9] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.450+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.451+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1832374685 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:43.452+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2023186644 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:43.460+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1297562267 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:43.460+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a726ca7] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:10:43.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:43.481+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:43.481+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@667532543 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:43.483+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:43.483+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:10:43.484+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:43.484+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:43.486+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:43.497+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:43.498+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:43.498+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:43.499+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:10:43.505+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a726ca7]
2026-02-10T11:10:43.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c71d34d]
2026-02-10T11:10:43.515+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@430c53d9]
2026-02-10T11:10:43.515+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@adc839]
2026-02-10T11:10:43.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.520+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31aa26a0] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.518+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.519+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.521+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@942961510 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:43.521+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dbc97fa] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.522+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33a2ff9c] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.526+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@303161514 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:43.522+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34d8447d] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.523+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:10:43.525+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1869995707 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:43.532+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:10:43.527+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:10:43.530+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1515896543 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:43.531+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:10:43.533+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:10:43.534+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:10:43.543+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:43.546+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:43.551+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:10:43.551+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:10:43.551+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:10:43.553+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33a2ff9c]
2026-02-10T11:10:43.554+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dbc97fa]
2026-02-10T11:10:43.555+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:43.555+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31aa26a0]
2026-02-10T11:10:43.558+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:43.559+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.563+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ebe084a] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.561+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34d8447d]
2026-02-10T11:10:43.563+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:43.563+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:10:43.564+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@395594528 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:43.565+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.565+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:10:43.566+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:43.566+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:10:43.568+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9a859da] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.570+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:43.577+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:10:43.579+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2133135166 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:43.583+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:10:43.587+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:10:43.606+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:10:43.611+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ebe084a]
2026-02-10T11:10:43.612+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.612+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46f0ea7e] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.613+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@146949810 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:43.615+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:43.615+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:10:43.618+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:43.618+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9a859da]
2026-02-10T11:10:43.619+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.620+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6815c8c4] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.621+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@590883477 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:43.631+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:10:43.637+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:10:43.638+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:43.642+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46f0ea7e]
2026-02-10T11:10:43.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.645+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@456c4fae] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.645+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@68087399 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:43.646+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:10:43.649+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:10:43.651+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6815c8c4]
2026-02-10T11:10:43.651+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:10:43.652+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.654+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33a0a504] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.655+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1966413916 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:43.658+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:43.659+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:43.660+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:10:43.661+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@456c4fae]
2026-02-10T11:10:43.661+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:43.662+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:43.663+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:10:43.664+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33a0a504]
2026-02-10T11:10:43.666+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:43.670+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:43.671+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f09a53c] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:43.673+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1236776796 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:43.674+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:10:43.675+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:10:43.681+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:10:43.682+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f09a53c]
2026-02-10T11:10:43.683+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:43.684+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:10:43.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:52.867+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:10:52.872+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:10:52.872+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-02-10T11:10:52.872+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-02-10T11:10:52.872+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/pending
2026-02-10T11:10:52.872+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-02-10T11:10:52.880+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-02-10T11:10:52.880+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:10:52.880+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:10:52.881+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-02-10T11:10:52.881+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-02-10T11:10:52.882+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-02-10T11:10:52.883+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/me
2026-02-10T11:10:52.884+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:10:52.884+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:10:52.885+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/companies
2026-02-10T11:10:52.885+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/companies/pending
2026-02-10T11:10:52.886+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/me
2026-02-10T11:10:52.886+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-02-10T11:10:52.887+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:10:52.890+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:10:52.892+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-02-10T11:10:52.892+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-02-10T11:10:52.892+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-02-10T11:10:52.892+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-02-10T11:10:52.893+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:10:52.894+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:10:52.894+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-02-10T11:10:52.895+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-02-10T11:10:52.896+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-02-10T11:10:52.897+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-02-10T11:10:52.897+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:10:52.898+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:10:52.899+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-02-10T11:10:52.899+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-02-10T11:10:52.899+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-02-10T11:10:52.899+09:00  INFO 20428 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 9, companyId: 3
2026-02-10T11:10:52.900+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:52.900+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:52.900+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:52.901+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:52.901+09:00  INFO 20428 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 9, companyId: 3
2026-02-10T11:10:52.901+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:52.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60fb8217] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:52.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68327555] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:52.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c29cf20] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:52.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6645da4f] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:52.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:52.903+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75bc3156] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:52.905+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f3f1e7b] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:52.905+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@448980480 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:52.905+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@464571323 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:52.906+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1371636819 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:52.910+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1148543415 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:52.910+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:52.911+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@553951360 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:52.911+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:52.911+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:10:52.911+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@737382403 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:52.911+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:52.912+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:52.912+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:52.913+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:52.914+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:52.914+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:10:52.914+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 9(Long), PENDING(String)
2026-02-10T11:10:52.915+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:52.916+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:52.918+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:52.918+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:52.918+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:10:52.918+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c29cf20]
2026-02-10T11:10:52.918+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:52.918+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-02-10T11:10:52.918+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:52.919+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60fb8217]
2026-02-10T11:10:52.919+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68327555]
2026-02-10T11:10:52.919+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f3f1e7b]
2026-02-10T11:10:52.919+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:52.920+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6645da4f]
2026-02-10T11:10:52.920+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75bc3156]
2026-02-10T11:10:52.920+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:52.920+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:52.921+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:52.921+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=7, userId=9, companyId=3 (truncated)...]
2026-02-10T11:10:52.921+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:52.921+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:52.921+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@753340c1] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:52.922+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:10:52.922+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@423ad37f] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:52.922+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:10:52.922+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3539c719] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:52.923+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:52.925+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1420468670 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:52.926+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@118232756 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:52.926+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:52.926+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:52.927+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@926597471 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:52.931+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:10:52.932+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:52.938+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:52.941+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:10:52.942+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:52.945+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:52.955+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:10:52.958+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:52.958+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:52.958+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@753340c1]
2026-02-10T11:10:52.959+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@423ad37f]
2026-02-10T11:10:52.959+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3539c719]
2026-02-10T11:10:52.960+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:52.961+09:00  INFO 20428 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 9, companyId: 3, role: ADMIN
2026-02-10T11:10:52.961+09:00  INFO 20428 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 9, companyId: 3, role: ADMIN
2026-02-10T11:10:52.962+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:10:52.962+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:52.963+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:52.962+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:52.963+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=9, username=test_exec, passwo (truncated)...]
2026-02-10T11:10:52.964+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=9, username=test_exec, passwo (truncated)...]
2026-02-10T11:10:52.966+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:52.970+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:55.105+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:10:55.107+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:10:55.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-10T11:10:55.110+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:10:55.112+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:10:55.163+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:10:55.171+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:10:55.171+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-10T11:10:55.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:10:55.264+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:10:55.277+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:10:55.277+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:10:55.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies
2026-02-10T11:10:55.282+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:10:55.285+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:10:55.286+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:10:55.286+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:10:55.286+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-10T11:10:55.287+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:10:55.287+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:10:55.287+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:10:55.288+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:10:55.289+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-10T11:10:55.289+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:10:55.291+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:10:55.291+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:10:55.291+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:10:55.291+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-10T11:10:55.295+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:55.292+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:10:55.296+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:55.292+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:55.292+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:10:55.294+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:55.295+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24156660] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:55.296+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fac455d] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:55.297+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@788a2a04] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:55.298+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:55.298+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@147771f2] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:55.299+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4978d18e] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:55.309+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1406392721 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:55.309+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1248456957 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:55.309+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1063334945 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:55.309+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@530840935 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:55.309+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@683670403 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:55.309+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:55.310+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-10T11:10:55.310+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:55.310+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:10:55.311+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:10:55.312+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:55.313+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 9(Long)
2026-02-10T11:10:55.313+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:55.314+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:10:55.315+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:10:55.321+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:55.323+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-10T11:10:55.324+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4978d18e]
2026-02-10T11:10:55.325+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24156660]
2026-02-10T11:10:55.326+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:55.326+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:55.326+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:10:55.326+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:10:55.327+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c6aa199] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:55.327+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:55.327+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@147771f2]
2026-02-10T11:10:55.327+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@788a2a04]
2026-02-10T11:10:55.327+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fac455d]
2026-02-10T11:10:55.328+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@955874253 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:55.328+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-10T11:10:55.328+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:55.328+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:55.329+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:55.329+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:10:55.329+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e7c65ee] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:55.329+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:10:55.330+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:10:55.330+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:10:55.330+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:55.331+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1779728375 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:55.332+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:55.333+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:55.346+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:10:55.350+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:10:55.367+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:10:55.374+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:10:55.376+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:10:55.376+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c6aa199]
2026-02-10T11:10:55.381+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:55.386+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:10:55.392+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:10:55.393+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:10:55.395+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:10:55.429+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e7c65ee]
2026-02-10T11:10:55.430+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:10:55.431+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:55.432+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:10:55.435+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:55.436+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:10:55.445+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:10:55.446+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:10:55.446+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:10:55.450+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:10:55.452+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:10:55.452+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-02-10T11:10:55.460+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:10:55.469+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:10:55.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:55.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:10:55.467+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-02-10T11:10:55.468+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/pending
2026-02-10T11:10:55.469+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:10:55.470+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:55.478+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:10:55.480+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:55.483+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-02-10T11:10:55.487+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:10:55.492+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:10:55.495+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:10:55.492+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dba7f6e] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:55.494+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-02-10T11:10:55.494+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dc6799] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:55.496+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:10:55.496+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-02-10T11:10:55.496+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:10:55.497+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@223685568 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:55.499+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@384442409 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:55.499+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/me
2026-02-10T11:10:55.500+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:10:55.500+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:10:55.500+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/companies
2026-02-10T11:10:55.500+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:10:55.501+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:55.501+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-02-10T11:10:55.502+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:10:55.503+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:10:55.503+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-02-10T11:10:55.505+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:10:55.507+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:55.508+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-02-10T11:10:55.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:55.510+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:10:55.510+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-02-10T11:10:55.511+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-02-10T11:10:55.511+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44d49b79] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:55.511+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:55.514+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-02-10T11:10:55.515+09:00  INFO 20428 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 9, companyId: 3
2026-02-10T11:10:55.516+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1312643557 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:55.516+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49125300] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:55.516+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:55.516+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:55.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:10:55.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:55.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:10:55.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@876438052 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:55.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dc6799]
2026-02-10T11:10:55.518+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27e72ad4] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:55.518+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dba7f6e]
2026-02-10T11:10:55.518+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26754044] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:55.520+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:10:55.520+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:55.521+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:55.522+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1563593369 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:55.522+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:55.532+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:10:55.527+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:55.529+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@695eeedd] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:55.529+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@40449848 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:55.530+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:10:55.531+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:55.533+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:55.544+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@148876480 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:55.545+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:55.546+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44d49b79]
2026-02-10T11:10:55.547+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:55.548+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:10:55.549+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:55.549+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:55.550+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:10:55.554+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:10:55.555+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-02-10T11:10:55.558+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:55.561+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/companies/pending
2026-02-10T11:10:55.568+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:55.568+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:55.568+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:55.570+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-02-10T11:10:55.570+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26754044]
2026-02-10T11:10:55.570+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49125300]
2026-02-10T11:10:55.570+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27e72ad4]
2026-02-10T11:10:55.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-02-10T11:10:55.578+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:10:55.587+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:10:55.587+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:55.588+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:55.589+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:55.590+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-02-10T11:10:55.591+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@695eeedd]
2026-02-10T11:10:55.591+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:10:55.593+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@464df071] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:55.593+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f7c7ebf] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:55.593+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=7, userId=9, companyId=3 (truncated)...]
2026-02-10T11:10:55.594+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:55.595+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:55.595+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:10:55.595+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1426504259 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:55.596+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1412281859 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:55.599+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:55.599+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6757f347] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:55.612+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:10:55.613+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:10:55.613+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:55.620+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:10:55.622+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:10:55.626+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1575648379 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:55.628+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:55.630+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:10:55.634+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:55.635+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:10:55.635+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:55.636+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:10:55.637+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-02-10T11:10:55.638+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:55.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 9(Long), PENDING(String)
2026-02-10T11:10:55.648+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:10:55.649+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a1fd962] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:55.649+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/me
2026-02-10T11:10:55.653+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:10:55.650+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:10:55.650+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@544729776 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:55.653+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:55.653+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-02-10T11:10:55.653+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f7c7ebf]
2026-02-10T11:10:55.653+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:10:55.659+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:55.655+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:10:55.655+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@464df071]
2026-02-10T11:10:55.656+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-02-10T11:10:55.656+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-02-10T11:10:55.658+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:55.660+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69905d35] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:55.662+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:10:55.662+09:00  INFO 20428 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 9, companyId: 3, role: ADMIN
2026-02-10T11:10:55.662+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-02-10T11:10:55.663+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6757f347]
2026-02-10T11:10:55.663+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:10:55.664+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@549412855 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:55.665+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:55.674+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=9, username=test_exec, passwo (truncated)...]
2026-02-10T11:10:55.665+09:00  INFO 20428 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 9, companyId: 3
2026-02-10T11:10:55.669+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:55.670+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:55.671+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:55.676+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:55.678+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:55.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:10:55.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:10:55.689+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:55.694+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71eab4dd] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:55.694+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a1fd962]
2026-02-10T11:10:55.695+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:55.697+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1114398333 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:55.698+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:55.700+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:55.717+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:10:55.719+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:55.718+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:55.720+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:55.746+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69905d35]
2026-02-10T11:10:55.763+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:55.763+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f7cece3] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:55.764+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:55.780+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@351174604 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:55.829+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:10:55.828+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71eab4dd]
2026-02-10T11:10:55.833+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:10:55.834+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:55.835+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6da3467c] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:55.845+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1229671241 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:55.847+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:55.849+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:10:55.852+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:55.852+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f7cece3]
2026-02-10T11:10:55.854+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:55.855+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:10:55.856+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:55.860+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:55.861+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6da3467c]
2026-02-10T11:10:55.862+09:00  INFO 20428 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 9, companyId: 3, role: ADMIN
2026-02-10T11:10:55.862+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:55.863+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=9, username=test_exec, passwo (truncated)...]
2026-02-10T11:10:55.864+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:59.411+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:10:59.411+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:10:59.412+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:10:59.418+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:59.418+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:59.419+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:59.421+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:59.421+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:59.422+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:59.434+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:10:59.435+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:10:59.438+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:10:59.439+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:10:59.441+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:59.442+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:59.442+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:59.442+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:59.444+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:10:59.444+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:59.446+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:10:59.455+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:59.455+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:10:59.457+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:10:59.457+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:10:59.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:10:59.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:10:59.465+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:10:59.468+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:10:59.470+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:10:59.470+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:10:59.471+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:10:59.472+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:59.484+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:10:59.488+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:10:59.491+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-10T11:10:59.488+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:10:59.489+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:10:59.490+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:10:59.490+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:10:59.491+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:10:59.493+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:59.494+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:10:59.494+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:10:59.495+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:10:59.495+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:10:59.496+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.497+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:10:59.497+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.498+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:10:59.498+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:10:59.499+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:10:59.499+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c772f50] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.499+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-10T11:10:59.499+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c2411b1] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.499+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:10:59.500+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:10:59.500+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.501+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:59.502+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.502+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.503+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27dd90a4] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.504+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:59.505+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@627c4e9b] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.506+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c921ee4] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.508+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.508+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@988126977 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:59.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1480666061 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:59.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1922867628 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:59.510+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@771ff867] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.510+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:10:59.511+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:59.511+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2005882129 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:59.511+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:59.511+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@159803130 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:59.512+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:10:59.513+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@538965031 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:59.513+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:59.513+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:10:59.514+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:10:59.514+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:59.514+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-10T11:10:59.516+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:10:59.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:10:59.518+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:10:59.518+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-10T11:10:59.518+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:59.519+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c772f50]
2026-02-10T11:10:59.520+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c2411b1]
2026-02-10T11:10:59.521+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:59.521+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:10:59.521+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:10:59.521+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:59.521+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.522+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27dd90a4]
2026-02-10T11:10:59.522+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c921ee4]
2026-02-10T11:10:59.522+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-10T11:10:59.522+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@627c4e9b]
2026-02-10T11:10:59.523+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:10:59.524+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e970831] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.524+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.524+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.525+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@771ff867]
2026-02-10T11:10:59.525+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:59.526+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1543570772 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:59.526+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:59.526+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@443bdd2c] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.526+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@643e46cc] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.527+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:59.527+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:10:59.527+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:10:59.528+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:59.529+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1264029030 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:59.530+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@485627518 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:59.531+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-10T11:10:59.531+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:59.534+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:10:59.535+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-10T11:10:59.535+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:10:59.535+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:10:59.536+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:59.547+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:10:59.538+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:59.539+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:59.544+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:10:59.549+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:59.549+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:10:59.551+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:10:59.551+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-10T11:10:59.553+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e970831]
2026-02-10T11:10:59.553+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:10:59.553+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-10T11:10:59.553+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:59.553+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:10:59.554+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:59.554+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:59.555+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:59.555+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:10:59.555+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@643e46cc]
2026-02-10T11:10:59.556+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:10:59.558+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:59.557+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:10:59.557+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:10:59.559+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:10:59.558+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:59.558+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-10T11:10:59.559+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:10:59.559+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:59.559+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@443bdd2c]
2026-02-10T11:10:59.560+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.561+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.562+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:59.562+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:59.563+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:59.563+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46ee4e2e] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.563+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12bd2d24] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.563+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:59.565+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:59.567+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:10:59.568+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:10:59.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:59.569+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1592633828 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:59.570+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1277321490 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:59.571+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:10:59.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.575+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:10:59.578+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:10:59.578+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:59.579+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-10T11:10:59.579+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:59.579+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24fa7df2] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.580+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:10:59.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:10:59.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:59.582+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-10T11:10:59.582+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:10:59.582+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1150629191 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:59.583+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:10:59.583+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:10:59.584+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:10:59.585+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-10T11:10:59.585+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:10:59.585+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-10T11:10:59.585+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:59.586+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:10:59.586+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.587+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-10T11:10:59.587+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:10:59.587+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12bd2d24]
2026-02-10T11:10:59.587+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46ee4e2e]
2026-02-10T11:10:59.587+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:10:59.587+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6326b41a] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.590+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:10:59.592+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:59.592+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-10T11:10:59.593+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-10T11:10:59.592+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.592+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:10:59.592+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1245777527 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:59.593+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.593+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24fa7df2]
2026-02-10T11:10:59.594+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5154de4a] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.594+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:59.594+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:10:59.595+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:59.595+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ac31600] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.596+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:59.596+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1711240560 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:59.597+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.597+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:59.597+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:59.598+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1214862428 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:59.599+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-10T11:10:59.599+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:59.600+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a5127fe] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.601+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-10T11:10:59.601+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:10:59.602+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:59.603+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:59.604+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@756343412 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:59.608+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:10:59.606+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:59.606+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:59.608+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:10:59.609+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:59.610+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:10:59.611+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:10:59.611+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6326b41a]
2026-02-10T11:10:59.611+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:59.612+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:10:59.612+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-10T11:10:59.613+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.613+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5154de4a]
2026-02-10T11:10:59.614+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:59.615+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5823275b] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.615+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:59.616+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.617+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:59.617+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:10:59.617+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@250863137 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:59.617+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:10:59.617+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:10:59.617+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a775078] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.618+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.619+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:10:59.619+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:59.619+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a5127fe]
2026-02-10T11:10:59.619+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ac31600]
2026-02-10T11:10:59.620+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25d8835b] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.620+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1294364658 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:59.620+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:59.621+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.621+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:59.621+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:59.621+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:10:59.621+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1256834087 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:59.622+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e3cf17c] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.622+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:10:59.622+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:10:59.626+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-10T11:10:59.626+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:10:59.626+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@953984522 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:59.626+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:59.627+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:59.627+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:59.629+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-10T11:10:59.630+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:59.631+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5823275b]
2026-02-10T11:10:59.633+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:59.633+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:59.634+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:59.634+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.635+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:10:59.636+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-10T11:10:59.643+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4df928f1] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.643+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-10T11:10:59.643+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a775078]
2026-02-10T11:10:59.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:59.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@203540458 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:59.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:59.645+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-10T11:10:59.645+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.645+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:10:59.646+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:10:59.647+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:10:59.647+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25d8835b]
2026-02-10T11:10:59.648+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7733644e] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.648+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-10T11:10:59.648+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:59.653+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:10:59.653+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-10T11:10:59.654+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:59.655+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2009538112 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:59.655+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e3cf17c]
2026-02-10T11:10:59.655+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:59.657+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:59.659+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-10T11:10:59.660+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:59.661+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:10:59.661+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.663+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:59.663+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:10:59.664+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:59.666+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:59.666+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4df928f1]
2026-02-10T11:10:59.667+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b09fdac] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.671+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1918322848 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:59.672+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:59.668+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.675+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bb257e5] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.668+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.670+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:59.670+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.675+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:59.679+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:10:59.677+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2028549773 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:59.678+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12119d7a] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.679+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:59.679+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a3ff09a] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.679+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:59.682+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-10T11:10:59.683+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@148496553 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:59.683+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7733644e]
2026-02-10T11:10:59.683+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1309013900 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:59.683+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:59.684+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:10:59.684+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-10T11:10:59.684+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-10T11:10:59.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:59.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b09fdac]
2026-02-10T11:10:59.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:10:59.686+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-10T11:10:59.686+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c873a05] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.687+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:59.687+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.688+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.690+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1358575823 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:59.691+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-10T11:10:59.691+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5acfba35] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.691+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-10T11:10:59.692+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3feca46c] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.693+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:10:59.693+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bb257e5]
2026-02-10T11:10:59.694+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:10:59.693+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@251648093 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:59.693+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12119d7a]
2026-02-10T11:10:59.694+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:59.695+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:59.694+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1560058066 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:59.694+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:59.695+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:10:59.696+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a3ff09a]
2026-02-10T11:10:59.696+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-10T11:10:59.697+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:59.697+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-10T11:10:59.697+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:10:59.699+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.699+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:10:59.699+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:59.699+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:59.701+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:59.701+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c873a05]
2026-02-10T11:10:59.702+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48ba83f1] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.705+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:59.708+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:59.710+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.711+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2100560220 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:59.712+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:10:59.713+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:10:59.713+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:59.714+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1359d1d5] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.714+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:10:59.714+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:10:59.715+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:10:59.715+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5acfba35]
2026-02-10T11:10:59.715+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3feca46c]
2026-02-10T11:10:59.716+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@369858217 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:59.716+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:10:59.716+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:10:59.717+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:10:59.717+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.717+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.717+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:10:59.718+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:10:59.721+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:10:59.718+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:10:59.718+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b3ef154] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.719+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@787fff68] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.720+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:10:59.721+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:10:59.724+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.724+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2089285140 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:59.725+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@585825231 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:59.725+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:10:59.725+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48ba83f1]
2026-02-10T11:10:59.727+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.727+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62518ad2] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.727+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:59.727+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:59.727+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1359d1d5]
2026-02-10T11:10:59.727+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.728+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fbc6945] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.728+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@355692167 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:59.728+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:59.728+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:59.728+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.728+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bcbfcb2] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.729+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1813108123 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:59.729+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:59.729+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8e55ff6] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.730+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@124928305 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:59.730+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:59.730+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:59.731+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:59.731+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:59.731+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1441787974 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:59.732+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:10:59.732+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:59.732+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@787fff68]
2026-02-10T11:10:59.732+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b3ef154]
2026-02-10T11:10:59.733+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:59.733+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:59.734+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:10:59.734+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.734+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.735+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:59.735+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62518ad2]
2026-02-10T11:10:59.735+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:59.736+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5da32086] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.736+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@669e08d9] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.736+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.737+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fbc6945]
2026-02-10T11:10:59.738+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1520439525 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:59.738+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:10:59.738+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1250357519 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:59.738+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5adc680] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.738+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:59.738+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.738+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:10:59.738+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bcbfcb2]
2026-02-10T11:10:59.739+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:10:59.740+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1808063485 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:59.741+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:10:59.740+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8e55ff6]
2026-02-10T11:10:59.740+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d3ff8e1] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.741+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.741+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:10:59.742+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:59.742+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.742+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@822431810 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:59.742+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2787c6f9] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.742+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:59.743+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fcab858] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.743+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:59.743+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1668120791 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:59.743+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@502422200 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:59.743+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:59.743+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:59.744+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:10:59.744+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:59.744+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:10:59.747+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:59.747+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:10:59.747+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:59.747+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:59.747+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d3ff8e1]
2026-02-10T11:10:59.747+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@669e08d9]
2026-02-10T11:10:59.747+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2787c6f9]
2026-02-10T11:10:59.747+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:10:59.748+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5adc680]
2026-02-10T11:10:59.748+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.748+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.748+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.749+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5da32086]
2026-02-10T11:10:59.749+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.749+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51ad6c55] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.749+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52444976] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.749+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2037cc7e] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.750+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1149913895 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:59.749+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.750+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@176dcf98] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.750+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1398238833 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:59.751+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2090828339 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:59.750+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@966682255 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:59.750+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:10:59.751+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@733f26c4] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.751+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:10:59.752+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:10:59.752+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:10:59.753+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@937205557 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:59.753+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:10:59.754+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:10:59.755+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:10:59.755+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:59.755+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:10:59.756+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:10:59.757+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:59.758+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fcab858]
2026-02-10T11:10:59.758+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:59.759+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:10:59.760+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:59.761+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:10:59.764+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:10:59.765+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:10:59.765+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:10:59.765+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:10:59.766+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.766+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3890cec9] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.766+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1643227461 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:10:59.767+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:10:59.768+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:10:59.769+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:59.769+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:10:59.770+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:10:59.770+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@733f26c4]
2026-02-10T11:10:59.770+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2037cc7e]
2026-02-10T11:10:59.770+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52444976]
2026-02-10T11:10:59.771+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.770+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.771+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:10:59.771+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:59.771+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@245e0863] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.771+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:10:59.771+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f85c91e] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.771+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@176dcf98]
2026-02-10T11:10:59.772+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:10:59.772+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1419897447 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:59.772+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51ad6c55]
2026-02-10T11:10:59.773+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1158074156 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:59.774+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.774+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:59.775+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:59.776+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:59.775+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.775+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:10:59.776+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a757364] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.777+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ca201b2] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.777+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:10:59.780+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:10:59.781+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:10:59.783+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1134394045 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:59.822+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1985418167 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:59.825+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3890cec9]
2026-02-10T11:10:59.825+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:10:59.826+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:59.826+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:10:59.826+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:10:59.827+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:10:59.827+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:59.828+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:59.879+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:10:59.891+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:10:59.938+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:10:59.942+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:10:59.943+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@245e0863]
2026-02-10T11:10:59.943+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f85c91e]
2026-02-10T11:10:59.947+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:10:59.949+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:59.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:10:59.951+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.951+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:10:59.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.954+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:10:59.979+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a757364]
2026-02-10T11:10:59.979+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:10:59.979+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35cb549f] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.980+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ca201b2]
2026-02-10T11:10:59.980+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7700c85d] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.981+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:10:59.981+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.982+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:10:59.983+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1635929941 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:10:59.983+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@380379802 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:10:59.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:10:59.985+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f8d492e] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.986+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:10:59.990+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:10:59.991+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b5d744b] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.991+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:10:59.992+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:10:59.992+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@779281384 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:10:59.993+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35e7e7e7] was not registered for synchronization because synchronization is not active
2026-02-10T11:10:59.993+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:10:59.994+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1462651651 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:10:59.995+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:10:59.995+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:10:59.995+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:10:59.995+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@53994311 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:10:59.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:10:59.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:10:59.997+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:10:59.997+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:10:59.998+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:10:59.999+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:10:59.999+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:10:59.999+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:11:00.002+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.000+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:11:00.001+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35cb549f]
2026-02-10T11:11:00.002+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7700c85d]
2026-02-10T11:11:00.002+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:11:00.002+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49effc2] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.003+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.003+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:00.003+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f8d492e]
2026-02-10T11:11:00.004+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:11:00.005+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1334226471 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:11:00.005+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@756c8553] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.005+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:11:00.005+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:11:00.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b5d744b]
2026-02-10T11:11:00.009+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:11:00.009+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@81787267 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:11:00.010+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:00.012+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35e7e7e7]
2026-02-10T11:11:00.012+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a6ad6e2] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.013+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.013+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:11:00.013+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:11:00.015+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:11:00.025+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:00.027+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@259731640 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:11:00.029+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@598e58ba] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.030+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:11:00.032+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:11:00.032+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:11:00.032+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:11:00.033+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@965837036 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:11:00.034+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:00.040+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:11:00.041+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:11:00.048+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:11:00.057+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:11:00.058+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:11:00.067+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:11:00.091+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:11:00.092+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:11:00.092+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:11:00.093+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:11:00.093+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:11:00.094+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@756c8553]
2026-02-10T11:11:00.094+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a6ad6e2]
2026-02-10T11:11:00.095+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49effc2]
2026-02-10T11:11:00.095+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:11:00.097+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:00.096+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:11:00.096+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.096+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.104+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@214a6fb4] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.097+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:11:00.097+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:11:00.105+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:11:00.098+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:11:00.104+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11d40b4e] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.104+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@756768953 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:11:00.105+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:00.105+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.106+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.107+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@213562 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:11:00.108+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:11:00.117+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:11:00.119+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:11:00.122+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28b919b8] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.122+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59e46be0] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.125+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:11:00.125+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@598e58ba]
2026-02-10T11:11:00.125+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:11:00.127+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1726535635 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:11:00.127+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:11:00.129+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1202591902 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:11:00.129+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:11:00.129+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.130+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:11:00.132+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:11:00.134+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:11:00.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54a77c1c] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.136+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:11:00.137+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:11:00.139+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:11:00.140+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:11:00.140+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2143790522 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:11:00.140+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@214a6fb4]
2026-02-10T11:11:00.141+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:11:00.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:11:00.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:11:00.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.144+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11d40b4e]
2026-02-10T11:11:00.144+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:11:00.144+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:11:00.144+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:11:00.145+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32adbc37] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.146+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:00.147+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:11:00.147+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59e46be0]
2026-02-10T11:11:00.148+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28b919b8]
2026-02-10T11:11:00.148+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1080578585 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:11:00.148+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:11:00.150+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.154+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ac177ba] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.150+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:11:00.151+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.151+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:11:00.151+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:11:00.152+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:00.154+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@276867689 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:11:00.155+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e2b1344] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.156+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:11:00.156+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54a77c1c]
2026-02-10T11:11:00.157+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:11:00.159+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:11:00.162+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:11:00.162+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1849671648 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:11:00.169+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:11:00.165+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:11:00.166+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.169+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:11:00.170+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:11:00.170+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:11:00.172+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:11:00.175+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43bbc14e] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.177+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:11:00.177+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:11:00.180+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@739443385 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:11:00.180+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32adbc37]
2026-02-10T11:11:00.181+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:11:00.181+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:11:00.182+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:11:00.182+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:00.182+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-10T11:11:00.183+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:11:00.185+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:11:00.186+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:11:00.186+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:11:00.187+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:11:00.187+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:11:00.187+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ac177ba]
2026-02-10T11:11:00.188+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:11:00.188+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e2b1344]
2026-02-10T11:11:00.188+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:00.188+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:11:00.189+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:00.190+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:11:00.190+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:00.201+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:11:00.193+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:11:00.194+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:11:00.196+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-10T11:11:00.198+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:11:00.198+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.202+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:00.203+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-10T11:11:00.205+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43bbc14e]
2026-02-10T11:11:00.214+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:00.215+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:11:00.218+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:00.206+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:11:00.207+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:00.210+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d969766] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.232+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1009349601 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:11:00.233+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:11:00.212+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:11:00.213+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:11:00.222+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:11:00.229+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:11:00.231+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:11:00.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:11:00.238+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:11:00.239+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-10T11:11:00.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:11:00.239+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:11:00.242+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.243+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:11:00.244+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-10T11:11:00.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:11:00.247+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:11:00.248+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74394700] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.248+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:11:00.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:11:00.249+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:11:00.249+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:11:00.272+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d969766]
2026-02-10T11:11:00.250+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-10T11:11:00.250+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:11:00.251+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@517683623 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:11:00.271+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:11:00.272+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:11:00.288+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.293+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:11:00.293+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:11:00.294+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-10T11:11:00.297+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.298+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.298+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@eee920] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.299+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:11:00.300+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.301+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@623e6ce6] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.301+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-10T11:11:00.302+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@519374c3] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.302+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@972710908 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:11:00.314+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.316+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a2afd4a] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.316+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2074743355 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:11:00.318+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1075101237 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:11:00.319+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:11:00.319+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ba0333] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.319+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@900347196 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:11:00.321+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:11:00.321+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-10T11:11:00.324+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:11:00.324+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1099203893 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:11:00.324+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:11:00.325+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:11:00.325+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-10T11:11:00.329+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-10T11:11:00.330+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:11:00.332+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-10T11:11:00.333+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-10T11:11:00.333+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:11:00.335+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-10T11:11:00.335+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:11:00.335+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74394700]
2026-02-10T11:11:00.336+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@eee920]
2026-02-10T11:11:00.336+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@519374c3]
2026-02-10T11:11:00.336+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:11:00.336+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-10T11:11:00.336+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@623e6ce6]
2026-02-10T11:11:00.337+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:00.337+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:00.337+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:00.337+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a2afd4a]
2026-02-10T11:11:00.338+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ba0333]
2026-02-10T11:11:00.338+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.338+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-10T11:11:00.338+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:11:00.339+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-10T11:11:00.341+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.342+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:00.342+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d0a31b5] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.343+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:00.343+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:00.343+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:00.344+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27f572cc] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.345+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-10T11:11:00.348+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@482489774 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:11:00.350+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:11:00.357+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:11:00.368+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:11:00.376+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@708316117 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:11:00.378+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:00.380+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:11:00.381+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:11:00.381+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-10T11:11:00.382+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-10T11:11:00.382+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:11:00.387+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:11:00.391+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:11:00.392+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:11:00.393+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:11:00.394+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:11:00.397+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:11:00.398+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-10T11:11:00.399+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:11:00.401+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:11:00.401+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:11:00.406+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-10T11:11:00.409+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:11:00.404+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:11:00.405+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:11:00.405+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-10T11:11:00.413+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:11:00.414+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:11:00.414+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.420+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5689687c] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.416+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:11:00.419+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.419+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-10T11:11:00.421+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@152713886 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:11:00.428+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:11:00.443+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:11:00.444+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:11:00.444+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d13fc1] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.446+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:11:00.446+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:11:00.446+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d0a31b5]
2026-02-10T11:11:00.446+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27f572cc]
2026-02-10T11:11:00.447+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.447+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@528301924 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:11:00.450+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:11:00.451+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:11:00.451+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.451+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.451+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6507f476] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.452+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-10T11:11:00.452+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.452+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d1a8556] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.453+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d0657f] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.453+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@870345377 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:11:00.454+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-10T11:11:00.465+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f4cb37a] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.466+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@297894617 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:11:00.466+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@230626459 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:11:00.466+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-10T11:11:00.467+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1045525390 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:11:00.467+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:11:00.468+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:11:00.469+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-10T11:11:00.469+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-10T11:11:00.472+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:11:00.476+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:11:00.480+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-10T11:11:00.497+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-10T11:11:00.498+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:11:00.518+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5689687c]
2026-02-10T11:11:00.499+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-10T11:11:00.503+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6507f476]
2026-02-10T11:11:00.514+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-10T11:11:00.515+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:11:00.516+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:11:00.521+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.522+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d13fc1]
2026-02-10T11:11:00.522+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:00.523+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f4cb37a]
2026-02-10T11:11:00.525+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d0657f]
2026-02-10T11:11:00.525+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d1a8556]
2026-02-10T11:11:00.525+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ab17c83] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.526+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:00.526+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-10T11:11:00.526+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:00.527+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.527+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.528+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@669395233 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:11:00.528+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-10T11:11:00.529+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:00.532+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-10T11:11:00.533+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@579f50c7] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.534+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d6ebaa6] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.534+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:11:00.537+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:11:00.535+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:00.535+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:00.535+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1441148118 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:11:00.536+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@608675944 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:11:00.543+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:11:00.544+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:11:00.538+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:11:00.542+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:11:00.546+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:11:00.543+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:11:00.544+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-02-10T11:11:00.551+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:11:00.547+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:11:00.553+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:11:00.553+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:11:00.554+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:11:00.554+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:11:00.554+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:11:00.554+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:11:00.555+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.555+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@671533c6] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.556+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@281375213 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:11:00.555+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.556+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:11:00.556+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@97a7004] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.557+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:11:00.557+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@935671660 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:11:00.557+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:11:00.558+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:11:00.561+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-02-10T11:11:00.563+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/monthly-trend
2026-02-10T11:11:00.564+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-02-10T11:11:00.564+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:11:00.564+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-02-10T11:11:00.564+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@579f50c7]
2026-02-10T11:11:00.564+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:11:00.564+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-02-10T11:11:00.564+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:11:00.564+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.565+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d6ebaa6]
2026-02-10T11:11:00.565+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:11:00.565+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:11:00.565+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:11:00.565+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ab17c83]
2026-02-10T11:11:00.565+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59c0d466] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.565+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.565+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@97a7004]
2026-02-10T11:11:00.566+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@671533c6]
2026-02-10T11:11:00.567+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.566+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:11:00.566+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:00.566+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38ff3fb2] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.566+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1962192625 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:11:00.567+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.567+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69289aeb] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.568+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.568+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:11:00.568+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1888225665 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:11:00.569+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:11:00.569+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dd00619] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.569+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@661458699 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:11:00.571+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:11:00.571+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:11:00.570+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50037df4] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.570+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:11:00.570+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:00.571+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:11:00.571+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@670086135 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:11:00.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:11:00.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:11:00.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@74731356 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:11:00.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:11:00.576+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? AND status = 'APPROVED' GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-10T11:11:00.577+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 3(Long)
2026-02-10T11:11:00.593+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:11:00.593+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 3
2026-02-10T11:11:00.593+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:11:00.593+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:11:00.593+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38ff3fb2]
2026-02-10T11:11:00.593+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50037df4]
2026-02-10T11:11:00.593+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59c0d466]
2026-02-10T11:11:00.594+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69289aeb]
2026-02-10T11:11:00.594+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.594+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:11:00.594+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:00.594+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.594+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.595+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@394749f8] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.595+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dd00619]
2026-02-10T11:11:00.595+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-02-10T11:11:00.595+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77762603] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.596+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36d0785e] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.596+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.596+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2021974989 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:11:00.597+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:00.598+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@675987311 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:11:00.598+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@461525933 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:11:00.598+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68640a84] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.599+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:11:00.600+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:11:00.602+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:11:00.602+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@368654687 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:11:00.604+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:11:00.606+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:11:00.607+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:11:00.607+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:11:00.609+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:11:00.615+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:11:00.616+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@394749f8]
2026-02-10T11:11:00.616+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.616+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@efb822c] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.617+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@233837186 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:11:00.617+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:11:00.617+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:11:00.618+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:11:00.618+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:11:00.618+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:11:00.619+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36d0785e]
2026-02-10T11:11:00.619+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77762603]
2026-02-10T11:11:00.619+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68640a84]
2026-02-10T11:11:00.620+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.620+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.620+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:11:00.620+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.621+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2afa0cc0] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.621+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c7c6523] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.621+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@efb822c]
2026-02-10T11:11:00.621+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ae8a6c6] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.622+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@534610761 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:11:00.623+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@712769681 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:11:00.623+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.624+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1108393269 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:11:00.625+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:11:00.625+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:11:00.625+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b42f3a4] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.626+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:11:00.626+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:11:00.626+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:11:00.627+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1241180162 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:11:00.627+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:11:00.629+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:11:00.630+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:11:00.634+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:11:00.634+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:11:00.634+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c7c6523]
2026-02-10T11:11:00.636+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2afa0cc0]
2026-02-10T11:11:00.636+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.636+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.637+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:11:00.637+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:11:00.637+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eec8ba6] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.637+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@213f066] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.638+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ae8a6c6]
2026-02-10T11:11:00.639+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2029347048 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:11:00.638+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b42f3a4]
2026-02-10T11:11:00.638+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1639366181 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:11:00.642+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:11:00.639+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.639+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:11:00.642+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:00.643+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:11:00.643+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ba6a795] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:11:00.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:11:00.647+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1144516273 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:11:00.650+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:11:00.650+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:00.650+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:11:00.663+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:11:00.663+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:11:00.663+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:11:00.669+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ba6a795]
2026-02-10T11:11:00.669+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@213f066]
2026-02-10T11:11:00.670+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.670+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eec8ba6]
2026-02-10T11:11:00.670+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.671+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@672dd590] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.671+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:00.675+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40e09cac] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.676+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1502170351 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:11:00.677+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:11:00.678+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1575867414 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:11:00.678+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:11:00.679+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:00.682+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:11:00.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:11:00.693+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:11:00.702+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:11:00.702+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:11:00.703+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40e09cac]
2026-02-10T11:11:00.703+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@672dd590]
2026-02-10T11:11:00.704+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.704+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.704+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e96850d] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.705+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69a21cea] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.706+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1247243663 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:11:00.706+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1613419803 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:11:00.707+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:11:00.707+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:11:00.707+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:11:00.708+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:11:00.710+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:11:00.710+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:11:00.710+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69a21cea]
2026-02-10T11:11:00.710+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e96850d]
2026-02-10T11:11:00.711+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.711+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:00.711+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52de0e9d] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.711+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1760f0e4] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:00.713+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@727850336 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:11:00.714+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@769962472 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:11:00.714+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:11:00.715+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:11:00.715+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:11:00.715+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:11:00.717+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:11:00.718+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52de0e9d]
2026-02-10T11:11:00.720+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:00.721+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:11:00.721+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:11:00.721+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1760f0e4]
2026-02-10T11:11:00.722+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:00.725+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:00.726+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:11:00.727+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:09.550+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:11:09.551+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:11:09.554+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:11:09.555+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:11:09.556+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:11:09.557+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:11:09.566+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:11:09.569+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:11:09.571+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:11:09.577+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:11:09.585+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:11:09.596+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:11:09.597+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:11:09.603+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:11:09.599+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:11:09.602+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:11:09.602+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:11:09.603+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:11:09.604+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:11:09.604+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:11:09.605+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:11:09.605+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:11:09.607+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:11:09.608+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:11:09.608+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:11:09.608+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:11:09.608+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:11:09.608+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:11:09.609+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:11:09.609+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:11:09.609+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:11:09.609+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:11:09.610+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:11:09.610+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:11:09.611+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:11:09.611+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:11:09.611+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:09.612+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:11:09.612+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:11:09.613+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:11:09.613+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:09.613+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:11:09.613+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23a4e05c] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:09.614+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:11:09.614+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:09.614+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:11:09.614+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1901214d] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:09.615+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:11:09.617+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:11:09.617+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1239403746 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:11:09.617+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64af6062] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:09.618+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:11:09.619+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:11:09.619+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:09.620+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:11:09.620+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1691726260 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:11:09.622+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:11:09.621+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:09.621+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:09.621+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65549fe0] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:09.622+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1478509818 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:11:09.623+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:11:09.624+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76d0b6e0] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:09.624+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:11:09.624+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d2519e2] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:09.624+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:11:09.627+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:11:09.628+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1791095353 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:11:09.628+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:11:09.628+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1359810347 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:11:09.628+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@816480332 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:11:09.629+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:11:09.629+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:11:09.629+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23a4e05c]
2026-02-10T11:11:09.629+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:11:09.630+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:11:09.630+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:11:09.630+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1901214d]
2026-02-10T11:11:09.631+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:11:09.631+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:09.631+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:11:09.632+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:11:09.632+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64af6062]
2026-02-10T11:11:09.632+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:09.634+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:11:09.632+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:11:09.634+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:09.634+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:11:09.634+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20d291eb] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:09.634+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:11:09.634+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d2519e2]
2026-02-10T11:11:09.635+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:09.635+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:11:09.635+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65549fe0]
2026-02-10T11:11:09.636+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@454592152 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:11:09.636+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76d0b6e0]
2026-02-10T11:11:09.637+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:09.638+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:09.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:11:09.638+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:11:09.641+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:09.643+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:11:09.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:09.645+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:09.646+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:11:09.648+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:11:09.648+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:11:09.649+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:11:09.651+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:11:09.652+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:11:09.653+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:11:09.653+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:11:09.654+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:09.659+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:09.662+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:11:09.662+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:11:09.662+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:11:09.663+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:11:09.664+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:11:09.666+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:11:09.667+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:11:09.669+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:11:09.669+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20d291eb]
2026-02-10T11:11:09.670+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:11:09.670+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:11:09.670+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:11:09.670+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:11:09.671+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:09.671+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:09.672+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:11:09.673+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:11:09.674+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:11:09.675+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:11:09.675+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f7bbfdf] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:09.675+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:11:09.675+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:11:09.675+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:09.676+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1967176237 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:11:09.676+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:09.676+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:11:09.678+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:11:09.678+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e4f6b97] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:09.678+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:11:09.679+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:09.680+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:11:09.681+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@840720425 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:11:09.682+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:11:09.682+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5654f64e] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:09.682+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:11:09.684+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:11:09.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1960616191 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:11:09.686+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:09.686+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:11:09.686+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:11:09.687+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f593009] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:09.688+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:11:09.688+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2133723862 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:11:09.689+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:11:09.690+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:11:09.691+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:11:09.691+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:11:09.692+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:11:09.692+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f7bbfdf]
2026-02-10T11:11:09.692+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5654f64e]
2026-02-10T11:11:09.692+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e4f6b97]
2026-02-10T11:11:09.693+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:09.693+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:11:09.693+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:09.693+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:09.693+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f593009]
2026-02-10T11:11:09.693+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:11:09.694+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:11:09.694+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:11:09.694+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:09.695+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:09.695+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:09.695+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:09.696+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:11:09.698+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:32.731+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/payments
2026-02-10T11:11:32.743+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/payments
2026-02-10T11:11:32.761+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/payments
2026-02-10T11:11:32.775+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/payments
2026-02-10T11:11:32.776+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/payments", parameters={}
2026-02-10T11:11:32.796+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPayments()
2026-02-10T11:11:32.797+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:11:32.799+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:11:32.804+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:32.804+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d108460] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:32.815+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1773101288 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:11:32.815+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.PaymentMapper.findByCompanyId    : ==>  Preparing: SELECT p.* FROM payment_tb p INNER JOIN subscription_tb s ON p.subscription_id = s.subscription_id WHERE s.company_id = ? ORDER BY p.payment_date DESC, p.created_at DESC
2026-02-10T11:11:32.817+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.PaymentMapper.findByCompanyId    : ==> Parameters: 3(Long)
2026-02-10T11:11:32.836+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-10T11:11:32.836+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-02-10T11:11:32.839+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-10T11:11:32.841+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.PaymentMapper.findByCompanyId    : <==      Total: 2
2026-02-10T11:11:32.842+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d108460]
2026-02-10T11:11:32.842+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:32.849+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[PaymentDto(paymentId=2, subscriptionId=1, amount=1550 (truncated)...]
2026-02-10T11:11:32.851+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:33.876+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/payments
2026-02-10T11:11:33.903+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/payments
2026-02-10T11:11:33.917+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/payments
2026-02-10T11:11:33.921+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/payments
2026-02-10T11:11:33.927+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/payments", parameters={}
2026-02-10T11:11:33.928+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPayments()
2026-02-10T11:11:33.930+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:11:33.931+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:11:33.933+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:33.934+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a034081] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:33.936+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1227035836 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:11:33.938+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.PaymentMapper.findByCompanyId    : ==>  Preparing: SELECT p.* FROM payment_tb p INNER JOIN subscription_tb s ON p.subscription_id = s.subscription_id WHERE s.company_id = ? ORDER BY p.payment_date DESC, p.created_at DESC
2026-02-10T11:11:33.943+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.PaymentMapper.findByCompanyId    : ==> Parameters: 3(Long)
2026-02-10T11:11:33.946+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-10T11:11:33.949+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-02-10T11:11:33.953+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-10T11:11:33.953+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.PaymentMapper.findByCompanyId    : <==      Total: 2
2026-02-10T11:11:33.954+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a034081]
2026-02-10T11:11:33.954+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:33.956+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[PaymentDto(paymentId=2, subscriptionId=1, amount=1550 (truncated)...]
2026-02-10T11:11:33.958+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:42.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/payments
2026-02-10T11:11:42.577+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/payments
2026-02-10T11:11:42.578+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/payments
2026-02-10T11:11:42.579+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/payments
2026-02-10T11:11:42.579+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/payments", parameters={}
2026-02-10T11:11:42.579+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPayments()
2026-02-10T11:11:42.579+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:11:42.580+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:11:42.580+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:42.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c91c51c] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:42.582+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1200307565 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:11:42.583+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.PaymentMapper.findByCompanyId    : ==>  Preparing: SELECT p.* FROM payment_tb p INNER JOIN subscription_tb s ON p.subscription_id = s.subscription_id WHERE s.company_id = ? ORDER BY p.payment_date DESC, p.created_at DESC
2026-02-10T11:11:42.583+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.PaymentMapper.findByCompanyId    : ==> Parameters: 3(Long)
2026-02-10T11:11:42.585+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-10T11:11:42.586+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-02-10T11:11:42.588+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-10T11:11:42.591+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.PaymentMapper.findByCompanyId    : <==      Total: 2
2026-02-10T11:11:42.591+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c91c51c]
2026-02-10T11:11:42.593+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:42.594+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[PaymentDto(paymentId=2, subscriptionId=1, amount=1550 (truncated)...]
2026-02-10T11:11:42.594+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:43.470+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/payments
2026-02-10T11:11:43.477+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/payments
2026-02-10T11:11:43.478+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/payments
2026-02-10T11:11:43.479+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/payments
2026-02-10T11:11:43.479+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/payments", parameters={}
2026-02-10T11:11:43.479+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPayments()
2026-02-10T11:11:43.480+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:11:43.480+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:11:43.481+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:43.481+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66a99aa9] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:43.483+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@116684788 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:11:43.484+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.PaymentMapper.findByCompanyId    : ==>  Preparing: SELECT p.* FROM payment_tb p INNER JOIN subscription_tb s ON p.subscription_id = s.subscription_id WHERE s.company_id = ? ORDER BY p.payment_date DESC, p.created_at DESC
2026-02-10T11:11:43.485+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.PaymentMapper.findByCompanyId    : ==> Parameters: 3(Long)
2026-02-10T11:11:43.487+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-10T11:11:43.488+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-02-10T11:11:43.493+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-10T11:11:43.493+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.PaymentMapper.findByCompanyId    : <==      Total: 2
2026-02-10T11:11:43.493+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66a99aa9]
2026-02-10T11:11:43.494+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:43.494+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[PaymentDto(paymentId=2, subscriptionId=1, amount=1550 (truncated)...]
2026-02-10T11:11:43.496+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:44.544+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/payments
2026-02-10T11:11:44.549+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/payments
2026-02-10T11:11:44.550+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/payments
2026-02-10T11:11:44.551+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/payments
2026-02-10T11:11:44.552+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/payments", parameters={}
2026-02-10T11:11:44.552+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPayments()
2026-02-10T11:11:44.553+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:11:44.554+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:11:44.559+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:44.560+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f9d03e7] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:44.566+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1981117493 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:11:44.567+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.PaymentMapper.findByCompanyId    : ==>  Preparing: SELECT p.* FROM payment_tb p INNER JOIN subscription_tb s ON p.subscription_id = s.subscription_id WHERE s.company_id = ? ORDER BY p.payment_date DESC, p.created_at DESC
2026-02-10T11:11:44.569+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.PaymentMapper.findByCompanyId    : ==> Parameters: 3(Long)
2026-02-10T11:11:44.579+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-10T11:11:44.584+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-02-10T11:11:44.609+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-10T11:11:44.610+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.PaymentMapper.findByCompanyId    : <==      Total: 2
2026-02-10T11:11:44.611+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f9d03e7]
2026-02-10T11:11:44.612+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:44.612+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[PaymentDto(paymentId=2, subscriptionId=1, amount=1550 (truncated)...]
2026-02-10T11:11:44.613+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:45.160+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/payments
2026-02-10T11:11:45.198+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/payments
2026-02-10T11:11:45.201+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/payments
2026-02-10T11:11:45.206+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/payments
2026-02-10T11:11:45.209+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/payments", parameters={}
2026-02-10T11:11:45.210+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPayments()
2026-02-10T11:11:45.212+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:11:45.213+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:11:45.214+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:45.218+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19a4d043] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:45.222+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@967828272 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:11:45.227+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.PaymentMapper.findByCompanyId    : ==>  Preparing: SELECT p.* FROM payment_tb p INNER JOIN subscription_tb s ON p.subscription_id = s.subscription_id WHERE s.company_id = ? ORDER BY p.payment_date DESC, p.created_at DESC
2026-02-10T11:11:45.228+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.PaymentMapper.findByCompanyId    : ==> Parameters: 3(Long)
2026-02-10T11:11:45.230+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-10T11:11:45.231+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-02-10T11:11:45.235+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-10T11:11:45.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.PaymentMapper.findByCompanyId    : <==      Total: 2
2026-02-10T11:11:45.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19a4d043]
2026-02-10T11:11:45.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:45.237+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[PaymentDto(paymentId=2, subscriptionId=1, amount=1550 (truncated)...]
2026-02-10T11:11:45.239+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:45.704+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/payments
2026-02-10T11:11:45.709+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/payments
2026-02-10T11:11:45.710+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/payments
2026-02-10T11:11:45.711+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/payments
2026-02-10T11:11:45.711+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/payments", parameters={}
2026-02-10T11:11:45.711+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPayments()
2026-02-10T11:11:45.712+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:11:45.713+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:11:45.713+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:45.714+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46d1dc1b] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:45.717+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1479852698 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:11:45.718+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.PaymentMapper.findByCompanyId    : ==>  Preparing: SELECT p.* FROM payment_tb p INNER JOIN subscription_tb s ON p.subscription_id = s.subscription_id WHERE s.company_id = ? ORDER BY p.payment_date DESC, p.created_at DESC
2026-02-10T11:11:45.719+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.PaymentMapper.findByCompanyId    : ==> Parameters: 3(Long)
2026-02-10T11:11:45.722+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-10T11:11:45.725+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-02-10T11:11:45.730+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-10T11:11:45.730+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.PaymentMapper.findByCompanyId    : <==      Total: 2
2026-02-10T11:11:45.731+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46d1dc1b]
2026-02-10T11:11:45.732+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:45.732+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[PaymentDto(paymentId=2, subscriptionId=1, amount=1550 (truncated)...]
2026-02-10T11:11:45.733+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:46.799+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/payments
2026-02-10T11:11:46.803+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/payments
2026-02-10T11:11:46.804+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/payments
2026-02-10T11:11:46.807+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/payments
2026-02-10T11:11:46.809+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/payments", parameters={}
2026-02-10T11:11:46.809+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPayments()
2026-02-10T11:11:46.810+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:11:46.811+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:11:46.812+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:46.813+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@149dc97] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:46.815+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1679700148 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:11:46.816+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.PaymentMapper.findByCompanyId    : ==>  Preparing: SELECT p.* FROM payment_tb p INNER JOIN subscription_tb s ON p.subscription_id = s.subscription_id WHERE s.company_id = ? ORDER BY p.payment_date DESC, p.created_at DESC
2026-02-10T11:11:46.818+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.PaymentMapper.findByCompanyId    : ==> Parameters: 3(Long)
2026-02-10T11:11:46.821+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-10T11:11:46.822+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-02-10T11:11:46.827+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-10T11:11:46.829+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.PaymentMapper.findByCompanyId    : <==      Total: 2
2026-02-10T11:11:46.830+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@149dc97]
2026-02-10T11:11:46.830+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:46.831+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[PaymentDto(paymentId=2, subscriptionId=1, amount=1550 (truncated)...]
2026-02-10T11:11:46.835+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:11:47.664+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/payments
2026-02-10T11:11:47.670+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/payments
2026-02-10T11:11:47.671+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/payments
2026-02-10T11:11:47.672+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/payments
2026-02-10T11:11:47.699+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/payments", parameters={}
2026-02-10T11:11:47.700+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPayments()
2026-02-10T11:11:47.708+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:11:47.714+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:11:47.714+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:11:47.714+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b7c86c4] was not registered for synchronization because synchronization is not active
2026-02-10T11:11:47.718+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1747062170 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:11:47.719+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.PaymentMapper.findByCompanyId    : ==>  Preparing: SELECT p.* FROM payment_tb p INNER JOIN subscription_tb s ON p.subscription_id = s.subscription_id WHERE s.company_id = ? ORDER BY p.payment_date DESC, p.created_at DESC
2026-02-10T11:11:47.725+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.PaymentMapper.findByCompanyId    : ==> Parameters: 3(Long)
2026-02-10T11:11:47.729+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-10T11:11:47.731+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-02-10T11:11:47.733+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-10T11:11:47.733+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.PaymentMapper.findByCompanyId    : <==      Total: 2
2026-02-10T11:11:47.733+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b7c86c4]
2026-02-10T11:11:47.734+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:11:47.735+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[PaymentDto(paymentId=2, subscriptionId=1, amount=1550 (truncated)...]
2026-02-10T11:11:47.736+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:06.363+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-02-10T11:12:06.368+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-02-10T11:12:06.370+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/logout
2026-02-10T11:12:06.371+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-02-10T11:12:06.374+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-02-10T11:12:06.376+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-02-10T11:12:06.387+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiI5IiwidXNlcm5hbWUiOiJ (truncated)...]
2026-02-10T11:12:06.392+09:00  INFO 20428 --- [http-nio-8080-exec-6] SECURITY                                 : LOGOUT userId=9
2026-02-10T11:12:06.395+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:06.397+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-02-10T11:12:06.398+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:09.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-02-10T11:12:09.110+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-02-10T11:12:09.111+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-02-10T11:12:09.111+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-02-10T11:12:09.112+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-02-10T11:12:09.112+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-02-10T11:12:09.113+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_tax, password=1234)]
2026-02-10T11:12:09.114+09:00  INFO 20428 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 로그인 시도 - username: test_tax
2026-02-10T11:12:09.114+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:09.114+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b5e708] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:09.116+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@926438796 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:09.117+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-02-10T11:12:09.118+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_tax(String)
2026-02-10T11:12:09.122+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-02-10T11:12:09.124+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b5e708]
2026-02-10T11:12:09.220+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:09.220+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19328a39] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:09.220+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1988793352 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:09.221+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:12:09.222+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-10T11:12:09.224+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:12:09.225+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19328a39]
2026-02-10T11:12:09.226+09:00  INFO 20428 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 로그인 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3
2026-02-10T11:12:09.226+09:00  INFO 20428 --- [http-nio-8080-exec-2] SECURITY                                 : LOGIN_SUCCESS userId=8 username=test_tax role=TAX_ACCOUNTANT
2026-02-10T11:12:09.226+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:09.227+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=8, username=test_tax, password=n (truncated)...]
2026-02-10T11:12:09.228+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:09.561+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-10T11:12:09.569+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-10T11:12:09.577+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/companies
2026-02-10T11:12:09.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-10T11:12:09.582+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-10T11:12:09.587+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-10T11:12:09.589+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:09.591+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@584f0d88] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:09.632+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1847190052 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:09.635+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-10T11:12:09.636+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 8(Long)
2026-02-10T11:12:09.640+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-10T11:12:09.641+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@584f0d88]
2026-02-10T11:12:09.642+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:09.643+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-10T11:12:09.646+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:09.769+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:12:09.770+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:12:09.771+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:09.774+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:09.774+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:09.775+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:09.786+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:09.793+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:09.788+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:09.788+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:12:09.800+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:09.790+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:12:09.792+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:09.794+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:09.797+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:09.801+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:09.805+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:12:09.813+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:12:09.813+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:09.826+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:12:09.827+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:12:09.813+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:09.813+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:09.814+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:09.814+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:09.827+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-10T11:12:09.827+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:12:09.828+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-10T11:12:09.876+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:09.877+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:09.879+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-10T11:12:09.880+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:09.829+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-10T11:12:09.843+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-10T11:12:09.872+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-10T11:12:09.872+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:09.873+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:12:09.882+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:09.882+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:09.883+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:09.885+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:09.886+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:09.886+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:09.887+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:09.887+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:12:09.889+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:09.890+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:09.891+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-10T11:12:09.891+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75eac12d] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:09.891+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74ce70c5] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:09.892+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-10T11:12:09.892+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-10T11:12:09.892+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:12:09.893+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:09.895+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:09.896+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:09.900+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:09.898+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:09.899+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:09.900+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:09.900+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cdb0c4d] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:09.901+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:09.901+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:09.903+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1807093495 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:09.903+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1624542506 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:09.906+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:09.908+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2122b461] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:09.908+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@307a0f4f] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:09.908+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:12:09.909+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-10T11:12:09.909+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@373fc970] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:09.910+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@101656830 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:09.911+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-10T11:12:09.913+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-10T11:12:09.914+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1867277174 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:09.914+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:09.915+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@521982277 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:12:09.915+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@731897629 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:09.917+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-10T11:12:09.919+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:09.920+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-02-10T11:12:09.920+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-02-10T11:12:09.920+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:12:09.920+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:12:09.923+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-10T11:12:09.924+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-10T11:12:09.924+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74ce70c5]
2026-02-10T11:12:09.925+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75eac12d]
2026-02-10T11:12:09.929+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:09.926+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-10T11:12:09.928+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:09.929+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:09.930+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-10T11:12:09.931+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cdb0c4d]
2026-02-10T11:12:09.931+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:12:09.933+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:09.933+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:09.934+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:09.936+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:12:09.940+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53ebbfc6] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:09.949+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:12:09.942+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:09.949+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2087012365 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:09.949+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:12:09.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:09.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:12:09.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-10T11:12:09.951+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:09.951+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:12:09.951+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:12:09.951+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-02-10T11:12:09.951+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-10T11:12:09.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:09.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:09.953+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2122b461]
2026-02-10T11:12:09.953+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@373fc970]
2026-02-10T11:12:09.953+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@307a0f4f]
2026-02-10T11:12:09.954+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:09.958+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28ce7714] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:09.960+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:09.960+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:09.962+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:09.963+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:09.963+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-10T11:12:09.964+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@183087253 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:09.964+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53ebbfc6]
2026-02-10T11:12:09.964+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24e34bff] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:09.965+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-02, complet (truncated)...]
2026-02-10T11:12:09.966+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:09.966+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:12:09.967+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:09.967+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1901137737 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:09.969+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=1, pendingCount (truncated)...]
2026-02-10T11:12:09.971+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:09.971+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:09.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-10T11:12:09.976+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67a01198] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:09.976+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-10T11:12:09.977+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:09.978+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:09.979+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:09.983+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1765508901 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:09.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-10T11:12:09.986+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:09.986+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55b0d0b0] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:09.994+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:09.994+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-10T11:12:09.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@755386689 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:09.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-10T11:12:09.997+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:09.997+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:09.997+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-02-10T11:12:09.998+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:12:10.001+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:10.003+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:10.009+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28ce7714]
2026-02-10T11:12:10.009+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-10T11:12:10.009+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:12:10.010+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-10T11:12:10.010+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:10.013+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategorySummary          : <==      Total: 1
2026-02-10T11:12:10.018+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24e34bff]
2026-02-10T11:12:10.014+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-10T11:12:10.016+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:10.017+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:12:10.018+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:10.019+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:10.020+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-10T11:12:10.021+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:12:10.023+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:10.024+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:10.025+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식비/회식, totalAmou (truncated)...]
2026-02-10T11:12:10.035+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:10.027+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:10.027+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55b0d0b0]
2026-02-10T11:12:10.027+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67a01198]
2026-02-10T11:12:10.029+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.030+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.040+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.042+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.043+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:10.044+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.045+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36ca96dc] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.051+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-10T11:12:10.057+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1805908204 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:10.052+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c7623e3] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.052+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-10T11:12:10.056+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=1, pendingCount (truncated)...]
2026-02-10T11:12:10.057+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a32888e] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.057+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.058+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-10T11:12:10.059+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@295160690 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:12:10.059+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.060+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:10.060+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1299804289 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:10.062+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:10.064+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-10T11:12:10.065+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:12:10.065+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:10.066+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:10.066+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-10T11:12:10.066+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:12:10.069+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:12:10.069+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-10T11:12:10.069+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:10.070+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:10.073+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:12:10.074+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.076+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:10.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:12:10.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a46e944] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.079+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.079+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:12:10.080+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1843582035 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:10.080+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a6a383d] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.081+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:10.081+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:12:10.081+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-02-10T11:12:10.081+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:12:10.081+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:10.082+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2130099974 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:10.082+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a32888e]
2026-02-10T11:12:10.082+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c7623e3]
2026-02-10T11:12:10.083+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36ca96dc]
2026-02-10T11:12:10.084+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.084+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:10.085+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-10T11:12:10.085+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.086+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.086+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:10.087+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c811ec2] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.091+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-10T11:12:10.091+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3048d65] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.092+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1851b7f9] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.092+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-10T11:12:10.095+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1968567851 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:12:10.093+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1975268459 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:10.094+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:10.095+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1036784499 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:10.096+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-10T11:12:10.096+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:10.102+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-10T11:12:10.096+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:12:10.097+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a46e944]
2026-02-10T11:12:10.097+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-02-10T11:12:10.098+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:10.104+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.108+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-10T11:12:10.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a6a383d]
2026-02-10T11:12:10.112+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:10.113+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-10T11:12:10.113+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategorySummary          : <==      Total: 1
2026-02-10T11:12:10.114+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ad55139] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.114+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:10.115+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.116+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1851b7f9]
2026-02-10T11:12:10.117+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@387223534 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:10.117+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-02, complet (truncated)...]
2026-02-10T11:12:10.117+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:12:10.118+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:10.119+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:10.119+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:10.120+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:12:10.120+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c811ec2]
2026-02-10T11:12:10.120+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:10.120+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:12:10.124+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식비/회식, totalAmou (truncated)...]
2026-02-10T11:12:10.124+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:10.125+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3048d65]
2026-02-10T11:12:10.125+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:10.126+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:12:10.127+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.128+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:10.130+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.133+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:12:10.133+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43cd14d6] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.134+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:12:10.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.136+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35529915] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.136+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:10.141+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@63662703 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:12:10.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:10.147+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ad55139]
2026-02-10T11:12:10.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:12:10.144+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-10T11:12:10.144+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@312100223 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:10.146+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:12:10.147+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:10.148+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.148+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:12:10.149+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.149+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:10.150+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:12:10.150+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:10.150+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fd1dfe6] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.151+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:12:10.152+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:10.152+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:10.152+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:12:10.156+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1878858172 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:10.157+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.157+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:12:10.157+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:10.157+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:12:10.157+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:10.158+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4048d295] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.159+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:10.159+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43cd14d6]
2026-02-10T11:12:10.159+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.159+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:12:10.161+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:10.161+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@459635551 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:10.161+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35529915]
2026-02-10T11:12:10.162+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.162+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c0e78d2] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.163+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.164+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:12:10.165+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:10.166+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b522aad] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.166+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1376549407 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:10.167+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dad4d2b] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.167+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:12:10.169+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@776681342 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:10.167+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-10T11:12:10.168+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:12:10.168+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1620245685 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:12:10.169+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:10.169+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fd1dfe6]
2026-02-10T11:12:10.169+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:12:10.170+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:10.170+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:10.171+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:10.172+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.174+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-10T11:12:10.174+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:10.175+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:12:10.176+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c12a5dc] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.176+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:12:10.184+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1571650903 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:10.184+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.185+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4048d295]
2026-02-10T11:12:10.185+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:10.185+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:12:10.185+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:10.186+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:10.187+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:10.189+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dad4d2b]
2026-02-10T11:12:10.190+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:12:10.190+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c0e78d2]
2026-02-10T11:12:10.190+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:12:10.191+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:10.197+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:10.198+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:12:10.207+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.207+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:10.207+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b522aad]
2026-02-10T11:12:10.208+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:10.210+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:12:10.211+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:12:10.214+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46ce7d98] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.217+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.218+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.218+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c12a5dc]
2026-02-10T11:12:10.221+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:10.224+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:12:10.225+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1494832507 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:10.228+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-10T11:12:10.234+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48f83208] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.234+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.243+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:12:10.243+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:10.243+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@312835832 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:12:10.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2acd93a6] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.249+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.249+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:10.250+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:10.250+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:10.250+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1940451174 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:10.250+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@546479a2] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.251+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:12:10.253+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:10.253+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:10.260+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:10.253+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1100997288 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:10.254+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.261+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:12:10.262+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:10.264+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a421b50] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.266+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-10T11:12:10.267+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46ce7d98]
2026-02-10T11:12:10.267+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:12:10.267+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:12:10.268+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@780235220 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:10.268+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.268+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48f83208]
2026-02-10T11:12:10.270+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2acd93a6]
2026-02-10T11:12:10.274+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:10.274+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:12:10.275+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33132d17] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.276+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.277+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.277+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:10.277+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@546479a2]
2026-02-10T11:12:10.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@100971600 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:10.279+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:10.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e0a6d99] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a310b1a] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.279+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:10.279+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:12:10.279+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1206615586 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:12:10.280+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@203944281 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:10.283+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:10.283+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:10.283+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:10.284+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:10.293+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:10.293+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:10.295+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:10.295+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a421b50]
2026-02-10T11:12:10.337+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:12:10.345+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.376+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33132d17]
2026-02-10T11:12:10.376+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7eda724d] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.376+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.376+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1959296605 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:10.377+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:10.377+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:10.442+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d1fc32f] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.451+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:10.456+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a310b1a]
2026-02-10T11:12:10.456+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e0a6d99]
2026-02-10T11:12:10.457+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2010002958 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:10.457+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:10.458+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:10.458+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.459+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:10.460+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:12:10.493+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31907d33] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.493+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:10.494+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:10.494+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:10.495+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@753645629 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:12:10.495+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7eda724d]
2026-02-10T11:12:10.498+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.499+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b3a09e1] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.500+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@383732945 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:10.500+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:10.498+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:10.503+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:10.507+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:10.518+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:12:10.518+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:12:10.518+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:10.519+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31907d33]
2026-02-10T11:12:10.521+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b3a09e1]
2026-02-10T11:12:10.522+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d1fc32f]
2026-02-10T11:12:10.522+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.523+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.523+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.523+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a43493a] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.524+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6582549c] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.524+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d8c65c7] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.524+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2022235300 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:12:10.524+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@245116108 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:10.525+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1319749090 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:10.525+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:10.526+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:10.544+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:10.545+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:10.545+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:10.546+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:10.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.575+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:10.582+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:10.582+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:12:10.582+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:10.586+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6582549c]
2026-02-10T11:12:10.586+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d8c65c7]
2026-02-10T11:12:10.586+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a43493a]
2026-02-10T11:12:10.589+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.590+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.597+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.607+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.622+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.636+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:10.643+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.646+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:12:10.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:10.645+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.645+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54bbe278] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.651+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.645+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41c7d0c4] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.647+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.647+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:10.651+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.661+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-10T11:12:10.651+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@602565319 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:10.653+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-10T11:12:10.653+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1340815206 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:10.669+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:10.659+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:10.659+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.665+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.666+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:10.668+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.669+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:10.670+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-10T11:12:10.674+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-10T11:12:10.674+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:10.677+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:10.678+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:10.680+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:10.680+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.681+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-10T11:12:10.682+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-10T11:12:10.683+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:12:10.686+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:10.687+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:10.687+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:10.692+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-10T11:12:10.692+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-10T11:12:10.693+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:10.696+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:10.699+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:10.700+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:12:10.703+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:10.707+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:10.708+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.708+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.708+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41c7d0c4]
2026-02-10T11:12:10.709+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54bbe278]
2026-02-10T11:12:10.709+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:10.709+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:10.710+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@616bd54a] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.717+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7070a46e] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.718+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:10.718+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.718+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.719+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.721+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1739681672 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:10.722+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:12:10.723+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@641e88af] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.724+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@720357ed] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.725+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@368b5596] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.725+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-02-10T11:12:10.726+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:10.727+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1874665078 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:10.727+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@279203843 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:10.729+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@98404710 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:10.729+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1948316038 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:10.731+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-10T11:12:10.731+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:10.736+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:10.732+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.733+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-10T11:12:10.733+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:12:10.733+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-10T11:12:10.739+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-10T11:12:10.741+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-10T11:12:10.742+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-10T11:12:10.746+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.746+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-10T11:12:10.748+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:10.749+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:10.749+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-10T11:12:10.749+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-10T11:12:10.749+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@641e88af]
2026-02-10T11:12:10.749+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@616bd54a]
2026-02-10T11:12:10.750+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:10.751+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:10.751+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:10.755+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:10.755+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:12:10.756+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=1, pendingCount (truncated)...]
2026-02-10T11:12:10.757+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.757+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-02-10T11:12:10.757+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:12:10.757+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-02-10T11:12:10.759+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:10.759+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:10.759+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48a9a51c] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.759+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@368b5596]
2026-02-10T11:12:10.762+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@720357ed]
2026-02-10T11:12:10.763+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7070a46e]
2026-02-10T11:12:10.764+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.768+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.775+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-10T11:12:10.769+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1762789165 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:10.770+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:10.770+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.773+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:10.776+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.776+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-10T11:12:10.776+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-02-10T11:12:10.776+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-02, complet (truncated)...]
2026-02-10T11:12:10.776+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ddec7e4] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.777+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-10T11:12:10.777+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:10.778+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.779+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-10T11:12:10.779+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:10.780+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1166688653 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:10.781+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:10.782+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:12:10.782+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:10.784+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-10T11:12:10.784+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:10.786+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.787+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.788+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-10T11:12:10.790+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-10T11:12:10.791+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-10T11:12:10.791+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@712f95da] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.792+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-10T11:12:10.792+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:10.798+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:10.799+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@322011477 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:10.799+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategorySummary          : <==      Total: 1
2026-02-10T11:12:10.799+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.799+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-10T11:12:10.800+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:10.801+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:12:10.803+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:10.803+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ddec7e4]
2026-02-10T11:12:10.805+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:10.805+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48a9a51c]
2026-02-10T11:12:10.805+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.806+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-10T11:12:10.806+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:10.806+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:10.807+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-10T11:12:10.809+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:10.809+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ec623e3] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.809+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:10.810+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식비/회식, totalAmou (truncated)...]
2026-02-10T11:12:10.811+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:10.812+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:10.812+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=1, pendingCount (truncated)...]
2026-02-10T11:12:10.812+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1161186262 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:10.813+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:10.813+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:10.818+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.815+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:10.816+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@712f95da]
2026-02-10T11:12:10.816+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:10.818+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-10T11:12:10.820+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.821+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@572f23a7] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.823+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.823+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.826+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-10T11:12:10.828+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-10T11:12:10.829+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@125156065 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:12:10.829+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61a06390] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.830+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5709f526] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.831+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:10.831+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:12:10.831+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1166336517 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:10.831+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1510292312 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:10.832+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:10.834+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-10T11:12:10.834+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-10T11:12:10.834+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:10.835+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:12:10.836+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-02-10T11:12:10.843+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ec623e3]
2026-02-10T11:12:10.837+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-10T11:12:10.839+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:10.840+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:12:10.843+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.844+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:10.855+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@572f23a7]
2026-02-10T11:12:10.855+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dfd48c8] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.855+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-10T11:12:10.856+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.856+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1035400744 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:10.857+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:10.858+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2daf58c2] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.858+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:10.873+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@62088395 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:12:10.873+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:10.874+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-10T11:12:10.875+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-10T11:12:10.879+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategorySummary          : <==      Total: 1
2026-02-10T11:12:10.879+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:10.879+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:10.881+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dfd48c8]
2026-02-10T11:12:10.880+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2daf58c2]
2026-02-10T11:12:10.881+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5709f526]
2026-02-10T11:12:10.881+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.883+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2af6c240] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.882+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:10.882+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.886+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1829401822 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:10.886+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식비/회식, totalAmou (truncated)...]
2026-02-10T11:12:10.887+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-02-10T11:12:10.889+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2996a6d0] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.889+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:10.890+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61a06390]
2026-02-10T11:12:10.890+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:10.890+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@825153025 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:10.893+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:10.892+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:10.900+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:10.892+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:10.901+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-02, complet (truncated)...]
2026-02-10T11:12:10.903+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:10.920+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:12:10.920+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:10.922+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2996a6d0]
2026-02-10T11:12:10.922+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2af6c240]
2026-02-10T11:12:10.923+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.924+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.924+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e7c4cb1] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.924+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25b00076] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.926+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@314629000 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:10.926+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@969417282 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:10.926+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:10.927+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:10.927+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:10.933+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:10.945+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:10.947+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e7c4cb1]
2026-02-10T11:12:10.949+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:12:10.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.951+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25b00076]
2026-02-10T11:12:10.951+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ea79e7] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.951+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1822401679 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:10.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e438deb] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:10.953+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2069206501 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:10.954+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:10.954+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:10.954+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:10.962+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:10.962+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e438deb]
2026-02-10T11:12:10.965+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.962+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:12:10.966+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5493c4a5] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.967+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ea79e7]
2026-02-10T11:12:10.967+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@377300745 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:10.967+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.967+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:10.968+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@615f11f3] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.970+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@841578878 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:10.970+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:10.970+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:10.971+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:10.977+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:10.978+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:12:10.983+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@615f11f3]
2026-02-10T11:12:10.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5493c4a5]
2026-02-10T11:12:10.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:10.985+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:10.985+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:12:10.985+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@798810c1] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:10.986+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:10.986+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@863262137 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:10.987+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:10.999+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:11.017+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:11.019+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@798810c1]
2026-02-10T11:12:11.020+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:11.023+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:12:11.023+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:11.174+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:11.175+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:11.175+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:11.177+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:11.177+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:11.215+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:11.216+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:11.216+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:11.232+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:11.233+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:11.235+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-10T11:12:11.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-10T11:12:11.243+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:11.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-10T11:12:11.237+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-10T11:12:11.240+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-10T11:12:11.243+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:11.243+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:11.244+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:11.244+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:11.244+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:11.244+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:11.245+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-10T11:12:11.245+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:12:11.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:11.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:11.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-10T11:12:11.250+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:11.250+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-10T11:12:11.251+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:12:11.251+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-10T11:12:11.251+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:11.252+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:11.252+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:11.253+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:11.253+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:11.257+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:11.258+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:11.259+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:11.259+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62253d51] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:11.259+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:11.260+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:11.260+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a39f5a0] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:11.260+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:11.261+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2070706287 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:11.261+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:11.261+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21cf0e1d] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:11.262+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1699683903 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:11.262+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f310cfa] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:11.262+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:11.264+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:11.262+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ec8b624] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:11.262+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1987132334 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:12:11.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-02-10T11:12:11.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@770656879 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:11.267+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@931111204 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:11.269+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-10T11:12:11.270+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:11.274+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-10T11:12:11.274+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:12:11.274+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-10T11:12:11.275+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62253d51]
2026-02-10T11:12:11.275+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-10T11:12:11.277+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-10T11:12:11.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-10T11:12:11.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:11.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-10T11:12:11.281+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@398c849b] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:11.282+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-02-10T11:12:11.282+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:12:11.282+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a39f5a0]
2026-02-10T11:12:11.283+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1921575246 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:11.283+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21cf0e1d]
2026-02-10T11:12:11.284+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-02-10T11:12:11.284+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f310cfa]
2026-02-10T11:12:11.284+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:11.284+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:11.284+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:11.284+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ec8b624]
2026-02-10T11:12:11.285+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:11.286+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=1, pendingCount (truncated)...]
2026-02-10T11:12:11.286+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:11.286+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-10T11:12:11.287+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:11.287+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d969472] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:11.288+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:11.291+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:11.291+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-02, complet (truncated)...]
2026-02-10T11:12:11.294+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@176621542 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:11.297+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:11.298+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-10T11:12:11.301+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-10T11:12:11.303+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:11.307+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@398c849b]
2026-02-10T11:12:11.309+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategorySummary          : <==      Total: 1
2026-02-10T11:12:11.310+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:11.310+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d969472]
2026-02-10T11:12:11.310+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5095e176] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:11.311+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:11.311+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@232787875 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:11.311+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식비/회식, totalAmou (truncated)...]
2026-02-10T11:12:11.313+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:11.314+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:11.316+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:11.323+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:12:11.323+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5095e176]
2026-02-10T11:12:11.323+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:11.324+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28fbe672] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:11.324+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1461337162 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:11.325+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:11.325+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:11.327+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:11.327+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28fbe672]
2026-02-10T11:12:11.327+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:11.328+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58b11b91] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:11.328+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@789491331 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:11.329+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:11.333+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:11.335+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:12:11.336+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58b11b91]
2026-02-10T11:12:11.337+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:11.337+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26959423] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:11.337+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1982365427 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:11.338+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:11.338+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-10T11:12:11.340+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:11.341+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26959423]
2026-02-10T11:12:11.341+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:11.342+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:12:11.342+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:14.502+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:12:14.505+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-10T11:12:14.506+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:12:14.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:12:14.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:12:14.585+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:12:14.586+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-10T11:12:14.586+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:12:14.591+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:12:14.592+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/companies
2026-02-10T11:12:14.592+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:12:14.592+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:12:14.595+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-10T11:12:14.596+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:12:14.597+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:12:14.599+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-10T11:12:14.601+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:14.601+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:12:14.602+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-10T11:12:14.603+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1eb0e6a5] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:14.604+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:14.605+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:14.607+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a640db3] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:14.610+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a4fd12] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:14.612+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2127760162 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:14.613+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:12:14.615+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@446092348 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:14.615+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@374325107 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:14.618+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-10T11:12:14.619+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-10T11:12:14.619+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:12:14.621+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 8(Long)
2026-02-10T11:12:14.624+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-10T11:12:14.629+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-10T11:12:14.629+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:12:14.629+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:12:14.632+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a4fd12]
2026-02-10T11:12:14.633+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1eb0e6a5]
2026-02-10T11:12:14.633+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a640db3]
2026-02-10T11:12:14.634+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:14.634+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:14.635+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:14.635+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-10T11:12:14.636+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:12:14.636+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:12:14.637+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:14.641+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:14.645+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:14.690+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:12:14.692+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:12:14.693+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:12:14.695+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:12:14.698+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:12:14.706+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:12:14.715+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:14.724+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@190b8569] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:14.725+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1379498490 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:14.731+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:12:14.735+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-10T11:12:14.739+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:12:14.740+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@190b8569]
2026-02-10T11:12:14.740+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:14.740+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:12:14.741+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:14.967+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:12:14.969+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-02-10T11:12:14.972+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-02-10T11:12:14.987+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-10T11:12:14.974+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-10T11:12:14.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-02-10T11:12:14.976+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-02-10T11:12:14.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-02-10T11:12:14.989+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-02-10T11:12:14.991+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:12:14.997+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-02-10T11:12:15.000+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-02-10T11:12:15.012+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-10T11:12:15.013+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-02-10T11:12:15.002+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-10T11:12:15.016+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-02-10T11:12:15.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-02-10T11:12:15.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-02-10T11:12:15.009+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-02-10T11:12:15.014+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:12:15.017+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-02-10T11:12:15.019+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-10T11:12:15.027+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-10T11:12:15.025+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-10T11:12:15.026+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-10T11:12:15.026+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:12:15.027+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-02-10T11:12:15.027+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-02-10T11:12:15.028+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-02-10T11:12:15.030+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-10T11:12:15.030+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-10T11:12:15.030+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:12:15.031+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-02-10T11:12:15.031+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-02-10T11:12:15.031+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-10T11:12:15.031+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-10T11:12:15.031+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-10T11:12:15.032+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:12:15.032+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-10T11:12:15.032+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-10T11:12:15.032+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-02-10T11:12:15.032+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:12:15.033+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:12:15.033+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:12:15.034+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.034+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.034+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-02-10T11:12:15.035+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-10T11:12:15.035+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-10T11:12:15.035+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:15.036+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.038+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.038+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-10T11:12:15.039+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.039+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.041+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c9219b2] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:15.042+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:15.044+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:15.044+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.045+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.045+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.046+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73380a06] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:15.046+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5afaeba2] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:15.047+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.047+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@984071296 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:12:15.048+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:15.048+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:15.048+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1279672494 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:15.049+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@599179659 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:15.049+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:15.050+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:12:15.050+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4aaacd9] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:15.050+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@152faaf8] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:15.050+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ?
2026-02-10T11:12:15.051+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-10T11:12:15.051+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29346368] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:15.052+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-10T11:12:15.052+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@478463171 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:15.053+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@998124580 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:15.053+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long)
2026-02-10T11:12:15.053+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long)
2026-02-10T11:12:15.055+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:12:15.056+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:12:15.057+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@785462296 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:15.058+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-10T11:12:15.059+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:12:15.059+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-10T11:12:15.059+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-10T11:12:15.059+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ?
2026-02-10T11:12:15.060+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 16
2026-02-10T11:12:15.060+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c9219b2]
2026-02-10T11:12:15.060+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73380a06]
2026-02-10T11:12:15.062+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5afaeba2]
2026-02-10T11:12:15.062+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long)
2026-02-10T11:12:15.062+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:15.062+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:12:15.062+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:12:15.062+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:15.063+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:15.064+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:12:15.064+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@152faaf8]
2026-02-10T11:12:15.065+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4aaacd9]
2026-02-10T11:12:15.065+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=16, pendingCoun (truncated)...]
2026-02-10T11:12:15.065+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-10T11:12:15.065+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-10T11:12:15.066+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:15.066+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:15.066+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:15.067+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:15.068+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29346368]
2026-02-10T11:12:15.069+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:15.069+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69c832fa] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:15.071+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-02-10T11:12:15.073+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e2c50e] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:15.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-02-10T11:12:15.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:15.085+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-02-10T11:12:15.086+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@30948689 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:15.093+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-10T11:12:15.093+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@763325069 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:15.093+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=16, pendingCoun (truncated)...]
2026-02-10T11:12:15.093+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-10T11:12:15.094+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-10T11:12:15.094+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-10T11:12:15.095+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-02-10T11:12:15.095+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-10T11:12:15.095+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:15.095+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-02-10T11:12:15.099+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-02-10T11:12:15.096+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-02-10T11:12:15.096+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), APPROVED(String)
2026-02-10T11:12:15.096+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-02-10T11:12:15.098+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), APPROVED(String)
2026-02-10T11:12:15.099+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:12:15.099+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-10T11:12:15.100+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-02-10T11:12:15.100+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-10T11:12:15.103+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.103+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:12:15.103+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-10T11:12:15.104+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.105+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-02-10T11:12:15.105+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.105+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:12:15.106+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.106+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-02-10T11:12:15.107+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.108+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69c832fa]
2026-02-10T11:12:15.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:15.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:12:15.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e2c50e]
2026-02-10T11:12:15.110+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:15.110+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:15.110+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b798f20] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:15.110+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:12:15.111+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:15.111+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:15.111+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@134247c] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:15.111+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-02-10T11:12:15.111+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@441559875 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:15.112+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:15.112+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78a29c2d] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:15.112+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-02-10T11:12:15.112+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1154603518 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:15.113+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:15.113+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-10T11:12:15.114+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15173b8b] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:15.114+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@342446410 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:15.115+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-10T11:12:15.116+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:15.116+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-02-10T11:12:15.116+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long)
2026-02-10T11:12:15.117+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1762806780 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:15.117+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-10T11:12:15.120+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long)
2026-02-10T11:12:15.121+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-10T11:12:15.122+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-10T11:12:15.125+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:12:15.126+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long)
2026-02-10T11:12:15.128+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 16
2026-02-10T11:12:15.129+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-02-10T11:12:15.131+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-10T11:12:15.131+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 3
2026-02-10T11:12:15.131+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-10T11:12:15.132+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b798f20]
2026-02-10T11:12:15.132+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-02-10T11:12:15.132+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-10T11:12:15.132+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@134247c]
2026-02-10T11:12:15.133+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:15.134+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-10T11:12:15.134+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 3
2026-02-10T11:12:15.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-10T11:12:15.134+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-10T11:12:15.134+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:12:15.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:15.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78a29c2d]
2026-02-10T11:12:15.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15173b8b]
2026-02-10T11:12:15.138+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:15.136+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-10T11:12:15.136+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:15.136+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-02-10T11:12:15.137+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:15.138+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.140+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-10T11:12:15.140+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.141+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:15.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-02-10T11:12:15.144+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-02-10T11:12:15.145+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:15.145+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:15.146+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.148+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-02-10T11:12:15.149+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-10T11:12:15.150+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:15.155+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c2f45c7] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:15.162+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1077768074 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:12:15.157+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-10T11:12:15.158+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:15.164+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48e784b9] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:15.158+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-02-10T11:12:15.159+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-10T11:12:15.160+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-02-10T11:12:15.163+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ?
2026-02-10T11:12:15.164+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-10T11:12:15.164+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1430328727 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:15.165+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-02-10T11:12:15.166+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-02-10T11:12:15.170+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-10T11:12:15.171+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long)
2026-02-10T11:12:15.172+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-10T11:12:15.173+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:12:15.175+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-10T11:12:15.176+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-02-10T11:12:15.176+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-02-10T11:12:15.177+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:12:15.179+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-10T11:12:15.179+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.179+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-10T11:12:15.181+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-02-10T11:12:15.190+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-10T11:12:15.182+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-10T11:12:15.183+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.184+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.192+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.192+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.193+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-10T11:12:15.204+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:15.206+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:12:15.212+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.213+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.214+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.214+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c2f45c7]
2026-02-10T11:12:15.215+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30abcdce] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:15.217+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48e784b9]
2026-02-10T11:12:15.221+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:15.223+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:15.223+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:15.224+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:15.224+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1127587021 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:15.224+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:15.225+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42d3c6b8] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:15.227+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4205adf1] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:15.228+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3239971] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:15.229+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=16, pendingCoun (truncated)...]
2026-02-10T11:12:15.229+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-10T11:12:15.230+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ce7e92b] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:15.231+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@292606276 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:15.233+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1453275764 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:15.234+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@735323149 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:15.234+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:15.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long)
2026-02-10T11:12:15.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1221681218 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:15.239+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-10T11:12:15.240+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), APPROVED(String)
2026-02-10T11:12:15.237+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-10T11:12:15.237+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-10T11:12:15.238+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:12:15.239+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-02-10T11:12:15.243+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-10T11:12:15.242+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long)
2026-02-10T11:12:15.242+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long)
2026-02-10T11:12:15.244+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-10T11:12:15.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-02-10T11:12:15.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-02-10T11:12:15.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-10T11:12:15.247+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.247+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.248+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:15.248+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@304c1ff2] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:15.248+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@401311316 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:12:15.249+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ?
2026-02-10T11:12:15.249+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long)
2026-02-10T11:12:15.254+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:12:15.254+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 3
2026-02-10T11:12:15.254+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3239971]
2026-02-10T11:12:15.255+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4205adf1]
2026-02-10T11:12:15.255+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:15.255+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 3
2026-02-10T11:12:15.255+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:15.255+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52c40b69] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:15.256+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42d3c6b8]
2026-02-10T11:12:15.257+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1295247441 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:15.256+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-02-10T11:12:15.257+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:15.257+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-10T11:12:15.257+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-02-10T11:12:15.257+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:15.258+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), APPROVED(String)
2026-02-10T11:12:15.259+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:15.260+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-02-10T11:12:15.267+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 16
2026-02-10T11:12:15.269+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30abcdce]
2026-02-10T11:12:15.269+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:15.269+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-10T11:12:15.270+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-10T11:12:15.270+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-02-10T11:12:15.271+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:15.272+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-02-10T11:12:15.274+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-02-10T11:12:15.274+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ce7e92b]
2026-02-10T11:12:15.274+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-10T11:12:15.275+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:15.276+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-02-10T11:12:15.276+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.276+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:15.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:15.279+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:15.280+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@692f74dc] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:15.280+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1226357313 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:15.281+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-10T11:12:15.281+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-10T11:12:15.281+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@304c1ff2]
2026-02-10T11:12:15.281+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long)
2026-02-10T11:12:15.281+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:15.282+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=16, pendingCoun (truncated)...]
2026-02-10T11:12:15.282+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:15.293+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-02-10T11:12:15.293+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52c40b69]
2026-02-10T11:12:15.293+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:15.298+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 16
2026-02-10T11:12:15.301+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-02-10T11:12:15.301+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@692f74dc]
2026-02-10T11:12:15.302+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:15.306+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:15.317+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-10T11:12:15.318+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:23.020+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-02-10T11:12:23.026+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-02-10T11:12:23.033+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/logout
2026-02-10T11:12:23.035+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-02-10T11:12:23.038+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-02-10T11:12:23.041+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-02-10T11:12:23.051+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiI4IiwidXNlcm5hbWUiOiJ (truncated)...]
2026-02-10T11:12:23.060+09:00  INFO 20428 --- [http-nio-8080-exec-9] SECURITY                                 : LOGOUT userId=8
2026-02-10T11:12:23.125+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:23.129+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-02-10T11:12:23.140+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:26.620+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-02-10T11:12:26.622+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-02-10T11:12:26.622+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-02-10T11:12:26.623+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-02-10T11:12:26.623+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-02-10T11:12:26.623+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-02-10T11:12:26.624+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_exec, password=1234)]
2026-02-10T11:12:26.624+09:00  INFO 20428 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 로그인 시도 - username: test_exec
2026-02-10T11:12:26.625+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:26.625+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@190d2098] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:26.627+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1508615250 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:26.628+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-02-10T11:12:26.628+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_exec(String)
2026-02-10T11:12:26.631+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-02-10T11:12:26.631+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@190d2098]
2026-02-10T11:12:26.729+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:26.729+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@651fa882] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:26.730+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1346489176 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:26.730+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:12:26.731+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:12:26.733+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:12:26.733+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@651fa882]
2026-02-10T11:12:26.734+09:00  INFO 20428 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 로그인 성공 - userId: 9, role: ADMIN, companyId: 3
2026-02-10T11:12:26.734+09:00  INFO 20428 --- [http-nio-8080-exec-6] SECURITY                                 : LOGIN_SUCCESS userId=9 username=test_exec role=ADMIN
2026-02-10T11:12:26.735+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:26.736+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=9, username=test_exec, password= (truncated)...]
2026-02-10T11:12:26.737+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:27.094+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-10T11:12:27.097+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-10T11:12:27.098+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies
2026-02-10T11:12:27.099+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-10T11:12:27.099+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-10T11:12:27.101+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-10T11:12:27.102+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:27.103+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d1d9c8a] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:27.127+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@898963158 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:27.132+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-10T11:12:27.133+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 9(Long)
2026-02-10T11:12:27.153+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-10T11:12:27.163+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d1d9c8a]
2026-02-10T11:12:27.169+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:27.175+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-10T11:12:27.178+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:27.855+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:12:27.856+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:12:27.857+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:12:27.878+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:27.859+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:12:27.860+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:12:27.862+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:27.878+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:27.880+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:27.880+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:27.882+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:27.887+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:12:27.894+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:12:27.897+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:12:27.899+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:12:27.903+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:12:27.908+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:12:27.910+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:27.913+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:27.913+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:27.914+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:27.914+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:27.915+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:27.917+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:12:27.929+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:12:27.929+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:12:27.930+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:12:27.931+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:27.932+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:12:27.932+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:12:27.935+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:12:27.941+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:12:27.936+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:12:27.937+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:12:27.939+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-10T11:12:27.941+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:12:27.942+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:12:27.942+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:12:27.943+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:12:27.943+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:12:27.943+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:27.944+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:12:27.945+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:12:27.945+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:12:27.945+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:12:27.946+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:12:27.946+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:27.946+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:12:27.947+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:12:27.947+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:12:27.947+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:12:27.947+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:12:27.948+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-10T11:12:27.948+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:12:27.948+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:12:27.949+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:27.949+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:27.949+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:27.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:27.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:27.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:12:27.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b6c2f04] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:27.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3659195a] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:27.951+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53e7ac6f] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:27.951+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:27.951+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@554599f4] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:27.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:27.954+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:27.958+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a3abd9] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:27.958+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19016df2] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:27.959+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1643508856 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:27.959+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1904878275 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:27.959+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1627931241 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:27.960+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:12:27.960+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@458388186 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:12:27.960+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@360195369 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:27.961+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@961527460 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:27.961+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:12:27.961+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:12:27.963+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:12:27.963+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:12:27.963+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:12:27.964+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-10T11:12:27.965+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:12:27.966+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:12:27.967+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:12:27.969+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:12:27.970+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-10T11:12:27.970+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:12:27.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53e7ac6f]
2026-02-10T11:12:27.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:12:27.976+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:27.976+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:12:27.976+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3659195a]
2026-02-10T11:12:27.977+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-10T11:12:27.977+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:12:27.977+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:12:27.977+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@598b42bf] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:27.977+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b6c2f04]
2026-02-10T11:12:27.978+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:27.978+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19016df2]
2026-02-10T11:12:27.978+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@554599f4]
2026-02-10T11:12:27.981+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:27.978+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a3abd9]
2026-02-10T11:12:27.979+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@649223685 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:27.980+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:27.980+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:12:27.980+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:27.981+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@703d0629] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:27.982+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:27.982+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:12:27.983+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:12:27.983+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:27.986+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-10T11:12:27.986+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1654766148 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:27.987+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f1e1af8] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:27.989+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:12:27.990+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:27.990+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:27.990+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:27.992+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:12:27.994+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1807185852 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:12:27.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:12:28.002+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:28.009+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:12:28.005+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-10T11:12:28.007+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:12:28.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:12:28.009+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-10T11:12:28.023+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:28.010+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:12:28.010+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:28.016+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:12:28.020+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:12:28.024+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:28.024+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:12:28.025+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:12:28.026+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@598b42bf]
2026-02-10T11:12:28.027+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-10T11:12:28.027+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:12:28.027+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-10T11:12:28.028+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:28.028+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:28.029+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.029+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:28.030+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:12:28.030+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:28.030+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@480ed39a] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.034+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:12:28.040+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1848223265 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:28.034+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:28.035+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:28.036+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.040+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@703d0629]
2026-02-10T11:12:28.041+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:12:28.042+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:12:28.042+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.043+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:28.046+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34f79a35] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.049+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:28.050+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:12:28.050+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f1e1af8]
2026-02-10T11:12:28.050+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7357b992] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.055+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:12:28.056+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1408878882 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:28.056+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:12:28.057+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:28.058+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1796490434 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:28.058+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:28.059+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-10T11:12:28.059+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:28.062+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:12:28.063+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-10T11:12:28.063+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:28.064+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-10T11:12:28.064+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:12:28.064+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:28.076+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@480ed39a]
2026-02-10T11:12:28.065+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:28.074+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-10T11:12:28.080+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:12:28.076+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:12:28.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:12:28.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:28.081+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:28.081+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.083+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:12:28.083+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:12:28.085+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:12:28.083+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:12:28.083+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d2a8c63] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.084+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:28.086+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:12:28.087+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:12:28.088+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@155962292 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:28.093+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:12:28.094+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:12:28.095+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.107+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:28.107+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-10T11:12:28.107+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-10T11:12:28.110+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.111+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@654fd5b8] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.111+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:12:28.111+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:28.111+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7357b992]
2026-02-10T11:12:28.111+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34f79a35]
2026-02-10T11:12:28.113+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41522b67] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.114+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@178594583 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:28.114+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:12:28.115+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:28.115+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:28.119+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-10T11:12:28.117+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@150885498 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:28.117+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:28.118+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:12:28.118+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-10T11:12:28.118+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:28.123+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:28.124+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:12:28.126+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:28.127+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:12:28.128+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:28.128+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d2a8c63]
2026-02-10T11:12:28.134+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:28.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:12:28.136+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.139+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:12:28.140+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.141+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:12:28.141+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61e4141] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:28.145+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b47f04d] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.145+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:12:28.145+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:28.146+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@141281288 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:28.147+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@654fd5b8]
2026-02-10T11:12:28.147+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@308749010 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:28.147+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:12:28.149+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:12:28.148+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:28.148+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:12:28.148+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.148+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:28.149+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:12:28.149+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41522b67]
2026-02-10T11:12:28.150+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:12:28.152+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:12:28.152+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@265202a8] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.152+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:28.153+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:12:28.153+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.155+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.156+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1034678735 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:28.158+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@523c2950] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.158+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:12:28.159+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57533726] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.159+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:28.159+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:12:28.159+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:28.160+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@40188259 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:28.160+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:12:28.160+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1414404553 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:28.160+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b47f04d]
2026-02-10T11:12:28.161+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61e4141]
2026-02-10T11:12:28.161+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:28.161+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:12:28.162+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.162+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:28.162+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.163+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:28.164+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:12:28.165+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a30b891] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.165+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:28.165+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@345aa805] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.166+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:28.166+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:12:28.168+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1378153392 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:12:28.168+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1893458779 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:28.170+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@265202a8]
2026-02-10T11:12:28.170+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:12:28.170+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:28.172+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:12:28.173+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:28.173+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:28.174+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.174+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@523c2950]
2026-02-10T11:12:28.176+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:12:28.177+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:12:28.182+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57533726]
2026-02-10T11:12:28.183+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:28.183+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ef16423] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.184+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:28.185+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:12:28.187+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.193+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1744857623 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:28.195+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:12:28.197+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:12:28.198+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:12:28.198+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@596f157b] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.201+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:28.201+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a30b891]
2026-02-10T11:12:28.201+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:12:28.207+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:28.202+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:28.203+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:12:28.204+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@390853495 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:28.207+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:28.207+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@345aa805]
2026-02-10T11:12:28.210+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:28.210+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:12:28.211+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:28.211+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:12:28.212+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.216+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c3a3c44] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.213+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:12:28.213+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-10T11:12:28.213+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:28.214+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:28.217+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1296147270 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:28.222+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:28.218+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:12:28.218+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:28.223+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:28.224+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:12:28.227+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:12:28.225+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.225+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:12:28.228+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-10T11:12:28.228+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:12:28.228+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@355386a8] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.230+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:28.230+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:12:28.232+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:12:28.231+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2052428576 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:12:28.231+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:28.233+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.233+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:12:28.233+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.233+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19e8edf8] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.234+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:12:28.234+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@767dec05] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.234+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@289864386 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:28.235+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1221682003 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:28.235+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:12:28.235+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-10T11:12:28.237+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:12:28.238+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-10T11:12:28.242+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:12:28.242+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ef16423]
2026-02-10T11:12:28.243+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.243+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a45188f] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.243+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1866511256 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:28.244+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:28.244+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:28.245+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:28.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:12:28.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:28.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@596f157b]
2026-02-10T11:12:28.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19e8edf8]
2026-02-10T11:12:28.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-10T11:12:28.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c3a3c44]
2026-02-10T11:12:28.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:12:28.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@767dec05]
2026-02-10T11:12:28.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@355386a8]
2026-02-10T11:12:28.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12cf18f7] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22957a23] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.247+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:28.247+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@300d12c5] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.247+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:28.248+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@858395416 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:28.248+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2085405860 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:28.249+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-10T11:12:28.249+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1294516380 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:28.249+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:12:28.249+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:28.250+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:12:28.250+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:12:28.250+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:28.250+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:28.252+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:28.253+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:12:28.255+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:12:28.257+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:28.257+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:28.259+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-10T11:12:28.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-10T11:12:28.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:28.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:28.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:28.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:28.264+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-10T11:12:28.264+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-10T11:12:28.265+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:28.266+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:28.266+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:28.266+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:28.266+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.266+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.266+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ef3d0bf] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.267+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@893ee3] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.267+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@974357609 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:28.267+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1314692169 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:12:28.267+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-10T11:12:28.267+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-10T11:12:28.268+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-10T11:12:28.268+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-10T11:12:28.269+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:28.271+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a45188f]
2026-02-10T11:12:28.272+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.272+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30d2e228] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.273+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@574690781 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:28.273+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:12:28.274+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:12:28.277+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:12:28.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:12:28.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@300d12c5]
2026-02-10T11:12:28.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-10T11:12:28.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22957a23]
2026-02-10T11:12:28.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ef3d0bf]
2026-02-10T11:12:28.279+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:28.279+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:12:28.280+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15000be4] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.281+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:28.281+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:12:28.282+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12cf18f7]
2026-02-10T11:12:28.282+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1296279739 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:28.283+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:28.282+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-10T11:12:28.283+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.283+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:28.286+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:28.286+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31977e21] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.286+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:28.289+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1542832196 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:28.290+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:28.293+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:12:28.302+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:28.303+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:28.303+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:12:28.306+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.306+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1be3a66c] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.307+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@250309189 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:28.307+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:28.307+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:28.291+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:28.292+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:28.313+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:28.312+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:12:28.317+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:28.317+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:12:28.332+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:12:28.333+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.333+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4723b246] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.334+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1961256283 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:28.334+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:28.335+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:28.335+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-10T11:12:28.336+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@893ee3]
2026-02-10T11:12:28.337+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:28.338+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-10T11:12:28.340+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:28.343+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:12:28.344+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:12:28.346+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:12:28.346+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:12:28.346+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:12:28.347+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.347+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@305865b7] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.347+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@693938813 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:12:28.348+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:12:28.348+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:12:28.363+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:12:28.363+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30d2e228]
2026-02-10T11:12:28.363+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.363+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1534bd41] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.364+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:28.364+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4723b246]
2026-02-10T11:12:28.364+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@852545133 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:28.364+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.365+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:28.365+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@304843d0] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.366+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1789097501 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:28.366+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:28.366+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:28.366+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:28.367+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:28.367+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:28.367+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1be3a66c]
2026-02-10T11:12:28.367+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31977e21]
2026-02-10T11:12:28.368+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.368+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.368+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66f07520] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.369+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@570b6b32] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.369+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:12:28.369+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1621524308 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:28.370+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1567056260 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:28.370+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15000be4]
2026-02-10T11:12:28.370+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:28.370+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:12:28.371+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.372+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:28.372+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:12:28.372+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53cdf8ee] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.373+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1183286872 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:28.374+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:28.374+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:28.469+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:12:28.471+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:12:28.472+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:28.472+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:12:28.477+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:28.478+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:28.479+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@570b6b32]
2026-02-10T11:12:28.479+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1534bd41]
2026-02-10T11:12:28.480+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66f07520]
2026-02-10T11:12:28.480+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@305865b7]
2026-02-10T11:12:28.480+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@304843d0]
2026-02-10T11:12:28.481+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53cdf8ee]
2026-02-10T11:12:28.483+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.484+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.485+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.486+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:28.488+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.490+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.490+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@358bb953] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.490+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d649325] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.491+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3296a485] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.491+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:12:28.508+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6daf0443] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.508+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@753ba6e3] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.530+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@529243365 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:28.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@961877547 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:28.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1569383805 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:28.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1470795394 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:28.510+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:28.530+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1225599522 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:28.530+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:28.531+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:28.531+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:28.532+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:28.533+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:28.545+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:12:28.547+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:28.548+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:28.548+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:28.551+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:28.551+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:12:28.552+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:12:28.556+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:28.563+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:28.564+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:12:28.564+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:12:28.564+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:12:28.564+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:28.565+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:12:28.568+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:12:28.568+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6daf0443]
2026-02-10T11:12:28.569+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@358bb953]
2026-02-10T11:12:28.569+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@753ba6e3]
2026-02-10T11:12:28.569+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d649325]
2026-02-10T11:12:28.569+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3296a485]
2026-02-10T11:12:28.570+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.570+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.570+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:28.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f99097] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@112a862e] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cd2a4be] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:12:28.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f6e5141] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65cc3f9f] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@375460279 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:28.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@954545253 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:12:28.575+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@888921942 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:28.577+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:28.579+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@375004210 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:28.579+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1660493103 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:28.580+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:28.580+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:28.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:28.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:12:28.582+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:12:28.582+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:28.582+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:28.583+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:28.583+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:28.583+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:12:28.585+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:28.585+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:12:28.589+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:12:28.590+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:28.590+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:28.590+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:12:28.590+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@112a862e]
2026-02-10T11:12:28.590+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f99097]
2026-02-10T11:12:28.591+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:28.591+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:12:28.591+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:28.591+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:12:28.592+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.592+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.592+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cd2a4be]
2026-02-10T11:12:28.592+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f6e5141]
2026-02-10T11:12:28.592+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65cc3f9f]
2026-02-10T11:12:28.593+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:12:28.593+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c28fd5d] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.594+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@731516be] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.595+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.595+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:28.595+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.596+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:12:28.596+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2046166784 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:12:28.596+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1009212771 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:28.596+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b16fac2] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.597+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:12:28.597+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d922053] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.597+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.597+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:28.597+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:12:28.598+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1923636810 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:28.598+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1227284153 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:28.598+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:28.598+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1afdab70] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.599+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:28.599+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:12:28.600+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:12:28.600+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:12:28.603+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:12:28.601+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1481557307 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:28.601+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:12:28.603+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:12:28.607+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:12:28.608+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:12:28.608+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:12:28.609+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:28.609+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:12:28.610+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:12:28.610+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c28fd5d]
2026-02-10T11:12:28.610+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@731516be]
2026-02-10T11:12:28.610+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:12:28.611+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:12:28.611+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:12:28.611+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.612+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.612+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:12:28.612+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b16fac2]
2026-02-10T11:12:28.612+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:12:28.613+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d922053]
2026-02-10T11:12:28.613+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d2d7aa5] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.613+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1611712] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.613+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:12:28.613+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1afdab70]
2026-02-10T11:12:28.613+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:28.614+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.614+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@102019656 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:12:28.614+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1520058726 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:28.615+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:12:28.615+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:28.615+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:12:28.615+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@207020f9] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.615+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:28.615+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:28.616+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.616+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:12:28.617+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:28.617+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2084310044 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:28.618+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:28.619+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fdccbf3] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.620+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:28.620+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:28.622+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:12:28.626+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:28.626+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1625754281 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:28.630+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:12:28.632+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:12:28.636+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:12:28.636+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:28.636+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d2d7aa5]
2026-02-10T11:12:28.639+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:12:28.641+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:12:28.643+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:12:28.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:12:28.649+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:12:28.649+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d423b42] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.650+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:12:28.650+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1611712]
2026-02-10T11:12:28.650+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:12:28.650+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@207020f9]
2026-02-10T11:12:28.651+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@992773149 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:12:28.651+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:12:28.651+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.651+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:12:28.651+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:12:28.652+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.652+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:28.653+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:12:28.654+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@567035b7] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.655+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fdccbf3]
2026-02-10T11:12:28.655+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:12:28.655+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59cd68b] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.656+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:28.656+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:12:28.656+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1595961836 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:28.657+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:28.657+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:12:28.657+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@608852265 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:28.658+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.658+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:28.659+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:12:28.659+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.661+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:28.661+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a48a5c6] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.663+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:28.664+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:28.666+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:28.667+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ab2a7c3] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.667+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:28.667+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@49025746 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:28.673+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d423b42]
2026-02-10T11:12:28.678+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.674+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@930814349 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:28.675+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:28.681+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:12:28.678+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:12:28.679+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c92385d] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.681+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@567035b7]
2026-02-10T11:12:28.682+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:12:28.684+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:12:28.684+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:28.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1891013286 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:12:28.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.689+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59cd68b]
2026-02-10T11:12:28.692+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:12:28.694+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:12:28.695+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d2b93b0] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.696+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.698+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:12:28.698+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:28.698+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1520554543 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:28.703+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d2e3d13] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.706+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:12:28.714+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ab2a7c3]
2026-02-10T11:12:28.711+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:28.713+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:12:28.715+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1583713459 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:28.715+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.717+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:12:28.717+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:28.718+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:12:28.718+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:12:28.719+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:12:28.719+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6072a98f] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.719+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c92385d]
2026-02-10T11:12:28.719+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a48a5c6]
2026-02-10T11:12:28.722+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:28.723+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:12:28.725+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1869711101 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:28.725+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.725+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.725+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:12:28.728+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:28.728+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:12:28.730+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7885a918] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.730+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f70ae0] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.731+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d2b93b0]
2026-02-10T11:12:28.732+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:12:28.732+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:12:28.733+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@629683845 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:12:28.734+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:12:28.735+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1761536333 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:28.735+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:28.736+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:28.737+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d2e3d13]
2026-02-10T11:12:28.737+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:12:28.738+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:28.739+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:12:28.742+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:28.743+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:12:28.743+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:28.743+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:12:28.744+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:28.745+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6072a98f]
2026-02-10T11:12:28.745+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:28.745+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:12:28.748+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:28.749+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:28.755+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:28.755+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:28.758+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:28.759+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:12:28.763+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:28.760+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:12:28.760+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:12:28.761+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:12:28.763+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:28.763+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:28.764+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-10T11:12:28.766+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f70ae0]
2026-02-10T11:12:28.766+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7885a918]
2026-02-10T11:12:28.767+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:12:28.767+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:28.768+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-10T11:12:28.769+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:28.769+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:28.770+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.773+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:12:28.774+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-10T11:12:28.775+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:28.775+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:12:28.775+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:12:28.775+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@616c5828] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.776+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:12:28.776+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:28.776+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:28.778+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-10T11:12:28.778+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:28.779+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@880078964 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:12:28.783+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:28.780+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:12:28.780+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:28.781+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-10T11:12:28.782+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:28.782+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:28.784+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:28.784+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.784+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-10T11:12:28.785+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:28.786+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:28.787+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:12:28.789+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3806bcd2] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.790+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:28.793+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:28.794+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.794+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:28.795+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1907483415 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:28.795+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:28.796+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.796+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1da06c31] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.797+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:28.800+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1288161830 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:28.797+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:12:28.798+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.798+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57e5e29e] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.798+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:28.800+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:12:28.800+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-10T11:12:28.802+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:12:28.803+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@794f0edb] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.804+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@618872840 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:28.805+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@616c5828]
2026-02-10T11:12:28.805+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.806+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-10T11:12:28.808+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@843884008 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:28.809+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-10T11:12:28.810+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:12:28.810+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.810+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@479f1d68] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.811+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-10T11:12:28.813+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-10T11:12:28.813+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3806bcd2]
2026-02-10T11:12:28.813+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cc69b67] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.814+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@194340397 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:28.815+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-10T11:12:28.815+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-10T11:12:28.816+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.818+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:28.818+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1332225999 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:12:28.818+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1da06c31]
2026-02-10T11:12:28.819+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63a2f08f] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.819+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:28.820+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:12:28.820+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:28.822+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1850683397 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:28.823+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:12:28.823+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-10T11:12:28.823+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-10T11:12:28.824+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:12:28.825+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-10T11:12:28.825+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:28.826+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:28.826+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57e5e29e]
2026-02-10T11:12:28.827+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:12:28.827+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@794f0edb]
2026-02-10T11:12:28.827+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@479f1d68]
2026-02-10T11:12:28.828+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:28.829+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:28.831+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:28.831+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.832+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-10T11:12:28.833+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:12:28.833+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-10T11:12:28.834+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51f5ebae] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.834+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:28.836+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:28.837+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:28.837+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1858001061 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:28.839+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:12:28.839+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:12:28.843+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:28.844+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:28.845+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:12:28.845+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:12:28.846+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-10T11:12:28.846+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:28.847+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.855+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e062d91] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.847+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:12:28.847+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:28.849+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:12:28.849+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:12:28.856+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1112153721 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:28.857+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:12:28.857+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:12:28.858+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63a2f08f]
2026-02-10T11:12:28.858+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cc69b67]
2026-02-10T11:12:28.860+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:28.859+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:28.859+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:12:28.859+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-10T11:12:28.860+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:28.860+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:12:28.863+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:28.867+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.867+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:28.871+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:28.873+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:12:28.874+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:28.877+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d760e7c] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.877+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51f5ebae]
2026-02-10T11:12:28.878+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:28.880+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:28.882+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:28.889+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:28.885+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1958775841 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:28.886+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.887+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.889+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-10T11:12:28.890+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-10T11:12:28.932+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:28.890+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:12:28.892+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:28.934+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e062d91]
2026-02-10T11:12:28.906+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c802dcd] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.907+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56479c9a] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.918+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:28.933+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:28.934+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:12:28.934+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.935+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1918242664 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:28.935+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@483124616 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:28.935+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:28.977+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-10T11:12:28.979+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73137018] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:28.980+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:28.980+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-10T11:12:28.980+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-10T11:12:28.981+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:28.981+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:12:28.982+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@210153806 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:28.983+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:28.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-10T11:12:28.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:28.986+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:28.986+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d760e7c]
2026-02-10T11:12:28.986+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:28.994+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:28.995+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:12:28.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-10T11:12:28.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.997+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:28.998+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:28.999+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c802dcd]
2026-02-10T11:12:29.000+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6163a92c] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:29.000+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56479c9a]
2026-02-10T11:12:29.001+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fb4302e] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:29.001+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bc7fdd0] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:29.001+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:29.002+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1661685418 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:29.002+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:29.002+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1382861386 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:29.003+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@838592182 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:29.004+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7768a087] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:29.005+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-10T11:12:29.005+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-10T11:12:29.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:12:29.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:29.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-10T11:12:29.009+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2047542754 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:29.009+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-10T11:12:29.010+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:29.011+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:12:29.013+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73137018]
2026-02-10T11:12:29.014+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-10T11:12:29.015+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:29.016+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:29.030+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:29.031+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-10T11:12:29.033+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:29.057+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:12:29.058+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:12:29.058+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-10T11:12:29.069+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e6e0d22] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:29.070+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6163a92c]
2026-02-10T11:12:29.080+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-10T11:12:29.080+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fb4302e]
2026-02-10T11:12:29.080+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bc7fdd0]
2026-02-10T11:12:29.081+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@102052679 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:29.081+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:29.081+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-10T11:12:29.090+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-10T11:12:29.081+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:29.091+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:12:29.082+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:29.092+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:29.082+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:29.090+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:12:29.091+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:29.092+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-10T11:12:29.093+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:29.098+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:29.099+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:29.106+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2645d03e] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:29.100+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-02-10T11:12:29.102+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:29.102+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-10T11:12:29.110+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:29.113+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1590441850 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:29.117+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-10T11:12:29.117+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7768a087]
2026-02-10T11:12:29.118+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:29.118+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-10T11:12:29.124+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-02-10T11:12:29.124+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:29.140+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ec4abdd] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:29.126+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:29.127+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-10T11:12:29.127+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:12:29.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e6e0d22]
2026-02-10T11:12:29.140+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/monthly-trend
2026-02-10T11:12:29.140+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1285177370 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:29.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:29.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:29.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f06f8c8] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:29.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-02-10T11:12:29.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:12:29.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d74b5c8] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:29.144+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1369434903 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:29.144+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-02-10T11:12:29.145+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:12:29.145+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@743202667 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:29.146+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:29.146+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-02-10T11:12:29.147+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:29.147+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:29.147+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:29.148+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:29.148+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-10T11:12:29.150+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:29.157+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a35c13a] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:29.157+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@307262136 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:12:29.160+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:29.160+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:29.160+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:12:29.160+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:29.162+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2645d03e]
2026-02-10T11:12:29.161+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? AND status = 'APPROVED' GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-10T11:12:29.161+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d74b5c8]
2026-02-10T11:12:29.161+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f06f8c8]
2026-02-10T11:12:29.162+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ec4abdd]
2026-02-10T11:12:29.162+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:29.163+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 3(Long)
2026-02-10T11:12:29.163+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:29.163+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:29.163+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:29.166+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8946f53] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:29.167+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@245f1dd1] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:29.174+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4657841b] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:29.174+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75279d61] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:29.174+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 3
2026-02-10T11:12:29.175+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@5802591 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:29.175+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@739063399 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:29.176+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1055909025 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:29.176+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@778459739 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:29.177+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a35c13a]
2026-02-10T11:12:29.178+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:29.178+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:29.179+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:12:29.179+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:29.180+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:29.180+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:29.181+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:29.181+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:12:29.183+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-02-10T11:12:29.183+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:29.202+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:29.213+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:29.213+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:29.221+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8946f53]
2026-02-10T11:12:29.234+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:12:29.234+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:12:29.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@245f1dd1]
2026-02-10T11:12:29.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:29.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75279d61]
2026-02-10T11:12:29.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4657841b]
2026-02-10T11:12:29.238+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:29.238+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51127607] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:29.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:29.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:29.264+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fd6349f] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:29.265+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2052552065 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:29.265+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d3094e7] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:29.276+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15975465] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:29.277+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@62589729 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:29.277+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:29.277+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1949686453 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:29.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1872395664 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:29.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:29.284+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:29.285+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:29.285+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:29.286+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:29.291+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:29.298+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:29.322+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:12:29.322+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:12:29.322+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:12:29.322+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:29.339+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15975465]
2026-02-10T11:12:29.340+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fd6349f]
2026-02-10T11:12:29.345+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51127607]
2026-02-10T11:12:29.345+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d3094e7]
2026-02-10T11:12:29.346+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:29.346+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:29.346+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:29.355+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:29.355+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d0ddb63] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:29.367+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ee08ae] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:29.367+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e081ae] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:29.368+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4af51859] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:29.369+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@580293339 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:29.369+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1861396192 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:29.370+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1124101595 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:29.370+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1935354444 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:29.371+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:29.372+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:29.400+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:29.401+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:12:29.402+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:29.403+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:29.409+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:29.410+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:12:29.417+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:29.417+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:29.418+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:12:29.418+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:29.419+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ee08ae]
2026-02-10T11:12:29.419+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e081ae]
2026-02-10T11:12:29.419+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4af51859]
2026-02-10T11:12:29.420+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d0ddb63]
2026-02-10T11:12:29.420+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:29.422+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:29.423+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:29.423+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:29.423+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@761106d9] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:29.427+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74c24fd4] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:29.429+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:12:29.429+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a580827] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:29.429+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@105565133 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:29.429+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1898597651 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:29.430+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:29.444+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1508711116 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:29.445+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:12:29.446+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:12:29.454+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:12:29.455+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:12:29.459+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:12:29.462+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:12:29.468+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:12:29.468+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:12:29.468+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:12:29.469+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a580827]
2026-02-10T11:12:29.469+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74c24fd4]
2026-02-10T11:12:29.469+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@761106d9]
2026-02-10T11:12:29.470+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:29.470+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:29.471+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:29.477+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:12:29.479+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@647165e4] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:29.480+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1280065a] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:29.483+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:29.483+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@36383313 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:29.484+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1826221341 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:29.485+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:29.485+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-10T11:12:29.490+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:29.494+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-10T11:12:29.501+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-10T11:12:29.502+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-10T11:12:29.503+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1280065a]
2026-02-10T11:12:29.503+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@647165e4]
2026-02-10T11:12:29.505+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:29.505+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:29.506+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64f35e81] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:29.506+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3419a7fb] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:29.508+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1985160851 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:29.508+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1529395929 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:29.516+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:29.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-10T11:12:29.518+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:29.518+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-10T11:12:29.541+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:29.542+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64f35e81]
2026-02-10T11:12:29.544+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-10T11:12:29.545+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:29.552+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3419a7fb]
2026-02-10T11:12:29.553+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b5b316] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:29.553+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:29.554+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2110583479 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:29.570+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74da63b1] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:29.570+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:12:29.571+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@218440878 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:29.571+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-10T11:12:29.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-10T11:12:29.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-10T11:12:29.578+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-10T11:12:29.578+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-10T11:12:29.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74da63b1]
2026-02-10T11:12:29.582+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b5b316]
2026-02-10T11:12:29.585+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:29.586+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:29.587+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:12:29.588+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-10T11:12:29.589+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:29.590+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:30.771+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:12:30.772+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:12:30.773+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:12:30.774+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:12:30.775+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:12:30.776+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:12:30.783+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:12:30.784+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:12:30.791+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:12:30.792+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:12:30.785+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:12:30.785+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:12:30.788+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:12:30.788+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:12:30.793+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:12:30.794+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:12:30.800+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:12:30.801+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:12:30.808+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:12:30.809+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:12:30.809+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:12:30.811+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:12:30.815+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:12:30.816+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:12:30.817+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:12:30.818+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:12:30.819+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:12:30.819+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:12:30.826+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:12:30.826+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:12:30.828+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:12:30.828+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:12:30.828+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:12:30.828+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:12:30.829+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:12:30.829+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:12:30.830+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:12:30.830+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:12:30.830+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:12:30.833+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:30.836+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:12:30.838+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:12:30.838+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:30.839+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:30.840+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:12:30.841+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21629753] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:30.841+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:12:30.842+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:12:30.842+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bcd0652] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:30.842+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a8d09c] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:30.842+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:30.843+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:12:30.843+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:12:30.844+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@588763511 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:12:30.845+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@410ffd1] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:30.845+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2084024474 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:30.846+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@414778593 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:30.846+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:30.847+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:30.847+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:12:30.847+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:12:30.848+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:12:30.848+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7103759d] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:30.848+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24f4075c] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:30.849+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:12:30.849+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1090609946 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:12:30.850+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:12:30.850+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:12:30.851+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:12:30.854+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:12:30.856+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1901610466 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:30.856+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@474185025 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:30.857+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:12:30.857+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:12:30.857+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:12:30.858+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:12:30.860+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:12:30.860+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:12:30.861+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21629753]
2026-02-10T11:12:30.861+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a8d09c]
2026-02-10T11:12:30.863+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:30.861+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bcd0652]
2026-02-10T11:12:30.862+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:12:30.862+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:12:30.863+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@410ffd1]
2026-02-10T11:12:30.863+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:30.864+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:12:30.864+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:30.866+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@110cf4b1] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:30.866+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:30.866+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:30.867+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:12:30.870+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@539190714 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:30.871+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:12:30.871+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:12:30.871+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:12:30.872+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:12:30.878+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:30.881+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:12:30.882+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7103759d]
2026-02-10T11:12:30.882+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24f4075c]
2026-02-10T11:12:30.882+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:30.884+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:12:30.889+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:12:30.891+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:12:30.892+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:30.892+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:30.894+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:12:30.895+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:12:30.897+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:12:30.899+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:12:30.901+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:12:30.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:12:30.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:12:30.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:12:30.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:30.903+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:30.906+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:12:30.907+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:12:30.907+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:12:30.908+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:12:30.909+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:12:30.916+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@110cf4b1]
2026-02-10T11:12:30.916+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:30.918+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:12:30.913+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:12:30.914+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:12:30.914+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:12:30.915+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:12:30.920+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:30.920+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:12:30.922+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:12:30.922+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:30.928+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:12:30.939+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:30.942+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:12:30.944+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67f72258] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:30.945+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:12:30.947+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e6c9b94] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:30.948+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:12:30.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@329617569 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:12:30.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:12:30.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1287223760 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:12:30.951+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:30.951+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:12:30.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:12:30.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:12:30.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40eee184] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:30.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:12:30.954+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:12:30.955+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:12:30.955+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1729021379 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:30.956+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:30.957+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:12:30.957+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bbe81be] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:30.958+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:12:30.958+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1706931932 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:30.958+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:12:30.958+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:12:30.959+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:12:30.959+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e6c9b94]
2026-02-10T11:12:30.961+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67f72258]
2026-02-10T11:12:30.962+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:12:30.962+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:30.962+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:30.963+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:12:30.964+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:12:30.964+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:12:30.964+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40eee184]
2026-02-10T11:12:30.965+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:30.965+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:30.965+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:30.966+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:12:30.969+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:12:30.969+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bbe81be]
2026-02-10T11:12:30.970+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:30.972+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:30.973+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:12:30.976+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:35.107+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/payments
2026-02-10T11:12:35.111+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/payments
2026-02-10T11:12:35.112+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/payments
2026-02-10T11:12:35.112+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/payments
2026-02-10T11:12:35.112+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/payments", parameters={}
2026-02-10T11:12:35.113+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPayments()
2026-02-10T11:12:35.114+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:12:35.115+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:12:35.115+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:35.116+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32d51320] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:35.119+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1478198703 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:12:35.124+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.PaymentMapper.findByCompanyId    : ==>  Preparing: SELECT p.* FROM payment_tb p INNER JOIN subscription_tb s ON p.subscription_id = s.subscription_id WHERE s.company_id = ? ORDER BY p.payment_date DESC, p.created_at DESC
2026-02-10T11:12:35.127+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.PaymentMapper.findByCompanyId    : ==> Parameters: 3(Long)
2026-02-10T11:12:35.129+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-10T11:12:35.130+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-02-10T11:12:35.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-10T11:12:35.136+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.PaymentMapper.findByCompanyId    : <==      Total: 2
2026-02-10T11:12:35.137+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32d51320]
2026-02-10T11:12:35.141+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:35.141+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[PaymentDto(paymentId=2, subscriptionId=1, amount=1550 (truncated)...]
2026-02-10T11:12:35.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:12:36.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/payments
2026-02-10T11:12:37.001+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/payments
2026-02-10T11:12:37.002+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/payments
2026-02-10T11:12:37.002+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/payments
2026-02-10T11:12:37.003+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/payments", parameters={}
2026-02-10T11:12:37.003+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPayments()
2026-02-10T11:12:37.003+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:12:37.004+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:12:37.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:12:37.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fc9b1ac] was not registered for synchronization because synchronization is not active
2026-02-10T11:12:37.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1870277567 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:12:37.009+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.PaymentMapper.findByCompanyId    : ==>  Preparing: SELECT p.* FROM payment_tb p INNER JOIN subscription_tb s ON p.subscription_id = s.subscription_id WHERE s.company_id = ? ORDER BY p.payment_date DESC, p.created_at DESC
2026-02-10T11:12:37.010+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.PaymentMapper.findByCompanyId    : ==> Parameters: 3(Long)
2026-02-10T11:12:37.013+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-10T11:12:37.014+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-02-10T11:12:37.016+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-10T11:12:37.016+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.PaymentMapper.findByCompanyId    : <==      Total: 2
2026-02-10T11:12:37.017+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fc9b1ac]
2026-02-10T11:12:37.017+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:12:37.017+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[PaymentDto(paymentId=2, subscriptionId=1, amount=1550 (truncated)...]
2026-02-10T11:12:37.018+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:15:50.195+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:15:50.198+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:15:50.200+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:15:50.201+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:15:50.201+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:15:50.201+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:15:50.202+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:15:50.202+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:15:50.203+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:15:50.203+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b0a8dd1] was not registered for synchronization because synchronization is not active
2026-02-10T11:15:50.206+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1654998029 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:15:50.206+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:15:50.207+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:15:50.209+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:15:50.209+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b0a8dd1]
2026-02-10T11:15:50.210+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:15:50.210+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:15:50.211+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:15:50.243+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:15:50.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:15:50.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:15:50.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:15:50.247+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:15:50.247+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:15:50.247+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:15:50.249+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:15:50.249+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6aff00a4] was not registered for synchronization because synchronization is not active
2026-02-10T11:15:50.254+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:15:50.257+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:15:50.258+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1056885850 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:15:50.259+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:15:50.259+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:15:50.259+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:15:50.260+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:15:50.260+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:15:50.261+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:15:50.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:15:50.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:15:50.264+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26e7615] was not registered for synchronization because synchronization is not active
2026-02-10T11:15:50.266+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:15:50.273+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6aff00a4]
2026-02-10T11:15:50.274+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:15:50.275+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1334056460 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:15:50.275+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:15:50.276+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:15:50.276+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:15:50.277+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:15:50.284+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:15:50.285+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26e7615]
2026-02-10T11:15:50.286+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:15:50.286+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:15:50.287+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:15:50.291+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:15:50.293+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:15:50.293+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:15:50.294+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:15:50.294+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:15:50.294+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:15:50.294+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:15:50.295+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:15:50.296+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:15:50.296+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fe2430d] was not registered for synchronization because synchronization is not active
2026-02-10T11:15:50.299+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@952338346 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:15:50.300+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:15:50.300+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:15:50.302+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:15:50.302+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fe2430d]
2026-02-10T11:15:50.303+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:15:50.303+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:15:50.304+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:04.223+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:16:04.225+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:16:04.225+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:16:04.226+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:16:04.226+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:16:04.226+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:16:04.227+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:04.227+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ca8ff76] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:04.229+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2066180034 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:16:04.230+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:16:04.231+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:16:04.234+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:16:04.235+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ca8ff76]
2026-02-10T11:16:04.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:04.237+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:16:04.237+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:04.251+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:16:04.254+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:16:04.255+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:16:04.255+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:16:04.255+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:16:04.256+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:16:04.256+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:04.256+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a84aa9a] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:04.259+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1111886419 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:16:04.259+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:16:04.260+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:16:04.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:16:04.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a84aa9a]
2026-02-10T11:16:04.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:04.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76427c0c] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:04.264+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@554648269 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:16:04.264+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:16:04.265+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:16:04.268+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:16:04.268+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76427c0c]
2026-02-10T11:16:04.269+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:04.269+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:16:04.270+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:04.275+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:16:04.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:16:04.279+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:16:04.280+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:16:04.280+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:16:04.280+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:16:04.280+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:04.282+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a8ecda1] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:04.285+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@414245542 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:16:04.285+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:16:04.286+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:16:04.289+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:16:04.289+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a8ecda1]
2026-02-10T11:16:04.290+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:04.290+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:16:04.291+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:04.293+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:16:04.295+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:16:04.296+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:16:04.296+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:16:04.297+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:16:04.297+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:16:04.298+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:04.299+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21c30912] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:04.302+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@927757004 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:16:04.303+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:16:04.304+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:16:04.306+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:16:04.307+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21c30912]
2026-02-10T11:16:04.308+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:04.308+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e3c37a8] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:04.309+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1603756496 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:16:04.309+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:16:04.309+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:16:04.311+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:16:04.312+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e3c37a8]
2026-02-10T11:16:04.312+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:04.315+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:16:04.317+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:04.321+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:16:04.323+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:16:04.325+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:16:04.326+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:16:04.327+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:16:04.327+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:16:04.328+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:16:04.329+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:16:04.330+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:04.330+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bc94a1b] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:04.331+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@683898200 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:16:04.333+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:16:04.334+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:16:04.336+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:16:04.337+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bc94a1b]
2026-02-10T11:16:04.338+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:04.338+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:16:04.339+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:04.355+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:16:04.357+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:16:04.358+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:16:04.359+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:16:04.360+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:16:04.360+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:16:04.361+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:04.361+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68c9e4a4] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:04.362+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1732310159 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:16:04.362+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:16:04.363+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:16:04.367+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:16:04.368+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68c9e4a4]
2026-02-10T11:16:04.369+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:04.370+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:16:04.371+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:04.380+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:16:04.384+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:16:04.385+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:16:04.386+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:16:04.386+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:16:04.386+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:16:04.387+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:04.387+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:04.388+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:04.389+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a58d791] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:04.389+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@388830799 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:16:04.389+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:16:04.390+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:16:04.393+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:16:04.395+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a58d791]
2026-02-10T11:16:04.396+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:04.397+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:16:04.399+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:04.409+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:16:04.412+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:16:04.413+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:16:04.414+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:16:04.414+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:16:04.416+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:16:04.417+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:04.418+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:04.418+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:04.419+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d4cfec9] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:04.419+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1084134690 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:16:04.420+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:16:04.420+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:16:04.423+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:16:04.424+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d4cfec9]
2026-02-10T11:16:04.424+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:04.425+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:16:04.425+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:04.970+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-10T11:16:04.973+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-10T11:16:04.974+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies
2026-02-10T11:16:04.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-10T11:16:04.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-10T11:16:04.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-10T11:16:04.976+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:04.977+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:16:04.977+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d4fa6e8] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:04.978+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:16:04.981+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1189884909 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:16:04.981+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:16:04.981+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-10T11:16:04.981+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:16:04.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 9(Long)
2026-02-10T11:16:04.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:16:04.985+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:16:04.985+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:04.986+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e9a5689] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:04.987+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-10T11:16:04.988+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d4fa6e8]
2026-02-10T11:16:04.988+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:04.988+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@480808912 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:16:04.989+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-10T11:16:04.989+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:16:04.989+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:04.990+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:16:04.993+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:16:04.994+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e9a5689]
2026-02-10T11:16:04.994+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:16:04.994+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:04.995+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:16:04.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:04.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:16:04.998+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:16:04.998+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:16:05.000+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:16:05.000+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:16:05.000+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:05.000+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47d1429c] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:05.003+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@83762071 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:16:05.003+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:16:05.005+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:16:05.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:16:05.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:16:05.007+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47d1429c]
2026-02-10T11:16:05.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:05.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a350491] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:05.009+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:16:05.009+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2121412404 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:16:05.010+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:16:05.010+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:16:05.011+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:16:05.011+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:16:05.011+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:16:05.011+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:16:05.012+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:05.012+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ff6eee2] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:05.013+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:16:05.013+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a350491]
2026-02-10T11:16:05.013+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:05.014+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:16:05.014+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2084482456 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:16:05.014+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:05.016+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:16:05.019+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:16:05.021+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:16:05.022+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ff6eee2]
2026-02-10T11:16:05.022+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:16:05.023+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:05.023+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:16:05.024+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:05.025+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:16:05.026+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:16:05.026+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:16:05.027+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:16:05.027+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:16:05.027+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:05.028+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@500c14f0] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:05.028+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2057044622 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:16:05.028+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:16:05.030+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:16:05.030+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:16:05.035+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:16:05.035+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:16:05.036+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@500c14f0]
2026-02-10T11:16:05.036+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:05.037+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:16:05.037+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3691923e] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:05.037+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:16:05.037+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@109751176 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:16:05.038+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:16:05.038+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:16:05.038+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:16:05.039+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:16:05.039+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:16:05.040+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:16:05.041+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:05.041+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@524f6e08] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:05.041+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:16:05.041+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@217342971 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:16:05.042+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3691923e]
2026-02-10T11:16:05.042+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:16:05.042+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:05.043+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:16:05.043+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:16:05.044+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:05.046+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:16:05.046+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@524f6e08]
2026-02-10T11:16:05.047+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:05.048+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:16:05.050+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:05.055+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:16:05.058+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:16:05.059+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:16:05.059+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:16:05.060+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:16:05.060+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:16:05.061+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:05.061+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d9c9c9d] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:05.062+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1246343275 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:16:05.062+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:16:05.063+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:16:05.074+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:16:05.075+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d9c9c9d]
2026-02-10T11:16:05.076+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:05.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:16:05.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:05.084+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:16:05.087+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:16:05.088+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:16:05.089+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:16:05.089+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:16:05.089+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:16:05.090+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:05.090+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:05.091+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:05.091+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f632bc1] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:05.093+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:16:05.093+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@717316760 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:16:05.094+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:16:05.095+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:16:05.097+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:16:05.101+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:16:05.101+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:16:05.101+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:16:05.102+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f632bc1]
2026-02-10T11:16:05.102+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:16:05.103+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:05.103+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:16:05.103+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:16:05.104+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:05.104+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:05.105+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:05.107+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:05.107+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f467889] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:05.108+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1576944679 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:16:05.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:16:05.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:16:05.113+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:16:05.113+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f467889]
2026-02-10T11:16:05.114+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:05.114+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:16:05.115+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:11.359+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:16:11.361+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:16:11.362+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:16:11.362+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:16:11.362+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:16:11.362+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:16:11.363+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:11.363+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@604e20ec] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:11.365+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1263748869 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:16:11.366+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:16:11.368+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:16:11.371+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:16:11.372+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@604e20ec]
2026-02-10T11:16:11.372+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:11.372+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:16:11.373+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:11.379+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:16:11.381+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:16:11.383+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:16:11.383+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:16:11.384+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:16:11.385+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:16:11.385+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:11.386+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dd60aec] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:11.388+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1535397544 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:16:11.388+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:16:11.389+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:16:11.392+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:16:11.392+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dd60aec]
2026-02-10T11:16:11.392+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:11.392+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b3c3be2] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:11.393+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@789275509 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:16:11.393+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:16:11.393+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:16:11.395+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:16:11.396+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b3c3be2]
2026-02-10T11:16:11.396+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:11.397+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:16:11.397+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:11.403+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:16:11.405+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:16:11.406+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:16:11.406+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:16:11.406+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:16:11.407+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:16:11.407+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:11.407+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d8ad6f6] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:11.409+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1403448224 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:16:11.410+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:16:11.411+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:16:11.414+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:16:11.416+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d8ad6f6]
2026-02-10T11:16:11.417+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:11.418+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:16:11.418+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:11.452+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:16:11.454+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:16:11.455+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:16:11.455+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:16:11.455+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:16:11.456+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:16:11.456+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:11.456+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@666fb4f1] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:11.457+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@68957473 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:16:11.457+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:16:11.458+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:16:11.460+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:16:11.460+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@666fb4f1]
2026-02-10T11:16:11.460+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:11.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@447d5779] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:11.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1596898107 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:16:11.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:16:11.463+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:16:11.465+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:16:11.466+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@447d5779]
2026-02-10T11:16:11.466+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:11.467+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:16:11.467+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:11.475+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:16:11.478+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:16:11.479+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:16:11.480+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:16:11.480+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:16:11.480+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:16:11.481+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:16:11.481+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:16:11.482+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:11.483+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32ed32e1] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:11.485+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1697342691 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:16:11.485+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:16:11.486+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:16:11.488+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:16:11.488+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32ed32e1]
2026-02-10T11:16:11.489+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:11.489+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:16:11.490+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:11.490+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:16:11.493+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:16:11.494+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:16:11.495+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:16:11.495+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:16:11.495+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:16:11.496+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:11.496+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f495529] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:11.496+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@575285036 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:16:11.496+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:16:11.497+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:16:11.500+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:16:11.500+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f495529]
2026-02-10T11:16:11.502+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:11.502+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:16:11.503+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:11.504+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:16:11.507+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:16:11.508+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:16:11.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:16:11.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:16:11.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:16:11.510+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:11.510+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:11.511+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:11.511+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6656406a] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:11.511+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1552909417 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:16:11.512+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:16:11.512+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:16:11.512+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:16:11.516+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:16:11.516+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:16:11.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6656406a]
2026-02-10T11:16:11.518+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:16:11.518+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:11.518+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:16:11.519+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:16:11.519+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:16:11.519+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:11.520+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:16:11.521+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:11.521+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:11.522+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:11.522+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51405e90] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:11.522+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1530659253 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:16:11.522+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:16:11.523+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:16:11.525+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:16:11.526+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51405e90]
2026-02-10T11:16:11.526+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-10T11:16:11.527+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:11.527+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:16:11.528+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:11.528+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-10T11:16:11.531+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies
2026-02-10T11:16:11.531+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-10T11:16:11.532+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-10T11:16:11.533+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-10T11:16:11.534+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:11.534+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14a026ed] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:11.534+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@977829279 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:16:11.534+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-10T11:16:11.535+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 9(Long)
2026-02-10T11:16:11.537+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-10T11:16:11.538+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14a026ed]
2026-02-10T11:16:11.538+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:16:11.539+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:11.540+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-10T11:16:11.542+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:11.542+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:16:11.543+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:16:11.544+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:16:11.544+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:16:11.544+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:16:11.545+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:11.545+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c173828] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:11.546+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1756351775 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:16:11.546+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:16:11.547+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:16:11.550+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:16:11.550+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c173828]
2026-02-10T11:16:11.552+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:11.552+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:16:11.553+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:11.561+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:16:11.564+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:16:11.568+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:16:11.569+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:16:11.570+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:16:11.571+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:16:11.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:11.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@778fa753] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:11.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@574243990 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:16:11.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:16:11.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:16:11.577+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:16:11.579+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@778fa753]
2026-02-10T11:16:11.579+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:11.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@230069cd] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:11.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@692058049 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:16:11.582+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:16:11.584+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:16:11.590+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:16:11.595+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@230069cd]
2026-02-10T11:16:11.596+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:11.599+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:16:11.600+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:11.609+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:16:11.612+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:16:11.613+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:16:11.614+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:16:11.614+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:16:11.616+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:16:11.619+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:11.620+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ce994] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:11.620+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@681159598 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:16:11.623+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:16:11.624+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:16:11.627+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:16:11.628+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ce994]
2026-02-10T11:16:11.629+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:11.630+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:16:11.630+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:11.637+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:16:11.641+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:16:11.642+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:16:11.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:16:11.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:16:11.645+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:16:11.645+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:11.645+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@569cd619] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:11.656+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@862687844 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:16:11.657+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:16:11.658+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:16:11.670+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:16:11.673+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@569cd619]
2026-02-10T11:16:11.674+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:11.674+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e0ac020] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:11.676+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1872291912 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:16:11.677+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:16:11.679+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:16:11.689+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:16:11.689+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e0ac020]
2026-02-10T11:16:11.690+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:11.691+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:16:11.692+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:11.721+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:16:11.723+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:16:11.727+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:16:11.734+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:16:11.736+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:16:11.737+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:16:11.738+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:16:11.739+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:16:11.742+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:11.744+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@df9d50b] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:11.754+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@107441070 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:16:11.756+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:16:11.756+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:16:11.768+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:16:11.773+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@df9d50b]
2026-02-10T11:16:11.775+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:11.776+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:16:11.778+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:11.928+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:16:11.930+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:16:11.933+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:16:11.933+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:16:11.934+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:16:11.935+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:16:11.936+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:11.936+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@425fb817] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:11.937+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@130817548 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:16:11.937+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:16:11.938+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:16:11.943+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:16:11.943+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@425fb817]
2026-02-10T11:16:11.944+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:11.945+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:16:11.946+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:11.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:16:11.954+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:16:11.955+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:16:11.956+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:16:11.956+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:16:11.958+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:16:11.958+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:11.959+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:11.960+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:11.960+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b4c38a0] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:11.960+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2074242053 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:16:11.961+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:16:11.961+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:16:11.963+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:16:11.964+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b4c38a0]
2026-02-10T11:16:11.966+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:11.967+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:16:11.967+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:11.972+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:16:11.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:16:11.976+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:16:11.976+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:16:11.976+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:16:11.977+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:16:11.977+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:11.978+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:11.978+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:11.979+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cf688fb] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:11.979+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1258407096 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:16:11.979+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:16:11.980+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:16:11.983+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:16:11.983+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cf688fb]
2026-02-10T11:16:11.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:11.985+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:16:11.986+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:16.818+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:16:16.820+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:16:16.822+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:16:16.822+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:16:16.822+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:16:16.822+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:16:16.823+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:16.823+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29bf6f50] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:16.825+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2034157902 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:16:16.825+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:16:16.826+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:16:16.828+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:16:16.828+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29bf6f50]
2026-02-10T11:16:16.829+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:16.829+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:16:16.830+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:16.835+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:16:16.838+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:16:16.839+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:16:16.839+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:16:16.840+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:16:16.840+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:16:16.840+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:16.840+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@587e60ca] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:16.842+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1511435868 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:16:16.843+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:16:16.843+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:16:16.845+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:16:16.846+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@587e60ca]
2026-02-10T11:16:16.846+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:16.846+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f2ecbed] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:16.847+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1691093208 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:16:16.847+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:16:16.848+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:16:16.851+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:16:16.851+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f2ecbed]
2026-02-10T11:16:16.851+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:16.852+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:16:16.852+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:16.858+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:16:16.859+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:16:16.860+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:16:16.860+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:16:16.861+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:16:16.861+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:16:16.861+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:16.861+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a3f6f71] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:16.863+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1917101552 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:16:16.863+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:16:16.865+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:16:16.868+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:16:16.869+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a3f6f71]
2026-02-10T11:16:16.869+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:16.870+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:16:16.870+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:16.893+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:16:16.895+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:16:16.896+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:16:16.896+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:16:16.897+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:16:16.898+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:16:16.899+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:16.901+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cb1a54d] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:16.903+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@774407634 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:16:16.903+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:16:16.904+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:16:16.906+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:16:16.906+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cb1a54d]
2026-02-10T11:16:16.906+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:16.907+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a58a9db] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:16.907+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@215415248 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:16:16.908+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:16:16.908+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:16:16.910+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:16:16.910+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a58a9db]
2026-02-10T11:16:16.910+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:16.911+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:16:16.911+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:16.921+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:16:16.923+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:16:16.924+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:16:16.924+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:16:16.924+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:16:16.925+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:16:16.925+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:16:16.925+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:16:16.926+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:16.926+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dbe64bc] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:16.928+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@276211390 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:16:16.928+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:16:16.929+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:16:16.934+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:16:16.935+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dbe64bc]
2026-02-10T11:16:16.936+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:16.936+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:16:16.937+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:16.955+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:16:16.957+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:16:16.959+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:16:16.959+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:16:16.960+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:16:16.960+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:16:16.960+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:16.961+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56a0cffa] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:16.962+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1649708064 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:16:16.962+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:16:16.962+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:16:16.965+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:16:16.966+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56a0cffa]
2026-02-10T11:16:16.967+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:16.967+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:16:16.968+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:16.980+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:16:16.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:16:16.985+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:16:16.985+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:16:16.986+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:16:16.986+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:16:16.986+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:16.987+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:16.987+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:16.987+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@434e3974] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:16.988+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@986112851 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:16:16.988+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:16:16.988+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:16:16.990+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:16:16.990+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@434e3974]
2026-02-10T11:16:16.991+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:16.991+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:16:16.992+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:17.004+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:16:17.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:16:17.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:16:17.007+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:16:17.007+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:16:17.007+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:16:17.007+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:17.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:17.010+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:17.010+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dd4e67d] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:17.010+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@923285003 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:16:17.011+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:16:17.012+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:16:17.013+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:16:17.014+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dd4e67d]
2026-02-10T11:16:17.016+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:17.017+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:16:17.017+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:17.041+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-10T11:16:17.042+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-10T11:16:17.043+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies
2026-02-10T11:16:17.044+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-10T11:16:17.044+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-10T11:16:17.044+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-10T11:16:17.045+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:17.045+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ecf8387] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:17.045+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1335421248 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:16:17.045+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-10T11:16:17.046+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 9(Long)
2026-02-10T11:16:17.049+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-10T11:16:17.049+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ecf8387]
2026-02-10T11:16:17.049+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:17.050+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-10T11:16:17.050+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:17.053+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:16:17.056+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:16:17.056+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:16:17.057+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:16:17.057+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:16:17.057+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:16:17.058+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:17.058+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64ea392] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:17.058+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1876254071 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:16:17.059+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:16:17.060+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:16:17.061+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:16:17.063+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:16:17.064+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:16:17.064+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64ea392]
2026-02-10T11:16:17.065+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:16:17.066+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:17.067+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:16:17.067+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:16:17.067+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:16:17.067+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:17.067+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:16:17.069+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:17.069+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@568da406] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:17.070+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@100826674 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:16:17.071+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:16:17.073+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:16:17.075+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:16:17.076+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@568da406]
2026-02-10T11:16:17.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:17.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57a53978] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:17.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1823672862 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:16:17.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:16:17.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:16:17.080+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:16:17.080+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57a53978]
2026-02-10T11:16:17.082+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:17.083+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:16:17.083+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:17.088+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:16:17.090+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:16:17.091+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:16:17.092+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:16:17.092+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:16:17.092+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:16:17.093+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:17.093+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ccf2237] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:17.093+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1048067907 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:16:17.093+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:16:17.094+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:16:17.097+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:16:17.097+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:16:17.097+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ccf2237]
2026-02-10T11:16:17.099+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:17.100+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:16:17.100+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:16:17.102+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:17.102+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:16:17.103+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:16:17.104+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:16:17.104+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:16:17.104+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:17.105+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66d04c96] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:17.105+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@483244351 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:16:17.105+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:16:17.106+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:16:17.108+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:16:17.108+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66d04c96]
2026-02-10T11:16:17.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:17.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2985a23a] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:17.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1297481568 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:16:17.110+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:16:17.111+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:16:17.113+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:16:17.113+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2985a23a]
2026-02-10T11:16:17.114+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:17.116+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:16:17.117+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:17.120+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:16:17.123+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:16:17.124+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:16:17.124+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:16:17.125+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:16:17.125+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:16:17.126+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:16:17.126+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:16:17.127+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:17.127+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ba2552e] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:17.127+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@435367526 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:16:17.127+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:16:17.128+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:16:17.130+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:16:17.130+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:16:17.130+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ba2552e]
2026-02-10T11:16:17.134+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:17.136+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:16:17.138+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:16:17.138+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:17.140+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:16:17.140+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:16:17.141+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:16:17.141+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:16:17.141+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:17.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62eb1260] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:17.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@912939847 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:16:17.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:16:17.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:16:17.145+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:16:17.145+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62eb1260]
2026-02-10T11:16:17.146+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:17.147+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:16:17.148+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:17.153+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:16:17.155+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:16:17.156+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:16:17.157+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:16:17.157+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:16:17.157+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:16:17.158+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:17.158+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:17.159+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:17.159+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37506917] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:17.159+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1228990588 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:16:17.160+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:16:17.160+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:16:17.162+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:16:17.162+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37506917]
2026-02-10T11:16:17.163+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:17.164+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:16:17.165+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:17.171+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:16:17.173+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:16:17.174+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:16:17.175+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:16:17.175+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:16:17.175+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:16:17.176+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:17.176+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:17.177+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:17.177+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b66fc76] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:17.177+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1323581113 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:16:17.178+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:16:17.178+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:16:17.180+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:16:17.181+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b66fc76]
2026-02-10T11:16:17.183+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:17.184+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:16:17.184+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:22.230+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:16:22.234+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:16:22.235+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:16:22.235+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:16:22.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:16:22.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:16:22.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:22.237+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d342587] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:22.239+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@736658130 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:16:22.239+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:16:22.240+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:16:22.243+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:16:22.244+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d342587]
2026-02-10T11:16:22.244+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:22.244+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:16:22.245+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:22.249+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:16:22.252+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:16:22.253+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:16:22.253+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:16:22.254+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:16:22.254+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:16:22.254+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:22.254+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fcfc923] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:22.256+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1181778251 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:16:22.258+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:16:22.259+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:16:22.261+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:16:22.262+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fcfc923]
2026-02-10T11:16:22.262+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:22.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@496ca1bc] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:22.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1901438873 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:16:22.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:16:22.264+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:16:22.266+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:16:22.266+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@496ca1bc]
2026-02-10T11:16:22.267+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:22.267+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:16:22.267+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:16:22.268+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:22.270+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:16:22.271+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:16:22.272+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:16:22.272+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:16:22.272+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:16:22.274+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:22.274+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64dd12d1] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:22.277+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@986426575 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:16:22.277+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:16:22.279+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:16:22.282+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:16:22.283+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64dd12d1]
2026-02-10T11:16:22.283+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:22.284+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:16:22.284+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:22.343+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:16:22.345+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:16:22.346+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:16:22.346+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:16:22.347+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:16:22.348+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:16:22.349+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:22.351+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c81d2f4] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:22.353+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1487738530 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:16:22.355+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:16:22.356+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:16:22.359+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:16:22.359+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c81d2f4]
2026-02-10T11:16:22.359+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:22.360+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14f0fed7] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:22.361+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1988397263 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:16:22.361+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:16:22.363+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:16:22.366+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:16:22.367+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14f0fed7]
2026-02-10T11:16:22.368+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:22.368+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:16:22.369+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:22.412+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:16:22.415+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:16:22.416+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:16:22.416+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:16:22.416+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:16:22.417+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:16:22.417+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:16:22.418+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:16:22.418+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:22.418+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8676f88] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:22.421+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@200301680 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:16:22.421+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:16:22.422+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:16:22.423+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:16:22.423+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8676f88]
2026-02-10T11:16:22.424+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:22.425+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:16:22.425+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:22.427+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:16:22.430+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:16:22.431+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:16:22.432+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:16:22.432+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:16:22.432+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:16:22.433+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:22.433+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e98aecf] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:22.433+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@285230327 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:16:22.434+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:16:22.434+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:16:22.436+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:16:22.436+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e98aecf]
2026-02-10T11:16:22.437+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:22.437+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:16:22.438+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:22.440+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:16:22.442+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:16:22.443+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:16:22.444+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:16:22.444+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:16:22.444+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:16:22.444+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:22.445+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:22.445+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:22.445+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@682fb3f4] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:22.446+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1638764794 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:16:22.446+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:16:22.447+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:16:22.449+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:16:22.450+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@682fb3f4]
2026-02-10T11:16:22.450+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:22.450+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:16:22.451+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:22.455+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:16:22.457+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:16:22.458+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:16:22.458+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:16:22.459+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:16:22.460+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:16:22.460+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:22.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:22.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:22.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11a4b31b] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:22.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@876592051 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:16:22.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:16:22.462+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:16:22.463+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:16:22.464+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11a4b31b]
2026-02-10T11:16:22.466+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:22.466+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:16:22.467+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:22.470+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-10T11:16:22.472+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-10T11:16:22.473+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies
2026-02-10T11:16:22.474+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-10T11:16:22.475+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-10T11:16:22.475+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-10T11:16:22.477+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:22.477+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50ec48a3] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:22.477+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1140392495 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:16:22.477+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-10T11:16:22.478+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 9(Long)
2026-02-10T11:16:22.480+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-10T11:16:22.480+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50ec48a3]
2026-02-10T11:16:22.483+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:22.483+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-10T11:16:22.484+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:22.487+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:16:22.489+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:16:22.489+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:16:22.491+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:16:22.491+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:16:22.491+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:16:22.492+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:22.492+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47ad93b8] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:22.493+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1443889060 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:16:22.494+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:16:22.495+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:16:22.497+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:16:22.498+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47ad93b8]
2026-02-10T11:16:22.499+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:22.500+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:16:22.500+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:22.504+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:16:22.507+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:16:22.508+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:16:22.508+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:16:22.508+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:16:22.508+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:16:22.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:22.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@942f8a4] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:22.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@848810389 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:16:22.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:16:22.510+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:16:22.512+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:16:22.513+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@942f8a4]
2026-02-10T11:16:22.513+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:22.513+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52915bfd] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:22.514+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1283989203 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:16:22.514+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:16:22.516+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:16:22.518+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:16:22.518+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52915bfd]
2026-02-10T11:16:22.519+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:22.519+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:16:22.520+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:22.523+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:16:22.525+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:16:22.526+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:16:22.526+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:16:22.526+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:16:22.526+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:16:22.527+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:22.527+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@386a9eed] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:22.527+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@768551431 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:16:22.528+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:16:22.529+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:16:22.529+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:16:22.533+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:16:22.533+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@386a9eed]
2026-02-10T11:16:22.533+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:16:22.534+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:22.534+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:16:22.535+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:16:22.535+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:22.536+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:16:22.537+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:16:22.537+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:16:22.538+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:22.538+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@551fb3ac] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:22.538+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1637346943 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:16:22.538+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:16:22.539+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:16:22.541+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:16:22.542+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@551fb3ac]
2026-02-10T11:16:22.542+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:22.542+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5515de59] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:22.543+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2101319044 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:16:22.543+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:16:22.543+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:16:22.545+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:16:22.546+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5515de59]
2026-02-10T11:16:22.546+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:22.547+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:16:22.548+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:16:22.550+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:22.553+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:16:22.554+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:16:22.555+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:16:22.556+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:16:22.556+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:16:22.556+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:16:22.557+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:16:22.557+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:22.557+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33a293b9] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:22.558+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@20540478 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:16:22.558+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:16:22.559+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:16:22.560+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:16:22.561+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33a293b9]
2026-02-10T11:16:22.561+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:22.562+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:16:22.562+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:22.569+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:16:22.571+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:16:22.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:16:22.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:16:22.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:16:22.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:16:22.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:22.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6053965] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:22.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@756963918 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:16:22.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:16:22.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:16:22.577+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:16:22.577+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6053965]
2026-02-10T11:16:22.577+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:22.578+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:16:22.578+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:22.584+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:16:22.586+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:16:22.587+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:16:22.587+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:16:22.588+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:16:22.588+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:16:22.588+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:22.588+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:22.589+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:22.589+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7963440d] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:22.589+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@561358447 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:16:22.590+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:16:22.590+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:16:22.592+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:16:22.592+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7963440d]
2026-02-10T11:16:22.593+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:16:22.593+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:22.594+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:16:22.595+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:22.596+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:16:22.598+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:16:22.600+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:16:22.600+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:16:22.600+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:16:22.601+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:22.601+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:22.602+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:22.602+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@743bb0a8] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:22.602+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1484164818 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:16:22.603+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:16:22.603+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:16:22.605+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:16:22.605+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@743bb0a8]
2026-02-10T11:16:22.606+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:22.606+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:16:22.607+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:31.645+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:16:31.647+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:16:31.650+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:16:31.650+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:16:31.650+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:16:31.650+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:16:31.651+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:31.651+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fe0f917] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:31.652+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@431639872 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:16:31.653+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:16:31.654+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:16:31.656+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:16:31.657+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fe0f917]
2026-02-10T11:16:31.657+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:31.658+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:16:31.658+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:31.673+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:16:31.675+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:16:31.676+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:16:31.677+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:16:31.677+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:16:31.677+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:16:31.677+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:31.677+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52a88528] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:31.679+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1059201419 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:16:31.680+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:16:31.683+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:16:31.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:16:31.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:16:31.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52a88528]
2026-02-10T11:16:31.686+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:31.687+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7440580a] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:31.687+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:16:31.687+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@106871054 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:16:31.688+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:16:31.688+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:16:31.688+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:16:31.688+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:16:31.689+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:16:31.689+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:16:31.690+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:31.690+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:16:31.690+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7270c3b5] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:31.691+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7440580a]
2026-02-10T11:16:31.691+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:31.692+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:16:31.692+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:31.692+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@42139481 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:16:31.693+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:16:31.694+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:16:31.698+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:16:31.698+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7270c3b5]
2026-02-10T11:16:31.699+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:31.699+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:16:31.700+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:31.703+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:16:31.705+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:16:31.706+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:16:31.707+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:16:31.707+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:16:31.707+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:16:31.707+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:31.708+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b1ac874] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:31.709+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1929944502 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:16:31.709+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:16:31.711+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:16:31.713+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:16:31.714+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b1ac874]
2026-02-10T11:16:31.715+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:31.715+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@404913ff] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:31.716+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@664093962 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:16:31.716+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:16:31.717+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:16:31.717+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:16:31.719+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:16:31.719+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:16:31.720+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@404913ff]
2026-02-10T11:16:31.720+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:16:31.720+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:31.720+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:16:31.721+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:16:31.721+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:16:31.722+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:31.722+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:16:31.722+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:16:31.723+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:16:31.723+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:31.723+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f242d91] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:31.724+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1991469101 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:16:31.724+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:16:31.724+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:16:31.726+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:16:31.727+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f242d91]
2026-02-10T11:16:31.727+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:31.728+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:16:31.729+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:31.734+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:16:31.736+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:16:31.737+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:16:31.738+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:16:31.738+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:16:31.738+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:16:31.738+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:31.739+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6172db07] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:31.739+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@822718910 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:16:31.740+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:16:31.740+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:16:31.746+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:16:31.750+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6172db07]
2026-02-10T11:16:31.750+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:31.751+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:16:31.754+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:31.877+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:16:31.879+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:16:31.880+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:16:31.880+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:16:31.882+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:16:31.882+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:16:31.882+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:31.883+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:31.884+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:31.884+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2db09d73] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:31.884+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@182463902 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:16:31.884+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:16:31.885+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:16:31.887+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:16:31.887+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2db09d73]
2026-02-10T11:16:31.888+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:31.888+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:16:31.889+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:31.897+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:16:31.899+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:16:31.901+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:16:31.901+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:16:31.901+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:16:31.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:16:31.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:31.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:31.903+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:31.903+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5965ff3c] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:31.903+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@213224437 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:16:31.903+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:16:31.904+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:16:31.906+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:16:31.906+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5965ff3c]
2026-02-10T11:16:31.906+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:31.907+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:16:31.907+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:31.914+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-10T11:16:31.917+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-10T11:16:31.918+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies
2026-02-10T11:16:31.918+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-10T11:16:31.919+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-10T11:16:31.919+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-10T11:16:31.919+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:31.920+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@168e681f] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:31.921+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2036630523 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:16:31.922+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-10T11:16:31.923+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 9(Long)
2026-02-10T11:16:31.925+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-10T11:16:31.925+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@168e681f]
2026-02-10T11:16:31.926+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:31.926+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-10T11:16:31.927+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:31.936+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:16:31.938+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:16:31.939+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:16:31.940+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:16:31.941+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:16:31.942+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:16:31.942+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:31.942+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29d6285] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:31.943+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2091622370 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:16:31.943+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:16:31.944+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:16:31.949+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:16:31.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29d6285]
2026-02-10T11:16:31.951+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:31.951+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:16:31.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:16:31.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:31.955+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:16:31.955+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:16:31.956+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:16:31.956+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:16:31.957+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:16:31.957+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:31.958+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d424d8c] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:31.958+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1181688844 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:16:31.958+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:16:31.959+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:16:31.961+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:16:31.961+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d424d8c]
2026-02-10T11:16:31.962+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:31.962+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bc61e29] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:31.963+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1683425008 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:16:31.963+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:16:31.964+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:16:31.967+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:16:31.968+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bc61e29]
2026-02-10T11:16:31.968+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:31.969+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:16:31.969+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:31.970+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:16:31.972+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:16:31.973+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:16:31.973+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:16:31.974+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:16:31.974+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:16:31.974+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:31.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@627882ea] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:31.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1267388627 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:16:31.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:16:31.976+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:16:31.976+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:16:31.979+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:16:31.979+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:16:31.980+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@627882ea]
2026-02-10T11:16:31.981+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:31.980+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:16:31.982+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:16:31.982+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:16:31.983+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:31.983+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:16:31.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:16:31.985+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:31.985+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@538cdc6f] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:31.986+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@635852093 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:16:31.986+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:16:31.987+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:16:31.989+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:16:31.990+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@538cdc6f]
2026-02-10T11:16:31.990+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:31.990+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a835542] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:31.991+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1876530649 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:16:31.991+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:16:31.992+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:16:31.992+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:16:31.994+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:16:31.995+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:16:31.995+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a835542]
2026-02-10T11:16:31.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:16:31.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:31.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:16:31.997+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:16:31.997+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:16:31.999+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:31.999+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:16:32.000+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:16:32.001+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:16:32.001+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:32.002+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b0f7272] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:32.002+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@243994497 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:16:32.003+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:16:32.003+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:16:32.012+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:16:32.013+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b0f7272]
2026-02-10T11:16:32.014+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:32.016+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:16:32.017+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:32.019+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:16:32.021+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:16:32.022+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:16:32.023+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:16:32.023+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:16:32.023+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:16:32.024+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:32.025+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2959c314] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:32.025+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1160293668 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:16:32.026+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:16:32.026+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:16:32.028+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:16:32.028+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2959c314]
2026-02-10T11:16:32.029+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:16:32.029+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:32.031+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:16:32.033+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:16:32.034+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:32.035+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:16:32.036+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:16:32.037+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:16:32.037+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:16:32.037+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:32.038+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:32.038+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:32.038+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59b696db] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:32.039+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@845868178 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:16:32.039+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:16:32.040+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:16:32.041+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:16:32.042+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59b696db]
2026-02-10T11:16:32.042+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:32.043+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:16:32.043+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:16:32.046+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:16:32.049+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:16:32.050+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:16:32.050+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:16:32.051+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:16:32.051+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:16:32.051+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:32.052+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:16:32.052+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:16:32.052+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7256c179] was not registered for synchronization because synchronization is not active
2026-02-10T11:16:32.053+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@69228337 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:16:32.053+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:16:32.053+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:16:32.055+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:16:32.055+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7256c179]
2026-02-10T11:16:32.056+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:16:32.056+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:16:32.057+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:09.845+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:17:09.848+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:17:09.849+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:17:09.850+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:17:09.850+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:17:09.850+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:17:09.851+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:09.851+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@482a1fb4] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:09.853+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1123872968 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:17:09.853+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:17:09.854+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:17:09.860+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:17:09.868+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@482a1fb4]
2026-02-10T11:17:09.870+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:09.871+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:17:09.872+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:11.042+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:17:11.045+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:17:11.052+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:17:11.053+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:17:11.053+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:17:11.053+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:17:11.054+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:11.054+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ccff0d5] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:11.068+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:17:11.070+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:17:11.072+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:17:11.073+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:17:11.073+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:17:11.073+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:17:11.073+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:11.074+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@704bae9b] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:11.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@973238494 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:17:11.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@962575109 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:17:11.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:17:11.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:17:11.080+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:17:11.082+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:17:11.084+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:17:11.085+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:17:11.085+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ccff0d5]
2026-02-10T11:17:11.085+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@704bae9b]
2026-02-10T11:17:11.085+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:11.086+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:11.086+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63c80241] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:11.086+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:17:11.087+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@334839433 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:17:11.095+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:11.098+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:17:11.099+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:17:11.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:17:11.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63c80241]
2026-02-10T11:17:11.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:11.110+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:17:11.110+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:11.154+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:17:11.156+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:17:11.157+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:17:11.158+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:17:11.158+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:17:11.158+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:17:11.159+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:11.160+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d9baed0] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:11.169+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@94215942 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:17:11.170+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:17:11.171+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:17:11.174+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:17:11.175+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d9baed0]
2026-02-10T11:17:11.176+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:11.178+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bcda0c8] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:11.179+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1558415622 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:17:11.182+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:17:11.183+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:17:11.190+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:17:11.193+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:17:11.195+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:17:11.201+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:17:11.202+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:17:11.203+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:17:11.203+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bcda0c8]
2026-02-10T11:17:11.203+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:17:11.206+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:11.206+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:17:11.207+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:17:11.207+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:17:11.208+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:11.210+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:11.211+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28b5effb] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:11.213+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1823256221 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:17:11.213+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:17:11.214+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:17:11.218+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:17:11.219+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28b5effb]
2026-02-10T11:17:11.219+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:11.220+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:17:11.221+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:11.226+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:17:11.229+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:17:11.230+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:17:11.231+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:17:11.231+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:17:11.231+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:17:11.232+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:11.232+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2518ec3d] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:11.234+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@929137423 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:17:11.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:17:11.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:17:11.241+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:17:11.241+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2518ec3d]
2026-02-10T11:17:11.242+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:11.243+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:17:11.243+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:11.247+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:17:11.250+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:17:11.251+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:17:11.252+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:17:11.253+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:17:11.254+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:17:11.254+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:17:11.255+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:17:11.255+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:11.255+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6474add0] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:11.257+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1637493200 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:17:11.258+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:17:11.258+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:17:11.260+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:17:11.260+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6474add0]
2026-02-10T11:17:11.261+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:11.261+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:17:11.261+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:11.317+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:17:11.319+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:17:11.320+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:17:11.320+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:17:11.320+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:17:11.320+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:17:11.321+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:17:11.321+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:17:11.322+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:11.322+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ab450a1] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:11.322+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@164468156 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:17:11.322+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:17:11.323+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:17:11.324+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:17:11.325+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ab450a1]
2026-02-10T11:17:11.325+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:11.325+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:17:11.326+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:11.329+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-10T11:17:11.333+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-10T11:17:11.333+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies
2026-02-10T11:17:11.334+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-10T11:17:11.334+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-10T11:17:11.334+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-10T11:17:11.334+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:11.335+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a6e153c] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:11.336+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@301132094 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:17:11.336+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-10T11:17:11.337+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 9(Long)
2026-02-10T11:17:11.339+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-10T11:17:11.340+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a6e153c]
2026-02-10T11:17:11.341+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:11.341+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-10T11:17:11.342+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:11.366+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:17:11.368+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:17:11.369+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:17:11.369+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:17:11.369+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:17:11.370+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:17:11.370+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:11.370+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35ea764a] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:11.371+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@841452859 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:17:11.371+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:17:11.372+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:17:11.374+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:17:11.374+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35ea764a]
2026-02-10T11:17:11.375+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:11.375+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:17:11.376+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:11.385+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:17:11.387+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:17:11.388+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:17:11.389+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:17:11.389+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:17:11.389+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:17:11.390+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:11.390+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54b0c670] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:11.390+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@876044317 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:17:11.390+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:17:11.391+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:17:11.392+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:17:11.397+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:17:11.398+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:17:11.398+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54b0c670]
2026-02-10T11:17:11.398+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:17:11.399+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:11.399+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:17:11.400+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64d96fc0] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:11.400+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:17:11.400+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@914925165 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:17:11.401+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:17:11.401+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:17:11.402+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:11.402+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:17:11.402+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c61964b] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:11.403+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@873567041 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:17:11.404+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:17:11.404+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:17:11.405+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:17:11.405+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64d96fc0]
2026-02-10T11:17:11.406+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:11.409+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:17:11.410+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:11.410+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:17:11.412+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c61964b]
2026-02-10T11:17:11.413+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:11.415+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:17:11.415+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:11.418+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:17:11.420+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:17:11.421+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:17:11.421+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:17:11.421+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:17:11.422+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:17:11.422+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:17:11.423+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:11.423+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@489018cd] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:11.424+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1084844070 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:17:11.424+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:17:11.424+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:17:11.425+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:17:11.426+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:17:11.426+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:17:11.427+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:17:11.427+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:17:11.427+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:17:11.427+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@489018cd]
2026-02-10T11:17:11.428+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:17:11.428+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:11.430+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:17:11.431+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21c5af06] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:11.432+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:11.432+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1775996291 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:17:11.432+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@182f205f] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:11.433+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:17:11.433+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@49414547 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:17:11.433+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:17:11.434+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:17:11.434+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:17:11.436+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:17:11.436+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21c5af06]
2026-02-10T11:17:11.436+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:11.437+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:17:11.437+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:17:11.438+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:11.438+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@182f205f]
2026-02-10T11:17:11.439+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:11.439+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:17:11.440+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:11.444+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:17:11.448+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:17:11.449+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:17:11.450+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:17:11.450+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:17:11.450+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:17:11.451+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:11.451+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e9f5be9] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:11.451+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@681655382 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:17:11.452+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:17:11.453+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:17:11.454+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:17:11.455+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e9f5be9]
2026-02-10T11:17:11.455+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:11.455+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:17:11.456+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:11.458+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:17:11.460+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:17:11.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:17:11.462+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:17:11.462+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:17:11.462+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:17:11.463+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:17:11.464+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:17:11.465+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:11.465+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@198eabc5] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:11.467+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2050221387 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:17:11.467+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:17:11.468+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:17:11.470+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:17:11.470+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@198eabc5]
2026-02-10T11:17:11.471+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:17:11.472+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:11.473+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:17:11.474+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:11.475+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:17:11.477+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:17:11.478+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:17:11.478+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:17:11.479+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:17:11.479+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:17:11.480+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:17:11.481+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:11.482+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c972295] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:11.482+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@474229890 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:17:11.483+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:17:11.483+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:17:11.485+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:17:11.485+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c972295]
2026-02-10T11:17:11.486+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:11.487+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:17:11.487+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:29.043+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:17:29.046+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:17:29.048+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:17:29.049+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:17:29.050+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:17:29.050+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:17:29.050+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:29.051+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73c18fc9] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:29.052+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:17:29.053+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@346455523 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:17:29.054+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:17:29.056+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:17:29.056+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:17:29.058+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:17:29.059+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:17:29.060+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:17:29.060+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:17:29.060+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73c18fc9]
2026-02-10T11:17:29.061+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:17:29.061+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:29.061+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:29.061+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:17:29.061+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12d07f07] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:29.063+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:29.069+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1643180467 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:17:29.070+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:17:29.070+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:17:29.073+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:17:29.073+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12d07f07]
2026-02-10T11:17:29.074+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:29.074+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9e022df] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:29.074+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@514699633 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:17:29.074+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:17:29.075+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:17:29.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:17:29.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9e022df]
2026-02-10T11:17:29.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:29.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:17:29.079+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:29.093+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:17:29.099+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:17:29.102+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:17:29.102+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:17:29.103+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:17:29.103+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:17:29.103+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:29.103+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d31c861] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:29.105+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@950489807 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:17:29.106+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:17:29.107+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:17:29.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:17:29.110+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d31c861]
2026-02-10T11:17:29.110+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:29.111+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:17:29.111+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:29.129+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:17:29.133+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:17:29.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:17:29.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:17:29.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:17:29.136+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:17:29.136+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:29.136+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@194642fc] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:29.138+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1158081041 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:17:29.138+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:17:29.139+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:17:29.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:17:29.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@194642fc]
2026-02-10T11:17:29.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:29.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@570c901f] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:29.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@365649604 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:17:29.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:17:29.144+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:17:29.147+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:17:29.148+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@570c901f]
2026-02-10T11:17:29.149+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:29.149+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:17:29.150+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:29.153+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:17:29.155+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:17:29.156+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:17:29.157+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:17:29.157+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:17:29.158+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:17:29.158+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:17:29.158+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:17:29.159+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:29.159+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fec23dc] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:29.161+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@399979209 wrapping com.mysql.cj.jdbc.ConnectionImpl@74a3c47b] will not be managed by Spring
2026-02-10T11:17:29.161+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:17:29.162+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:17:29.162+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:17:29.165+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:17:29.166+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:17:29.166+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fec23dc]
2026-02-10T11:17:29.167+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:29.168+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:17:29.168+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:17:29.168+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:17:29.168+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:29.168+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:17:29.170+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:17:29.170+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:29.170+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24fd1ade] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:29.172+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@491658183 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:17:29.172+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:17:29.173+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:17:29.175+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:17:29.175+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24fd1ade]
2026-02-10T11:17:29.175+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:29.176+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:17:29.177+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:29.179+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:17:29.183+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:17:29.184+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:17:29.184+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:17:29.185+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:17:29.185+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:17:29.186+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:17:29.186+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:17:29.187+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:29.187+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a497a92] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:29.188+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@582435806 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:17:29.188+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:17:29.188+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:17:29.190+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:17:29.190+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a497a92]
2026-02-10T11:17:29.191+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:29.191+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:17:29.192+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:29.194+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:17:29.199+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:17:29.200+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:17:29.200+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:17:29.201+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:17:29.201+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:17:29.201+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:17:29.202+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:17:29.202+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:29.203+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3429d7eb] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:29.203+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@27824949 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:17:29.203+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:17:29.204+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:17:29.205+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:17:29.206+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3429d7eb]
2026-02-10T11:17:29.206+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:29.207+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:17:29.207+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:29.209+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-10T11:17:29.211+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-10T11:17:29.212+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies
2026-02-10T11:17:29.214+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-10T11:17:29.215+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-10T11:17:29.215+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-10T11:17:29.216+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:29.216+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2830e0b8] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:29.216+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@462361033 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:17:29.217+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-10T11:17:29.218+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 9(Long)
2026-02-10T11:17:29.219+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:17:29.220+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-10T11:17:29.221+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2830e0b8]
2026-02-10T11:17:29.221+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:29.222+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-10T11:17:29.222+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:17:29.222+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:29.223+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:17:29.224+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:17:29.224+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:17:29.225+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:17:29.225+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:29.225+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26596042] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:29.225+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1688915535 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:17:29.226+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:17:29.227+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:17:29.229+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:17:29.231+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26596042]
2026-02-10T11:17:29.232+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:29.232+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:17:29.233+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:29.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:17:29.239+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:17:29.240+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:17:29.240+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:17:29.240+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:17:29.241+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:17:29.241+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:29.241+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72b4e056] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:29.242+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@995604516 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:17:29.242+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:17:29.243+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:17:29.245+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:17:29.245+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72b4e056]
2026-02-10T11:17:29.249+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:29.249+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71eb86b1] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:29.250+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@612925066 wrapping com.mysql.cj.jdbc.ConnectionImpl@21f3e27] will not be managed by Spring
2026-02-10T11:17:29.250+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:17:29.252+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:17:29.253+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:17:29.255+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:17:29.255+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:17:29.256+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71eb86b1]
2026-02-10T11:17:29.256+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:17:29.256+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:29.257+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:17:29.256+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:17:29.259+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:29.260+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:17:29.261+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:17:29.266+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:29.267+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c2a81d4] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:29.268+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2102846761 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:17:29.268+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:17:29.270+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:17:29.273+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:17:29.273+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c2a81d4]
2026-02-10T11:17:29.274+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:29.275+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:17:29.275+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:29.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:17:29.285+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:17:29.286+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:17:29.287+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:17:29.287+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:17:29.288+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:17:29.288+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:29.289+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@570a126c] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:29.289+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@761659881 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:17:29.289+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:17:29.290+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:17:29.292+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:17:29.294+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:17:29.298+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@570a126c]
2026-02-10T11:17:29.299+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:29.300+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:17:29.300+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37117f0c] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:29.301+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@814715632 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:17:29.301+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:17:29.301+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:17:29.301+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:17:29.302+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:17:29.302+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:17:29.303+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:17:29.304+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:17:29.304+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:17:29.305+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:29.305+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:17:29.305+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1835623] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:29.305+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37117f0c]
2026-02-10T11:17:29.305+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@40789665 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:17:29.306+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:29.306+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:17:29.306+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:17:29.307+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:17:29.307+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:29.309+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:17:29.309+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1835623]
2026-02-10T11:17:29.310+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:29.310+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:17:29.311+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:29.323+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:17:29.325+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:17:29.326+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:17:29.327+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:17:29.327+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:17:29.327+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:17:29.328+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:29.328+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7236470f] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:29.328+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@528511611 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:17:29.328+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:17:29.329+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:17:29.332+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:17:29.332+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7236470f]
2026-02-10T11:17:29.333+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:29.334+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:17:29.335+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:29.339+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:17:29.342+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:17:29.343+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:17:29.343+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:17:29.344+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:17:29.344+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:17:29.344+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:17:29.345+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:17:29.345+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:29.347+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63c93bf4] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:29.347+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:17:29.348+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1243209176 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:17:29.349+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:17:29.349+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:17:29.351+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:17:29.352+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:17:29.353+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63c93bf4]
2026-02-10T11:17:29.353+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:17:29.353+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:29.353+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:17:29.354+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:17:29.354+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:17:29.354+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:17:29.354+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:17:29.355+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:17:29.356+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:17:29.356+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:17:29.357+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@268090da] was not registered for synchronization because synchronization is not active
2026-02-10T11:17:29.357+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1852609023 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:17:29.357+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:17:29.358+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:17:29.359+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:17:29.360+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@268090da]
2026-02-10T11:17:29.360+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:17:29.360+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:17:29.361+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:21:51.167+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:21:51.168+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:21:51.168+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-10T11:21:51.168+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:21:51.168+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:21:51.212+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:21:51.213+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:21:51.213+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-10T11:21:51.215+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:21:51.262+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:21:51.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies
2026-02-10T11:21:51.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:21:51.262+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:21:51.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:21:51.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-10T11:21:51.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:21:51.264+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:21:51.264+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:21:51.264+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-10T11:21:51.264+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:21:51.265+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:21:51.265+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:21:51.266+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-10T11:21:51.268+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:21:51.276+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:21:51.279+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:21:51.279+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:21:51.280+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:21:51.286+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:21:51.286+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:21:51.287+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:21:51.287+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24517302] was not registered for synchronization because synchronization is not active
2026-02-10T11:21:51.405+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56ae720b] was not registered for synchronization because synchronization is not active
2026-02-10T11:21:51.410+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:21:51.410+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d05446e] was not registered for synchronization because synchronization is not active
2026-02-10T11:21:51.430+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b2b6750] was not registered for synchronization because synchronization is not active
2026-02-10T11:21:51.432+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:21:51.455+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:21:51.459+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1849287863 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:21:51.459+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1530805866 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:21:51.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:21:51.462+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:21:51.467+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-10T11:21:51.468+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1262707004 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:21:51.468+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@367265213 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:21:51.471+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aee4fb4] was not registered for synchronization because synchronization is not active
2026-02-10T11:21:51.481+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:21:51.482+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 9(Long)
2026-02-10T11:21:51.483+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:21:51.483+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:21:51.503+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:21:51.504+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:21:51.535+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1037101705 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:21:51.536+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-10T11:21:51.536+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:21:51.536+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:21:51.538+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:21:51.538+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56ae720b]
2026-02-10T11:21:51.539+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d05446e]
2026-02-10T11:21:51.539+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b2b6750]
2026-02-10T11:21:51.541+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:21:51.543+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:21:51.542+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:21:51.543+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:21:51.543+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:21:51.543+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-10T11:21:51.544+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24517302]
2026-02-10T11:21:51.544+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:21:51.545+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2770ce5b] was not registered for synchronization because synchronization is not active
2026-02-10T11:21:51.550+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:21:51.550+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:21:51.552+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:21:51.552+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@161684162 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:21:51.556+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:21:51.559+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:21:51.560+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:21:51.564+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:21:51.567+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:21:51.571+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aee4fb4]
2026-02-10T11:21:51.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:21:51.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56b1fb65] was not registered for synchronization because synchronization is not active
2026-02-10T11:21:51.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:21:51.576+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1916113839 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:21:51.577+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2770ce5b]
2026-02-10T11:21:51.578+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:21:51.579+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:21:51.579+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:21:51.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:21:51.584+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:21:51.596+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:21:51.598+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56b1fb65]
2026-02-10T11:21:51.599+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:21:51.605+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:21:51.607+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:22:17.336+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:22:17.341+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:22:17.342+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-10T11:22:17.342+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:22:17.342+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:22:17.478+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:22:17.478+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:22:17.478+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-10T11:22:17.495+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:22:17.495+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:22:17.496+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:22:17.496+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies
2026-02-10T11:22:17.496+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:22:17.498+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:22:17.498+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:22:17.515+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:22:17.515+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-10T11:22:17.518+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:22:17.553+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:22:17.600+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:22:17.615+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:22:17.615+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-10T11:22:17.615+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:22:17.616+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:22:17.616+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:22:17.616+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:22:17.617+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-10T11:22:17.617+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:22:17.617+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:22:17.617+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:22:17.618+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d99a2f2] was not registered for synchronization because synchronization is not active
2026-02-10T11:22:17.618+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:22:17.619+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43438469] was not registered for synchronization because synchronization is not active
2026-02-10T11:22:17.627+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:22:17.628+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:22:17.628+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20033316] was not registered for synchronization because synchronization is not active
2026-02-10T11:22:17.768+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1788586054 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:22:17.786+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:22:17.787+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1529789294 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:22:17.798+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:22:17.804+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:22:17.807+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@729069e1] was not registered for synchronization because synchronization is not active
2026-02-10T11:22:17.819+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:22:17.822+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@498689093 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:22:17.833+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7122637a] was not registered for synchronization because synchronization is not active
2026-02-10T11:22:17.835+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:22:17.861+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:22:17.861+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-10T11:22:17.863+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 9(Long)
2026-02-10T11:22:17.872+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1113003600 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:22:17.875+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:22:17.877+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:22:17.877+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1994887854 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:22:17.878+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:22:17.879+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43438469]
2026-02-10T11:22:17.879+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:22:17.879+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:22:17.879+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d99a2f2]
2026-02-10T11:22:17.880+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:22:17.880+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:22:17.881+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-10T11:22:17.883+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:22:17.884+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1496acc2] was not registered for synchronization because synchronization is not active
2026-02-10T11:22:17.885+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20033316]
2026-02-10T11:22:17.885+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:22:17.886+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:22:17.886+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1007111868 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:22:17.887+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:22:17.888+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:22:17.891+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@729069e1]
2026-02-10T11:22:17.891+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:22:17.892+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-10T11:22:17.893+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:22:17.894+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:22:17.895+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:22:17.895+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:22:17.901+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:22:17.907+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:22:17.932+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7122637a]
2026-02-10T11:22:17.942+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:22:17.944+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fcf4b6] was not registered for synchronization because synchronization is not active
2026-02-10T11:22:17.945+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:22:17.946+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@669832949 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:22:17.946+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1496acc2]
2026-02-10T11:22:17.948+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:22:17.953+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:22:17.955+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:22:17.957+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:22:17.958+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:22:17.974+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:22:17.976+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fcf4b6]
2026-02-10T11:22:17.976+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:22:17.977+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:22:17.978+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:22:33.959+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:22:33.960+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:22:33.961+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-10T11:22:33.962+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:22:33.963+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:22:34.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:22:34.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:22:34.080+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:22:34.129+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:22:34.130+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:22:34.083+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:22:34.083+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-10T11:22:34.131+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:22:34.116+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:22:34.130+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:22:34.130+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:22:34.132+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies
2026-02-10T11:22:34.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:22:34.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:22:34.136+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:22:34.136+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:22:34.136+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-10T11:22:34.137+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:22:34.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:22:34.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:22:34.157+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:22:34.158+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-10T11:22:34.158+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:22:34.158+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:22:34.162+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:22:34.300+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@799196b] was not registered for synchronization because synchronization is not active
2026-02-10T11:22:34.323+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-10T11:22:34.324+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:22:34.324+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:22:34.324+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:22:34.326+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:22:34.327+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11be0dd9] was not registered for synchronization because synchronization is not active
2026-02-10T11:22:34.327+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17e4b4c8] was not registered for synchronization because synchronization is not active
2026-02-10T11:22:34.327+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@761e8dd5] was not registered for synchronization because synchronization is not active
2026-02-10T11:22:34.328+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35bb52df] was not registered for synchronization because synchronization is not active
2026-02-10T11:22:34.330+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1288962863 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:22:34.332+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:22:34.333+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@13397176 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:22:34.333+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@916167055 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:22:34.333+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1147525234 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:22:34.334+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@312374897 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:22:34.335+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:22:34.336+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:22:34.336+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:22:34.336+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:22:34.337+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-10T11:22:34.340+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:22:34.343+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:22:34.346+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:22:34.346+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:22:34.348+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 9(Long)
2026-02-10T11:22:34.349+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@799196b]
2026-02-10T11:22:34.362+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:22:34.362+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65a5c82f] was not registered for synchronization because synchronization is not active
2026-02-10T11:22:34.378+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@835918097 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:22:34.378+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-10T11:22:34.378+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:22:34.379+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:22:34.379+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:22:34.382+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:22:34.383+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35bb52df]
2026-02-10T11:22:34.383+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11be0dd9]
2026-02-10T11:22:34.383+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@761e8dd5]
2026-02-10T11:22:34.383+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17e4b4c8]
2026-02-10T11:22:34.384+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:22:34.384+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:22:34.385+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:22:34.386+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:22:34.386+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:22:34.389+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-10T11:22:34.390+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26bbcd97] was not registered for synchronization because synchronization is not active
2026-02-10T11:22:34.390+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:22:34.391+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:22:34.392+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:22:34.392+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1820518659 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:22:34.394+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:22:34.396+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:22:34.397+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:22:34.410+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:22:34.414+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:22:34.416+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65a5c82f]
2026-02-10T11:22:34.417+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:22:34.417+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:22:34.417+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:22:34.418+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26bbcd97]
2026-02-10T11:22:34.418+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:22:34.418+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:22:34.419+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:22:34.422+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:22:43.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:22:43.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:22:43.241+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-10T11:22:43.241+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:22:43.241+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:22:43.299+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:22:43.299+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:22:43.299+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-10T11:22:43.308+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:22:43.311+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:22:43.335+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies
2026-02-10T11:22:43.315+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:22:43.328+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:22:43.335+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:22:43.336+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-10T11:22:43.336+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:22:43.336+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:22:43.336+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:22:43.367+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:22:43.369+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-10T11:22:43.370+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:22:43.370+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:22:43.370+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:22:43.375+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:22:43.378+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-10T11:22:43.450+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:22:43.470+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:22:43.470+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:22:43.470+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:22:43.471+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:22:43.476+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:22:43.476+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:22:43.476+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:22:43.477+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:22:43.477+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25168de6] was not registered for synchronization because synchronization is not active
2026-02-10T11:22:43.478+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:22:43.478+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32d5ccd3] was not registered for synchronization because synchronization is not active
2026-02-10T11:22:43.478+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40bc1b4f] was not registered for synchronization because synchronization is not active
2026-02-10T11:22:43.479+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3154a65d] was not registered for synchronization because synchronization is not active
2026-02-10T11:22:43.479+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17a74bd0] was not registered for synchronization because synchronization is not active
2026-02-10T11:22:43.535+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1090684292 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:22:43.536+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@572543096 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:22:43.536+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1619314944 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:22:43.546+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:22:43.551+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1397317927 wrapping com.mysql.cj.jdbc.ConnectionImpl@63eb9e51] will not be managed by Spring
2026-02-10T11:22:43.551+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@347721157 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:22:43.552+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:22:43.552+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-10T11:22:43.560+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:22:43.560+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:22:43.580+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:22:43.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:22:43.590+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 9(Long)
2026-02-10T11:22:43.592+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:22:43.597+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:22:43.602+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:22:43.604+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:22:43.605+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40bc1b4f]
2026-02-10T11:22:43.613+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-10T11:22:43.613+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:22:43.613+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:22:43.613+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3154a65d]
2026-02-10T11:22:43.614+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:22:43.614+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25168de6]
2026-02-10T11:22:43.614+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32d5ccd3]
2026-02-10T11:22:43.615+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17a74bd0]
2026-02-10T11:22:43.616+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:22:43.618+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@510d09a1] was not registered for synchronization because synchronization is not active
2026-02-10T11:22:43.619+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:22:43.619+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:22:43.620+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:22:43.621+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:22:43.622+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@166587665 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:22:43.626+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-10T11:22:43.627+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:22:43.627+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45b96213] was not registered for synchronization because synchronization is not active
2026-02-10T11:22:43.628+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:22:43.629+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:22:43.629+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:22:43.630+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:22:43.631+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1841788857 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:22:43.634+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:22:43.646+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:22:43.648+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:22:43.659+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:22:43.661+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@510d09a1]
2026-02-10T11:22:43.662+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:22:43.662+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:22:43.663+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45b96213]
2026-02-10T11:22:43.663+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:22:43.664+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:22:43.665+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:22:43.666+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:22:43.669+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:23:02.253+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:23:02.255+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:23:02.255+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-10T11:23:02.256+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:23:02.256+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:23:02.601+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:23:02.653+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:23:02.694+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-10T11:23:02.745+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:23:02.695+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:23:02.730+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:23:02.741+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:23:02.746+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:23:02.746+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies
2026-02-10T11:23:02.746+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:23:02.746+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:23:02.747+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:23:02.877+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:23:02.852+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:23:02.868+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-10T11:23:02.869+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:23:02.869+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:23:02.878+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:23:02.878+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:23:02.879+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-10T11:23:02.879+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:23:02.879+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:23:02.880+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:23:02.880+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:23:02.880+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-10T11:23:02.907+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:23:02.983+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:23:02.993+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:23:02.993+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57e52f35] was not registered for synchronization because synchronization is not active
2026-02-10T11:23:02.994+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:23:02.994+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f4ab814] was not registered for synchronization because synchronization is not active
2026-02-10T11:23:02.995+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:23:02.995+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@354d3eb8] was not registered for synchronization because synchronization is not active
2026-02-10T11:23:02.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59ff5cf5] was not registered for synchronization because synchronization is not active
2026-02-10T11:23:02.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75e11019] was not registered for synchronization because synchronization is not active
2026-02-10T11:23:03.040+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@845925769 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:23:03.040+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1592492078 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:23:03.040+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1841736067 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:23:03.041+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1681337742 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:23:03.041+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1161433775 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:23:03.061+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:23:03.061+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-10T11:23:03.062+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:23:03.062+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:23:03.062+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:23:03.063+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:23:03.064+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 9(Long)
2026-02-10T11:23:03.065+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:23:03.065+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:23:03.066+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:23:03.097+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:23:03.097+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:23:03.098+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-10T11:23:03.098+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:23:03.098+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:23:03.101+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75e11019]
2026-02-10T11:23:03.101+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f4ab814]
2026-02-10T11:23:03.102+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59ff5cf5]
2026-02-10T11:23:03.104+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57e52f35]
2026-02-10T11:23:03.105+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@354d3eb8]
2026-02-10T11:23:03.106+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:23:03.106+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:23:03.107+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:23:03.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:23:03.113+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:23:03.113+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:23:03.114+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:23:03.114+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-10T11:23:03.114+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33ec383f] was not registered for synchronization because synchronization is not active
2026-02-10T11:23:03.114+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@544c3809] was not registered for synchronization because synchronization is not active
2026-02-10T11:23:03.115+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:23:03.115+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:23:03.115+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:23:03.116+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2021281646 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:23:03.116+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1016151251 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:23:03.133+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:23:03.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:23:03.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:23:03.144+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:23:03.166+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:23:03.167+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:23:03.193+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:23:03.193+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:23:03.198+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:23:03.199+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:23:03.210+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@544c3809]
2026-02-10T11:23:03.219+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33ec383f]
2026-02-10T11:23:03.220+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:23:03.220+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:23:03.223+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:23:03.223+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:23:03.224+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:23:03.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:23:03.232+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:23:03.233+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:23:03.235+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:23:03.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:23:03.242+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:23:03.243+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:23:03.243+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:23:03.243+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:23:03.244+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:23:03.248+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:23:03.249+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484e6c8b] was not registered for synchronization because synchronization is not active
2026-02-10T11:23:03.249+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1733586970 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:23:03.250+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:23:03.245+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62f27ad3] was not registered for synchronization because synchronization is not active
2026-02-10T11:23:03.253+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1512886263 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:23:03.252+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:23:03.257+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:23:03.260+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:23:03.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:23:03.296+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484e6c8b]
2026-02-10T11:23:03.297+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:23:03.298+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:23:03.298+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62f27ad3]
2026-02-10T11:23:03.298+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:23:03.298+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:23:03.299+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:23:03.299+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b0fbd48] was not registered for synchronization because synchronization is not active
2026-02-10T11:23:03.300+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1255832600 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:23:03.315+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:23:03.344+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:23:03.375+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:23:03.397+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b0fbd48]
2026-02-10T11:23:03.397+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:23:03.463+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:23:03.490+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:23:03.825+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:23:03.825+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:23:03.827+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:23:03.830+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:23:03.835+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:23:03.837+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:23:03.915+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:23:03.916+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:23:03.916+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:23:03.917+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:23:03.917+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:23:03.918+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:23:03.945+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:23:03.945+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:23:03.945+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:23:03.946+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:23:03.946+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:23:03.946+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:23:03.959+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:23:03.951+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:23:03.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:23:03.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:23:03.953+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:23:03.960+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:23:03.960+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:23:03.960+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:23:03.960+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:23:03.961+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:23:03.965+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:23:03.972+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:23:03.965+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:23:03.967+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:23:03.969+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:23:03.969+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:23:03.970+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:23:03.973+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:23:03.973+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:23:03.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:23:03.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:23:03.976+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:23:03.977+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:23:03.977+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:23:03.978+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:23:03.980+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f5a611e] was not registered for synchronization because synchronization is not active
2026-02-10T11:23:03.978+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:23:03.978+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:23:03.979+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:23:03.979+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:23:03.980+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:23:03.981+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:23:03.981+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:23:03.982+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:23:03.983+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63eca1a4] was not registered for synchronization because synchronization is not active
2026-02-10T11:23:03.983+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@790714551 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:23:03.983+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:23:03.985+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d2b2a20] was not registered for synchronization because synchronization is not active
2026-02-10T11:23:03.983+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:23:03.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@191f577b] was not registered for synchronization because synchronization is not active
2026-02-10T11:23:03.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:23:03.985+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:23:03.986+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@991782191 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:23:03.987+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3747f409] was not registered for synchronization because synchronization is not active
2026-02-10T11:23:03.990+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dde4995] was not registered for synchronization because synchronization is not active
2026-02-10T11:23:03.991+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:23:03.991+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:23:03.992+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@656961783 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:23:03.995+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:23:03.995+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:23:03.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:23:03.997+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1632341658 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:23:03.998+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1864796140 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:23:03.998+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:23:03.998+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:23:03.999+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:23:03.999+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:23:04.000+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63eca1a4]
2026-02-10T11:23:04.001+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f5a611e]
2026-02-10T11:23:04.002+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:23:04.002+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:23:04.002+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:23:04.002+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@75839570 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:23:04.002+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:23:04.003+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:23:04.003+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d2b2a20]
2026-02-10T11:23:04.007+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:23:04.009+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:23:04.010+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fb3cc44] was not registered for synchronization because synchronization is not active
2026-02-10T11:23:04.010+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:23:04.011+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:23:04.011+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:23:04.011+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:23:04.011+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:23:04.013+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@697468614 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:23:04.013+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:23:04.013+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3747f409]
2026-02-10T11:23:04.017+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:23:04.017+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@191f577b]
2026-02-10T11:23:04.018+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:23:04.019+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:23:04.025+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:23:04.026+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:23:04.028+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:23:04.028+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:23:04.028+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:23:04.030+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:23:04.030+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:23:04.031+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dde4995]
2026-02-10T11:23:04.031+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:23:04.032+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:23:04.033+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:23:04.033+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:23:04.036+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:23:04.037+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:23:04.041+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:23:04.044+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:23:04.044+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:23:04.045+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:23:04.047+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:23:04.048+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:23:04.049+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:23:04.057+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:23:04.057+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:23:04.059+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:23:04.074+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:23:04.075+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:23:04.076+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:23:04.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:23:04.060+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:23:04.060+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:23:04.069+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:23:04.072+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:23:04.080+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:23:04.080+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:23:04.086+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:23:04.087+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:23:04.092+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:23:04.089+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:23:04.091+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:23:04.091+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:23:04.091+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fb3cc44]
2026-02-10T11:23:04.092+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:23:04.093+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:23:04.104+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@645f261b] was not registered for synchronization because synchronization is not active
2026-02-10T11:23:04.093+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:23:04.094+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:23:04.094+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36c8b3bf] was not registered for synchronization because synchronization is not active
2026-02-10T11:23:04.095+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:23:04.096+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a7d90a5] was not registered for synchronization because synchronization is not active
2026-02-10T11:23:04.107+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@523723365 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:23:04.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:23:04.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:23:04.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1106501410 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:23:04.110+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:23:04.111+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@23894357 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:23:04.119+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:23:04.115+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:23:04.120+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:23:04.116+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@195e43ef] was not registered for synchronization because synchronization is not active
2026-02-10T11:23:04.117+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:23:04.118+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:23:04.118+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:23:04.119+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:23:04.126+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1610434673 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:23:04.126+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:23:04.126+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:23:04.138+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@481dee1d] was not registered for synchronization because synchronization is not active
2026-02-10T11:23:04.127+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:23:04.128+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:23:04.134+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:23:04.137+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@645f261b]
2026-02-10T11:23:04.139+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@512363804 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:23:04.141+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:23:04.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:23:04.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:23:04.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:23:04.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:23:04.145+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:23:04.146+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:23:04.151+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:23:04.151+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:23:04.155+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:23:04.157+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:23:04.157+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:23:04.157+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a7d90a5]
2026-02-10T11:23:04.159+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:23:04.160+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@195e43ef]
2026-02-10T11:23:04.161+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36c8b3bf]
2026-02-10T11:23:04.162+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:23:04.162+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:23:04.162+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:23:04.164+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:23:04.165+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:23:04.165+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:23:04.165+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@502ff1d1] was not registered for synchronization because synchronization is not active
2026-02-10T11:23:04.166+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@481dee1d]
2026-02-10T11:23:04.166+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:23:04.166+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:23:04.166+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:23:04.173+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:23:04.168+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@345413923 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:23:04.169+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:23:04.170+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:23:04.177+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:23:04.179+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5431446a] was not registered for synchronization because synchronization is not active
2026-02-10T11:23:04.192+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:23:04.192+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1945843191 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:23:04.193+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:23:04.198+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:23:04.198+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:23:04.199+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@502ff1d1]
2026-02-10T11:23:04.201+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:23:04.201+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:23:04.204+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:23:04.206+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:23:04.208+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5431446a]
2026-02-10T11:23:04.216+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:23:04.218+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:23:04.219+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:23:08.872+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:23:08.872+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:23:08.872+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:23:08.872+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:23:08.880+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:23:08.881+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:23:08.882+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:23:08.882+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:23:08.882+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:23:08.883+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:23:08.883+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:23:08.884+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:23:08.884+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:23:08.884+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:23:08.885+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:23:08.885+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:23:08.885+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:23:08.886+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:23:08.886+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:23:08.886+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:23:08.886+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:23:08.887+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:23:08.890+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:23:08.892+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:23:08.894+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:23:08.906+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:23:08.908+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@233bcb31] was not registered for synchronization because synchronization is not active
2026-02-10T11:23:08.898+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:23:08.912+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:23:08.899+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:23:08.899+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:23:08.915+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:23:08.915+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70dc4429] was not registered for synchronization because synchronization is not active
2026-02-10T11:23:08.916+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:23:08.916+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:23:08.918+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:23:08.923+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@597c5b62] was not registered for synchronization because synchronization is not active
2026-02-10T11:23:08.918+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a392f6b] was not registered for synchronization because synchronization is not active
2026-02-10T11:23:08.928+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1127324037 wrapping com.mysql.cj.jdbc.ConnectionImpl@7c83188d] will not be managed by Spring
2026-02-10T11:23:08.928+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@449394517 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b5640eb] will not be managed by Spring
2026-02-10T11:23:08.929+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:23:08.929+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1150821995 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:23:08.929+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1963953695 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:23:08.931+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:23:08.931+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:23:08.931+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:23:08.931+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:23:08.933+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:23:08.934+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:23:08.935+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:23:08.937+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:23:08.941+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70dc4429]
2026-02-10T11:23:08.943+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:23:08.943+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:23:08.943+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:23:08.943+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a392f6b]
2026-02-10T11:23:08.943+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@233bcb31]
2026-02-10T11:23:08.944+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:23:08.944+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:23:08.945+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:23:08.945+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:23:08.947+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:23:08.947+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@597c5b62]
2026-02-10T11:23:08.948+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:23:08.949+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:23:08.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:23:08.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:23:08.958+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:23:08.959+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:23:08.965+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:23:26.447+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/payments
2026-02-10T11:23:26.457+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/payments
2026-02-10T11:23:26.458+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/payments
2026-02-10T11:23:26.459+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/payments
2026-02-10T11:23:26.460+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/payments", parameters={}
2026-02-10T11:23:26.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPayments()
2026-02-10T11:23:26.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:23:26.464+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:23:26.465+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:23:26.466+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2393df3] was not registered for synchronization because synchronization is not active
2026-02-10T11:23:26.490+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1988880702 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:23:26.510+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.PaymentMapper.findByCompanyId    : ==>  Preparing: SELECT p.* FROM payment_tb p INNER JOIN subscription_tb s ON p.subscription_id = s.subscription_id WHERE s.company_id = ? ORDER BY p.payment_date DESC, p.created_at DESC
2026-02-10T11:23:26.510+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.PaymentMapper.findByCompanyId    : ==> Parameters: 3(Long)
2026-02-10T11:23:26.516+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-10T11:23:26.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-02-10T11:23:26.519+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-10T11:23:26.520+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.PaymentMapper.findByCompanyId    : <==      Total: 2
2026-02-10T11:23:26.520+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2393df3]
2026-02-10T11:23:26.522+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:23:26.523+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[PaymentDto(paymentId=2, subscriptionId=1, amount=1550 (truncated)...]
2026-02-10T11:23:26.524+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:23:35.071+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/payments
2026-02-10T11:23:35.074+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/payments
2026-02-10T11:23:35.075+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/payments
2026-02-10T11:23:35.075+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/payments
2026-02-10T11:23:35.075+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/payments", parameters={}
2026-02-10T11:23:35.075+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPayments()
2026-02-10T11:23:35.076+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:23:35.076+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:23:35.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:23:35.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4502a2eb] was not registered for synchronization because synchronization is not active
2026-02-10T11:23:35.079+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@912484037 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:23:35.079+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.PaymentMapper.findByCompanyId    : ==>  Preparing: SELECT p.* FROM payment_tb p INNER JOIN subscription_tb s ON p.subscription_id = s.subscription_id WHERE s.company_id = ? ORDER BY p.payment_date DESC, p.created_at DESC
2026-02-10T11:23:35.080+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.PaymentMapper.findByCompanyId    : ==> Parameters: 3(Long)
2026-02-10T11:23:35.082+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-10T11:23:35.082+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-02-10T11:23:35.085+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-10T11:23:35.085+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.PaymentMapper.findByCompanyId    : <==      Total: 2
2026-02-10T11:23:35.086+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4502a2eb]
2026-02-10T11:23:35.086+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:23:35.089+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[PaymentDto(paymentId=2, subscriptionId=1, amount=1550 (truncated)...]
2026-02-10T11:23:35.091+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:23:49.964+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/payments
2026-02-10T11:23:49.973+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/payments
2026-02-10T11:23:49.976+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/payments
2026-02-10T11:23:49.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/payments
2026-02-10T11:23:49.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/payments", parameters={}
2026-02-10T11:23:49.997+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPayments()
2026-02-10T11:23:49.998+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:23:49.999+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:23:49.999+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:23:50.000+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3758e3d4] was not registered for synchronization because synchronization is not active
2026-02-10T11:23:50.024+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1000458800 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:23:50.034+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.PaymentMapper.findByCompanyId    : ==>  Preparing: SELECT p.* FROM payment_tb p INNER JOIN subscription_tb s ON p.subscription_id = s.subscription_id WHERE s.company_id = ? ORDER BY p.payment_date DESC, p.created_at DESC
2026-02-10T11:23:50.039+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.PaymentMapper.findByCompanyId    : ==> Parameters: 3(Long)
2026-02-10T11:23:50.049+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-10T11:23:50.050+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-02-10T11:23:50.056+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-10T11:23:50.057+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.PaymentMapper.findByCompanyId    : <==      Total: 2
2026-02-10T11:23:50.057+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3758e3d4]
2026-02-10T11:23:50.058+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:23:50.059+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[PaymentDto(paymentId=2, subscriptionId=1, amount=1550 (truncated)...]
2026-02-10T11:23:50.060+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:25:22.938+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:25:22.939+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:25:22.939+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:25:22.939+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:25:22.980+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:25:23.107+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:25:23.107+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:25:23.107+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:25:23.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:25:23.116+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:25:23.122+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:25:23.119+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:25:23.120+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:25:23.122+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:25:23.122+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:25:23.132+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:25:23.125+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:25:23.130+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:25:23.130+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:25:23.138+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:25:23.132+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:25:23.136+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:25:23.137+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:25:23.139+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:25:23.140+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@736e03c9] was not registered for synchronization because synchronization is not active
2026-02-10T11:25:23.140+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:25:23.140+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:25:23.141+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:25:23.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:25:23.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:25:23.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:25:23.150+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27cee7d0] was not registered for synchronization because synchronization is not active
2026-02-10T11:25:23.144+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:25:23.154+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:25:23.156+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14accba2] was not registered for synchronization because synchronization is not active
2026-02-10T11:25:23.148+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:25:23.160+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:25:23.162+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@172558450 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:25:23.162+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@391fc8e7] was not registered for synchronization because synchronization is not active
2026-02-10T11:25:23.163+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:25:23.164+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:25:23.166+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1227857362 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:25:23.166+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@860148628 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:25:23.175+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:25:23.176+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:25:23.176+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:25:23.177+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:25:23.183+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@701003987 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:25:23.199+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:25:23.199+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:25:23.199+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:25:23.199+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:25:23.213+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:25:23.213+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14accba2]
2026-02-10T11:25:23.226+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27cee7d0]
2026-02-10T11:25:23.227+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@736e03c9]
2026-02-10T11:25:23.228+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:25:23.229+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:25:23.229+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:25:23.230+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:25:23.230+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:25:23.232+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:25:23.231+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:25:23.231+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:25:23.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:25:23.325+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:25:23.331+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@391fc8e7]
2026-02-10T11:25:23.342+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:25:23.347+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:25:23.353+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:25:33.742+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:25:33.745+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:25:33.746+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:25:33.746+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:25:33.746+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:25:33.747+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:25:33.747+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:25:33.747+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:25:33.748+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:25:33.748+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c3845fe] was not registered for synchronization because synchronization is not active
2026-02-10T11:25:33.750+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1291461809 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:25:33.750+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:25:33.751+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:25:33.753+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:25:33.754+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c3845fe]
2026-02-10T11:25:33.754+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:25:33.755+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:25:33.755+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:25:33.760+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:25:33.763+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:25:33.764+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:25:33.765+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:25:33.765+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:25:33.766+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:25:33.766+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:25:33.766+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fd637f1] was not registered for synchronization because synchronization is not active
2026-02-10T11:25:33.766+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1110323584 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:25:33.767+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:25:33.768+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:25:33.770+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:25:33.770+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fd637f1]
2026-02-10T11:25:33.771+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:25:33.771+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:25:33.771+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:25:33.776+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:25:33.778+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:25:33.779+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:25:33.780+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:25:33.780+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:25:33.780+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:25:33.780+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:25:33.781+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:25:33.781+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:25:33.782+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b55ab0e] was not registered for synchronization because synchronization is not active
2026-02-10T11:25:33.783+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2021283784 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:25:33.784+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:25:33.785+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:25:33.787+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:25:33.787+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b55ab0e]
2026-02-10T11:25:33.787+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:25:33.787+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:25:33.788+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:25:33.792+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:25:33.794+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:25:33.795+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:25:33.795+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:25:33.796+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:25:33.796+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:25:33.796+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:25:33.797+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:25:33.797+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:25:33.797+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37bdbc13] was not registered for synchronization because synchronization is not active
2026-02-10T11:25:33.799+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1666171426 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:25:33.799+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:25:33.799+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:25:33.802+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:25:33.802+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37bdbc13]
2026-02-10T11:25:33.802+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:25:33.803+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:25:33.803+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:26:14.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:26:14.904+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:26:14.905+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:26:14.906+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:26:14.906+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:26:14.906+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:26:14.907+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:26:14.907+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:26:14.908+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:14.908+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7063152c] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:14.910+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1525775910 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:26:14.910+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:26:14.911+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:26:14.913+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:26:14.913+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7063152c]
2026-02-10T11:26:14.913+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:26:14.914+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:26:14.914+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:26:14.920+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:26:14.922+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:26:14.923+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:26:14.923+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:26:14.923+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:26:14.924+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:26:14.925+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:26:14.925+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:14.926+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b9f78ac] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:14.926+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:26:14.927+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:26:14.927+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@801970874 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:26:14.928+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:26:14.928+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:26:14.928+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:26:14.928+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:26:14.929+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:26:14.930+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:26:14.931+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:26:14.932+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:14.932+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d5015ca] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:14.933+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:26:14.935+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b9f78ac]
2026-02-10T11:26:14.935+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:26:14.936+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1358322675 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:26:14.936+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:26:14.936+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:26:14.937+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:26:14.938+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:26:14.940+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:26:14.940+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d5015ca]
2026-02-10T11:26:14.941+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:26:14.941+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:26:14.941+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:26:14.942+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:26:14.945+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:26:14.946+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:26:14.946+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:26:14.947+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:26:14.947+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:26:14.947+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:26:14.948+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:26:14.948+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:14.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@585a12c6] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:14.951+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1995762465 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:26:14.951+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:26:14.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:26:14.954+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:26:14.954+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@585a12c6]
2026-02-10T11:26:14.955+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:26:14.956+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:26:14.956+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:26:23.678+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:26:23.680+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:26:23.681+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:26:23.682+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:26:23.682+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:26:23.682+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:26:23.683+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:26:23.683+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:26:23.684+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:23.684+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8b19301] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:23.686+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1890444800 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:26:23.686+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:26:23.687+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:26:23.688+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:26:23.689+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8b19301]
2026-02-10T11:26:23.689+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:26:23.689+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:26:23.690+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:26:23.693+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:26:23.696+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:26:23.697+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:26:23.698+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:26:23.699+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:26:23.700+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:26:23.700+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:23.700+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@627b1eba] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:23.702+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@789825644 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:26:23.703+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:26:23.704+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:26:23.705+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:26:23.706+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@627b1eba]
2026-02-10T11:26:23.706+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:26:23.706+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:26:23.707+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:26:23.722+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:26:23.724+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:26:23.726+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:26:23.726+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:26:23.726+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:26:23.727+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:26:23.727+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:26:23.728+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:26:23.728+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:23.728+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31555fee] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:23.728+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1524594064 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:26:23.729+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:26:23.729+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:26:23.730+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:26:23.731+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31555fee]
2026-02-10T11:26:23.731+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:26:23.732+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:26:23.733+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:26:23.793+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:26:23.795+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:26:23.796+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:26:23.796+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:26:23.797+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:26:23.797+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:26:23.798+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:26:23.798+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:26:23.798+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:23.799+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78bcfce4] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:23.802+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@977718023 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:26:23.803+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:26:23.805+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:26:23.808+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:26:23.809+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78bcfce4]
2026-02-10T11:26:23.810+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:26:23.811+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:26:23.812+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:26:31.639+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:26:31.640+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:26:31.641+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-10T11:26:31.642+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:26:31.646+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:26:31.757+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:26:31.757+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:26:31.826+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:26:31.827+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:26:31.830+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:26:31.834+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-10T11:26:31.836+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:26:31.840+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:26:31.840+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:26:31.840+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:26:31.841+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:26:31.841+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies
2026-02-10T11:26:31.841+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:26:31.841+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:26:31.842+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:26:31.842+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:26:31.842+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-10T11:26:31.854+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:26:31.871+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:26:31.871+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:26:31.872+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:26:31.872+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-10T11:26:31.880+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:26:31.880+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:31.880+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:26:31.886+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:31.890+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-10T11:26:31.898+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:31.904+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68d5c26c] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:31.905+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:31.906+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cc0a8cf] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:31.907+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:31.907+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e138858] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:31.911+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21bd530b] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:31.912+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cd5335d] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:31.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:26:31.968+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1379324590 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:26:31.968+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1646713905 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:26:32.046+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1684771231 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:26:32.064+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:26:32.070+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@518897682 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:26:32.085+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:26:32.072+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:26:32.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1749750744 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:26:32.079+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:26:32.080+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:26:32.084+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:26:32.086+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:26:32.088+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-10T11:26:32.088+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:26:32.088+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:26:32.090+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:26:32.095+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 9(Long)
2026-02-10T11:26:32.095+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:26:32.104+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:26:32.106+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:26:32.106+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:26:32.106+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:26:32.108+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21bd530b]
2026-02-10T11:26:32.108+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68d5c26c]
2026-02-10T11:26:32.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:26:32.110+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cc0a8cf]
2026-02-10T11:26:32.112+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:32.113+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:26:32.114+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-10T11:26:32.114+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:26:32.119+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:26:32.119+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:32.120+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ece66d3] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:32.120+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:26:32.121+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cd5335d]
2026-02-10T11:26:32.122+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e138858]
2026-02-10T11:26:32.124+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:26:32.126+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67bfa4] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:32.126+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1929969465 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:26:32.127+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:26:32.127+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:26:32.127+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:26:32.145+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:26:32.129+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:26:32.130+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1831136172 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:26:32.130+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:26:32.137+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:26:32.138+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-10T11:26:32.147+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:26:32.151+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:26:32.153+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:26:32.154+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:26:32.167+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:26:32.173+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:26:32.176+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:26:32.189+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:26:32.190+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:26:32.191+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:26:32.192+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:26:32.192+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:26:32.201+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:26:32.197+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:26:32.198+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:26:32.202+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:26:32.203+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:26:32.203+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:26:32.226+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:26:32.226+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:26:32.226+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:26:32.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:26:32.238+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:26:32.243+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:26:32.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:26:32.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:26:32.237+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ece66d3]
2026-02-10T11:26:32.237+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67bfa4]
2026-02-10T11:26:32.237+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:26:32.243+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:32.244+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:26:32.244+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:26:32.245+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:26:32.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:26:32.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:32.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11d09d20] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:32.280+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@253416520 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:26:32.254+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52d0e4bd] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:32.255+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:26:32.255+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:32.260+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:26:32.265+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:26:32.290+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:26:32.291+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@705120216 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:26:32.296+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:26:32.297+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67235771] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:32.297+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:26:32.298+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:26:32.303+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:26:32.304+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:26:32.303+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:26:32.303+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:32.304+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2015384552 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:26:32.307+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:26:32.307+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:26:32.308+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79c0208e] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:32.308+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:26:32.309+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:26:32.310+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:26:32.312+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@681635043 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:26:32.324+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:26:32.324+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:26:32.324+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:26:32.326+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:26:32.327+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:26:32.327+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:26:32.328+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:26:32.329+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:26:32.329+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:26:32.329+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52d0e4bd]
2026-02-10T11:26:32.330+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11d09d20]
2026-02-10T11:26:32.330+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:26:32.334+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:26:32.330+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:26:32.332+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:26:32.332+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:26:32.335+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:26:32.338+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:26:32.339+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:26:32.340+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:26:32.373+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:26:32.341+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:32.381+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fac6db8] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:32.386+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2096973160 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:26:32.387+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:26:32.342+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:26:32.365+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:26:32.379+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:26:32.388+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:26:32.388+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:32.390+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:26:32.390+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:26:32.391+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52bcacb3] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:32.391+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:26:32.392+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:26:32.392+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@953865169 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:26:32.393+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:26:32.393+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:26:32.393+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:26:32.393+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:26:32.394+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:26:32.395+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:26:32.395+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:26:32.395+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:26:32.396+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:26:32.429+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:26:32.440+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:32.460+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:32.460+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79c0208e]
2026-02-10T11:26:32.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67235771]
2026-02-10T11:26:32.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fac6db8]
2026-02-10T11:26:32.462+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13b8c210] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:32.462+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:26:32.462+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47eb1704] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:32.462+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:26:32.465+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:32.469+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:26:32.469+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52bcacb3]
2026-02-10T11:26:32.469+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1433739993 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:26:32.469+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1310485392 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:26:32.469+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:26:32.476+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d5c320a] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:32.477+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:26:32.478+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:26:32.478+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:26:32.479+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:26:32.480+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:26:32.480+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@540634639 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:26:32.481+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:26:32.482+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:26:32.487+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:26:32.488+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:26:32.489+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:26:32.490+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:26:32.491+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:26:32.497+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:26:32.506+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:26:32.507+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:26:32.508+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:26:32.510+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:26:32.512+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:26:32.513+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:26:32.514+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:26:32.523+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:26:32.523+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:26:32.524+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:26:32.524+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:26:32.524+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:26:32.525+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:26:32.525+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:26:32.525+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:32.526+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7471b1f1] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:32.525+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:26:32.526+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:26:32.527+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@960801106 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:26:32.527+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:26:32.529+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:32.529+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:26:32.540+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:26:32.542+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:26:32.542+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:26:32.548+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1735eaf5] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:32.548+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:26:32.555+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:32.558+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cf1bcce] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:32.549+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:26:32.550+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13b8c210]
2026-02-10T11:26:32.550+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d5c320a]
2026-02-10T11:26:32.550+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47eb1704]
2026-02-10T11:26:32.551+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@714276136 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:26:32.560+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:26:32.562+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:26:32.562+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:26:32.563+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:26:32.563+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:26:32.568+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:26:32.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@549201434 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:26:32.579+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:26:32.576+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:26:32.576+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:32.579+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:26:32.588+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:26:32.588+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:26:32.588+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f4b9ae2] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:32.589+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:26:32.589+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:26:32.590+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:26:32.590+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@277348152 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:26:32.595+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:26:32.596+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:26:32.592+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:26:32.593+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:26:32.601+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:26:32.603+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:26:32.603+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:26:32.605+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:32.605+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:26:32.607+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:26:32.607+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:26:32.610+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a99534f] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:32.611+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1735eaf5]
2026-02-10T11:26:32.611+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7471b1f1]
2026-02-10T11:26:32.612+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:26:32.612+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2142875565 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:26:32.613+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:26:32.614+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:26:32.616+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:26:32.618+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:26:32.618+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:26:32.623+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:26:32.626+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:26:32.636+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:26:32.640+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:26:32.641+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cf1bcce]
2026-02-10T11:26:32.641+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f4b9ae2]
2026-02-10T11:26:32.641+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:26:32.643+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:26:32.648+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:26:32.652+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:26:32.653+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:26:32.653+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:26:32.664+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:26:32.664+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:26:32.666+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:26:32.668+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:26:32.669+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:26:32.672+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:26:32.670+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:26:32.670+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:26:32.670+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:26:32.671+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:26:32.675+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:26:32.676+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:26:32.676+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:26:32.688+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:26:32.696+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:26:32.701+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:26:32.717+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:26:32.720+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:26:32.718+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:26:32.719+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:26:32.719+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:26:32.719+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a99534f]
2026-02-10T11:26:32.725+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:26:32.725+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:26:32.741+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:26:32.742+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:26:32.747+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:32.756+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:26:32.757+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:26:32.763+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:26:32.764+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:32.764+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:26:32.764+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71072fcc] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:32.771+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:26:32.765+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:26:32.765+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:26:32.767+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:32.770+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62038c55] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:32.771+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@154907954 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:26:32.772+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:32.772+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:26:32.772+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:26:32.773+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61f6e391] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:32.822+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@881526269 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:26:32.823+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:26:32.774+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1585376256 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:26:32.823+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:26:32.810+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:26:32.814+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26126aae] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:32.825+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@293372907 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:26:32.827+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:26:32.821+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:26:32.828+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:26:32.823+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:26:32.824+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:26:32.824+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:26:32.825+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:26:32.829+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:26:32.829+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:26:32.830+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:32.829+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:26:32.830+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26982b54] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:32.830+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:26:32.830+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@443056623 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:26:32.830+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:26:32.830+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:26:32.831+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:26:32.831+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:26:32.832+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:26:32.845+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:32.846+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62bf0739] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:32.846+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:26:32.846+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:26:32.847+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:26:32.847+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:26:32.847+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:26:32.848+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1738794512 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ae53bd9] will not be managed by Spring
2026-02-10T11:26:32.851+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26126aae]
2026-02-10T11:26:32.852+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26982b54]
2026-02-10T11:26:32.852+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61f6e391]
2026-02-10T11:26:32.852+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62038c55]
2026-02-10T11:26:32.852+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71072fcc]
2026-02-10T11:26:32.853+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:26:32.855+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:26:32.855+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:26:32.855+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:26:32.856+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:26:32.856+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:26:32.857+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:26:32.857+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:26:32.857+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:26:32.858+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:26:32.858+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aeee368] was not registered for synchronization because synchronization is not active
2026-02-10T11:26:32.859+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:26:32.860+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:26:32.861+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:26:32.861+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:26:32.861+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1693562180 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:26:32.861+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:26:32.862+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:26:32.864+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:26:32.876+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:26:32.889+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62bf0739]
2026-02-10T11:26:32.890+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:26:32.894+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:26:32.895+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:26:32.895+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aeee368]
2026-02-10T11:26:32.895+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:26:32.896+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:26:32.905+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:26:32.911+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:30:23.838+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:30:23.838+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:30:23.839+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:30:23.839+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:30:23.839+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:30:23.839+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:30:23.882+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:30:23.890+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:30:23.891+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-10T11:30:23.892+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:30:23.896+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:30:23.897+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:30:23.900+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:30:23.906+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:30:23.906+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:30:23.907+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:30:23.908+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:30:23.916+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:30:23.919+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:30:23.921+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:30:23.922+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:30:23.930+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:30:23.939+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:30:23.940+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:30:23.940+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:30:23.942+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:30:23.946+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:30:23.947+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:30:23.947+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:30:23.949+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:30:23.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:30:23.951+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:30:23.951+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:30:23.953+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:30:23.953+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:30:23.953+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:30:23.953+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:30:23.954+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:30:23.954+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:30:23.955+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:30:23.955+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:30:23.957+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:30:23.958+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:30:23.959+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:30:23.979+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:23.968+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:30:23.968+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:30:23.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:23.970+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:30:23.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:23.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:23.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dbd562f] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:23.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:30:23.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24dd8042] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:23.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:23.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15a4a35a] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:23.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1475db24] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:23.985+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:30:23.985+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55001313] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:23.986+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:23.986+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f5d86e6] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:23.988+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1095270353 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:30:23.989+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@503808127 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ae53bd9] will not be managed by Spring
2026-02-10T11:30:23.988+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1874425308 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:30:23.989+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1240963969 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:30:23.989+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:30:23.989+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:30:23.989+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1146825828 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:30:23.991+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:30:23.989+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1956748546 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:30:23.989+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:30:23.990+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:30:23.990+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:30:23.991+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:30:23.992+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:30:23.992+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:30:23.992+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:30:23.997+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:30:23.998+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:30:24.004+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:30:24.004+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:30:24.004+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55001313]
2026-02-10T11:30:24.004+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15a4a35a]
2026-02-10T11:30:24.005+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:30:24.005+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:30:24.005+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:30:24.005+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:30:24.005+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:30:24.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dbd562f]
2026-02-10T11:30:24.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:30:24.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:30:24.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:24.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@748a894d] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:24.009+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@516592565 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:30:24.013+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:30:24.015+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:30:24.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:30:24.013+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:30:24.018+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:30:24.019+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:30:24.019+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:30:24.020+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:30:24.020+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:30:24.021+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:30:24.021+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:30:24.022+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:30:24.024+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:30:24.024+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:30:24.025+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:30:24.039+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:30:24.040+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:30:24.040+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f5d86e6]
2026-02-10T11:30:24.040+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24dd8042]
2026-02-10T11:30:24.040+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1475db24]
2026-02-10T11:30:24.041+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:30:24.052+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:24.054+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:30:24.055+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:30:24.055+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:30:24.056+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:30:24.057+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:30:24.057+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7464ed18] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:24.057+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:30:24.058+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:30:24.058+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:30:24.064+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@748a894d]
2026-02-10T11:30:24.065+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:24.067+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@427599199 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:30:24.067+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:30:24.067+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:30:24.068+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:30:24.069+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:30:24.088+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:30:24.089+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:30:24.069+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8043e02] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:24.100+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1540045162 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:30:24.100+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:30:24.101+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:30:24.073+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:30:24.102+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:30:24.074+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-10T11:30:24.080+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:30:24.085+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:30:24.098+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:30:24.114+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:30:24.108+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies
2026-02-10T11:30:24.112+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:30:24.114+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:30:24.115+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:30:24.115+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-10T11:30:24.115+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:30:24.116+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:30:24.116+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:30:24.117+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-10T11:30:24.117+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:30:24.123+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:30:24.123+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:30:24.124+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:30:24.125+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:30:24.125+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-10T11:30:24.129+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:30:24.131+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7464ed18]
2026-02-10T11:30:24.132+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8043e02]
2026-02-10T11:30:24.134+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:30:24.132+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:30:24.132+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:24.132+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:24.133+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:24.133+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:30:24.134+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:30:24.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:30:24.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26ebf3d6] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:24.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46977ec5] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:24.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@275f9351] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:24.136+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:30:24.137+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:30:24.138+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:30:24.139+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@842502276 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:30:24.148+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@645160563 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:30:24.148+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1902315072 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:30:24.149+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:30:24.150+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:30:24.152+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:24.158+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66a305ab] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:24.153+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:30:24.153+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-10T11:30:24.154+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:30:24.155+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:30:24.157+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:30:24.176+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:30:24.169+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1661268706 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ae53bd9] will not be managed by Spring
2026-02-10T11:30:24.170+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:30:24.175+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 9(Long)
2026-02-10T11:30:24.175+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:30:24.176+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:30:24.181+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:30:24.182+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:30:24.196+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:30:24.197+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:30:24.206+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:30:24.213+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:30:24.214+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:30:24.215+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:30:24.214+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:24.214+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26ebf3d6]
2026-02-10T11:30:24.217+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:24.218+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:30:24.218+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-10T11:30:24.220+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67ff7a51] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:24.220+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:30:24.223+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@54635025 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:30:24.221+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f9b3a67] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:24.221+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@275f9351]
2026-02-10T11:30:24.222+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:30:24.222+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46977ec5]
2026-02-10T11:30:24.223+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:30:24.223+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:30:24.224+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@5677646 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:30:24.224+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:24.225+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66a305ab]
2026-02-10T11:30:24.225+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:30:24.226+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:30:24.233+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:30:24.233+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:30:24.234+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@710176e4] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:24.234+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:30:24.234+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-10T11:30:24.249+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:30:24.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:30:24.254+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:30:24.255+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:30:24.255+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:30:24.256+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:30:24.257+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:30:24.238+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:30:24.248+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@715110030 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:30:24.248+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:30:24.252+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:30:24.259+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:30:24.262+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:30:24.266+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:30:24.267+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:30:24.268+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:24.268+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:30:24.270+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:30:24.280+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:30:24.282+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:30:24.283+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:30:24.283+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13573f20] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:24.287+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:30:24.288+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:30:24.288+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67ff7a51]
2026-02-10T11:30:24.289+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f9b3a67]
2026-02-10T11:30:24.290+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@617028838 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:30:24.291+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:30:24.292+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:30:24.317+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:30:24.317+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:24.318+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:30:24.318+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:30:24.319+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:24.321+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@380d81e5] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:24.319+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:30:24.320+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26a0d827] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:24.320+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:30:24.321+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:30:24.321+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@409839432 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:30:24.322+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:30:24.337+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1891538582 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:30:24.338+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:30:24.417+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:30:24.455+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:30:24.456+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:30:24.467+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:30:24.467+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:30:24.468+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:30:24.483+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@710176e4]
2026-02-10T11:30:24.486+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13573f20]
2026-02-10T11:30:24.488+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:30:24.489+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:30:24.489+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:24.490+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:30:24.490+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:30:24.491+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:30:24.504+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b2deb1a] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:24.512+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@846213715 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:30:24.513+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:30:24.504+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:30:24.508+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:30:24.513+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:30:24.514+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:30:24.515+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:30:24.519+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:30:24.519+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:30:24.523+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:30:24.531+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:30:24.532+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@380d81e5]
2026-02-10T11:30:24.542+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:24.533+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:30:24.535+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26a0d827]
2026-02-10T11:30:24.549+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:30:24.550+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:30:24.537+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:30:24.551+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:30:24.540+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:30:24.548+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e10d22a] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:24.550+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:30:24.553+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:30:24.553+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:30:24.555+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@977691812 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:30:24.555+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:30:24.556+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:30:24.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:30:24.575+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:30:24.580+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:30:24.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:24.583+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3facf39] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:24.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:30:24.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:30:24.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:30:24.576+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:30:24.585+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2054613459 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:30:24.586+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:30:24.587+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:30:24.587+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:30:24.588+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:30:24.588+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:30:24.589+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:30:24.589+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:24.589+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:30:24.590+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b2deb1a]
2026-02-10T11:30:24.590+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:30:24.591+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:30:24.592+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b0d1d64] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:24.595+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:30:24.596+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:30:24.599+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:30:24.599+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:30:24.601+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@110175638 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:30:24.601+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:30:24.603+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:30:24.603+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:30:24.604+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e10d22a]
2026-02-10T11:30:24.604+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:30:24.604+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:30:24.604+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:30:24.604+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:30:24.605+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:24.605+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:30:24.613+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:30:24.614+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:30:24.607+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:30:24.607+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3facf39]
2026-02-10T11:30:24.620+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:30:24.621+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:30:24.621+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:30:24.607+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:24.630+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4406d32] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:24.630+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2114751752 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:30:24.608+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b6f41a8] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:24.631+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@837538778 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:30:24.632+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:30:24.632+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:30:24.609+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:30:24.618+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:30:24.631+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:30:24.636+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:30:24.635+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:30:24.637+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:30:24.637+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:30:24.637+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:30:24.638+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:30:24.638+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:30:24.638+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:30:24.639+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:30:24.639+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:30:24.639+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:30:24.669+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:30:24.669+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:24.670+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7925cf8c] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:24.671+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@131404638 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ae53bd9] will not be managed by Spring
2026-02-10T11:30:24.671+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:30:24.672+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:30:24.648+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:30:24.675+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:24.675+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36a1842f] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:24.677+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@705715544 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:30:24.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:30:24.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:30:24.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:30:24.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:30:24.698+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:30:24.699+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:30:24.700+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4406d32]
2026-02-10T11:30:24.701+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b0d1d64]
2026-02-10T11:30:24.701+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b6f41a8]
2026-02-10T11:30:24.702+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7925cf8c]
2026-02-10T11:30:24.702+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:30:24.703+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:24.704+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:30:24.705+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:30:24.707+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:30:24.708+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:30:24.708+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4585995] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:24.709+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:30:24.709+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36a1842f]
2026-02-10T11:30:24.709+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:30:24.712+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:30:24.714+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@397247047 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:30:24.716+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:30:24.716+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:30:24.718+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:30:24.721+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:30:24.724+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:30:24.736+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:30:24.737+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:30:24.755+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:30:24.756+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4585995]
2026-02-10T11:30:24.758+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:30:24.758+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:30:24.761+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:30:33.521+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:30:33.540+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:30:33.541+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:30:33.541+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:30:33.865+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:30:33.867+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:30:33.868+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:30:33.870+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:30:33.871+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:30:33.872+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:30:33.872+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:30:33.873+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:30:33.874+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:30:33.874+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:30:33.875+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:30:33.879+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:30:33.880+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:30:33.880+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:30:33.881+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:30:33.882+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:30:33.882+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:30:33.884+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:30:33.884+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:30:33.885+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:30:33.886+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:33.887+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:33.888+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:30:33.888+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:30:33.889+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7adaca5e] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:33.890+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@558f4518] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:33.890+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:30:33.899+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:30:33.900+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:33.900+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fd421d] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:33.890+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:30:33.901+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:30:33.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:33.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@166176eb] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:33.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1854875284 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ae53bd9] will not be managed by Spring
2026-02-10T11:30:33.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@199514957 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:30:33.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1214200055 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:30:33.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1660489080 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:30:33.954+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:30:33.954+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:30:33.955+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:30:33.955+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:30:33.956+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:30:33.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:30:33.980+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:30:33.981+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:30:33.990+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:30:33.990+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:30:33.990+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:30:33.991+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:30:33.992+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7adaca5e]
2026-02-10T11:30:33.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@166176eb]
2026-02-10T11:30:33.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fd421d]
2026-02-10T11:30:33.997+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@558f4518]
2026-02-10T11:30:34.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:30:34.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:30:34.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:30:34.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:30:34.007+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:30:34.007+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:30:34.007+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:30:34.007+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:30:34.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:30:34.009+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:30:34.011+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:30:34.021+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:30:56.981+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:30:56.988+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:30:56.995+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:30:56.995+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:30:57.415+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:30:57.424+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:30:57.431+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:30:57.431+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:30:57.433+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:30:57.433+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:30:57.441+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:30:57.433+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:30:57.442+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:30:57.444+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:30:57.446+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:30:57.446+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:30:57.447+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:57.447+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:57.447+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17578ad7] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:57.448+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b067cf4] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:57.456+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:30:57.456+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:30:57.464+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:30:57.465+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:30:57.467+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2047169953 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:30:57.468+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1351058063 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:30:57.481+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:30:57.520+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:30:57.535+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:30:57.536+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:30:57.536+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:30:57.536+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:30:57.537+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:30:57.537+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:30:57.537+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:30:57.538+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:30:57.539+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:30:57.539+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:30:57.540+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:30:57.540+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:30:57.590+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:57.596+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:30:57.596+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:30:57.597+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:30:57.658+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6590f161] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:57.737+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17578ad7]
2026-02-10T11:30:57.754+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b067cf4]
2026-02-10T11:30:57.755+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@238381bf] was not registered for synchronization because synchronization is not active
2026-02-10T11:30:57.756+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:30:57.849+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:30:57.850+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@48282575 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:30:57.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:30:57.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:30:57.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:30:57.953+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:30:57.953+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:30:57.953+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:30:57.955+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@158197427 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ae53bd9] will not be managed by Spring
2026-02-10T11:30:58.033+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:30:58.035+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:30:58.038+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:30:58.096+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6590f161]
2026-02-10T11:30:58.097+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:30:58.103+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:30:58.151+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:30:58.163+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@238381bf]
2026-02-10T11:30:58.164+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:30:58.174+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:30:58.179+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:30:58.188+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:31:11.753+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:31:11.762+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:31:11.764+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:31:11.766+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:31:11.785+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:31:11.786+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:31:11.787+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:31:11.787+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:31:11.789+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:31:11.814+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:31:11.839+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:31:11.839+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:31:11.840+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:31:11.854+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:31:11.846+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:31:11.852+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:31:11.854+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:31:11.855+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:31:11.855+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:31:11.855+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:31:11.856+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:31:11.856+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:31:11.856+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:31:11.856+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:31:11.856+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:31:11.857+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:31:11.857+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:31:11.858+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:31:11.861+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:31:11.862+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:31:11.862+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50a31c25] was not registered for synchronization because synchronization is not active
2026-02-10T11:31:11.863+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:31:11.863+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:31:11.864+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fae9275] was not registered for synchronization because synchronization is not active
2026-02-10T11:31:11.865+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:31:11.866+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:31:11.867+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bdb4023] was not registered for synchronization because synchronization is not active
2026-02-10T11:31:11.867+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5995828e] was not registered for synchronization because synchronization is not active
2026-02-10T11:31:11.867+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1953281370 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:31:11.869+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@551264825 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:31:11.869+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1616458087 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:31:11.869+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:31:11.869+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1663411823 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:31:11.869+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:31:11.870+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:31:11.870+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:31:11.870+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:31:11.870+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:31:11.871+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:31:11.871+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:31:11.873+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:31:11.873+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:31:11.874+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:31:11.874+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:31:11.874+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50a31c25]
2026-02-10T11:31:11.874+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fae9275]
2026-02-10T11:31:11.874+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bdb4023]
2026-02-10T11:31:11.875+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5995828e]
2026-02-10T11:31:11.875+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:31:11.879+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:31:11.879+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:31:11.880+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:31:11.880+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:31:11.880+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:31:11.881+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:31:11.881+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:31:11.881+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:31:11.881+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:31:11.882+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:31:11.886+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:32:48.140+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:32:48.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:32:48.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:32:48.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:32:48.303+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:32:48.310+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:32:48.310+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:32:48.310+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:32:48.313+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:32:48.313+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:32:48.314+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:32:48.315+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:32:48.315+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:32:48.315+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:32:48.316+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:32:48.316+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:32:48.317+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:32:48.317+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b977357] was not registered for synchronization because synchronization is not active
2026-02-10T11:32:48.317+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:32:48.318+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:32:48.328+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:32:48.319+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:32:48.319+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:32:48.329+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b1c4518] was not registered for synchronization because synchronization is not active
2026-02-10T11:32:48.330+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:32:48.330+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:32:48.331+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1670523172 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:32:48.332+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:32:48.332+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:32:48.334+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:32:48.334+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:32:48.334+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:32:48.335+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:32:48.335+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:32:48.336+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:32:48.336+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:32:48.342+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:32:48.345+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:32:48.346+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:32:48.346+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@776b3117] was not registered for synchronization because synchronization is not active
2026-02-10T11:32:48.346+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@128a7430] was not registered for synchronization because synchronization is not active
2026-02-10T11:32:48.349+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1026585534 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ae53bd9] will not be managed by Spring
2026-02-10T11:32:48.353+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:32:48.366+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:32:48.369+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:32:48.369+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@14837873 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:32:48.369+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1260364215 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:32:48.382+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b977357]
2026-02-10T11:32:48.383+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:32:48.383+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:32:48.383+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:32:48.386+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:32:48.398+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:32:48.398+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:32:48.415+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:32:48.416+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b1c4518]
2026-02-10T11:32:48.416+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:32:48.417+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:32:48.418+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:32:48.433+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:32:48.438+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:32:48.439+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:32:48.460+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@776b3117]
2026-02-10T11:32:48.460+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@128a7430]
2026-02-10T11:32:48.460+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:32:48.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:32:48.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:32:48.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:32:48.462+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:32:48.463+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:33:01.481+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:33:01.481+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:33:01.481+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:33:01.481+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:33:01.649+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:33:01.651+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:33:01.652+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:33:01.653+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:33:01.713+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:33:01.715+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:33:01.715+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:33:01.715+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:33:01.715+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:33:01.716+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:33:01.716+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:33:01.716+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:33:01.717+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:33:01.717+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:33:01.717+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:33:01.717+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:33:01.717+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:33:01.718+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:33:01.718+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:33:01.718+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:33:01.719+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:33:01.719+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:33:01.720+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:33:01.720+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:33:01.720+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:33:01.720+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ae44a81] was not registered for synchronization because synchronization is not active
2026-02-10T11:33:01.721+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:33:01.721+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:33:01.725+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:33:01.728+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:33:01.728+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@277eac7] was not registered for synchronization because synchronization is not active
2026-02-10T11:33:01.729+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:33:01.729+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ebb6974] was not registered for synchronization because synchronization is not active
2026-02-10T11:33:01.731+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dfb6a26] was not registered for synchronization because synchronization is not active
2026-02-10T11:33:01.733+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@231445834 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:33:01.734+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@360996542 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:33:01.735+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:33:01.735+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:33:01.735+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@113697438 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:33:01.735+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@448786925 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ae53bd9] will not be managed by Spring
2026-02-10T11:33:01.735+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:33:01.736+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:33:01.736+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:33:01.737+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:33:01.737+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:33:01.739+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:33:01.742+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:33:01.742+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:33:01.743+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@277eac7]
2026-02-10T11:33:01.743+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ae44a81]
2026-02-10T11:33:01.744+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:33:01.744+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:33:01.745+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:33:01.746+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:33:01.746+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:33:01.747+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:33:01.766+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:33:01.766+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:33:01.768+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dfb6a26]
2026-02-10T11:33:01.769+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ebb6974]
2026-02-10T11:33:01.769+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:33:01.770+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:33:01.780+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:33:01.780+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:33:01.781+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:33:01.782+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:33:05.333+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:33:05.333+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:33:05.333+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:33:05.334+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:33:05.368+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:33:05.369+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:33:05.377+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:33:05.369+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:33:05.371+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:33:05.379+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:33:05.377+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:33:05.378+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:33:05.380+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:33:05.380+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:33:05.380+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:33:05.380+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:33:05.381+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:33:05.381+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:33:05.383+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:33:05.383+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:33:05.383+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:33:05.383+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:33:05.384+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:33:05.384+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:33:05.384+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:33:05.385+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:33:05.385+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:33:05.386+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:33:05.387+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:33:05.391+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28728b2f] was not registered for synchronization because synchronization is not active
2026-02-10T11:33:05.392+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:33:05.393+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:33:05.393+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:33:05.402+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:33:05.402+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5815ced6] was not registered for synchronization because synchronization is not active
2026-02-10T11:33:05.402+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:33:05.403+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1640d00] was not registered for synchronization because synchronization is not active
2026-02-10T11:33:05.404+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b1d0611] was not registered for synchronization because synchronization is not active
2026-02-10T11:33:05.410+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@549210503 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:33:05.412+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:33:05.414+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1955223673 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:33:05.414+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@745408942 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:33:05.414+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1947671052 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:33:05.416+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:33:05.416+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:33:05.416+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:33:05.417+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:33:05.417+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:33:05.418+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:33:05.418+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:33:05.432+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:33:05.432+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:33:05.435+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1640d00]
2026-02-10T11:33:05.435+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28728b2f]
2026-02-10T11:33:05.436+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:33:05.436+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:33:05.436+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:33:05.438+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:33:05.438+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:33:05.442+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:33:05.445+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:33:05.446+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5815ced6]
2026-02-10T11:33:05.446+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b1d0611]
2026-02-10T11:33:05.450+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:33:05.451+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:33:05.466+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:33:05.469+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:33:05.469+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:33:05.481+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:33:05.482+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:33:09.671+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:33:09.676+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:33:09.677+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:33:09.677+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:33:09.925+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:33:09.931+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:33:09.936+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:33:09.942+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:33:09.936+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:33:09.938+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:33:09.944+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:33:09.948+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:33:09.946+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:33:09.948+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:33:09.948+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:33:09.949+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:33:09.949+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:33:09.949+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:33:09.949+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:33:09.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:33:09.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:33:09.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:33:09.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:33:09.953+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:33:09.954+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:33:09.954+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:33:09.962+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:33:09.963+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d71e4c8] was not registered for synchronization because synchronization is not active
2026-02-10T11:33:09.963+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e01494e] was not registered for synchronization because synchronization is not active
2026-02-10T11:33:09.963+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:33:09.964+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:33:09.968+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:33:09.968+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:33:09.969+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:33:09.969+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fe2b312] was not registered for synchronization because synchronization is not active
2026-02-10T11:33:09.970+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:33:09.971+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:33:09.977+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a7765c5] was not registered for synchronization because synchronization is not active
2026-02-10T11:33:09.982+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1130727124 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b217fc0] will not be managed by Spring
2026-02-10T11:33:09.982+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@637428478 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:33:09.982+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@586950326 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:33:09.983+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:33:09.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:33:09.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:33:09.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:33:09.985+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:33:09.985+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:33:09.987+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2078241276 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:33:09.995+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:33:09.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:33:09.997+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:33:09.997+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:33:09.997+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:33:09.998+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fe2b312]
2026-02-10T11:33:09.999+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d71e4c8]
2026-02-10T11:33:10.000+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e01494e]
2026-02-10T11:33:10.000+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:33:10.001+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:33:10.001+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:33:10.002+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:33:10.002+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:33:10.004+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:33:10.004+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:33:10.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:33:10.014+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:33:10.019+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:33:10.032+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a7765c5]
2026-02-10T11:33:10.034+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:33:10.035+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:33:10.036+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:33:21.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:33:21.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:33:21.518+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:33:21.518+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:33:21.570+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:33:21.570+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:33:21.571+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:33:21.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:33:21.595+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:33:21.631+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:33:21.634+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:33:21.635+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:33:21.637+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:33:21.637+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:33:21.638+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:33:21.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:33:21.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:33:21.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:33:21.647+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:33:21.648+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:33:21.648+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:33:21.648+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:33:21.649+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:33:21.649+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:33:21.650+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:33:21.650+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:33:21.651+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:33:21.651+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:33:21.652+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:33:21.652+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9bbe2bf] was not registered for synchronization because synchronization is not active
2026-02-10T11:33:21.653+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:33:21.653+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:33:21.653+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:33:21.661+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:33:21.662+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:33:21.663+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36c518eb] was not registered for synchronization because synchronization is not active
2026-02-10T11:33:21.664+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a4743cc] was not registered for synchronization because synchronization is not active
2026-02-10T11:33:21.664+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@875404012 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:33:21.665+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cec73da] was not registered for synchronization because synchronization is not active
2026-02-10T11:33:21.667+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:33:21.668+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:33:21.669+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@659225544 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:33:21.669+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1390024037 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:33:21.670+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:33:21.670+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:33:21.671+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:33:21.671+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:33:21.680+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@896298852 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:33:21.681+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:33:21.682+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:33:21.682+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:33:21.683+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:33:21.683+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:33:21.683+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a4743cc]
2026-02-10T11:33:21.683+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9bbe2bf]
2026-02-10T11:33:21.684+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36c518eb]
2026-02-10T11:33:21.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:33:21.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:33:21.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:33:21.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:33:21.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:33:21.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:33:21.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:33:21.686+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:33:21.686+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:33:21.715+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:33:21.721+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cec73da]
2026-02-10T11:33:21.727+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:33:21.731+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:33:21.731+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:34:32.778+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:34:32.778+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:34:32.778+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:34:32.778+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:34:32.946+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:34:32.946+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:34:32.946+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:34:32.948+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:34:32.947+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:34:32.948+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:34:32.949+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:34:32.949+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:34:32.949+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:34:32.949+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:34:32.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:34:32.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:34:32.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:34:32.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:34:32.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:34:32.962+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:34:32.962+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:34:32.979+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:34:32.980+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:34:32.980+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:34:32.980+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:34:32.981+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:34:32.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58811deb] was not registered for synchronization because synchronization is not active
2026-02-10T11:34:32.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:34:32.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:34:32.985+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:34:33.001+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:34:33.002+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:34:33.012+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:34:33.013+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:34:33.017+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:34:33.029+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@794a3edd] was not registered for synchronization because synchronization is not active
2026-02-10T11:34:33.017+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@628ee03d] was not registered for synchronization because synchronization is not active
2026-02-10T11:34:33.018+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@322235bb] was not registered for synchronization because synchronization is not active
2026-02-10T11:34:33.028+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1226121564 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:34:33.037+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:34:33.073+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:34:33.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1953502700 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:34:33.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@790162952 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:34:33.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@866889746 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:34:33.081+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:34:33.081+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:34:33.096+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:34:33.096+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:34:33.096+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:34:33.097+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:34:33.097+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:34:33.098+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58811deb]
2026-02-10T11:34:33.116+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:34:33.117+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:34:33.118+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:34:33.149+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:34:33.149+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:34:33.149+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:34:33.156+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@794a3edd]
2026-02-10T11:34:33.157+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@322235bb]
2026-02-10T11:34:33.157+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@628ee03d]
2026-02-10T11:34:33.159+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:34:33.162+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:34:33.162+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:34:33.163+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:34:33.163+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:34:33.164+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:34:33.181+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:34:33.181+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:34:33.181+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:34:38.439+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:34:38.443+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:34:38.443+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:34:38.443+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:34:38.552+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:34:38.556+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:34:38.557+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:34:38.559+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:34:38.578+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:34:38.580+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:34:38.580+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:34:38.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:34:38.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:34:38.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:34:38.582+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:34:38.582+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:34:38.583+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:34:38.583+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:34:38.583+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:34:38.583+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:34:38.584+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:34:38.584+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:34:38.585+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:34:38.585+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:34:38.585+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:34:38.591+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:34:38.593+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:34:38.593+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a9bbac6] was not registered for synchronization because synchronization is not active
2026-02-10T11:34:38.585+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:34:38.586+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:34:38.595+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8f5ddaa] was not registered for synchronization because synchronization is not active
2026-02-10T11:34:38.586+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:34:38.595+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:34:38.596+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:34:38.597+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:34:38.598+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:34:38.598+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ea486f] was not registered for synchronization because synchronization is not active
2026-02-10T11:34:38.598+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e1d7cbb] was not registered for synchronization because synchronization is not active
2026-02-10T11:34:38.615+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1553293336 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:34:38.616+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1421248047 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:34:38.616+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@641308608 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:34:38.616+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:34:38.616+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:34:38.616+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:34:38.617+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:34:38.618+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:34:38.618+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:34:38.624+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@686809365 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:34:38.662+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:34:38.663+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:34:38.663+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:34:38.663+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:34:38.695+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a9bbac6]
2026-02-10T11:34:38.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:34:38.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8f5ddaa]
2026-02-10T11:34:38.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ea486f]
2026-02-10T11:34:38.697+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:34:38.697+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:34:38.698+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:34:38.698+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:34:38.699+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:34:38.699+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:34:38.700+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:34:38.702+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:34:38.713+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:34:38.773+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:34:38.778+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e1d7cbb]
2026-02-10T11:34:38.778+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:34:38.782+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:34:38.783+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:34:56.360+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:34:56.360+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:34:56.360+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:34:56.361+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:34:56.426+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:34:56.427+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:34:56.428+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:34:56.428+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:34:56.433+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:34:56.431+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:34:56.431+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:34:56.434+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:34:56.435+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:34:56.448+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:34:56.444+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:34:56.446+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:34:56.447+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:34:56.449+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:34:56.450+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:34:56.450+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:34:56.451+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:34:56.451+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:34:56.452+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:34:56.453+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:34:56.462+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:34:56.463+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:34:56.464+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:34:56.464+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:34:56.465+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:34:56.466+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:34:56.468+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:34:56.468+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58efb592] was not registered for synchronization because synchronization is not active
2026-02-10T11:34:56.480+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:34:56.480+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d66539c] was not registered for synchronization because synchronization is not active
2026-02-10T11:34:56.483+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:34:56.489+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b2e29ef] was not registered for synchronization because synchronization is not active
2026-02-10T11:34:56.485+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:34:56.490+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@752c25e4] was not registered for synchronization because synchronization is not active
2026-02-10T11:34:56.497+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1688151260 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:34:56.497+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1162553413 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:34:56.497+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1920061856 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:34:56.498+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:34:56.499+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:34:56.499+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:34:56.500+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:34:56.501+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:34:56.502+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:34:56.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1796042064 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:34:56.511+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:34:56.512+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:34:56.513+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:34:56.513+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:34:56.515+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d66539c]
2026-02-10T11:34:56.515+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58efb592]
2026-02-10T11:34:56.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:34:56.519+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:34:56.520+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:34:56.523+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b2e29ef]
2026-02-10T11:34:56.524+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:34:56.524+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:34:56.524+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:34:56.525+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:34:56.526+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:34:56.527+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:34:56.532+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:34:56.535+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:34:56.547+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@752c25e4]
2026-02-10T11:34:56.551+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:34:56.562+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:34:56.564+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:35:00.363+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:35:00.366+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:35:00.366+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:35:00.366+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:35:00.381+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:35:00.382+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:35:00.382+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:35:00.393+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:35:00.394+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:35:00.391+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:35:00.394+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:35:00.394+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:35:00.395+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:35:00.396+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:35:00.402+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:35:00.397+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:35:00.397+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:35:00.398+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:35:00.412+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:35:00.413+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:35:00.415+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:35:00.415+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:35:00.416+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:35:00.416+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:35:00.417+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:35:00.417+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:35:00.418+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:35:00.418+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e4e7b00] was not registered for synchronization because synchronization is not active
2026-02-10T11:35:00.419+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:35:00.419+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:35:00.423+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:35:00.425+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:35:00.428+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:35:00.429+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f83f922] was not registered for synchronization because synchronization is not active
2026-02-10T11:35:00.429+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64c0e1fb] was not registered for synchronization because synchronization is not active
2026-02-10T11:35:00.429+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:35:00.430+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:35:00.433+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2033147652 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ae53bd9] will not be managed by Spring
2026-02-10T11:35:00.434+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58c692b7] was not registered for synchronization because synchronization is not active
2026-02-10T11:35:00.434+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:35:00.439+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:35:00.444+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1719840543 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:35:00.444+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2139053378 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:35:00.445+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:35:00.446+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2010866817 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:35:00.446+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:35:00.448+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:35:00.449+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:35:00.450+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:35:00.450+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e4e7b00]
2026-02-10T11:35:00.462+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:35:00.462+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:35:00.463+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:35:00.466+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:35:00.467+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:35:00.478+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:35:00.494+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64c0e1fb]
2026-02-10T11:35:00.495+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:35:00.495+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:35:00.502+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:35:00.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58c692b7]
2026-02-10T11:35:00.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f83f922]
2026-02-10T11:35:00.510+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:35:00.515+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:35:00.516+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:35:00.518+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:35:00.519+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:35:00.528+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:35:00.531+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:35:00.532+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:35:04.793+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:35:04.793+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:35:04.795+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:35:04.795+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:35:04.840+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:35:04.841+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:35:04.842+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:35:04.842+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:35:04.846+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:35:04.847+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:35:04.845+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:35:04.846+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:35:04.847+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:35:04.847+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:35:04.848+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:35:04.848+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:35:04.849+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:35:04.849+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:35:04.850+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:35:04.851+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:35:04.851+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:35:04.852+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:35:04.858+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:35:04.858+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:35:04.858+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:35:04.859+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:35:04.859+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:35:04.860+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:35:04.860+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:35:04.861+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:35:04.861+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:35:04.861+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8f9f8f2] was not registered for synchronization because synchronization is not active
2026-02-10T11:35:04.862+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:35:04.863+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:35:04.864+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:35:04.864+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48691a50] was not registered for synchronization because synchronization is not active
2026-02-10T11:35:04.865+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23900c6d] was not registered for synchronization because synchronization is not active
2026-02-10T11:35:04.865+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5caef509] was not registered for synchronization because synchronization is not active
2026-02-10T11:35:04.871+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2356010 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ae53bd9] will not be managed by Spring
2026-02-10T11:35:04.874+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1496535176 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:35:04.879+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:35:04.879+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:35:04.880+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:35:04.880+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:35:04.882+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1896016701 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:35:04.882+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@394334135 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:35:04.884+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:35:04.885+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:35:04.891+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:35:04.891+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:35:04.896+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:35:04.896+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:35:04.896+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:35:04.897+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:35:04.897+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48691a50]
2026-02-10T11:35:04.898+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23900c6d]
2026-02-10T11:35:04.898+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8f9f8f2]
2026-02-10T11:35:04.899+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5caef509]
2026-02-10T11:35:04.899+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:35:04.900+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:35:04.900+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:35:04.901+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:35:04.901+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:35:04.901+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:35:04.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:35:04.905+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:35:04.906+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:35:04.906+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:35:04.907+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:35:04.907+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:35:30.332+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:35:30.333+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:35:30.338+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:35:30.339+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:35:30.367+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:35:30.378+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:35:30.379+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:35:30.397+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:35:30.379+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:35:30.383+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:35:30.398+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:35:30.398+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:35:30.400+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:35:30.415+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:35:30.416+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:35:30.418+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:35:30.417+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:35:30.417+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:35:30.418+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:35:30.426+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:35:30.427+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:35:30.427+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:35:30.428+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:35:30.428+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:35:30.428+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:35:30.429+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:35:30.429+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:35:30.430+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:35:30.430+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@232610ab] was not registered for synchronization because synchronization is not active
2026-02-10T11:35:30.442+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:35:30.442+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:35:30.445+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:35:30.446+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:35:30.446+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:35:30.446+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7264b1dd] was not registered for synchronization because synchronization is not active
2026-02-10T11:35:30.447+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:35:30.447+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f0af255] was not registered for synchronization because synchronization is not active
2026-02-10T11:35:30.448+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@135f17d5] was not registered for synchronization because synchronization is not active
2026-02-10T11:35:30.465+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1423323770 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ae53bd9] will not be managed by Spring
2026-02-10T11:35:30.465+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1304294563 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:35:30.466+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@770080222 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:35:30.466+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@132432692 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:35:30.475+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:35:30.475+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:35:30.476+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:35:30.477+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:35:30.477+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:35:30.477+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:35:30.477+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:35:30.479+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:35:30.493+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:35:30.493+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:35:30.494+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@232610ab]
2026-02-10T11:35:30.495+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7264b1dd]
2026-02-10T11:35:30.495+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:35:30.496+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:35:30.496+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:35:30.496+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:35:30.497+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:35:30.499+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:35:30.499+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:35:30.501+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:35:30.511+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f0af255]
2026-02-10T11:35:30.512+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@135f17d5]
2026-02-10T11:35:30.516+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:35:30.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:35:30.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:35:30.518+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:35:30.523+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:35:30.527+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:35:54.719+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:35:54.721+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:35:54.722+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:35:54.723+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:35:54.723+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:35:54.723+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:35:54.723+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:35:54.724+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:35:54.725+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:35:54.725+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3183faa3] was not registered for synchronization because synchronization is not active
2026-02-10T11:35:54.727+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2009474350 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:35:54.727+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:35:54.728+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:35:54.730+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:35:54.730+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3183faa3]
2026-02-10T11:35:54.731+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:35:54.731+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:35:54.732+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:35:54.747+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:35:54.749+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:35:54.751+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:35:54.755+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:35:54.755+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:35:54.755+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:35:54.755+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:35:54.756+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2190b74c] was not registered for synchronization because synchronization is not active
2026-02-10T11:35:54.756+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@901923730 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:35:54.756+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:35:54.757+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:35:54.759+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:35:54.759+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2190b74c]
2026-02-10T11:35:54.760+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:35:54.761+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:35:54.762+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:35:54.804+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:35:54.808+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:35:54.813+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:35:54.813+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:35:54.814+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:35:54.815+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:35:54.815+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:35:54.815+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:35:54.816+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:35:54.816+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:35:54.817+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:35:54.817+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@399b86f2] was not registered for synchronization because synchronization is not active
2026-02-10T11:35:54.817+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:35:54.822+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:35:54.825+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:35:54.825+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1659025189 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:35:54.825+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:35:54.825+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:35:54.826+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:35:54.827+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:35:54.827+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:35:54.828+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:35:54.829+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dc84318] was not registered for synchronization because synchronization is not active
2026-02-10T11:35:54.829+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:35:54.830+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@399b86f2]
2026-02-10T11:35:54.830+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:35:54.830+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@979227409 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ae53bd9] will not be managed by Spring
2026-02-10T11:35:54.831+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:35:54.831+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:35:54.831+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:35:54.831+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:35:54.837+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:35:54.837+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dc84318]
2026-02-10T11:35:54.838+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:35:54.839+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:35:54.839+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:35:57.896+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:35:57.896+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:35:57.896+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:35:57.897+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:35:57.915+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:35:57.915+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:35:57.916+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:35:57.916+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:35:57.927+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:35:57.927+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:35:57.917+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:35:57.920+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:35:57.927+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:35:57.928+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:35:57.928+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:35:57.928+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:35:57.929+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:35:57.929+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:35:57.930+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:35:57.930+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:35:57.930+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:35:57.930+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:35:57.934+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:35:57.931+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:35:57.931+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:35:57.931+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:35:57.944+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:35:57.944+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:35:57.944+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:35:57.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bbe8bcf] was not registered for synchronization because synchronization is not active
2026-02-10T11:35:57.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:35:57.951+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:35:57.954+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:35:57.955+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62a968cb] was not registered for synchronization because synchronization is not active
2026-02-10T11:35:57.956+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:35:57.957+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:35:57.966+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5435920a] was not registered for synchronization because synchronization is not active
2026-02-10T11:35:57.967+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61dc8053] was not registered for synchronization because synchronization is not active
2026-02-10T11:35:57.977+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@455161056 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:35:57.981+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:35:57.982+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2109473114 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:35:57.982+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@816053125 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:35:57.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:35:57.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1655403528 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:35:57.998+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:35:58.027+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:35:58.028+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:35:58.028+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:35:58.028+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:35:58.029+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:35:58.044+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:35:58.044+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:35:58.044+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:35:58.045+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:35:58.049+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61dc8053]
2026-02-10T11:35:58.050+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5435920a]
2026-02-10T11:35:58.050+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62a968cb]
2026-02-10T11:35:58.050+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bbe8bcf]
2026-02-10T11:35:58.054+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:35:58.059+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:35:58.062+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:35:58.064+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:35:58.066+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:35:58.066+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:35:58.067+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:35:58.067+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:35:58.075+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:35:58.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:35:58.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:35:58.079+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:36:02.227+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:36:02.229+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:36:02.230+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:36:02.231+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:36:02.277+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:36:02.277+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:36:02.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:36:02.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:36:02.279+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:36:02.279+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:36:02.280+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:36:02.280+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:36:02.280+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:36:02.280+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:36:02.280+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:36:02.281+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:36:02.281+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:36:02.281+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:36:02.282+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:36:02.282+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:36:02.282+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:36:02.283+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:36:02.283+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:36:02.287+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:36:02.295+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:36:02.296+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:36:02.299+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31eaf2f5] was not registered for synchronization because synchronization is not active
2026-02-10T11:36:02.297+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:36:02.298+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:36:02.299+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:36:02.304+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:36:02.304+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:36:02.305+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:36:02.309+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:36:02.316+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@436f2840] was not registered for synchronization because synchronization is not active
2026-02-10T11:36:02.315+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a197d89] was not registered for synchronization because synchronization is not active
2026-02-10T11:36:02.315+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:36:02.317+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1032541311 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:36:02.323+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cdf46b7] was not registered for synchronization because synchronization is not active
2026-02-10T11:36:02.323+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:36:02.324+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:36:02.325+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@752236967 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:36:02.326+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:36:02.326+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@253049575 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:36:02.326+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2103556812 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:36:02.327+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:36:02.328+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:36:02.328+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:36:02.329+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:36:02.329+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:36:02.331+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:36:02.334+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31eaf2f5]
2026-02-10T11:36:02.343+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:36:02.343+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:36:02.343+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:36:02.345+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@436f2840]
2026-02-10T11:36:02.345+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:36:02.345+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cdf46b7]
2026-02-10T11:36:02.345+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a197d89]
2026-02-10T11:36:02.347+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:36:02.345+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:36:02.346+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:36:02.347+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:36:02.347+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:36:02.348+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:36:02.348+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:36:02.350+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:36:02.354+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:36:02.355+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:36:02.359+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:36:06.657+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:36:06.658+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:36:06.659+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:36:06.659+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:36:06.715+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:36:06.715+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:36:06.715+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:36:06.716+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:36:06.739+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:36:06.740+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:36:06.720+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:36:06.737+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:36:06.741+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:36:06.740+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:36:06.740+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:36:06.740+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:36:06.742+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:36:06.741+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:36:06.741+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:36:06.743+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:36:06.742+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:36:06.742+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:36:06.743+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:36:06.743+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:36:06.744+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:36:06.750+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:36:06.750+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:36:06.750+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:36:06.757+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:36:06.758+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:36:06.761+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18cc221d] was not registered for synchronization because synchronization is not active
2026-02-10T11:36:06.763+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:36:06.764+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:36:06.764+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:36:06.765+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56a5af45] was not registered for synchronization because synchronization is not active
2026-02-10T11:36:06.766+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:36:06.766+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36796804] was not registered for synchronization because synchronization is not active
2026-02-10T11:36:06.767+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e85e892] was not registered for synchronization because synchronization is not active
2026-02-10T11:36:06.767+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@834114057 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:36:06.778+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:36:06.779+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:36:06.782+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1563389455 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:36:06.782+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:36:06.783+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:36:06.792+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@674554421 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:36:06.792+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1344316599 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:36:06.793+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:36:06.793+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:36:06.793+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:36:06.794+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:36:06.794+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:36:06.795+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18cc221d]
2026-02-10T11:36:06.796+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:36:06.797+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:36:06.798+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:36:06.799+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:36:06.799+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:36:06.800+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56a5af45]
2026-02-10T11:36:06.800+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36796804]
2026-02-10T11:36:06.800+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:36:06.800+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:36:06.800+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:36:06.800+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:36:06.801+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:36:06.801+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:36:06.801+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:36:06.804+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e85e892]
2026-02-10T11:36:06.805+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:36:06.805+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:36:06.806+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:36:11.015+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:36:11.017+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:36:11.017+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:36:11.017+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:36:11.031+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:36:11.031+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:36:11.031+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:36:11.032+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:36:11.033+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:36:11.032+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:36:11.033+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:36:11.033+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:36:11.037+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:36:11.033+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:36:11.034+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:36:11.036+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:36:11.037+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:36:11.041+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:36:11.046+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:36:11.047+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:36:11.048+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:36:11.048+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:36:11.048+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:36:11.049+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:36:11.049+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:36:11.050+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:36:11.050+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:36:11.050+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:36:11.052+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ff5377e] was not registered for synchronization because synchronization is not active
2026-02-10T11:36:11.053+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@603f9f6d] was not registered for synchronization because synchronization is not active
2026-02-10T11:36:11.060+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:36:11.061+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:36:11.062+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:36:11.062+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:36:11.063+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c28a35f] was not registered for synchronization because synchronization is not active
2026-02-10T11:36:11.063+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:36:11.064+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:36:11.064+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@620601c7] was not registered for synchronization because synchronization is not active
2026-02-10T11:36:11.066+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1430674282 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ae53bd9] will not be managed by Spring
2026-02-10T11:36:11.066+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@588569538 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:36:11.067+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1517567320 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:36:11.070+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:36:11.073+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:36:11.073+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:36:11.074+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:36:11.075+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:36:11.076+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:36:11.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2035166853 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:36:11.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:36:11.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:36:11.079+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:36:11.079+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:36:11.079+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:36:11.079+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ff5377e]
2026-02-10T11:36:11.080+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c28a35f]
2026-02-10T11:36:11.080+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@603f9f6d]
2026-02-10T11:36:11.081+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:36:11.081+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:36:11.081+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:36:11.082+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:36:11.082+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:36:11.082+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@620601c7]
2026-02-10T11:36:11.083+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:36:11.083+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:36:11.084+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:36:11.088+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:36:11.089+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:36:11.090+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:36:11.095+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:36:11.098+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:36:33.293+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:36:33.296+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:36:33.296+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:36:33.296+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:36:33.379+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:36:33.379+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:36:33.382+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:36:33.382+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:36:33.383+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:36:33.386+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:36:33.427+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:36:33.442+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:36:33.462+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:36:33.442+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:36:33.464+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:36:33.442+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:36:33.442+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:36:33.463+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:36:33.465+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:36:33.465+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:36:33.499+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:36:33.511+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:36:33.511+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:36:33.511+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:36:33.511+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:36:33.512+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:36:33.512+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:36:33.513+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:36:33.513+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:36:33.513+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:36:33.523+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:36:33.514+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:36:33.522+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68dd9e48] was not registered for synchronization because synchronization is not active
2026-02-10T11:36:33.523+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24a99799] was not registered for synchronization because synchronization is not active
2026-02-10T11:36:33.524+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:36:33.524+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:36:33.528+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10f4aaec] was not registered for synchronization because synchronization is not active
2026-02-10T11:36:33.528+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bf3c009] was not registered for synchronization because synchronization is not active
2026-02-10T11:36:33.578+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@363632184 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:36:33.578+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1060006062 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:36:33.598+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:36:33.578+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1364627526 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:36:33.598+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:36:33.598+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:36:33.610+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1371205667 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:36:33.657+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:36:33.663+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:36:33.664+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:36:33.675+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:36:33.675+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:36:33.680+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:36:33.688+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10f4aaec]
2026-02-10T11:36:33.688+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:36:33.693+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:36:33.693+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:36:33.694+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:36:33.694+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24a99799]
2026-02-10T11:36:33.695+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68dd9e48]
2026-02-10T11:36:33.696+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:36:33.697+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:36:33.697+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:36:33.698+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:36:33.698+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:36:33.699+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:36:33.699+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:36:33.747+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:36:33.773+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bf3c009]
2026-02-10T11:36:33.774+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:36:33.796+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:36:33.829+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:37:00.438+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:37:00.439+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:37:00.441+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:37:00.441+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:37:00.671+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:37:00.671+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:37:00.672+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:37:00.673+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:37:00.678+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:37:00.678+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:37:00.678+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:37:00.679+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:37:00.679+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:37:00.679+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:37:00.682+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:37:00.694+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:37:00.693+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:37:00.694+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:37:00.696+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:37:00.694+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:37:00.696+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:37:00.695+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:37:00.695+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:37:00.696+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:37:00.697+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:37:00.697+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:37:00.697+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:37:00.702+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:37:00.698+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:37:00.698+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36b42f3f] was not registered for synchronization because synchronization is not active
2026-02-10T11:37:00.699+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:37:00.703+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:37:00.825+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:37:00.842+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:37:00.981+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77a2ac30] was not registered for synchronization because synchronization is not active
2026-02-10T11:37:00.981+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@473111631 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:37:01.024+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:37:01.032+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dcfbef5] was not registered for synchronization because synchronization is not active
2026-02-10T11:37:01.059+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:37:01.060+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4efd4404] was not registered for synchronization because synchronization is not active
2026-02-10T11:37:01.061+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:37:01.092+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1607747891 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:37:01.098+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:37:01.163+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@810543930 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:37:01.164+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:37:01.164+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1679495803 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:37:01.165+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:37:01.165+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:37:01.165+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36b42f3f]
2026-02-10T11:37:01.192+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:37:01.193+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:37:01.210+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:37:01.210+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:37:01.211+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:37:01.212+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:37:01.231+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:37:01.259+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:37:01.259+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:37:01.262+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77a2ac30]
2026-02-10T11:37:01.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4efd4404]
2026-02-10T11:37:01.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dcfbef5]
2026-02-10T11:37:01.274+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:37:01.295+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:37:01.295+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:37:01.310+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:37:01.310+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:37:01.310+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:37:01.311+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:37:01.311+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:37:01.312+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:37:04.638+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:37:04.640+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:37:04.640+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:37:04.640+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:37:04.649+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:37:04.654+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:37:04.654+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:37:04.657+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:37:04.664+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:37:04.701+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:37:04.705+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:37:04.705+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:37:04.706+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:37:04.706+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:37:04.707+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:37:04.708+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:37:04.708+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:37:04.708+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:37:04.708+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:37:04.709+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:37:04.709+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:37:04.709+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:37:04.709+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:37:04.710+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:37:04.710+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:37:04.719+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:37:04.711+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:37:04.713+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:37:04.713+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:37:04.720+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:37:04.720+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e647922] was not registered for synchronization because synchronization is not active
2026-02-10T11:37:04.721+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:37:04.725+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:37:04.725+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e00c1dc] was not registered for synchronization because synchronization is not active
2026-02-10T11:37:04.726+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:37:04.726+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:37:04.727+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@366522510 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:37:04.727+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b927a22] was not registered for synchronization because synchronization is not active
2026-02-10T11:37:04.728+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5da7580b] was not registered for synchronization because synchronization is not active
2026-02-10T11:37:04.729+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:37:04.729+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@194665597 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:37:04.731+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:37:04.731+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2076904483 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:37:04.731+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1889247630 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:37:04.731+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:37:04.731+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:37:04.732+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:37:04.733+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:37:04.737+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:37:04.737+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:37:04.740+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:37:04.741+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e647922]
2026-02-10T11:37:04.742+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:37:04.742+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:37:04.742+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:37:04.742+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:37:04.743+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e00c1dc]
2026-02-10T11:37:04.743+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5da7580b]
2026-02-10T11:37:04.743+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b927a22]
2026-02-10T11:37:04.743+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:37:04.744+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:37:04.744+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:37:04.744+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:37:04.744+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:37:04.744+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:37:04.744+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:37:04.745+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:37:04.747+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:37:04.757+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:37:04.757+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:37:08.373+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:37:08.373+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:37:08.374+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:37:08.374+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:37:08.415+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:37:08.423+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:37:08.431+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:37:08.423+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:37:08.424+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:37:08.438+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:37:08.432+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:37:08.438+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:37:08.433+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:37:08.438+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:37:08.438+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:37:08.439+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:37:08.439+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:37:08.440+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:37:08.441+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:37:08.441+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:37:08.442+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:37:08.444+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:37:08.444+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:37:08.444+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:37:08.445+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:37:08.445+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:37:08.445+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:37:08.445+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@206cbf77] was not registered for synchronization because synchronization is not active
2026-02-10T11:37:08.445+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:37:08.446+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:37:08.446+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:37:08.447+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:37:08.448+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:37:08.449+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:37:08.449+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dc9644f] was not registered for synchronization because synchronization is not active
2026-02-10T11:37:08.449+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1282340788 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:37:08.453+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:37:08.455+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51ccedaa] was not registered for synchronization because synchronization is not active
2026-02-10T11:37:08.456+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:37:08.456+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5539f452] was not registered for synchronization because synchronization is not active
2026-02-10T11:37:08.460+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:37:08.460+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@944885728 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ae53bd9] will not be managed by Spring
2026-02-10T11:37:08.460+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@224089068 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:37:08.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:37:08.462+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@3126324 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:37:08.462+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:37:08.463+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:37:08.464+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:37:08.464+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:37:08.466+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@206cbf77]
2026-02-10T11:37:08.470+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:37:08.479+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:37:08.479+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:37:08.483+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:37:08.486+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:37:08.487+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:37:08.487+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dc9644f]
2026-02-10T11:37:08.487+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51ccedaa]
2026-02-10T11:37:08.488+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:37:08.489+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:37:08.489+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:37:08.490+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:37:08.490+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:37:08.491+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:37:08.492+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:37:08.492+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:37:08.508+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5539f452]
2026-02-10T11:37:08.510+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:37:08.511+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:37:08.512+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:37:17.327+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:37:17.329+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:37:17.331+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:37:17.331+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:37:17.405+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:37:17.420+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:37:17.423+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:37:17.423+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:37:17.423+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:37:17.426+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:37:17.427+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:37:17.430+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:37:17.431+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:37:17.432+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:37:17.442+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:37:17.442+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:37:17.443+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:37:17.444+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:37:17.444+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:37:17.444+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:37:17.448+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:37:17.449+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:37:17.449+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:37:17.460+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:37:17.462+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:37:17.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:37:17.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:37:17.462+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:37:17.462+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73e968e9] was not registered for synchronization because synchronization is not active
2026-02-10T11:37:17.463+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:37:17.463+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:37:17.464+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:37:17.464+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:37:17.464+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@725a5656] was not registered for synchronization because synchronization is not active
2026-02-10T11:37:17.507+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:37:17.508+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@602617542 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:37:17.508+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:37:17.510+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fca37bd] was not registered for synchronization because synchronization is not active
2026-02-10T11:37:17.510+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:37:17.511+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1164501252 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:37:17.511+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6559f85d] was not registered for synchronization because synchronization is not active
2026-02-10T11:37:17.512+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:37:17.512+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:37:17.516+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:37:17.525+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1455539485 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:37:17.528+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:37:17.528+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:37:17.529+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1450988483 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ae53bd9] will not be managed by Spring
2026-02-10T11:37:17.529+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:37:17.532+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:37:17.536+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73e968e9]
2026-02-10T11:37:17.538+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:37:17.539+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:37:17.542+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:37:17.542+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@725a5656]
2026-02-10T11:37:17.542+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:37:17.542+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:37:17.543+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:37:17.544+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:37:17.544+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:37:17.545+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fca37bd]
2026-02-10T11:37:17.547+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:37:17.554+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:37:17.557+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:37:17.558+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:37:17.563+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:37:17.564+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6559f85d]
2026-02-10T11:37:17.564+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:37:17.565+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:37:17.566+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:37:46.180+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:37:46.186+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:37:46.186+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:37:46.187+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:37:46.554+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:37:46.556+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:37:46.557+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:37:46.561+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:37:46.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:37:46.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:37:46.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:37:46.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:37:46.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:37:46.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:37:46.593+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:37:46.593+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:37:46.607+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:37:46.608+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:37:46.608+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:37:46.608+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:37:46.608+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:37:46.631+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:37:46.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:37:46.648+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:37:46.652+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:37:46.653+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:37:46.653+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:37:46.662+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@366e545c] was not registered for synchronization because synchronization is not active
2026-02-10T11:37:46.675+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:37:46.675+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:37:46.676+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:37:46.679+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:37:46.678+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:37:46.679+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6614655d] was not registered for synchronization because synchronization is not active
2026-02-10T11:37:46.679+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5911e2c] was not registered for synchronization because synchronization is not active
2026-02-10T11:37:46.680+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:37:46.681+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:37:46.742+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ee2109b] was not registered for synchronization because synchronization is not active
2026-02-10T11:37:46.747+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1845482827 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:37:46.798+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:37:46.804+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:37:46.747+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1096790478 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:37:46.747+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@141366443 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:37:46.806+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:37:46.807+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:37:46.807+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:37:46.808+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:37:46.847+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@225619062 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:37:46.847+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:37:46.847+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:37:46.847+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:37:46.863+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:37:46.863+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5911e2c]
2026-02-10T11:37:46.863+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@366e545c]
2026-02-10T11:37:46.863+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6614655d]
2026-02-10T11:37:46.864+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:37:46.864+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:37:46.864+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:37:46.878+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:37:46.894+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:37:46.894+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:37:46.894+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:37:46.895+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:37:46.898+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:37:46.898+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:37:46.963+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:37:46.979+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ee2109b]
2026-02-10T11:37:46.994+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:37:46.997+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:37:47.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:37:51.867+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:37:51.869+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:37:51.870+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:37:51.870+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:37:51.971+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:37:51.972+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:37:51.973+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:37:51.973+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:37:51.978+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:37:52.004+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:37:51.991+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:37:51.997+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:37:52.004+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:37:52.004+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:37:52.005+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:37:52.005+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:37:52.005+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:37:52.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:37:52.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:37:52.007+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:37:52.007+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:37:52.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:37:52.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:37:52.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:37:52.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:37:52.009+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:37:52.009+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:37:52.009+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:37:52.010+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:37:52.010+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:37:52.010+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c6d77bc] was not registered for synchronization because synchronization is not active
2026-02-10T11:37:52.011+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:37:52.011+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:37:52.012+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d104eab] was not registered for synchronization because synchronization is not active
2026-02-10T11:37:52.013+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:37:52.013+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:37:52.023+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30579887] was not registered for synchronization because synchronization is not active
2026-02-10T11:37:52.023+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61aec9d4] was not registered for synchronization because synchronization is not active
2026-02-10T11:37:52.044+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@921601208 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:37:52.044+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@562052115 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:37:52.044+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@365404106 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:37:52.044+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1650817802 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:37:52.045+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:37:52.046+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:37:52.046+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:37:52.046+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:37:52.047+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:37:52.047+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:37:52.047+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:37:52.048+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:37:52.055+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:37:52.055+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:37:52.056+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:37:52.056+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:37:52.056+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d104eab]
2026-02-10T11:37:52.057+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30579887]
2026-02-10T11:37:52.057+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c6d77bc]
2026-02-10T11:37:52.057+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61aec9d4]
2026-02-10T11:37:52.057+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:37:52.058+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:37:52.058+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:37:52.058+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:37:52.058+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:37:52.058+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:37:52.059+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:37:52.059+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:37:52.059+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:37:52.060+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:37:52.060+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:37:52.060+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:37:59.908+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:37:59.908+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:37:59.909+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:37:59.910+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:37:59.913+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:37:59.913+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:37:59.913+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:37:59.920+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:37:59.918+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:37:59.921+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:37:59.921+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:37:59.922+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:37:59.923+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:37:59.923+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:37:59.923+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:37:59.924+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:37:59.924+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:37:59.924+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:37:59.925+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:37:59.925+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:37:59.925+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:37:59.926+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:37:59.928+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79723031] was not registered for synchronization because synchronization is not active
2026-02-10T11:37:59.992+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:37:59.994+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:38:00.103+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:38:00.087+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:38:00.103+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:38:00.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:38:00.110+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:38:00.111+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:38:00.117+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:38:00.119+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:38:00.124+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:38:00.124+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3152c0d1] was not registered for synchronization because synchronization is not active
2026-02-10T11:38:00.104+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@767e1513] was not registered for synchronization because synchronization is not active
2026-02-10T11:38:00.104+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:38:00.127+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6430698] was not registered for synchronization because synchronization is not active
2026-02-10T11:38:00.145+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@649733528 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:38:00.145+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1123618226 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:38:00.145+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1700908064 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:38:00.145+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2046507034 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:38:00.147+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:38:00.151+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:38:00.147+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:38:00.147+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:38:00.148+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:38:00.154+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:38:00.153+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:38:00.154+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:38:00.157+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:38:00.157+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:38:00.159+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3152c0d1]
2026-02-10T11:38:00.160+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79723031]
2026-02-10T11:38:00.160+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:38:00.160+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:38:00.160+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:38:00.160+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:38:00.161+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:38:00.161+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:38:00.161+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:38:00.162+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:38:00.168+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6430698]
2026-02-10T11:38:00.170+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@767e1513]
2026-02-10T11:38:00.174+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:38:00.174+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:38:00.174+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:38:00.174+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:38:00.175+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:38:00.177+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:38:41.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:38:41.136+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:38:41.136+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:38:41.136+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:38:41.312+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:38:41.322+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:38:41.335+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:38:41.337+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:38:41.339+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:38:41.340+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:38:41.340+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:38:41.344+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:38:41.339+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:38:41.346+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:38:41.363+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:38:41.372+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:38:41.372+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:38:41.372+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:38:41.373+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:38:41.380+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:38:41.380+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:38:41.385+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:38:41.386+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:38:41.384+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f61ec10] was not registered for synchronization because synchronization is not active
2026-02-10T11:38:41.384+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:38:41.386+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:38:41.386+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:38:41.389+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cb0ecb] was not registered for synchronization because synchronization is not active
2026-02-10T11:38:41.389+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:38:41.425+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:38:41.390+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:38:41.424+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@241295596 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ae53bd9] will not be managed by Spring
2026-02-10T11:38:41.428+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:38:41.426+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:38:41.427+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:38:41.429+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:38:41.429+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:38:41.429+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10af39bd] was not registered for synchronization because synchronization is not active
2026-02-10T11:38:41.430+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:38:41.437+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2014712153 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:38:41.439+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:38:41.441+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:38:41.441+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@333412d1] was not registered for synchronization because synchronization is not active
2026-02-10T11:38:41.442+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:38:41.446+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:38:41.458+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f61ec10]
2026-02-10T11:38:41.462+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1387049118 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:38:41.462+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@519104409 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:38:41.476+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:38:41.484+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:38:41.489+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:38:41.490+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:38:41.490+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:38:41.501+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cb0ecb]
2026-02-10T11:38:41.502+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:38:41.503+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:38:41.504+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:38:41.506+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:38:41.540+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:38:41.540+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:38:41.542+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:38:41.543+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10af39bd]
2026-02-10T11:38:41.543+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@333412d1]
2026-02-10T11:38:41.592+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:38:41.608+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:38:41.609+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:38:41.672+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:38:41.687+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:38:41.688+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:38:41.691+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:38:48.978+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:38:48.979+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:38:48.979+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:38:48.980+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:38:48.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:38:48.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:38:48.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:38:48.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:38:48.999+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:38:49.004+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:38:49.003+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:38:49.004+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:38:49.004+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:38:49.005+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:38:49.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:38:49.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:38:49.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:38:49.007+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:38:49.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:38:49.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:38:49.009+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:38:49.009+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:38:49.009+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:38:49.010+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:38:49.010+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:38:49.010+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:38:49.011+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:38:49.012+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:38:49.012+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:38:49.013+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:38:49.013+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d918373] was not registered for synchronization because synchronization is not active
2026-02-10T11:38:49.013+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:38:49.017+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:38:49.017+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:38:49.018+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:38:49.018+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44960246] was not registered for synchronization because synchronization is not active
2026-02-10T11:38:49.018+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bf6b814] was not registered for synchronization because synchronization is not active
2026-02-10T11:38:49.019+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28f9fd7f] was not registered for synchronization because synchronization is not active
2026-02-10T11:38:49.025+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2053499299 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:38:49.025+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2106649494 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:38:49.025+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1627496012 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:38:49.025+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@693670759 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ae53bd9] will not be managed by Spring
2026-02-10T11:38:49.026+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:38:49.026+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:38:49.027+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:38:49.027+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:38:49.028+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:38:49.028+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:38:49.029+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:38:49.029+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:38:49.037+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:38:49.037+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:38:49.037+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d918373]
2026-02-10T11:38:49.037+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:38:49.037+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:38:49.037+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28f9fd7f]
2026-02-10T11:38:49.038+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bf6b814]
2026-02-10T11:38:49.038+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44960246]
2026-02-10T11:38:49.038+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:38:49.038+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:38:49.039+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:38:49.039+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:38:49.039+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:38:49.039+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:38:49.039+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:38:49.040+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:38:49.040+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:38:49.040+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:38:49.041+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:38:49.041+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:39:45.276+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:39:45.279+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:39:45.281+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:39:45.281+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:39:45.489+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:39:45.492+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:39:45.493+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:39:45.494+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:39:45.495+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:39:45.503+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:39:45.503+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:39:45.503+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:39:45.505+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:39:45.504+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:39:45.505+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:39:45.506+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:39:45.506+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:39:45.506+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:39:45.506+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:39:45.506+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:39:45.508+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:39:45.509+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:39:45.511+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:39:45.512+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:39:45.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:39:45.515+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:39:45.516+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24c38579] was not registered for synchronization because synchronization is not active
2026-02-10T11:39:45.516+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:39:45.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6174b853] was not registered for synchronization because synchronization is not active
2026-02-10T11:39:45.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:39:45.519+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:39:45.520+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:39:45.520+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:39:45.521+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:39:45.522+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:39:45.522+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:39:45.522+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52e1dc8d] was not registered for synchronization because synchronization is not active
2026-02-10T11:39:45.523+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31574706] was not registered for synchronization because synchronization is not active
2026-02-10T11:39:45.525+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1256426281 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:39:45.525+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1822622000 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ae53bd9] will not be managed by Spring
2026-02-10T11:39:45.525+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2139039289 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:39:45.525+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1627881021 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:39:45.526+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:39:45.526+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:39:45.527+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:39:45.527+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:39:45.528+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:39:45.528+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:39:45.528+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:39:45.528+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:39:45.535+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:39:45.535+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:39:45.536+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:39:45.536+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:39:45.537+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24c38579]
2026-02-10T11:39:45.537+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52e1dc8d]
2026-02-10T11:39:45.537+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31574706]
2026-02-10T11:39:45.537+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6174b853]
2026-02-10T11:39:45.538+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:39:45.538+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:39:45.539+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:39:45.541+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:39:45.541+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:39:45.542+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:39:45.542+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:39:45.542+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:39:45.543+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:39:45.555+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:39:45.556+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:39:45.557+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:39:50.743+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:39:50.744+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:39:50.746+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:39:50.748+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:39:50.824+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:39:50.835+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:39:50.853+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:39:50.858+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:39:50.858+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:39:50.859+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:39:50.867+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:39:50.868+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:39:50.870+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3549fc7b] was not registered for synchronization because synchronization is not active
2026-02-10T11:39:50.861+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:39:50.862+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:39:50.865+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:39:50.872+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:39:50.872+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:39:50.873+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:39:50.878+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:39:50.873+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:39:50.873+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:39:50.878+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:39:50.887+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:39:50.882+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:39:50.886+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:39:50.887+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c407fe1] was not registered for synchronization because synchronization is not active
2026-02-10T11:39:50.887+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1481740411 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:39:50.889+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:39:50.891+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:39:50.892+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:39:50.892+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:39:50.893+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:39:50.893+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:39:50.894+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:39:50.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:39:50.894+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:39:50.903+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:39:50.904+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:39:50.904+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2397b944] was not registered for synchronization because synchronization is not active
2026-02-10T11:39:50.904+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27431d15] was not registered for synchronization because synchronization is not active
2026-02-10T11:39:50.906+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@70298299 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:39:50.906+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:39:50.909+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:39:50.910+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3549fc7b]
2026-02-10T11:39:50.910+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:39:50.912+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:39:50.919+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:39:50.920+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@162423628 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:39:50.920+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1029725548 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ae53bd9] will not be managed by Spring
2026-02-10T11:39:50.922+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:39:50.922+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:39:50.923+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:39:50.924+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:39:50.924+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:39:50.929+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:39:50.939+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c407fe1]
2026-02-10T11:39:50.940+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:39:50.941+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:39:50.941+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:39:50.943+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:39:50.945+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27431d15]
2026-02-10T11:39:50.948+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2397b944]
2026-02-10T11:39:50.949+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:39:50.949+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:39:50.949+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:39:50.954+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:39:50.955+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:39:50.956+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:39:50.957+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:39:59.544+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:39:59.545+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:39:59.547+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:39:59.547+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:39:59.591+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:39:59.592+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:39:59.638+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:39:59.641+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:39:59.641+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:39:59.642+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:39:59.642+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:39:59.642+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:39:59.643+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:39:59.643+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:39:59.643+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:39:59.643+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:39:59.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:39:59.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:39:59.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:39:59.644+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:39:59.645+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:39:59.645+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:39:59.645+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:39:59.649+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:39:59.649+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:39:59.649+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:39:59.650+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:39:59.652+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@608288e1] was not registered for synchronization because synchronization is not active
2026-02-10T11:39:59.652+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@216fd723] was not registered for synchronization because synchronization is not active
2026-02-10T11:39:59.653+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:39:59.654+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:39:59.655+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:39:59.656+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@480315653 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:39:59.656+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:39:59.657+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:39:59.657+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:39:59.657+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@337871173 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:39:59.658+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:39:59.658+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b4ab99c] was not registered for synchronization because synchronization is not active
2026-02-10T11:39:59.658+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:39:59.658+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:39:59.659+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:39:59.660+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:39:59.661+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7247b3] was not registered for synchronization because synchronization is not active
2026-02-10T11:39:59.661+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1976091699 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:39:59.661+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:39:59.662+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:39:59.666+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@608288e1]
2026-02-10T11:39:59.667+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:39:59.668+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2060569081 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:39:59.668+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:39:59.668+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:39:59.674+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:39:59.674+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:39:59.674+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@216fd723]
2026-02-10T11:39:59.675+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:39:59.677+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:39:59.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:39:59.687+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:39:59.688+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b4ab99c]
2026-02-10T11:39:59.688+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:39:59.707+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:39:59.708+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:39:59.708+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:39:59.709+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:39:59.709+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7247b3]
2026-02-10T11:39:59.711+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:39:59.717+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:39:59.720+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:39:59.737+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:42:12.189+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:42:12.190+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:42:12.191+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:42:12.192+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:42:12.424+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:42:12.434+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:42:12.436+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:42:12.437+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:42:12.438+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:42:12.439+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:42:12.439+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:42:12.441+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:42:12.439+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:42:12.441+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:42:12.445+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:42:12.445+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:42:12.450+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:42:12.452+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:42:12.452+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:42:12.453+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:42:12.453+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:42:12.453+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:42:12.454+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:42:12.455+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:42:12.455+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:42:12.455+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:42:12.456+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:42:12.456+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:42:12.456+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@be5e3a1] was not registered for synchronization because synchronization is not active
2026-02-10T11:42:12.457+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:42:12.457+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:42:12.457+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33634803] was not registered for synchronization because synchronization is not active
2026-02-10T11:42:12.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:42:12.463+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:42:12.468+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:42:12.468+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:42:12.469+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c5e4d6d] was not registered for synchronization because synchronization is not active
2026-02-10T11:42:12.469+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@347583d5] was not registered for synchronization because synchronization is not active
2026-02-10T11:42:12.470+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1802719644 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:42:12.470+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@316871649 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:42:12.472+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:42:12.473+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:42:12.474+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:42:12.474+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:42:12.485+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@697369142 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ae53bd9] will not be managed by Spring
2026-02-10T11:42:12.486+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@20747461 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:42:12.487+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:42:12.487+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:42:12.487+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:42:12.487+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:42:12.488+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:42:12.488+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33634803]
2026-02-10T11:42:12.488+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@be5e3a1]
2026-02-10T11:42:12.489+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:42:12.489+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:42:12.489+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:42:12.490+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:42:12.491+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:42:12.491+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:42:12.495+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:42:12.495+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:42:12.495+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:42:12.502+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c5e4d6d]
2026-02-10T11:42:12.503+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@347583d5]
2026-02-10T11:42:12.504+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:42:12.504+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:42:12.505+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:42:12.505+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:42:12.506+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:42:12.514+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:42:16.316+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:42:16.316+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:42:16.318+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:42:16.318+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:42:16.328+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:42:16.330+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:42:16.334+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:42:16.331+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:42:16.331+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:42:16.334+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:42:16.335+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:42:16.336+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:42:16.336+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:42:16.336+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:42:16.336+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:42:16.337+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:42:16.337+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:42:16.337+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:42:16.338+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:42:16.338+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:42:16.338+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:42:16.339+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:42:16.339+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:42:16.339+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:42:16.339+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:42:16.340+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:42:16.340+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:42:16.340+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:42:16.340+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:42:16.340+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@204f6e63] was not registered for synchronization because synchronization is not active
2026-02-10T11:42:16.341+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:42:16.345+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bbca23] was not registered for synchronization because synchronization is not active
2026-02-10T11:42:16.341+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:42:16.341+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:42:16.346+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:42:16.347+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:42:16.347+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c62ba97] was not registered for synchronization because synchronization is not active
2026-02-10T11:42:16.348+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7398f0bd] was not registered for synchronization because synchronization is not active
2026-02-10T11:42:16.352+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1278318385 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:42:16.352+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1241876007 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:42:16.352+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@366425537 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:42:16.352+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@381459987 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:42:16.352+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:42:16.353+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:42:16.353+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:42:16.354+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:42:16.354+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:42:16.354+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:42:16.355+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:42:16.370+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:42:16.389+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:42:16.390+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c62ba97]
2026-02-10T11:42:16.393+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:42:16.394+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:42:16.395+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:42:16.395+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:42:16.400+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:42:16.401+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@204f6e63]
2026-02-10T11:42:16.401+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7398f0bd]
2026-02-10T11:42:16.401+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bbca23]
2026-02-10T11:42:16.406+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:42:16.402+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:42:16.403+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:42:16.406+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:42:16.406+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:42:16.406+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:42:16.415+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:42:16.416+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:42:16.417+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:42:16.419+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:42:21.498+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:42:21.501+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:42:21.501+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:42:21.501+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:42:21.534+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:42:21.535+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:42:21.535+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:42:21.536+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:42:21.537+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:42:21.537+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:42:21.537+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:42:21.537+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:42:21.537+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:42:21.538+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:42:21.538+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:42:21.538+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:42:21.539+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:42:21.539+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:42:21.552+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:42:21.553+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:42:21.554+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:42:21.554+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:42:21.554+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:42:21.555+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:42:21.556+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:42:21.557+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:42:21.557+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:42:21.561+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:42:21.563+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:42:21.565+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:42:21.566+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@361e49b8] was not registered for synchronization because synchronization is not active
2026-02-10T11:42:21.567+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:42:21.567+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35122651] was not registered for synchronization because synchronization is not active
2026-02-10T11:42:21.567+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:42:21.568+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ac3f760] was not registered for synchronization because synchronization is not active
2026-02-10T11:42:21.569+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:42:21.570+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:42:21.570+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5182a375] was not registered for synchronization because synchronization is not active
2026-02-10T11:42:21.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1816227496 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:42:21.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1597368952 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:42:21.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@262715082 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:42:21.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:42:21.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:42:21.580+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:42:21.580+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:42:21.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:42:21.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:42:21.585+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1377460168 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:42:21.588+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:42:21.589+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:42:21.591+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ac3f760]
2026-02-10T11:42:21.601+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:42:21.603+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:42:21.603+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:42:21.606+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:42:21.607+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@361e49b8]
2026-02-10T11:42:21.607+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35122651]
2026-02-10T11:42:21.618+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:42:21.621+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:42:21.622+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:42:21.624+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:42:21.633+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:42:21.635+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:42:21.640+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:42:21.646+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:42:21.676+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:42:21.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5182a375]
2026-02-10T11:42:21.690+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:42:21.702+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:42:21.703+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:42:34.353+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:42:34.358+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:42:34.359+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:42:34.360+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:42:34.409+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:42:34.413+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:42:34.413+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:42:34.417+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:42:34.413+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:42:34.417+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:42:34.417+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:42:34.417+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:42:34.418+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:42:34.418+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:42:34.434+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:42:34.434+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:42:34.437+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:42:34.437+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:42:34.437+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:42:34.437+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:42:34.438+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:42:34.438+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:42:34.439+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:42:34.440+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:42:34.440+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:42:34.440+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:42:34.441+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:42:34.461+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:42:34.462+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e498116] was not registered for synchronization because synchronization is not active
2026-02-10T11:42:34.452+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:42:34.454+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:42:34.457+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6726d3d2] was not registered for synchronization because synchronization is not active
2026-02-10T11:42:34.465+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:42:34.466+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:42:34.467+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:42:34.467+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:42:34.467+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dcd26af] was not registered for synchronization because synchronization is not active
2026-02-10T11:42:34.468+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b884f76] was not registered for synchronization because synchronization is not active
2026-02-10T11:42:34.484+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@263386871 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:42:34.484+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2231988 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:42:34.484+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1125300351 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:42:34.484+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@298394568 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:42:34.486+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:42:34.486+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:42:34.487+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:42:34.487+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:42:34.488+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:42:34.488+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:42:34.489+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:42:34.489+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:42:34.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:42:34.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:42:34.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:42:34.517+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:42:34.537+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e498116]
2026-02-10T11:42:34.537+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dcd26af]
2026-02-10T11:42:34.538+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b884f76]
2026-02-10T11:42:34.539+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6726d3d2]
2026-02-10T11:42:34.551+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:42:34.554+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:42:34.554+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:42:34.569+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:42:34.569+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:42:34.570+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:42:34.570+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:42:34.570+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:42:34.571+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:42:34.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:42:34.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:42:34.578+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:43:55.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:43:55.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:43:55.135+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:43:55.136+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:43:55.155+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:43:55.156+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:43:55.163+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:43:55.158+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:43:55.163+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:43:55.164+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:43:55.164+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:43:55.165+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:43:55.165+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:43:55.165+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:43:55.166+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:43:55.169+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:43:55.170+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:43:55.172+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:43:55.175+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:43:55.170+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:43:55.170+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:43:55.171+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:43:55.177+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:43:55.180+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:43:55.183+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13a01007] was not registered for synchronization because synchronization is not active
2026-02-10T11:43:55.181+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:43:55.182+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:43:55.182+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:43:55.183+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:43:55.185+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e07b049] was not registered for synchronization because synchronization is not active
2026-02-10T11:43:55.185+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:43:55.186+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75412a1f] was not registered for synchronization because synchronization is not active
2026-02-10T11:43:55.188+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:43:55.192+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:43:55.193+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:43:55.194+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:43:55.195+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1349042442 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:43:55.197+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:43:55.198+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:43:55.198+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1921838] was not registered for synchronization because synchronization is not active
2026-02-10T11:43:55.198+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:43:55.201+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@671997778 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:43:55.202+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@410813515 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:43:55.204+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:43:55.208+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@95307052 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:43:55.208+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:43:55.211+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:43:55.212+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:43:55.212+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:43:55.213+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13a01007]
2026-02-10T11:43:55.214+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:43:55.215+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:43:55.216+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:43:55.226+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:43:55.227+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:43:55.227+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:43:55.228+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:43:55.231+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:43:55.231+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75412a1f]
2026-02-10T11:43:55.231+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e07b049]
2026-02-10T11:43:55.241+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1921838]
2026-02-10T11:43:55.242+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:43:55.245+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:43:55.245+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:43:55.245+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:43:55.245+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:43:55.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:43:55.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:43:55.247+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:43:55.247+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:44:03.270+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:44:03.280+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:44:03.281+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:44:03.282+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:44:03.359+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:44:03.375+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:44:03.376+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:44:03.376+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:44:03.377+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:44:03.378+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:44:03.393+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:44:03.383+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:44:03.384+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:44:03.393+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:44:03.394+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:44:03.401+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:44:03.401+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:44:03.402+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39824044] was not registered for synchronization because synchronization is not active
2026-02-10T11:44:03.400+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:44:03.400+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:44:03.400+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:44:03.403+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:44:03.403+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:44:03.403+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:44:03.419+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:44:03.420+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:44:03.420+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:44:03.421+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:44:03.422+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:44:03.425+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:44:03.425+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:44:03.445+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13b94375] was not registered for synchronization because synchronization is not active
2026-02-10T11:44:03.444+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:44:03.444+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:44:03.446+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:44:03.446+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:44:03.446+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e8104da] was not registered for synchronization because synchronization is not active
2026-02-10T11:44:03.447+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@107c144] was not registered for synchronization because synchronization is not active
2026-02-10T11:44:03.477+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1176333185 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:44:03.484+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:44:03.533+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:44:03.536+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@253604703 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:44:03.536+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1941267280 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:44:03.537+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@618889915 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:44:03.546+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:44:03.547+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:44:03.547+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:44:03.548+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:44:03.548+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:44:03.549+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:44:03.562+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:44:03.594+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39824044]
2026-02-10T11:44:03.594+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:44:03.595+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:44:03.597+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:44:03.597+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@107c144]
2026-02-10T11:44:03.597+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13b94375]
2026-02-10T11:44:03.597+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:44:03.598+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:44:03.598+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:44:03.599+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:44:03.599+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:44:03.600+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:44:03.600+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:44:03.601+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:44:03.608+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:44:03.629+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e8104da]
2026-02-10T11:44:03.655+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:44:03.664+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:44:03.665+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:44:11.940+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:44:11.943+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:44:11.943+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:44:11.943+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:44:11.961+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:44:11.962+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:44:11.962+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:44:11.963+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:44:11.964+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:44:11.964+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:44:11.965+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:44:11.973+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:44:11.970+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:44:11.970+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:44:11.970+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:44:11.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:44:11.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:44:11.976+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:44:11.976+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:44:11.976+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:44:11.976+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:44:11.977+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:44:11.978+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:44:11.978+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:44:11.978+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:44:11.979+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:44:11.979+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:44:11.980+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:44:11.980+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c0a3b7c] was not registered for synchronization because synchronization is not active
2026-02-10T11:44:11.980+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:44:11.981+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:44:11.981+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29c67c4d] was not registered for synchronization because synchronization is not active
2026-02-10T11:44:11.982+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:44:11.984+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:44:11.986+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1739723572 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:44:11.988+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:44:11.994+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:44:11.995+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:44:11.995+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57fab537] was not registered for synchronization because synchronization is not active
2026-02-10T11:44:11.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61a9a459] was not registered for synchronization because synchronization is not active
2026-02-10T11:44:11.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:44:11.999+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@860649393 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ae53bd9] will not be managed by Spring
2026-02-10T11:44:12.002+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:44:12.003+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2022475598 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:44:12.003+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@167256211 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:44:12.003+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:44:12.004+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:44:12.004+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:44:12.005+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:44:12.005+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c0a3b7c]
2026-02-10T11:44:12.009+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:44:12.009+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:44:12.010+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:44:12.011+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:44:12.011+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:44:12.013+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:44:12.015+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29c67c4d]
2026-02-10T11:44:12.017+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:44:12.017+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:44:12.026+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:44:12.026+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57fab537]
2026-02-10T11:44:12.026+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61a9a459]
2026-02-10T11:44:12.027+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:44:12.027+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:44:12.027+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:44:12.028+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:44:12.029+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:44:12.029+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:44:12.031+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:44:12.032+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:44:25.615+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:44:25.619+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:44:25.619+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:44:25.620+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:44:25.655+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:44:25.659+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:44:25.659+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:44:25.659+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:44:25.737+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:44:25.766+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:44:25.747+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:44:25.748+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:44:25.766+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:44:25.766+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:44:25.767+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:44:25.767+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:44:25.767+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:44:25.768+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:44:25.769+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:44:25.770+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:44:25.770+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:44:25.770+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:44:25.771+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:44:25.771+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:44:25.775+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:44:25.776+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:44:25.777+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:44:25.777+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:44:25.777+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:44:25.778+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:44:25.778+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:44:25.778+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44b61ae6] was not registered for synchronization because synchronization is not active
2026-02-10T11:44:25.779+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:44:25.780+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:44:25.781+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:44:25.781+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3493a198] was not registered for synchronization because synchronization is not active
2026-02-10T11:44:25.781+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35549cfe] was not registered for synchronization because synchronization is not active
2026-02-10T11:44:25.782+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@997585] was not registered for synchronization because synchronization is not active
2026-02-10T11:44:25.785+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1316627661 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:44:25.785+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1317751665 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:44:25.785+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@492522570 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ae53bd9] will not be managed by Spring
2026-02-10T11:44:25.785+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1084254995 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:44:25.786+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:44:25.786+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:44:25.787+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:44:25.787+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:44:25.788+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:44:25.788+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:44:25.793+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:44:25.794+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:44:25.799+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:44:25.799+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:44:25.799+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:44:25.799+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:44:25.799+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@997585]
2026-02-10T11:44:25.799+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35549cfe]
2026-02-10T11:44:25.799+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44b61ae6]
2026-02-10T11:44:25.800+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3493a198]
2026-02-10T11:44:25.801+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:44:25.801+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:44:25.801+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:44:25.801+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:44:25.801+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:44:25.801+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:44:25.802+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:44:25.802+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:44:25.802+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:44:25.802+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:44:25.803+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:44:25.803+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:45:29.982+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:45:29.985+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:45:29.985+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:45:29.985+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:45:30.347+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:45:30.424+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:45:30.431+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:45:30.433+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:45:30.439+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:45:30.440+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:45:30.439+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:45:30.441+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:45:30.441+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:45:30.441+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:45:30.442+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:45:30.442+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:45:30.443+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:45:30.443+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:45:30.443+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:45:30.443+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:45:30.444+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:45:30.463+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75bc385] was not registered for synchronization because synchronization is not active
2026-02-10T11:45:30.463+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:45:30.465+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:45:30.466+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:45:30.466+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:45:30.466+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@499a44ef] was not registered for synchronization because synchronization is not active
2026-02-10T11:45:30.467+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:45:30.468+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46078a29] was not registered for synchronization because synchronization is not active
2026-02-10T11:45:30.478+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:45:30.501+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@735394965 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:45:30.501+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1963454155 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:45:30.512+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:45:30.513+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:45:30.513+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:45:30.513+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:45:30.513+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:45:30.514+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:45:30.531+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:45:30.535+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1675565553 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:45:30.535+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:45:30.545+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:45:30.545+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:45:30.545+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@499a44ef]
2026-02-10T11:45:30.557+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:45:30.558+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:45:30.559+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:45:30.545+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:45:30.546+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:45:30.561+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:45:30.562+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:45:30.563+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21596e32] was not registered for synchronization because synchronization is not active
2026-02-10T11:45:30.603+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:45:30.615+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75bc385]
2026-02-10T11:45:30.616+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:45:30.617+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1140391588 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:45:30.659+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:45:30.660+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:45:30.625+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:45:30.661+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:45:30.662+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:45:30.625+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46078a29]
2026-02-10T11:45:30.663+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:45:30.664+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:45:30.666+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:45:30.729+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:45:30.756+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21596e32]
2026-02-10T11:45:30.756+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:45:30.783+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:45:30.793+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:45:47.476+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:45:47.476+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:45:47.477+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:45:47.478+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:45:47.735+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:45:47.735+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:45:47.795+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:45:47.795+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:45:47.795+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:45:47.796+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:45:47.796+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:45:47.796+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:45:47.797+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:45:47.797+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:45:47.797+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:45:47.798+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:45:47.798+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:45:47.798+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76234520] was not registered for synchronization because synchronization is not active
2026-02-10T11:45:47.799+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:45:47.800+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ead00ae] was not registered for synchronization because synchronization is not active
2026-02-10T11:45:47.835+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:45:47.839+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@786777913 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ae53bd9] will not be managed by Spring
2026-02-10T11:45:47.841+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:45:47.842+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:45:47.843+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:45:47.843+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:45:47.843+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:45:47.844+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:45:47.844+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:45:47.844+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@203813419 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:45:47.845+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:45:47.846+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:45:47.846+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:45:47.846+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:45:47.846+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:45:47.847+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:45:47.847+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:45:47.847+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76234520]
2026-02-10T11:45:47.848+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:45:47.848+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:45:47.849+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:45:47.850+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:45:47.850+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:45:47.851+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:45:47.851+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:45:47.851+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:45:47.851+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@757de67d] was not registered for synchronization because synchronization is not active
2026-02-10T11:45:47.852+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:45:47.852+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ead00ae]
2026-02-10T11:45:47.853+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:45:47.856+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:45:47.856+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bf65259] was not registered for synchronization because synchronization is not active
2026-02-10T11:45:47.856+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:45:47.857+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:45:47.865+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1860863962 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:45:47.865+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1601874506 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:45:47.867+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:45:47.867+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:45:47.867+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:45:47.868+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:45:47.873+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:45:47.873+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:45:47.875+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bf65259]
2026-02-10T11:45:47.875+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@757de67d]
2026-02-10T11:45:47.876+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:45:47.876+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:45:47.876+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:45:47.876+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:45:47.877+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:45:47.877+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:45:56.519+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:45:56.527+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:45:56.527+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:45:56.527+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:45:56.551+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:45:56.552+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:45:56.568+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:45:56.576+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:45:56.556+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:45:56.557+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:45:56.569+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:45:56.577+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:45:56.582+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:45:56.584+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:45:56.584+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:45:56.600+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:45:56.600+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:45:56.600+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:45:56.602+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:45:56.601+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:45:56.602+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:45:56.602+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:45:56.625+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:45:56.612+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:45:56.612+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:45:56.618+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:45:56.626+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:45:56.627+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:45:56.628+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:45:56.628+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:45:56.629+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:45:56.630+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:45:56.633+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6422af77] was not registered for synchronization because synchronization is not active
2026-02-10T11:45:56.633+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f477f41] was not registered for synchronization because synchronization is not active
2026-02-10T11:45:56.634+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:45:56.647+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@295b3063] was not registered for synchronization because synchronization is not active
2026-02-10T11:45:56.634+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:45:56.649+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34a0a470] was not registered for synchronization because synchronization is not active
2026-02-10T11:45:56.669+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@525376348 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ae53bd9] will not be managed by Spring
2026-02-10T11:45:56.679+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1690031105 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:45:56.680+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@237902723 wrapping com.mysql.cj.jdbc.ConnectionImpl@11b6a2ce] will not be managed by Spring
2026-02-10T11:45:56.693+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:45:56.693+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:45:56.694+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:45:56.694+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:45:56.694+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:45:56.695+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:45:56.700+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@871599871 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:45:56.712+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:45:56.716+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:45:56.740+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:45:56.752+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:45:56.752+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:45:56.760+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@295b3063]
2026-02-10T11:45:56.777+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f477f41]
2026-02-10T11:45:56.777+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6422af77]
2026-02-10T11:45:56.777+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:45:56.779+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:45:56.779+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:45:56.780+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:45:56.780+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:45:56.781+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:45:56.792+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:45:56.781+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:45:56.782+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:45:56.865+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:45:56.879+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34a0a470]
2026-02-10T11:45:56.908+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:45:56.909+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:45:56.910+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:46:07.260+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:46:07.267+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:46:07.271+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:46:07.272+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:46:07.590+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:46:07.614+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:46:07.615+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:46:07.616+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:46:07.617+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:46:07.624+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:46:07.625+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:46:07.626+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:46:07.626+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dbb3] was not registered for synchronization because synchronization is not active
2026-02-10T11:46:07.597+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:46:07.628+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:46:07.647+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:46:07.650+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@657746919 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:46:07.650+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:46:07.651+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:46:07.651+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:46:07.651+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:46:07.652+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:46:07.657+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c2ed031] was not registered for synchronization because synchronization is not active
2026-02-10T11:46:07.658+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:46:07.658+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:46:07.660+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:46:07.660+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:46:07.660+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:46:07.663+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:46:07.664+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:46:07.664+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dbb3]
2026-02-10T11:46:07.664+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:46:07.665+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:46:07.665+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1087155262 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:46:07.666+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:46:07.666+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:46:07.671+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:46:07.667+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:46:07.667+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:46:07.668+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:46:07.672+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:46:07.676+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:46:07.677+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:46:07.677+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:46:07.680+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:46:07.682+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:46:07.684+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61d65720] was not registered for synchronization because synchronization is not active
2026-02-10T11:46:07.688+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@695619351 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:46:07.684+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:46:07.689+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:46:07.690+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4156810c] was not registered for synchronization because synchronization is not active
2026-02-10T11:46:07.690+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:46:07.696+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@130989202 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ae53bd9] will not be managed by Spring
2026-02-10T11:46:07.696+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:46:07.697+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:46:07.697+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:46:07.697+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c2ed031]
2026-02-10T11:46:07.697+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61d65720]
2026-02-10T11:46:07.698+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:46:07.698+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:46:07.698+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:46:07.699+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:46:07.699+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:46:07.700+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:46:07.700+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:46:07.722+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:46:07.725+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4156810c]
2026-02-10T11:46:07.732+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:46:07.744+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:46:07.745+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:46:22.130+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:46:22.131+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:46:22.131+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:46:22.131+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:46:22.138+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:46:22.138+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:46:22.140+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:46:22.145+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:46:22.142+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:46:22.143+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:46:22.144+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:46:22.147+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:46:22.322+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:46:22.525+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:46:22.674+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:46:22.682+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:46:22.684+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:46:22.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:46:22.687+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:46:22.688+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:46:22.725+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:46:22.729+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:46:22.730+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:46:22.730+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:46:22.732+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fc7100] was not registered for synchronization because synchronization is not active
2026-02-10T11:46:22.730+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:46:22.731+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:46:22.731+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:46:22.733+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:46:22.734+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:46:22.738+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:46:22.739+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:46:22.740+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:46:22.741+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:46:22.742+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:46:22.743+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60746ce2] was not registered for synchronization because synchronization is not active
2026-02-10T11:46:22.743+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50f844a0] was not registered for synchronization because synchronization is not active
2026-02-10T11:46:22.744+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@486a6b72] was not registered for synchronization because synchronization is not active
2026-02-10T11:46:22.746+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1286026247 wrapping com.mysql.cj.jdbc.ConnectionImpl@36eecb1c] will not be managed by Spring
2026-02-10T11:46:22.749+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:46:22.749+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:46:22.756+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@115310530 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ae53bd9] will not be managed by Spring
2026-02-10T11:46:22.757+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@742139517 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:46:22.757+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@982287080 wrapping com.mysql.cj.jdbc.ConnectionImpl@656d8273] will not be managed by Spring
2026-02-10T11:46:22.763+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:46:22.764+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:46:22.764+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:46:22.767+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:46:22.768+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:46:22.772+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:46:22.772+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fc7100]
2026-02-10T11:46:22.773+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:46:22.774+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:46:22.775+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:46:22.776+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:46:22.790+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:46:22.790+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:46:22.791+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:46:22.791+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50f844a0]
2026-02-10T11:46:22.792+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60746ce2]
2026-02-10T11:46:22.792+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@486a6b72]
2026-02-10T11:46:22.793+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:46:22.794+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:46:22.794+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:46:22.795+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:46:22.795+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:46:22.796+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:46:22.797+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:46:22.798+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:46:22.801+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:49:04.069+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:49:04.073+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:49:04.074+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:49:04.076+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:49:04.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:49:04.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:49:04.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:49:04.082+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:49:04.083+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:49:04.085+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41831ba9] was not registered for synchronization because synchronization is not active
2026-02-10T11:49:04.096+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1584070891 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:49:04.098+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:49:04.101+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:49:04.106+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:49:04.107+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41831ba9]
2026-02-10T11:49:04.108+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:49:04.108+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:49:04.109+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:49:04.204+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:49:04.207+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:49:04.209+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:49:04.209+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:49:04.209+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:49:04.209+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:49:04.210+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:49:04.212+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46bed8b5] was not registered for synchronization because synchronization is not active
2026-02-10T11:49:04.212+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1386029430 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:49:04.217+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:49:04.218+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:49:04.221+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:49:04.222+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46bed8b5]
2026-02-10T11:49:04.223+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:49:04.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:49:04.237+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:49:04.427+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:49:04.430+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:49:04.431+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:49:04.431+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:49:04.436+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:49:04.437+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:49:04.445+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:49:04.451+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:49:04.452+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:49:04.453+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53563ba9] was not registered for synchronization because synchronization is not active
2026-02-10T11:49:04.455+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@831798775 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ae53bd9] will not be managed by Spring
2026-02-10T11:49:04.456+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:49:04.457+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:49:04.458+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:49:04.458+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53563ba9]
2026-02-10T11:49:04.459+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:49:04.460+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:49:04.460+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:49:04.463+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:49:04.468+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:49:04.470+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:49:04.470+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:49:04.470+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:49:04.470+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:49:04.471+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:49:04.471+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:49:04.472+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:49:04.472+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@731959f0] was not registered for synchronization because synchronization is not active
2026-02-10T11:49:04.472+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1840971019 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:49:04.472+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:49:04.473+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:49:04.475+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:49:04.476+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@731959f0]
2026-02-10T11:49:04.477+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:49:04.478+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:49:04.479+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:49:12.224+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:49:12.228+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:49:12.230+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:49:12.230+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:49:12.230+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:49:12.231+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:49:12.232+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:49:12.234+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:49:12.235+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:49:12.236+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30e2e960] was not registered for synchronization because synchronization is not active
2026-02-10T11:49:12.238+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@619897751 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ae53bd9] will not be managed by Spring
2026-02-10T11:49:12.238+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:49:12.239+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:49:12.240+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:49:12.240+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30e2e960]
2026-02-10T11:49:12.241+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:49:12.242+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:49:12.243+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:49:12.243+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:49:12.246+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:49:12.247+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:49:12.249+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:49:12.250+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:49:12.251+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:49:12.251+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:49:12.251+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66df13d7] was not registered for synchronization because synchronization is not active
2026-02-10T11:49:12.253+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@679963563 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:49:12.253+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:49:12.253+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:49:12.255+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:49:12.255+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66df13d7]
2026-02-10T11:49:12.256+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:49:12.256+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:49:12.257+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:49:12.259+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:49:12.261+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:49:12.262+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:49:12.263+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:49:12.266+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:49:12.266+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:49:12.267+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:49:12.267+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:49:12.274+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:49:12.274+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52296fe8] was not registered for synchronization because synchronization is not active
2026-02-10T11:49:12.275+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1650622056 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:49:12.275+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:49:12.276+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:49:12.277+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:49:12.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52296fe8]
2026-02-10T11:49:12.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:49:12.278+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:49:12.279+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:49:12.288+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:49:12.290+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:49:12.291+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:49:12.291+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:49:12.291+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:49:12.292+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:49:12.292+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:49:12.293+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:49:12.293+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:49:12.293+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cefede0] was not registered for synchronization because synchronization is not active
2026-02-10T11:49:12.294+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1946029772 wrapping com.mysql.cj.jdbc.ConnectionImpl@5ae53bd9] will not be managed by Spring
2026-02-10T11:49:12.294+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:49:12.294+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:49:12.296+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:49:12.297+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cefede0]
2026-02-10T11:49:12.297+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:49:12.298+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:49:12.300+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:50:40.528+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:50:40.528+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:50:40.528+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:50:40.528+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:50:40.654+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:50:40.761+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:50:40.765+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:50:40.768+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:50:40.868+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:50:40.973+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:50:40.993+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:50:41.003+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:50:41.004+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:50:41.004+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:50:41.005+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:50:41.005+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:50:41.010+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:50:41.011+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:50:41.011+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:50:41.011+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:50:41.012+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:50:41.019+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:50:41.023+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:50:41.024+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:50:41.024+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:50:41.024+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:50:41.026+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:50:41.026+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:50:41.029+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49b12155] was not registered for synchronization because synchronization is not active
2026-02-10T11:50:41.037+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:50:41.038+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:50:41.038+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:50:41.039+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:50:41.039+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:50:41.040+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:50:41.040+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16482cef] was not registered for synchronization because synchronization is not active
2026-02-10T11:50:41.040+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3233bb71] was not registered for synchronization because synchronization is not active
2026-02-10T11:50:41.045+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d0a858f] was not registered for synchronization because synchronization is not active
2026-02-10T11:50:41.054+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@512166245 wrapping com.mysql.cj.jdbc.ConnectionImpl@2a7bb6e2] will not be managed by Spring
2026-02-10T11:50:41.059+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:50:41.060+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@437863215 wrapping com.mysql.cj.jdbc.ConnectionImpl@75432a16] will not be managed by Spring
2026-02-10T11:50:41.060+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1554315813 wrapping com.mysql.cj.jdbc.ConnectionImpl@7ee7e947] will not be managed by Spring
2026-02-10T11:50:41.060+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@28119767 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d020e50] will not be managed by Spring
2026-02-10T11:50:41.061+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:50:41.062+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:50:41.067+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:50:41.067+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:50:41.068+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:50:41.068+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:50:41.068+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:50:41.073+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:50:41.073+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:50:41.073+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:50:41.074+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:50:41.074+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16482cef]
2026-02-10T11:50:41.074+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3233bb71]
2026-02-10T11:50:41.075+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49b12155]
2026-02-10T11:50:41.075+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d0a858f]
2026-02-10T11:50:41.076+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:50:41.076+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:50:41.076+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:50:41.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:50:41.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:50:41.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:50:41.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:50:41.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:50:41.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:50:41.086+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:50:41.078+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:50:41.079+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:53:07.867+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:53:07.872+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:53:07.873+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:53:07.873+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:53:07.882+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:53:07.882+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:53:07.882+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:53:07.882+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:53:07.884+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:53:07.884+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:53:07.884+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:53:07.885+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:53:07.885+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:53:07.885+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:53:07.885+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:53:07.885+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:53:07.894+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:53:07.894+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:53:07.895+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:53:07.895+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:53:07.895+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:53:07.896+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:53:07.896+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:53:07.896+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:53:07.896+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:53:07.897+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:53:07.897+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:53:07.898+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:53:07.898+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:53:07.898+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fbd3ea4] was not registered for synchronization because synchronization is not active
2026-02-10T11:53:07.899+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:53:07.900+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:53:07.900+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:53:07.901+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:53:07.905+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63795ac1] was not registered for synchronization because synchronization is not active
2026-02-10T11:53:07.902+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20d3d64] was not registered for synchronization because synchronization is not active
2026-02-10T11:53:07.903+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:53:07.907+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68a00392] was not registered for synchronization because synchronization is not active
2026-02-10T11:53:07.913+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@602495394 wrapping com.mysql.cj.jdbc.ConnectionImpl@7ee7e947] will not be managed by Spring
2026-02-10T11:53:07.916+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:53:07.917+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:53:07.918+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1050841699 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d020e50] will not be managed by Spring
2026-02-10T11:53:07.918+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2014436272 wrapping com.mysql.cj.jdbc.ConnectionImpl@75432a16] will not be managed by Spring
2026-02-10T11:53:07.921+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:53:07.935+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:53:07.937+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:53:07.937+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:53:07.938+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1292446482 wrapping com.mysql.cj.jdbc.ConnectionImpl@6b27ec38] will not be managed by Spring
2026-02-10T11:53:07.941+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:53:07.946+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:53:07.947+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:53:07.947+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:53:07.949+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:53:07.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63795ac1]
2026-02-10T11:53:07.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fbd3ea4]
2026-02-10T11:53:07.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20d3d64]
2026-02-10T11:53:07.951+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:53:07.951+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:53:07.951+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:53:07.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:53:07.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:53:07.952+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:53:07.953+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:53:07.953+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:53:07.955+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:53:07.957+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68a00392]
2026-02-10T11:53:07.958+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:53:07.968+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:53:07.970+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:53:07.974+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:53:12.549+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:53:12.555+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:53:12.563+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:53:12.566+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:53:12.905+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:53:12.949+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:53:12.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:53:12.954+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:53:12.954+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:53:12.969+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:53:12.970+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:53:12.970+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:53:12.979+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:53:12.981+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:53:12.980+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:53:12.981+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:53:12.981+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:53:12.982+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:53:12.982+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:53:12.982+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:53:12.986+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:53:12.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:53:12.996+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:53:12.997+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:53:12.997+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:53:12.998+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19933358] was not registered for synchronization because synchronization is not active
2026-02-10T11:53:13.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:53:13.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:53:13.006+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:53:13.025+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@561929a1] was not registered for synchronization because synchronization is not active
2026-02-10T11:53:13.028+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:53:13.029+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:53:13.032+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:53:13.033+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:53:13.033+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:53:13.035+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c6fc5d7] was not registered for synchronization because synchronization is not active
2026-02-10T11:53:13.034+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:53:13.036+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a229f61] was not registered for synchronization because synchronization is not active
2026-02-10T11:53:13.049+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@730239816 wrapping com.mysql.cj.jdbc.ConnectionImpl@7ee7e947] will not be managed by Spring
2026-02-10T11:53:13.049+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@754398581 wrapping com.mysql.cj.jdbc.ConnectionImpl@75432a16] will not be managed by Spring
2026-02-10T11:53:13.049+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@770459470 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d020e50] will not be managed by Spring
2026-02-10T11:53:13.050+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1272370399 wrapping com.mysql.cj.jdbc.ConnectionImpl@6b27ec38] will not be managed by Spring
2026-02-10T11:53:13.051+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:53:13.054+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:53:13.055+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:53:13.064+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:53:13.065+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:53:13.065+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:53:13.066+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:53:13.066+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:53:13.079+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:53:13.080+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:53:13.080+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:53:13.083+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@561929a1]
2026-02-10T11:53:13.083+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c6fc5d7]
2026-02-10T11:53:13.083+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19933358]
2026-02-10T11:53:13.084+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:53:13.084+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:53:13.085+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:53:13.087+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:53:13.087+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:53:13.087+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:53:13.089+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a229f61]
2026-02-10T11:53:13.090+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:53:13.090+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:53:13.099+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:53:13.102+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:53:13.106+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:53:13.111+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:53:13.132+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:53:32.346+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:53:32.351+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:53:32.353+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:53:32.353+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:53:33.194+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:53:33.194+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:53:33.194+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:53:33.194+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:53:33.332+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:53:33.357+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:53:33.357+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:53:33.357+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:53:33.357+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:53:33.362+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:53:33.362+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:53:33.362+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:53:33.362+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:53:33.362+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:53:33.362+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:53:33.363+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:53:33.363+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:53:33.363+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:53:33.364+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:53:33.364+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:53:33.365+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:53:33.365+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:53:33.367+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e51eccf] was not registered for synchronization because synchronization is not active
2026-02-10T11:53:33.366+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:53:33.366+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:53:33.367+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:53:33.368+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:53:33.368+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:53:33.369+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:53:33.370+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:53:33.494+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:53:33.512+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@78856083 wrapping com.mysql.cj.jdbc.ConnectionImpl@7ee7e947] will not be managed by Spring
2026-02-10T11:53:33.512+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c4b6432] was not registered for synchronization because synchronization is not active
2026-02-10T11:53:33.512+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f6b169f] was not registered for synchronization because synchronization is not active
2026-02-10T11:53:33.512+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32762ec4] was not registered for synchronization because synchronization is not active
2026-02-10T11:53:33.513+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:53:33.514+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:53:33.522+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@277609228 wrapping com.mysql.cj.jdbc.ConnectionImpl@6b27ec38] will not be managed by Spring
2026-02-10T11:53:33.522+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@721081776 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d020e50] will not be managed by Spring
2026-02-10T11:53:33.523+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1052904375 wrapping com.mysql.cj.jdbc.ConnectionImpl@75432a16] will not be managed by Spring
2026-02-10T11:53:33.529+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:53:33.529+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:53:33.530+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:53:33.531+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:53:33.531+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:53:33.531+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e51eccf]
2026-02-10T11:53:33.532+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:53:33.533+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:53:33.534+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:53:33.535+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:53:33.563+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:53:33.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:53:33.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:53:33.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:53:33.577+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32762ec4]
2026-02-10T11:53:33.577+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c4b6432]
2026-02-10T11:53:33.577+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f6b169f]
2026-02-10T11:53:33.578+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:53:33.579+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:53:33.579+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:53:33.579+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:53:33.580+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:53:33.580+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:53:33.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:53:33.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:53:33.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:53:48.247+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:53:48.248+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:53:48.248+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:53:48.248+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:53:48.305+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:53:48.305+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:53:48.306+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:53:48.307+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:53:48.333+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:53:48.333+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:53:48.319+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:53:48.332+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:53:48.334+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:53:48.334+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:53:48.334+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:53:48.335+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:53:48.335+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:53:48.336+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:53:48.336+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:53:48.337+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:53:48.338+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:53:48.338+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:53:48.350+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:53:48.351+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:53:48.352+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:53:48.353+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:53:48.356+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:53:48.357+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:53:48.364+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:53:48.364+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:53:48.365+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:53:48.365+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7393d822] was not registered for synchronization because synchronization is not active
2026-02-10T11:53:48.366+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:53:48.367+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:53:48.368+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:53:48.370+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ad6d7f4] was not registered for synchronization because synchronization is not active
2026-02-10T11:53:48.370+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ba684cf] was not registered for synchronization because synchronization is not active
2026-02-10T11:53:48.371+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4373ae29] was not registered for synchronization because synchronization is not active
2026-02-10T11:53:48.382+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1410769726 wrapping com.mysql.cj.jdbc.ConnectionImpl@75432a16] will not be managed by Spring
2026-02-10T11:53:48.382+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@993661906 wrapping com.mysql.cj.jdbc.ConnectionImpl@7ee7e947] will not be managed by Spring
2026-02-10T11:53:48.388+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:53:48.389+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:53:48.389+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:53:48.395+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1883112654 wrapping com.mysql.cj.jdbc.ConnectionImpl@6b27ec38] will not be managed by Spring
2026-02-10T11:53:48.396+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@237106605 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d020e50] will not be managed by Spring
2026-02-10T11:53:48.396+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:53:48.403+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:53:48.405+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:53:48.407+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:53:48.412+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:53:48.416+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:53:48.422+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ad6d7f4]
2026-02-10T11:53:48.423+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:53:48.479+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:53:48.481+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:53:48.491+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7393d822]
2026-02-10T11:53:48.481+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:53:48.498+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ba684cf]
2026-02-10T11:53:48.499+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:53:48.482+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:53:48.482+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4373ae29]
2026-02-10T11:53:48.497+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:53:48.530+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:53:48.530+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:53:48.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:53:48.714+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:53:48.772+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:53:48.798+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:53:48.798+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:53:48.802+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:54:36.997+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:54:36.999+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:54:37.002+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:54:37.004+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:54:37.661+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:54:37.671+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:54:37.676+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:54:37.678+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:54:37.678+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:54:37.686+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:54:37.685+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:54:37.686+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:54:37.686+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:54:37.687+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:54:37.687+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:54:37.714+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:54:37.720+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:54:37.720+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:54:37.720+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:54:37.729+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:54:37.731+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:54:37.731+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:54:37.732+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cb6b2df] was not registered for synchronization because synchronization is not active
2026-02-10T11:54:37.730+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:54:37.730+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:54:37.730+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:54:37.733+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:54:37.733+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:54:37.733+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:54:37.734+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:54:37.734+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:54:37.734+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:54:37.735+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:54:37.736+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:54:37.736+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14691df7] was not registered for synchronization because synchronization is not active
2026-02-10T11:54:37.736+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50656fa7] was not registered for synchronization because synchronization is not active
2026-02-10T11:54:37.737+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:54:37.743+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b78a270] was not registered for synchronization because synchronization is not active
2026-02-10T11:54:37.745+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1550924000 wrapping com.mysql.cj.jdbc.ConnectionImpl@6b27ec38] will not be managed by Spring
2026-02-10T11:54:37.750+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:54:37.751+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:54:37.762+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1110841198 wrapping com.mysql.cj.jdbc.ConnectionImpl@7ee7e947] will not be managed by Spring
2026-02-10T11:54:37.762+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1163821630 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d020e50] will not be managed by Spring
2026-02-10T11:54:37.762+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1521826269 wrapping com.mysql.cj.jdbc.ConnectionImpl@75432a16] will not be managed by Spring
2026-02-10T11:54:37.763+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:54:37.763+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:54:37.764+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:54:37.764+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:54:37.765+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:54:37.765+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:54:37.768+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:54:37.779+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cb6b2df]
2026-02-10T11:54:37.782+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:54:37.784+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:54:37.788+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:54:37.792+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:54:37.792+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:54:37.795+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14691df7]
2026-02-10T11:54:37.795+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:54:37.796+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b78a270]
2026-02-10T11:54:37.796+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50656fa7]
2026-02-10T11:54:37.797+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:54:37.804+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:54:37.804+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:54:37.804+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:54:37.805+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:54:37.806+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:54:37.808+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:54:37.811+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:54:37.813+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:54:48.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:54:48.012+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:54:48.013+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:54:48.013+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:54:48.615+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:54:48.721+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:54:48.777+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:54:48.784+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:54:48.784+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:54:48.782+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:54:48.784+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:54:48.785+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:54:48.785+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:54:48.785+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:54:48.785+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:54:48.786+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:54:48.786+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:54:48.786+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:54:48.788+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:54:48.788+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:54:48.788+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:54:48.794+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:54:48.794+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:54:48.794+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f75715b] was not registered for synchronization because synchronization is not active
2026-02-10T11:54:48.795+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:54:48.795+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:54:48.796+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2895e6e5] was not registered for synchronization because synchronization is not active
2026-02-10T11:54:48.797+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:54:48.798+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23b52be6] was not registered for synchronization because synchronization is not active
2026-02-10T11:54:48.799+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:54:48.809+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:54:48.812+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@57030803 wrapping com.mysql.cj.jdbc.ConnectionImpl@7ee7e947] will not be managed by Spring
2026-02-10T11:54:48.812+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1591044378 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d020e50] will not be managed by Spring
2026-02-10T11:54:48.812+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@771180331 wrapping com.mysql.cj.jdbc.ConnectionImpl@6b27ec38] will not be managed by Spring
2026-02-10T11:54:48.815+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:54:48.812+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:54:48.814+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:54:48.815+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:54:48.815+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:54:48.816+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:54:48.816+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:54:48.817+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:54:48.817+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:54:48.819+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:54:48.819+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:54:48.833+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:54:48.838+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:54:48.839+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:54:48.839+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:54:48.846+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23b52be6]
2026-02-10T11:54:48.847+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:54:48.847+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:54:48.848+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:54:48.845+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41737cf9] was not registered for synchronization because synchronization is not active
2026-02-10T11:54:48.846+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f75715b]
2026-02-10T11:54:48.846+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2895e6e5]
2026-02-10T11:54:48.851+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:54:48.852+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:54:48.853+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:54:48.849+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@131157028 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d020e50] will not be managed by Spring
2026-02-10T11:54:48.851+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:54:48.854+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:54:48.854+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:54:48.860+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:54:48.860+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:54:48.933+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:54:48.945+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41737cf9]
2026-02-10T11:54:48.946+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:54:48.950+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:54:48.951+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:55:09.656+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:55:09.670+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:55:09.686+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:55:09.728+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:55:09.737+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:55:09.738+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:55:09.738+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:55:09.742+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:55:09.743+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:55:09.744+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ebc12de] was not registered for synchronization because synchronization is not active
2026-02-10T11:55:09.746+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@219763622 wrapping com.mysql.cj.jdbc.ConnectionImpl@75432a16] will not be managed by Spring
2026-02-10T11:55:09.746+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:55:09.747+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:55:09.750+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:55:09.750+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ebc12de]
2026-02-10T11:55:09.751+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:55:09.751+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:55:09.752+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:55:09.784+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:55:09.786+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:55:09.787+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:55:09.788+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:55:09.788+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:55:09.788+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:55:09.790+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:55:09.792+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54d4e24d] was not registered for synchronization because synchronization is not active
2026-02-10T11:55:09.795+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1295861379 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d020e50] will not be managed by Spring
2026-02-10T11:55:09.800+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:55:09.800+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:55:09.817+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:55:09.818+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54d4e24d]
2026-02-10T11:55:09.819+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:55:09.819+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:55:09.819+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:55:09.823+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:55:09.829+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:55:09.831+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:55:09.831+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:55:09.831+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:55:09.832+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:55:09.832+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:55:09.832+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:55:09.833+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:55:09.833+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e09378c] was not registered for synchronization because synchronization is not active
2026-02-10T11:55:09.833+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@334072677 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d020e50] will not be managed by Spring
2026-02-10T11:55:09.833+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:55:09.834+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:55:09.836+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:55:09.836+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e09378c]
2026-02-10T11:55:09.837+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:55:09.838+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:55:09.839+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:55:09.849+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:55:09.852+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:55:09.852+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:55:09.853+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:55:09.853+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:55:09.854+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:55:09.855+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:55:09.859+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:55:09.860+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:55:09.860+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7148a25e] was not registered for synchronization because synchronization is not active
2026-02-10T11:55:09.862+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@952281841 wrapping com.mysql.cj.jdbc.ConnectionImpl@7ee7e947] will not be managed by Spring
2026-02-10T11:55:09.863+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:55:09.863+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:55:09.865+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:55:09.866+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7148a25e]
2026-02-10T11:55:09.866+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:55:09.866+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:55:09.867+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:56:18.690+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:56:18.691+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:56:18.691+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:56:18.695+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:56:18.713+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:56:18.714+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:56:18.715+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:56:18.713+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:56:18.713+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:56:18.716+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:56:18.716+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:56:18.716+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:56:18.717+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:56:18.717+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:56:18.729+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:56:18.717+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:56:18.717+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:56:18.743+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:56:18.719+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:56:18.731+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:56:18.734+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:56:18.744+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:56:18.744+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:56:18.745+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:56:18.799+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:56:18.801+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:56:18.803+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:56:18.807+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:56:18.809+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:56:18.810+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14dc495b] was not registered for synchronization because synchronization is not active
2026-02-10T11:56:18.810+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:56:18.812+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:56:18.812+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:56:18.813+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11659062] was not registered for synchronization because synchronization is not active
2026-02-10T11:56:18.818+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:56:18.818+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:56:18.820+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26589e9e] was not registered for synchronization because synchronization is not active
2026-02-10T11:56:18.820+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39e2ba1e] was not registered for synchronization because synchronization is not active
2026-02-10T11:56:18.820+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@652548633 wrapping com.mysql.cj.jdbc.ConnectionImpl@7ee7e947] will not be managed by Spring
2026-02-10T11:56:18.827+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@300351084 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d020e50] will not be managed by Spring
2026-02-10T11:56:18.829+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:56:18.830+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:56:18.830+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:56:18.832+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:56:18.832+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1705262029 wrapping com.mysql.cj.jdbc.ConnectionImpl@75432a16] will not be managed by Spring
2026-02-10T11:56:18.832+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@785360458 wrapping com.mysql.cj.jdbc.ConnectionImpl@6b27ec38] will not be managed by Spring
2026-02-10T11:56:18.833+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:56:18.835+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:56:18.837+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:56:18.837+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:56:18.845+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:56:18.846+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:56:18.851+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11659062]
2026-02-10T11:56:18.851+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14dc495b]
2026-02-10T11:56:18.852+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:56:18.853+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:56:18.864+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:56:18.865+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:56:18.865+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26589e9e]
2026-02-10T11:56:18.865+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:56:18.866+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:56:18.867+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:56:18.867+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:56:18.870+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:56:18.878+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39e2ba1e]
2026-02-10T11:56:18.879+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:56:18.881+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:56:18.881+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:56:18.882+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:56:18.883+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:58:31.831+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:58:31.833+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:58:31.835+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:58:31.835+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:58:32.446+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:58:32.447+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:58:32.447+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:58:32.540+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:58:32.540+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:58:32.541+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:58:32.541+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:58:32.542+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:58:32.447+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:58:32.480+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:58:32.544+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:58:32.526+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:58:32.543+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:58:32.545+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:58:32.544+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:58:32.544+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:58:32.544+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:58:32.545+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61b18275] was not registered for synchronization because synchronization is not active
2026-02-10T11:58:32.545+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:58:32.545+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:58:32.546+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:58:32.546+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:58:32.547+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:58:32.547+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:58:32.547+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:58:32.548+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:58:32.548+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:58:32.556+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:58:32.557+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:58:32.557+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70601094] was not registered for synchronization because synchronization is not active
2026-02-10T11:58:32.558+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:58:32.558+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61276085] was not registered for synchronization because synchronization is not active
2026-02-10T11:58:32.560+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@918713641 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d020e50] will not be managed by Spring
2026-02-10T11:58:32.562+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:58:32.563+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:58:32.563+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74f42ad7] was not registered for synchronization because synchronization is not active
2026-02-10T11:58:32.563+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:58:32.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@500519688 wrapping com.mysql.cj.jdbc.ConnectionImpl@7ee7e947] will not be managed by Spring
2026-02-10T11:58:32.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@701500967 wrapping com.mysql.cj.jdbc.ConnectionImpl@6b27ec38] will not be managed by Spring
2026-02-10T11:58:32.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1821554990 wrapping com.mysql.cj.jdbc.ConnectionImpl@75432a16] will not be managed by Spring
2026-02-10T11:58:32.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:58:32.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:58:32.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:58:32.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:58:32.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61b18275]
2026-02-10T11:58:32.579+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:58:32.580+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:58:32.579+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:58:32.579+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:58:32.580+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:58:32.589+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:58:32.593+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:58:32.593+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:58:32.596+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74f42ad7]
2026-02-10T11:58:32.597+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70601094]
2026-02-10T11:58:32.597+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:58:32.598+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:58:32.598+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:58:32.599+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:58:32.599+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:58:32.606+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:58:32.666+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:58:32.748+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61276085]
2026-02-10T11:58:32.788+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:58:32.850+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:58:32.880+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:58:40.524+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:58:40.527+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:58:40.528+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:58:40.530+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:58:40.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:58:40.578+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:58:40.594+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:58:40.597+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:58:40.599+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:58:40.622+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:58:40.627+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:58:40.627+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:58:40.627+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:58:40.628+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:58:40.629+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:58:40.632+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:58:40.632+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:58:40.633+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:58:40.633+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:58:40.633+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:58:40.643+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:58:40.643+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:58:40.645+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:58:40.645+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:58:40.647+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:58:40.648+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:58:40.649+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c1f96ff] was not registered for synchronization because synchronization is not active
2026-02-10T11:58:40.649+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@622f5e8a] was not registered for synchronization because synchronization is not active
2026-02-10T11:58:40.649+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:58:40.649+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:58:40.658+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:58:40.659+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:58:40.672+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:58:40.673+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:58:40.674+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@671253792 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d020e50] will not be managed by Spring
2026-02-10T11:58:40.674+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@181025183 wrapping com.mysql.cj.jdbc.ConnectionImpl@7ee7e947] will not be managed by Spring
2026-02-10T11:58:40.675+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:58:40.676+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:58:40.677+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:58:40.678+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:58:40.678+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16e326b8] was not registered for synchronization because synchronization is not active
2026-02-10T11:58:40.678+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4458328c] was not registered for synchronization because synchronization is not active
2026-02-10T11:58:40.679+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:58:40.679+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:58:40.691+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1969535397 wrapping com.mysql.cj.jdbc.ConnectionImpl@75432a16] will not be managed by Spring
2026-02-10T11:58:40.693+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:58:40.695+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@296207374 wrapping com.mysql.cj.jdbc.ConnectionImpl@6b27ec38] will not be managed by Spring
2026-02-10T11:58:40.695+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:58:40.696+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:58:40.697+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:58:40.697+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:58:40.698+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@622f5e8a]
2026-02-10T11:58:40.698+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c1f96ff]
2026-02-10T11:58:40.698+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:58:40.699+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:58:40.700+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:58:40.706+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:58:40.706+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:58:40.707+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:58:40.707+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:58:40.707+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:58:40.722+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:58:40.722+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16e326b8]
2026-02-10T11:58:40.722+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4458328c]
2026-02-10T11:58:40.725+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:58:40.726+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:58:40.726+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:58:40.728+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:58:40.728+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:58:40.728+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:59:42.402+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/payments
2026-02-10T11:59:42.639+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/payments
2026-02-10T11:59:42.729+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/payments
2026-02-10T11:59:42.831+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:59:42.836+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:59:42.837+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:59:42.837+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:59:42.846+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/payments
2026-02-10T11:59:42.912+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:59:42.925+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:59:42.935+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/payments", parameters={}
2026-02-10T11:59:42.936+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:59:42.937+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:59:42.945+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:59:42.945+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPayments()
2026-02-10T11:59:42.946+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:59:42.947+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:59:42.947+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:59:42.947+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:59:42.947+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:59:42.948+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:59:42.948+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:59:42.954+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:59:42.955+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:59:42.956+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:59:42.957+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:59:42.961+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:59:42.961+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:59:42.973+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:59:42.974+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:59:42.974+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:59:42.974+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e3c3861] was not registered for synchronization because synchronization is not active
2026-02-10T11:59:42.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:59:42.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:59:42.975+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:59:42.976+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:59:42.977+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:59:42.997+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:59:42.997+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@768f30ae] was not registered for synchronization because synchronization is not active
2026-02-10T11:59:42.998+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:59:43.001+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:59:43.007+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:59:43.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c76639e] was not registered for synchronization because synchronization is not active
2026-02-10T11:59:43.008+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:59:43.020+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:59:43.009+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:59:43.009+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1724112798 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d020e50] will not be managed by Spring
2026-02-10T11:59:43.020+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1436922885 wrapping com.mysql.cj.jdbc.ConnectionImpl@6b27ec38] will not be managed by Spring
2026-02-10T11:59:43.021+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c01220f] was not registered for synchronization because synchronization is not active
2026-02-10T11:59:43.021+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@785cc0df] was not registered for synchronization because synchronization is not active
2026-02-10T11:59:43.021+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.PaymentMapper.findByCompanyId    : ==>  Preparing: SELECT p.* FROM payment_tb p INNER JOIN subscription_tb s ON p.subscription_id = s.subscription_id WHERE s.company_id = ? ORDER BY p.payment_date DESC, p.created_at DESC
2026-02-10T11:59:43.022+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:59:43.031+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@757513413 wrapping com.mysql.cj.jdbc.ConnectionImpl@7ee7e947] will not be managed by Spring
2026-02-10T11:59:43.043+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.PaymentMapper.findByCompanyId    : ==> Parameters: 3(Long)
2026-02-10T11:59:43.044+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:59:43.046+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1122221654 wrapping com.mysql.cj.jdbc.ConnectionImpl@4db3e7a9] will not be managed by Spring
2026-02-10T11:59:43.046+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1519472430 wrapping com.mysql.cj.jdbc.ConnectionImpl@75432a16] will not be managed by Spring
2026-02-10T11:59:43.047+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:59:43.048+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:59:43.049+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:59:43.057+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:59:43.057+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:59:43.058+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:59:43.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:59:43.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:59:43.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:59:43.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:59:43.077+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-10T11:59:43.080+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@785cc0df]
2026-02-10T11:59:43.087+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c76639e]
2026-02-10T11:59:43.088+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@768f30ae]
2026-02-10T11:59:43.088+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c01220f]
2026-02-10T11:59:43.088+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-02-10T11:59:43.090+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:59:43.090+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:59:43.091+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:59:43.093+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:59:43.094+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:59:43.094+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:59:43.098+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:59:43.098+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:59:43.099+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-10T11:59:43.104+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:59:43.124+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:59:43.129+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:59:43.130+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:59:43.137+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.PaymentMapper.findByCompanyId    : <==      Total: 2
2026-02-10T11:59:43.162+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e3c3861]
2026-02-10T11:59:43.171+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:59:43.172+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[PaymentDto(paymentId=2, subscriptionId=1, amount=1550 (truncated)...]
2026-02-10T11:59:43.179+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:59:46.521+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-10T11:59:46.521+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-10T11:59:46.523+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-10T11:59:46.525+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-10T11:59:46.525+09:00 DEBUG 20428 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-10T11:59:46.530+09:00 DEBUG 20428 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-10T11:59:46.531+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-10T11:59:46.531+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-10T11:59:46.537+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-10T11:59:46.538+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-10T11:59:46.538+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-10T11:59:46.538+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-10T11:59:46.539+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-10T11:59:46.540+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-10T11:59:46.540+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-10T11:59:46.544+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-10T11:59:46.545+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-10T11:59:46.545+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-10T11:59:46.545+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-10T11:59:46.546+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-10T11:59:46.546+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-10T11:59:46.546+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-10T11:59:46.546+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-10T11:59:46.547+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-10T11:59:46.547+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-10T11:59:46.553+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-10T11:59:46.547+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-10T11:59:46.547+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-10T11:59:46.548+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-10T11:59:46.548+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:59:46.553+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-10T11:59:46.554+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:59:46.554+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:59:46.555+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-10T11:59:46.555+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-10T11:59:46.555+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bab67bb] was not registered for synchronization because synchronization is not active
2026-02-10T11:59:46.556+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-10T11:59:46.556+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:59:46.556+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c47022] was not registered for synchronization because synchronization is not active
2026-02-10T11:59:46.557+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-10T11:59:46.558+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:59:46.559+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-10T11:59:46.559+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:59:46.560+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:59:46.560+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d8f2925] was not registered for synchronization because synchronization is not active
2026-02-10T11:59:46.560+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-10T11:59:46.561+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24e2517] was not registered for synchronization because synchronization is not active
2026-02-10T11:59:46.562+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:59:46.567+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:59:46.564+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:59:46.569+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79120983] was not registered for synchronization because synchronization is not active
2026-02-10T11:59:46.570+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1785038517 wrapping com.mysql.cj.jdbc.ConnectionImpl@6b27ec38] will not be managed by Spring
2026-02-10T11:59:46.571+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@512729684 wrapping com.mysql.cj.jdbc.ConnectionImpl@7ee7e947] will not be managed by Spring
2026-02-10T11:59:46.571+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-10T11:59:46.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-10T11:59:46.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-10T11:59:46.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1697845289 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d020e50] will not be managed by Spring
2026-02-10T11:59:46.572+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1517734116 wrapping com.mysql.cj.jdbc.ConnectionImpl@75432a16] will not be managed by Spring
2026-02-10T11:59:46.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:59:46.573+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1297886675 wrapping com.mysql.cj.jdbc.ConnectionImpl@4db3e7a9] will not be managed by Spring
2026-02-10T11:59:46.574+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-10T11:59:46.575+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-10T11:59:46.575+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-10T11:59:46.575+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-10T11:59:46.576+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bb6e7c2] was not registered for synchronization because synchronization is not active
2026-02-10T11:59:46.576+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-10T11:59:46.577+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-10T11:59:46.577+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-10T11:59:46.577+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-10T11:59:46.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-10T11:59:46.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-10T11:59:46.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-10T11:59:46.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-10T11:59:46.581+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-10T11:59:46.582+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c47022]
2026-02-10T11:59:46.587+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bab67bb]
2026-02-10T11:59:46.588+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79120983]
2026-02-10T11:59:46.588+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24e2517]
2026-02-10T11:59:46.589+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d8f2925]
2026-02-10T11:59:46.589+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:59:46.589+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@899074931 wrapping com.mysql.cj.jdbc.ConnectionImpl@6b27ec38] will not be managed by Spring
2026-02-10T11:59:46.589+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:59:46.590+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:59:46.590+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:59:46.591+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:59:46.594+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f1a271b] was not registered for synchronization because synchronization is not active
2026-02-10T11:59:46.595+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-10T11:59:46.595+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-10T11:59:46.595+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-10T11:59:46.596+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-10T11:59:46.597+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-10T11:59:46.598+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@490449138 wrapping com.mysql.cj.jdbc.ConnectionImpl@7ee7e947] will not be managed by Spring
2026-02-10T11:59:46.599+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-10(LocalDate)
2026-02-10T11:59:46.600+09:00 DEBUG 20428 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:59:46.603+09:00 DEBUG 20428 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:59:46.603+09:00 DEBUG 20428 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:59:46.604+09:00 DEBUG 20428 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:59:46.606+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-10T11:59:46.612+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-10T11:59:46.625+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-10T11:59:46.676+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bb6e7c2]
2026-02-10T11:59:46.677+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:59:46.678+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-10T11:59:46.679+09:00 DEBUG 20428 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:59:46.628+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-10T11:59:46.679+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f1a271b]
2026-02-10T11:59:46.742+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:59:46.806+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-10T11:59:46.843+09:00 DEBUG 20428 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-10T11:59:50.326+09:00 DEBUG 20428 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/payments
2026-02-10T11:59:50.330+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/payments
2026-02-10T11:59:50.331+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/payments
2026-02-10T11:59:50.331+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/payments
2026-02-10T11:59:50.332+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/payments", parameters={}
2026-02-10T11:59:50.332+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPayments()
2026-02-10T11:59:50.335+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:59:50.336+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-10T11:59:50.337+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-10T11:59:50.338+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52055f44] was not registered for synchronization because synchronization is not active
2026-02-10T11:59:50.339+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1403950468 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d020e50] will not be managed by Spring
2026-02-10T11:59:50.340+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.PaymentMapper.findByCompanyId    : ==>  Preparing: SELECT p.* FROM payment_tb p INNER JOIN subscription_tb s ON p.subscription_id = s.subscription_id WHERE s.company_id = ? ORDER BY p.payment_date DESC, p.created_at DESC
2026-02-10T11:59:50.341+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.PaymentMapper.findByCompanyId    : ==> Parameters: 3(Long)
2026-02-10T11:59:50.343+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-10T11:59:50.343+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-02-10T11:59:50.347+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-10T11:59:50.348+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] c.i.b.m.PaymentMapper.findByCompanyId    : <==      Total: 2
2026-02-10T11:59:50.348+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52055f44]
2026-02-10T11:59:50.352+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-10T11:59:50.352+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[PaymentDto(paymentId=2, subscriptionId=1, amount=1550 (truncated)...]
2026-02-10T11:59:50.354+09:00 DEBUG 20428 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
