2026-01-19T13:04:22.613+09:00  INFO 15048 --- [main] c.i.backend.BackendApplication           : Starting BackendApplication using Java 17.0.17 with PID 15048 (C:\InnerSignature\backend\target\classes started by owner in C:\InnerSignature\backend)
2026-01-19T13:04:22.687+09:00 DEBUG 15048 --- [main] c.i.backend.BackendApplication           : Running with Spring Boot v3.5.8, Spring v6.2.14
2026-01-19T13:04:22.696+09:00  INFO 15048 --- [main] c.i.backend.BackendApplication           : The following 1 profile is active: "dev"
2026-01-19T13:04:24.831+09:00 DEBUG 15048 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Searching for mappers annotated with @Mapper
2026-01-19T13:04:24.850+09:00 DEBUG 15048 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Using auto-configuration base package 'com.innersignature.backend'
2026-01-19T13:04:25.616+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AccountCodeMappingMapper.class]
2026-01-19T13:04:25.618+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditLogMapper.class]
2026-01-19T13:04:25.620+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditRuleMapper.class]
2026-01-19T13:04:25.623+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\BudgetMapper.class]
2026-01-19T13:04:25.624+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyCardMapper.class]
2026-01-19T13:04:25.631+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyMapper.class]
2026-01-19T13:04:25.636+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CreditMapper.class]
2026-01-19T13:04:25.648+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseCategoryMapper.class]
2026-01-19T13:04:25.651+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseMapper.class]
2026-01-19T13:04:25.652+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\MonthlyClosingMapper.class]
2026-01-19T13:04:25.654+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PasswordResetTokenMapper.class]
2026-01-19T13:04:25.668+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PaymentMapper.class]
2026-01-19T13:04:25.674+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionMapper.class]
2026-01-19T13:04:25.685+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionPlanMapper.class]
2026-01-19T13:04:25.685+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserApproverMapper.class]
2026-01-19T13:04:25.686+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserCardMapper.class]
2026-01-19T13:04:25.690+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserMapper.class]
2026-01-19T13:04:25.691+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserSignatureMapper.class]
2026-01-19T13:04:25.695+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'accountCodeMappingMapper' and 'com.innersignature.backend.mapper.AccountCodeMappingMapper' mapperInterface
2026-01-19T13:04:25.700+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditLogMapper' and 'com.innersignature.backend.mapper.AuditLogMapper' mapperInterface
2026-01-19T13:04:25.701+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditRuleMapper' and 'com.innersignature.backend.mapper.AuditRuleMapper' mapperInterface
2026-01-19T13:04:25.704+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'budgetMapper' and 'com.innersignature.backend.mapper.BudgetMapper' mapperInterface
2026-01-19T13:04:25.706+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyCardMapper' and 'com.innersignature.backend.mapper.CompanyCardMapper' mapperInterface
2026-01-19T13:04:25.708+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyMapper' and 'com.innersignature.backend.mapper.CompanyMapper' mapperInterface
2026-01-19T13:04:25.715+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'creditMapper' and 'com.innersignature.backend.mapper.CreditMapper' mapperInterface
2026-01-19T13:04:25.721+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseCategoryMapper' and 'com.innersignature.backend.mapper.ExpenseCategoryMapper' mapperInterface
2026-01-19T13:04:25.726+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseMapper' and 'com.innersignature.backend.mapper.ExpenseMapper' mapperInterface
2026-01-19T13:04:25.735+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'monthlyClosingMapper' and 'com.innersignature.backend.mapper.MonthlyClosingMapper' mapperInterface
2026-01-19T13:04:25.747+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'passwordResetTokenMapper' and 'com.innersignature.backend.mapper.PasswordResetTokenMapper' mapperInterface
2026-01-19T13:04:25.750+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'paymentMapper' and 'com.innersignature.backend.mapper.PaymentMapper' mapperInterface
2026-01-19T13:04:25.752+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionMapper' and 'com.innersignature.backend.mapper.SubscriptionMapper' mapperInterface
2026-01-19T13:04:25.756+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionPlanMapper' and 'com.innersignature.backend.mapper.SubscriptionPlanMapper' mapperInterface
2026-01-19T13:04:25.758+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userApproverMapper' and 'com.innersignature.backend.mapper.UserApproverMapper' mapperInterface
2026-01-19T13:04:25.760+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userCardMapper' and 'com.innersignature.backend.mapper.UserCardMapper' mapperInterface
2026-01-19T13:04:25.762+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userMapper' and 'com.innersignature.backend.mapper.UserMapper' mapperInterface
2026-01-19T13:04:25.765+09:00 DEBUG 15048 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userSignatureMapper' and 'com.innersignature.backend.mapper.UserSignatureMapper' mapperInterface
2026-01-19T13:04:27.216+09:00  INFO 15048 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-19T13:04:27.255+09:00  INFO 15048 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-19T13:04:27.274+09:00  INFO 15048 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-01-19T13:04:27.483+09:00  INFO 15048 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-19T13:04:27.563+09:00  INFO 15048 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4665 ms
2026-01-19T13:04:27.986+09:00 DEBUG 15048 --- [main] c.i.b.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2026-01-19T13:04:28.016+09:00 DEBUG 15048 --- [main] c.i.backend.security.RateLimitFilter     : Filter 'rateLimitFilter' configured for use
2026-01-19T13:04:30.046+09:00 DEBUG 15048 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AccountCodeMappingMapper.xml]'
2026-01-19T13:04:30.086+09:00 DEBUG 15048 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditLogMapper.xml]'
2026-01-19T13:04:30.152+09:00 DEBUG 15048 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditRuleMapper.xml]'
2026-01-19T13:04:30.187+09:00 DEBUG 15048 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\BudgetMapper.xml]'
2026-01-19T13:04:30.215+09:00 DEBUG 15048 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyCardMapper.xml]'
2026-01-19T13:04:30.247+09:00 DEBUG 15048 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyMapper.xml]'
2026-01-19T13:04:30.270+09:00 DEBUG 15048 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CreditMapper.xml]'
2026-01-19T13:04:30.304+09:00 DEBUG 15048 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseCategoryMapper.xml]'
2026-01-19T13:04:31.894+09:00 DEBUG 15048 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseMapper.xml]'
2026-01-19T13:04:31.940+09:00 DEBUG 15048 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\MonthlyClosingMapper.xml]'
2026-01-19T13:04:31.974+09:00 DEBUG 15048 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PasswordResetTokenMapper.xml]'
2026-01-19T13:04:32.006+09:00 DEBUG 15048 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PaymentMapper.xml]'
2026-01-19T13:04:32.033+09:00 DEBUG 15048 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionMapper.xml]'
2026-01-19T13:04:32.057+09:00 DEBUG 15048 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionPlanMapper.xml]'
2026-01-19T13:04:32.123+09:00 DEBUG 15048 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserApproverMapper.xml]'
2026-01-19T13:04:32.147+09:00 DEBUG 15048 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserCardMapper.xml]'
2026-01-19T13:04:32.186+09:00 DEBUG 15048 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserMappeer.xml]'
2026-01-19T13:04:32.201+09:00 DEBUG 15048 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserSignatureMapper.xml]'
2026-01-19T13:04:34.420+09:00 DEBUG 15048 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 159 mappings in 'requestMappingHandlerMapping'
2026-01-19T13:04:34.710+09:00 DEBUG 15048 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /api/uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-19T13:04:34.808+09:00  WARN 15048 --- [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 86399165-f675-4860-b9ce-3db5e916dda1

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-19T13:04:34.965+09:00  INFO 15048 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-19T13:04:35.516+09:00 DEBUG 15048 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RateLimitFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-19T13:04:36.420+09:00 DEBUG 15048 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-19T13:04:36.639+09:00 DEBUG 15048 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-19T13:04:36.665+09:00 DEBUG 15048 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2026-01-19T13:04:37.183+09:00  INFO 15048 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-19T13:04:37.231+09:00  INFO 15048 --- [main] c.i.backend.BackendApplication           : Started BackendApplication in 15.683 seconds (process running for 16.351)
2026-01-19T13:47:18.360+09:00  INFO 4928 --- [main] c.i.backend.BackendApplication           : Starting BackendApplication using Java 17.0.17 with PID 4928 (C:\InnerSignature\backend\target\classes started by owner in C:\InnerSignature\backend)
2026-01-19T13:47:18.363+09:00 DEBUG 4928 --- [main] c.i.backend.BackendApplication           : Running with Spring Boot v3.5.8, Spring v6.2.14
2026-01-19T13:47:18.364+09:00  INFO 4928 --- [main] c.i.backend.BackendApplication           : The following 1 profile is active: "dev"
2026-01-19T13:47:20.259+09:00 DEBUG 4928 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Searching for mappers annotated with @Mapper
2026-01-19T13:47:20.260+09:00 DEBUG 4928 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Using auto-configuration base package 'com.innersignature.backend'
2026-01-19T13:47:20.606+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AccountCodeMappingMapper.class]
2026-01-19T13:47:20.615+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditLogMapper.class]
2026-01-19T13:47:20.620+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditRuleMapper.class]
2026-01-19T13:47:20.623+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\BudgetMapper.class]
2026-01-19T13:47:20.624+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyCardMapper.class]
2026-01-19T13:47:20.625+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyMapper.class]
2026-01-19T13:47:20.626+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CreditMapper.class]
2026-01-19T13:47:20.627+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseCategoryMapper.class]
2026-01-19T13:47:20.633+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseMapper.class]
2026-01-19T13:47:20.634+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\MonthlyClosingMapper.class]
2026-01-19T13:47:20.634+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PasswordResetTokenMapper.class]
2026-01-19T13:47:20.637+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PaymentMapper.class]
2026-01-19T13:47:20.639+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionMapper.class]
2026-01-19T13:47:20.640+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionPlanMapper.class]
2026-01-19T13:47:20.641+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserApproverMapper.class]
2026-01-19T13:47:20.642+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserCardMapper.class]
2026-01-19T13:47:20.643+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserMapper.class]
2026-01-19T13:47:20.643+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserSignatureMapper.class]
2026-01-19T13:47:20.648+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'accountCodeMappingMapper' and 'com.innersignature.backend.mapper.AccountCodeMappingMapper' mapperInterface
2026-01-19T13:47:20.656+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditLogMapper' and 'com.innersignature.backend.mapper.AuditLogMapper' mapperInterface
2026-01-19T13:47:20.657+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditRuleMapper' and 'com.innersignature.backend.mapper.AuditRuleMapper' mapperInterface
2026-01-19T13:47:20.660+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'budgetMapper' and 'com.innersignature.backend.mapper.BudgetMapper' mapperInterface
2026-01-19T13:47:20.663+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyCardMapper' and 'com.innersignature.backend.mapper.CompanyCardMapper' mapperInterface
2026-01-19T13:47:20.670+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyMapper' and 'com.innersignature.backend.mapper.CompanyMapper' mapperInterface
2026-01-19T13:47:20.789+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'creditMapper' and 'com.innersignature.backend.mapper.CreditMapper' mapperInterface
2026-01-19T13:47:20.835+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseCategoryMapper' and 'com.innersignature.backend.mapper.ExpenseCategoryMapper' mapperInterface
2026-01-19T13:47:20.837+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseMapper' and 'com.innersignature.backend.mapper.ExpenseMapper' mapperInterface
2026-01-19T13:47:20.839+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'monthlyClosingMapper' and 'com.innersignature.backend.mapper.MonthlyClosingMapper' mapperInterface
2026-01-19T13:47:20.840+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'passwordResetTokenMapper' and 'com.innersignature.backend.mapper.PasswordResetTokenMapper' mapperInterface
2026-01-19T13:47:20.845+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'paymentMapper' and 'com.innersignature.backend.mapper.PaymentMapper' mapperInterface
2026-01-19T13:47:20.850+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionMapper' and 'com.innersignature.backend.mapper.SubscriptionMapper' mapperInterface
2026-01-19T13:47:20.854+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionPlanMapper' and 'com.innersignature.backend.mapper.SubscriptionPlanMapper' mapperInterface
2026-01-19T13:47:20.857+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userApproverMapper' and 'com.innersignature.backend.mapper.UserApproverMapper' mapperInterface
2026-01-19T13:47:20.861+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userCardMapper' and 'com.innersignature.backend.mapper.UserCardMapper' mapperInterface
2026-01-19T13:47:20.866+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userMapper' and 'com.innersignature.backend.mapper.UserMapper' mapperInterface
2026-01-19T13:47:20.868+09:00 DEBUG 4928 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userSignatureMapper' and 'com.innersignature.backend.mapper.UserSignatureMapper' mapperInterface
2026-01-19T13:47:22.405+09:00  INFO 4928 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-19T13:47:22.425+09:00  INFO 4928 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-19T13:47:22.426+09:00  INFO 4928 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-01-19T13:47:22.554+09:00  INFO 4928 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-19T13:47:22.555+09:00  INFO 4928 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4124 ms
2026-01-19T13:47:22.676+09:00 DEBUG 4928 --- [main] c.i.b.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2026-01-19T13:47:22.677+09:00 DEBUG 4928 --- [main] c.i.backend.security.RateLimitFilter     : Filter 'rateLimitFilter' configured for use
2026-01-19T13:47:23.645+09:00 DEBUG 4928 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AccountCodeMappingMapper.xml]'
2026-01-19T13:47:23.662+09:00 DEBUG 4928 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditLogMapper.xml]'
2026-01-19T13:47:23.687+09:00 DEBUG 4928 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditRuleMapper.xml]'
2026-01-19T13:47:23.719+09:00 DEBUG 4928 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\BudgetMapper.xml]'
2026-01-19T13:47:23.742+09:00 DEBUG 4928 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyCardMapper.xml]'
2026-01-19T13:47:23.771+09:00 DEBUG 4928 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyMapper.xml]'
2026-01-19T13:47:23.792+09:00 DEBUG 4928 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CreditMapper.xml]'
2026-01-19T13:47:23.826+09:00 DEBUG 4928 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseCategoryMapper.xml]'
2026-01-19T13:47:23.912+09:00 DEBUG 4928 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseMapper.xml]'
2026-01-19T13:47:23.952+09:00 DEBUG 4928 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\MonthlyClosingMapper.xml]'
2026-01-19T13:47:23.970+09:00 DEBUG 4928 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PasswordResetTokenMapper.xml]'
2026-01-19T13:47:23.985+09:00 DEBUG 4928 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PaymentMapper.xml]'
2026-01-19T13:47:24.010+09:00 DEBUG 4928 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionMapper.xml]'
2026-01-19T13:47:24.021+09:00 DEBUG 4928 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionPlanMapper.xml]'
2026-01-19T13:47:24.039+09:00 DEBUG 4928 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserApproverMapper.xml]'
2026-01-19T13:47:24.082+09:00 DEBUG 4928 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserCardMapper.xml]'
2026-01-19T13:47:24.115+09:00 DEBUG 4928 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserMappeer.xml]'
2026-01-19T13:47:24.140+09:00 DEBUG 4928 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserSignatureMapper.xml]'
2026-01-19T13:47:25.134+09:00 DEBUG 4928 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 159 mappings in 'requestMappingHandlerMapping'
2026-01-19T13:47:25.334+09:00 DEBUG 4928 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /api/uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-19T13:47:25.377+09:00  WARN 4928 --- [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: daee693e-33fb-4628-b448-cf139fbc43eb

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-19T13:47:25.399+09:00  INFO 4928 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-19T13:47:25.650+09:00 DEBUG 4928 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RateLimitFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-19T13:47:25.872+09:00 DEBUG 4928 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-19T13:47:25.987+09:00 DEBUG 4928 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-19T13:47:26.004+09:00 DEBUG 4928 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2026-01-19T13:47:26.505+09:00  INFO 4928 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-19T13:47:26.605+09:00  INFO 4928 --- [main] c.i.backend.BackendApplication           : Started BackendApplication in 9.094 seconds (process running for 9.635)
2026-01-19T13:47:42.953+09:00  INFO 4928 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-19T13:47:42.954+09:00  INFO 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-19T13:47:42.955+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2026-01-19T13:47:42.955+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2026-01-19T13:47:42.955+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2026-01-19T13:47:42.956+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@2e159116
2026-01-19T13:47:42.957+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@2c668c2a
2026-01-19T13:47:42.958+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-19T13:47:42.959+09:00  INFO 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms
2026-01-19T13:47:43.010+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-19T13:47:43.066+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-19T13:47:43.079+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-19T13:47:43.093+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-19T13:47:43.101+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-19T13:47:43.103+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-19T13:47:43.246+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_user1, password=1234)]
2026-01-19T13:47:43.261+09:00  INFO 4928 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 로그인 시도 - username: test_user1
2026-01-19T13:47:43.281+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:47:43.304+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b2b7b41] was not registered for synchronization because synchronization is not active
2026-01-19T13:47:43.328+09:00  INFO 4928 --- [http-nio-8080-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-19T13:47:43.779+09:00  INFO 4928 --- [http-nio-8080-exec-2] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4c05b533
2026-01-19T13:47:43.782+09:00  INFO 4928 --- [http-nio-8080-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-19T13:47:43.789+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2068187434 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:47:43.804+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-19T13:47:43.864+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_user1(String)
2026-01-19T13:47:43.893+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-19T13:47:43.903+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b2b7b41]
2026-01-19T13:47:44.005+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:47:44.007+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@596f3bdc] was not registered for synchronization because synchronization is not active
2026-01-19T13:47:44.009+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@916333141 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:47:44.009+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-19T13:47:44.013+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-19T13:47:44.027+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-19T13:47:44.029+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@596f3bdc]
2026-01-19T13:47:44.193+09:00  INFO 4928 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 로그인 성공 - userId: 2, role: USER, companyId: 1
2026-01-19T13:47:44.196+09:00  INFO 4928 --- [http-nio-8080-exec-2] SECURITY                                 : LOGIN_SUCCESS userId=2 username=test_user1 role=USER
2026-01-19T13:47:44.224+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:47:44.254+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=2, username=test_user1, password (truncated)...]
2026-01-19T13:47:44.273+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:47:44.713+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-19T13:47:44.726+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-19T13:47:44.812+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/companies
2026-01-19T13:47:44.822+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-19T13:47:44.825+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-19T13:47:44.827+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-19T13:47:44.851+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:47:44.857+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1761a1a7] was not registered for synchronization because synchronization is not active
2026-01-19T13:47:44.889+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1746618442 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:47:44.893+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-19T13:47:44.898+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 2(Long)
2026-01-19T13:47:44.931+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-19T13:47:44.936+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1761a1a7]
2026-01-19T13:47:44.940+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:47:44.957+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-19T13:47:45.005+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:47:59.037+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:47:59.041+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-19T13:47:59.049+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:47:59.142+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:47:59.145+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-19T13:47:59.247+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:47:59.256+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/companies
2026-01-19T13:47:59.256+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:47:59.267+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:47:59.267+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-19T13:47:59.268+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:47:59.282+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:47:59.304+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-19T13:47:59.305+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:47:59.305+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:47:59.370+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-19T13:47:59.422+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:47:59.432+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:47:59.433+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:47:59.438+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:47:59.442+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:47:59.442+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6509db0d] was not registered for synchronization because synchronization is not active
2026-01-19T13:47:59.443+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ad854b1] was not registered for synchronization because synchronization is not active
2026-01-19T13:47:59.443+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f26e2e3] was not registered for synchronization because synchronization is not active
2026-01-19T13:47:59.483+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1268040226 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:47:59.483+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@565032958 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:47:59.483+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1109096428 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:47:59.487+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:47:59.487+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:47:59.488+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-19T13:47:59.499+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:47:59.502+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:47:59.511+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 2(Long)
2026-01-19T13:47:59.573+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-19T13:47:59.587+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6509db0d]
2026-01-19T13:47:59.598+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:47:59.600+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-19T13:47:59.606+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:47:59.772+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:47:59.778+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-19T13:47:59.779+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:47:59.779+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-19T13:47:59.794+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:47:59.867+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f26e2e3]
2026-01-19T13:47:59.796+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:47:59.850+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-19T13:47:59.854+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-19T13:47:59.862+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:47:59.870+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-19T13:47:59.870+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ad854b1]
2026-01-19T13:47:59.871+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:47:59.889+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:47:59.892+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:47:59.901+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-19T13:47:59.924+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:47:59.907+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-19T13:47:59.907+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:47:59.908+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1141cc3e] was not registered for synchronization because synchronization is not active
2026-01-19T13:47:59.922+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:47:59.925+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:47:59.929+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-19T13:47:59.931+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-19T13:47:59.947+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25e36afa] was not registered for synchronization because synchronization is not active
2026-01-19T13:47:59.949+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@156026219 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:47:59.950+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:47:59.951+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:47:59.953+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-19T13:47:59.954+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-19T13:47:59.954+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@206000594 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:47:59.955+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:47:59.960+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:47:59.967+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:47:59.969+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-19T13:47:59.974+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-19T13:47:59.983+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:47:59.986+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:47:59.991+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:47:59.988+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:47:59.989+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:47:59.990+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-19T13:47:59.991+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-19T13:47:59.993+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:47:59.997+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@497db68d] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:00.005+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59190d78] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:00.005+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:00.005+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:00.006+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@764750818 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:48:00.008+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73830ce5] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:00.008+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64cae475] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:00.009+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:48:00.013+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:00.013+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:00.020+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25e36afa]
2026-01-19T13:48:00.020+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1141cc3e]
2026-01-19T13:48:00.021+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:00.021+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1036021996 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:48:00.021+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:48:00.022+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:00.025+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:00.036+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:48:00.044+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:00.058+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2038844364 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:48:00.058+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1147804162 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:48:00.069+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:48:00.073+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:48:00.064+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-19T13:48:00.068+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:00.075+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:00.086+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-19T13:48:00.055+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:00.088+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-19T13:48:00.089+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:48:00.089+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-19T13:48:00.090+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-19T13:48:00.090+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:00.092+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:00.093+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@167b5710] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:00.096+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@415017903 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:48:00.097+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:00.098+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:00.099+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:00.100+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64cae475]
2026-01-19T13:48:00.100+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:00.101+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40b0c8a7] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:00.102+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1652341254 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:48:00.102+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:00.103+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:00.107+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:48:00.115+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:48:00.116+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:48:00.117+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:48:00.117+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:48:00.118+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:00.118+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@779f24f9] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:00.153+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:48:00.154+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:00.154+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:00.155+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:00.155+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:48:00.163+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59190d78]
2026-01-19T13:48:00.163+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@167b5710]
2026-01-19T13:48:00.166+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40b0c8a7]
2026-01-19T13:48:00.173+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73830ce5]
2026-01-19T13:48:00.173+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@497db68d]
2026-01-19T13:48:00.174+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:00.174+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2035860602 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:48:00.174+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:00.175+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:00.175+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:00.175+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:00.175+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35334adc] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:00.180+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@759943485 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:48:00.176+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:48:00.176+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68129eae] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:00.176+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@649b1a49] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:00.176+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d48dfb0] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:00.177+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31343bdb] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:00.181+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:00.182+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:48:00.198+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1844957168 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:48:00.205+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1903024607 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:48:00.207+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@358169262 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:48:00.218+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:00.212+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:00.216+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:00.217+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:00.219+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:00.220+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:00.221+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:00.241+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:00.243+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:48:00.244+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:00.246+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:00.300+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31343bdb]
2026-01-19T13:48:00.296+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68129eae]
2026-01-19T13:48:00.299+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@779f24f9]
2026-01-19T13:48:00.299+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35334adc]
2026-01-19T13:48:00.300+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:00.300+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@720909759 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:48:00.302+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:00.303+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:00.403+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@649b1a49]
2026-01-19T13:48:00.372+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:00.376+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:00.377+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:48:00.379+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-19T13:48:00.385+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5933123b] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:00.404+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:00.404+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39858f42] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:00.405+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:48:00.406+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:00.408+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-19T13:48:00.408+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@623382621 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:48:00.417+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6408e71b] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:00.420+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2146281854 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:48:00.425+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:00.433+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-19T13:48:00.441+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-19T13:48:00.443+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1493033089 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:48:00.443+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:00.446+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-19T13:48:00.484+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-19T13:48:00.488+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-19T13:48:00.488+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-19T13:48:00.488+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:00.496+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-19T13:48:00.499+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-19T13:48:00.502+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-19T13:48:00.508+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-19T13:48:00.508+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-19T13:48:00.513+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-19T13:48:00.514+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-19T13:48:00.515+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-19T13:48:00.516+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:00.516+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:00.523+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:00.524+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70672029] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:00.550+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2124464213 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:48:00.552+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:00.554+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:00.533+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3088f4c1] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:00.538+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 15
2026-01-19T13:48:00.541+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 15
2026-01-19T13:48:00.549+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39858f42]
2026-01-19T13:48:00.557+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@953660173 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:00.562+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5933123b]
2026-01-19T13:48:00.566+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6408e71b]
2026-01-19T13:48:00.567+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:00.567+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:00.573+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:00.574+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:00.575+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:48:00.576+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:00.579+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73167eb1] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:00.582+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61580b87] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:00.583+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:00.588+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:00.600+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1462241550 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:48:00.600+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1465463220 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:48:00.600+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70672029]
2026-01-19T13:48:00.608+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 15
2026-01-19T13:48:00.632+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:00.633+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:00.633+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:00.634+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d48dfb0]
2026-01-19T13:48:00.634+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:00.635+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:00.636+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ee81727] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:00.636+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:00.640+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@246235168 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:48:00.640+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@395d5e17] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:00.640+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:00.640+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1442703750 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:48:00.640+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:00.640+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:00.643+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:00.670+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:00.677+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73167eb1]
2026-01-19T13:48:00.670+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:00.674+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:00.679+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:00.680+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:00.685+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:00.685+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3088f4c1]
2026-01-19T13:48:00.685+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61580b87]
2026-01-19T13:48:00.686+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@395d5e17]
2026-01-19T13:48:00.686+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ee81727]
2026-01-19T13:48:00.687+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76f2d826] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:00.688+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:00.691+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:00.693+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:00.695+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:00.738+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@532379588 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:48:00.747+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44286083] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:00.806+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b11ec75] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:00.822+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ba4bdb6] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:00.823+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ffe2128] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:00.823+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:48:00.824+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1336455078 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:00.825+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1264579633 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:48:00.826+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@685435187 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:48:00.828+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1902201055 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:48:00.832+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-19T13:48:00.834+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:00.835+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:48:00.835+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:48:00.836+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-19T13:48:00.837+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:00.838+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-19T13:48:00.839+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-19T13:48:00.841+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-19T13:48:00.873+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:00.875+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 15
2026-01-19T13:48:00.879+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-19T13:48:00.880+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-19T13:48:00.881+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-19T13:48:00.886+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44286083]
2026-01-19T13:48:00.891+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ffe2128]
2026-01-19T13:48:00.893+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ba4bdb6]
2026-01-19T13:48:00.896+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76f2d826]
2026-01-19T13:48:00.897+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b11ec75]
2026-01-19T13:48:00.899+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:00.899+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:00.902+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bfc8e3a] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:00.901+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:00.901+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:00.901+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:00.904+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53e46c47] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:00.902+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@748b482d] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:00.903+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@356848396 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:48:00.903+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59e88150] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:00.903+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@617b5c54] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:00.906+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1772737276 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:48:00.907+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1931481671 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:00.908+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:00.909+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@819294477 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:48:00.914+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1644683382 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:48:00.917+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-19T13:48:00.917+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-19T13:48:00.921+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:00.921+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-19T13:48:00.924+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-19T13:48:00.926+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-19T13:48:00.932+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-19T13:48:00.936+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-19T13:48:00.938+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-19T13:48:00.963+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 15
2026-01-19T13:48:00.973+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@617b5c54]
2026-01-19T13:48:00.980+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 15
2026-01-19T13:48:00.985+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:00.988+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:00.992+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 15
2026-01-19T13:48:00.992+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 15
2026-01-19T13:48:00.998+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53e46c47]
2026-01-19T13:48:00.998+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bfc8e3a]
2026-01-19T13:48:01.002+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48f769d2] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:01.005+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59e88150]
2026-01-19T13:48:01.006+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@748b482d]
2026-01-19T13:48:01.007+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:01.011+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:01.016+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2049866581 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:48:01.017+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:01.017+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:01.018+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e165ea3] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:01.018+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36bc44a9] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:01.018+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:01.020+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70507443] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:01.021+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22d235ba] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:01.021+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1875256182 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:48:01.023+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@160338202 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:48:01.025+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:01.028+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1831831832 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:48:01.030+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@204917741 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:01.031+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:01.034+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:48:01.035+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:01.035+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:01.036+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:01.039+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-19T13:48:01.040+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:01.040+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:01.055+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:01.055+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:01.058+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-19T13:48:01.059+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:01.064+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48f769d2]
2026-01-19T13:48:01.064+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70507443]
2026-01-19T13:48:01.065+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36bc44a9]
2026-01-19T13:48:01.065+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e165ea3]
2026-01-19T13:48:01.065+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:01.066+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:01.066+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:01.066+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:01.067+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d4f24] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:01.067+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@749d15b4] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:01.067+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16e3c9cc] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:01.068+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@536dd87c] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:01.070+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1934040846 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:48:01.071+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@119309576 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:48:01.074+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1118723765 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:48:01.075+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1865574388 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:48:01.075+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:48:01.076+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:48:01.076+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-19T13:48:01.076+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:01.078+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:48:01.083+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-19T13:48:01.085+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-19T13:48:01.091+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-19T13:48:01.092+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22d235ba]
2026-01-19T13:48:01.094+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-19T13:48:01.098+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:01.101+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cbb1464] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:01.108+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1341620652 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:01.119+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:48:01.122+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-19T13:48:01.122+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-19T13:48:01.125+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-19T13:48:01.127+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-19T13:48:01.134+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d4f24]
2026-01-19T13:48:01.136+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 15
2026-01-19T13:48:01.139+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@536dd87c]
2026-01-19T13:48:01.140+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@749d15b4]
2026-01-19T13:48:01.141+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:01.142+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16e3c9cc]
2026-01-19T13:48:01.142+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:01.143+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:01.149+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79e29049] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:01.150+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:01.151+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e52cc68] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:01.157+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e3e4d56] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:01.158+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@326927422 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:48:01.204+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:01.158+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a8c948b] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:01.206+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1915326399 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:48:01.207+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:01.159+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@377275337 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:48:01.212+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:01.213+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:01.159+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@848481680 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:48:01.190+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-19T13:48:01.205+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:01.211+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:01.217+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:01.218+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cbb1464]
2026-01-19T13:48:01.219+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:01.220+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:01.236+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@300659dc] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:01.253+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@347759500 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:01.254+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:01.254+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:01.255+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:01.260+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-19T13:48:01.260+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a8c948b]
2026-01-19T13:48:01.264+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e52cc68]
2026-01-19T13:48:01.267+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79e29049]
2026-01-19T13:48:01.270+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-19T13:48:01.276+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:01.279+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:01.281+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:01.281+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:01.281+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e3e4d56]
2026-01-19T13:48:01.288+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@550db583] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:01.292+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-19T13:48:01.292+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-19T13:48:01.299+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:01.326+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-19T13:48:01.300+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1270565733 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:48:01.313+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:01.314+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:01.339+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:01.382+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 15
2026-01-19T13:48:01.415+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:48:01.549+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@300659dc]
2026-01-19T13:48:01.554+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-19T13:48:01.554+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:01.559+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3050701e] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:01.562+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@840570737 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:01.568+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:01.569+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:01.604+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-19T13:48:01.605+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-19T13:48:01.635+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-19T13:48:01.702+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:01.709+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-19T13:48:01.746+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@550db583]
2026-01-19T13:48:01.746+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3050701e]
2026-01-19T13:48:01.749+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-19T13:48:01.757+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:01.759+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:01.760+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-19T13:48:01.761+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2625ac3d] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:01.761+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@966018e] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:01.766+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-19T13:48:01.769+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@507294935 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:48:01.771+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@981811260 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:01.784+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:48:01.772+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-19T13:48:01.772+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:01.787+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:01.786+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-19T13:48:01.787+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:01.787+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d299112] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:01.790+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-19T13:48:01.806+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-19T13:48:01.807+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-19T13:48:01.809+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-19T13:48:01.810+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-19T13:48:01.828+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-19T13:48:01.833+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:01.834+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@966018e]
2026-01-19T13:48:01.835+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:01.834+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@297f8a9d] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:01.835+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7030e07b] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:01.836+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1239676290 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:01.843+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1705913303 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:48:01.844+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:01.845+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:01.846+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:01.847+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2625ac3d]
2026-01-19T13:48:01.847+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:01.848+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:01.850+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:01.852+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-19T13:48:01.853+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1930476088 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:48:01.861+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:01.862+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:01.863+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:01.867+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:01.868+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:01.888+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7030e07b]
2026-01-19T13:48:01.890+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:01.891+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-19T13:48:01.894+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:01.887+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d299112]
2026-01-19T13:48:01.899+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:01.904+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:01.950+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dcb0d33] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:01.959+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@297f8a9d]
2026-01-19T13:48:01.959+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@564096655 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:48:01.960+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:01.960+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:01.965+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:01.965+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28e9826e] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:01.984+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1868270142 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:48:01.991+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:02.005+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:02.008+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:02.008+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dcb0d33]
2026-01-19T13:48:02.024+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:02.024+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1494ab86] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:02.029+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@27500210 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:48:02.034+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-19T13:48:02.034+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:02.039+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-19T13:48:02.040+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28e9826e]
2026-01-19T13:48:02.047+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:02.048+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a99d5c5] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:02.049+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1040700938 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:48:02.054+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-19T13:48:02.057+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 15
2026-01-19T13:48:02.060+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-19T13:48:02.062+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1494ab86]
2026-01-19T13:48:02.063+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:02.063+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@364b055c] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:02.070+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@120737928 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:48:02.071+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:02.073+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:02.076+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 15
2026-01-19T13:48:02.077+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a99d5c5]
2026-01-19T13:48:02.084+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:02.085+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:02.085+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@754e3c2a] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:02.085+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@364b055c]
2026-01-19T13:48:02.086+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1642985659 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:48:02.086+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:02.086+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:02.086+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@523b9a19] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:02.087+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:02.088+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1010042087 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:48:02.089+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:48:02.091+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-19T13:48:02.126+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:02.141+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@754e3c2a]
2026-01-19T13:48:02.142+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:02.144+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-19T13:48:02.147+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19902a7e] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:02.150+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@523b9a19]
2026-01-19T13:48:02.151+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@490465802 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:48:02.151+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:02.151+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:48:02.152+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b7a1791] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:02.152+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-19T13:48:02.154+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1973395893 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:48:02.155+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-19T13:48:02.160+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-19T13:48:02.165+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-19T13:48:02.171+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19902a7e]
2026-01-19T13:48:02.175+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:02.179+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@245884ca] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:02.181+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 15
2026-01-19T13:48:02.189+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1006864869 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:48:02.197+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b7a1791]
2026-01-19T13:48:02.198+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-19T13:48:02.200+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:02.204+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-19T13:48:02.204+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dbcc86b] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:02.205+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1456578258 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:48:02.210+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:02.213+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:02.218+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 15
2026-01-19T13:48:02.219+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@245884ca]
2026-01-19T13:48:02.220+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:02.220+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2428567] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:02.221+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:02.221+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1650212657 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:48:02.221+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dbcc86b]
2026-01-19T13:48:02.223+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:02.223+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:02.224+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:02.224+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33b0ead8] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:02.226+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@685019989 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:48:02.226+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:48:02.228+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-19T13:48:02.231+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:02.233+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2428567]
2026-01-19T13:48:02.233+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:02.234+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ec8755a] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:02.235+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-19T13:48:02.236+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2016914521 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:48:02.237+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33b0ead8]
2026-01-19T13:48:02.238+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:48:02.238+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:02.239+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long)
2026-01-19T13:48:02.240+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@749938cd] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:02.242+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1078721196 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:48:02.251+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:02.251+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-19T13:48:02.252+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:02.252+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ec8755a]
2026-01-19T13:48:02.253+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:02.257+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f94c1ab] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:02.260+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@316346790 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:48:02.264+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:02.266+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:02.267+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@749938cd]
2026-01-19T13:48:02.269+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:02.271+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:02.275+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-19T13:48:02.281+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:02.283+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:02.291+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f94c1ab]
2026-01-19T13:48:02.302+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:02.306+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-19T13:48:02.312+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:06.169+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:48:06.175+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-19T13:48:06.177+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:48:06.178+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-19T13:48:06.193+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:48:06.196+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:48:06.196+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-19T13:48:06.198+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-19T13:48:06.199+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:48:06.263+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-19T13:48:06.264+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:48:06.289+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-19T13:48:06.309+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:48:06.312+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-19T13:48:06.314+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:48:06.314+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-19T13:48:06.315+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-19T13:48:06.316+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:48:06.317+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:48:06.411+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:48:06.418+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:48:06.435+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-19T13:48:06.451+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-19T13:48:06.459+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:48:06.487+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:48:06.496+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:48:06.491+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:48:06.492+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-19T13:48:06.492+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:48:06.492+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-19T13:48:06.493+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:48:06.500+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:48:06.498+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:48:06.498+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.499+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-19T13:48:06.499+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:48:06.500+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.500+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:48:06.501+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:48:06.505+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d4a7c89] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.508+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.508+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:48:06.509+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72beaa0c] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.518+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.519+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.526+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23adba77] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.526+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:48:06.532+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c72633f] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.533+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@706011598 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:48:06.533+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a636d01] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.536+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.536+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:48:06.538+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1259115579 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:48:06.540+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16bbac41] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.542+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:48:06.542+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:06.549+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:06.550+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1125487591 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:48:06.550+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1312265766 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:48:06.559+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:48:06.559+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:48:06.568+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:48:06.571+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:48:06.574+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@197210091 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:48:06.574+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1813977087 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:06.575+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:48:06.587+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:48:06.588+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:48:06.588+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d4a7c89]
2026-01-19T13:48:06.590+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:48:06.592+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:48:06.593+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.595+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d6f1aa7] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.596+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@355995926 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:48:06.597+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:06.597+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:06.601+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:06.602+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72beaa0c]
2026-01-19T13:48:06.602+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.602+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62bd619b] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.603+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1881100022 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:48:06.603+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:06.604+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:06.614+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:48:06.614+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c72633f]
2026-01-19T13:48:06.615+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:48:06.615+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.616+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16bbac41]
2026-01-19T13:48:06.616+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13b20f17] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.616+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.617+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2040251429 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:48:06.619+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@703c4d10] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.620+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:06.620+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@376351176 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:06.620+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:06.620+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:06.621+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:06.622+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:06.622+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:48:06.622+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d6f1aa7]
2026-01-19T13:48:06.622+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a636d01]
2026-01-19T13:48:06.623+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:06.623+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.624+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:48:06.624+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7aba5f0b] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.626+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@435110395 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:48:06.629+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:06.627+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:06.629+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:06.635+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:06.635+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62bd619b]
2026-01-19T13:48:06.637+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.637+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18c15067] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.639+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:06.639+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@301554525 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:48:06.639+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@703c4d10]
2026-01-19T13:48:06.640+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-19T13:48:06.640+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:06.643+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-19T13:48:06.646+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:48:06.647+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:06.648+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:06.649+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13b20f17]
2026-01-19T13:48:06.651+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:06.653+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:48:06.654+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:06.654+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:06.655+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7aba5f0b]
2026-01-19T13:48:06.655+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:06.656+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:48:06.657+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:06.664+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-19T13:48:06.665+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:48:06.664+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-19T13:48:06.668+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-19T13:48:06.670+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-19T13:48:06.672+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-19T13:48:06.669+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:48:06.674+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-19T13:48:06.674+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:48:06.674+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-19T13:48:06.675+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:48:06.675+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-19T13:48:06.675+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:48:06.675+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.676+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-19T13:48:06.676+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.676+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8876b53] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.676+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-19T13:48:06.676+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@321630e7] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.679+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1503547094 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:48:06.679+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1171406310 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:06.680+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:48:06.680+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:48:06.680+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.682+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:48:06.682+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7aa3d5c0] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.682+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:48:06.683+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@29510735 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:48:06.683+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:06.684+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:06.719+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:48:06.720+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-19T13:48:06.720+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:06.733+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@321630e7]
2026-01-19T13:48:06.734+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23adba77]
2026-01-19T13:48:06.734+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7aa3d5c0]
2026-01-19T13:48:06.734+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.735+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.735+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.735+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@741ae3a8] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.735+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59be8d0f] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.736+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@706e62e3] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.736+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1997038788 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:06.737+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1652846322 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:48:06.737+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@336045307 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:48:06.737+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:06.738+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:06.738+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:06.738+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:06.739+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:06.739+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:06.741+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-19T13:48:06.742+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 21
2026-01-19T13:48:06.750+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8876b53]
2026-01-19T13:48:06.750+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18c15067]
2026-01-19T13:48:06.752+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:06.752+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:06.753+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.754+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.754+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:06.755+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59be8d0f]
2026-01-19T13:48:06.755+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@741ae3a8]
2026-01-19T13:48:06.755+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@396ef708] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.755+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6010c491] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.755+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@706e62e3]
2026-01-19T13:48:06.756+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.757+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:06.757+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@167829125 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:48:06.757+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@624273270 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:48:06.758+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.758+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7082e91c] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.758+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:48:06.758+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:06.758+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:06.759+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@297c591e] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.759+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1576654070 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:48:06.760+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:06.760+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:06.760+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:06.764+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@713449384 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:48:06.764+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:48:06.771+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-19T13:48:06.772+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-19T13:48:06.773+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:06.773+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:06.774+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@396ef708]
2026-01-19T13:48:06.774+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-19T13:48:06.774+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6010c491]
2026-01-19T13:48:06.775+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.776+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.779+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@368ffc77] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.778+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@172b752f] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.779+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-19T13:48:06.780+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1348305531 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:48:06.781+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1504904821 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:48:06.781+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:48:06.781+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7082e91c]
2026-01-19T13:48:06.781+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:48:06.783+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-19T13:48:06.783+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.784+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-19T13:48:06.785+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@eb862bc] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.789+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1771413630 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:48:06.791+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 21
2026-01-19T13:48:06.794+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 26
2026-01-19T13:48:06.794+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-19T13:48:06.803+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:06.803+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@297c591e]
2026-01-19T13:48:06.804+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@368ffc77]
2026-01-19T13:48:06.804+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@172b752f]
2026-01-19T13:48:06.804+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:06.805+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.805+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.806+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.806+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@258d103c] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.806+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@211658aa] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.807+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a7828d5] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.807+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1861359930 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:48:06.807+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1748198587 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:48:06.808+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@641116856 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:48:06.808+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:06.808+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:06.812+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-19T13:48:06.813+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:06.814+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@eb862bc]
2026-01-19T13:48:06.815+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:06.816+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-19T13:48:06.816+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:06.818+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:06.822+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-19T13:48:06.823+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:06.827+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@258d103c]
2026-01-19T13:48:06.828+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:06.832+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.838+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dd63c00] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.840+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1075302774 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:48:06.842+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:06.842+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 21
2026-01-19T13:48:06.845+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:48:06.846+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a7828d5]
2026-01-19T13:48:06.846+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@211658aa]
2026-01-19T13:48:06.847+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-19T13:48:06.848+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:06.848+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.853+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-19T13:48:06.853+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50162d0c] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.854+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:06.858+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1138158764 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:48:06.876+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:06.876+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 26
2026-01-19T13:48:06.882+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:06.884+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dd63c00]
2026-01-19T13:48:06.884+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.886+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@154b74c] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.887+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:06.887+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@787819250 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:48:06.887+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50162d0c]
2026-01-19T13:48:06.887+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-19T13:48:06.887+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.890+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f41e8d6] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.890+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-19T13:48:06.891+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@241096319 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:48:06.891+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:48:06.892+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-19T13:48:06.897+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 21
2026-01-19T13:48:06.898+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 26
2026-01-19T13:48:06.899+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@154b74c]
2026-01-19T13:48:06.900+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f41e8d6]
2026-01-19T13:48:06.900+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.900+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.900+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42017c47] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.900+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50f674c0] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.901+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1716211100 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:48:06.901+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@814817616 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:48:06.901+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:06.902+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:06.902+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:06.902+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:06.905+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:06.905+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:06.906+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42017c47]
2026-01-19T13:48:06.907+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50f674c0]
2026-01-19T13:48:06.907+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.908+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54d1fc3e] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.917+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:06.918+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@494616999 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:48:06.919+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-19T13:48:06.920+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:48:06.922+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:06.925+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-19T13:48:06.940+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 26
2026-01-19T13:48:06.949+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54d1fc3e]
2026-01-19T13:48:06.949+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:06.950+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32d55bb9] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:06.951+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1774084561 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:48:06.952+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:06.954+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:06.956+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:06.958+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32d55bb9]
2026-01-19T13:48:06.967+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:06.968+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-19T13:48:06.970+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:10.621+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:48:10.626+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-01-19T13:48:10.632+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-01-19T13:48:10.737+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/2/approvers/active
2026-01-19T13:48:10.738+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/2/approvers/active
2026-01-19T13:48:10.774+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:48:10.875+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:48:10.876+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-01-19T13:48:10.877+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/2/approvers/active
2026-01-19T13:48:10.942+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:48:10.945+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-01-19T13:48:10.951+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/2/approvers/active
2026-01-19T13:48:11.009+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expense-categories/merged
2026-01-19T13:48:11.107+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/2/approvers/active
2026-01-19T13:48:11.221+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:48:11.311+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expense-categories/merged
2026-01-19T13:48:11.321+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-01-19T13:48:11.321+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/2/approvers/active
2026-01-19T13:48:11.322+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/2/approvers/active
2026-01-19T13:48:11.413+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:48:11.483+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-01-19T13:48:11.513+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-01-19T13:48:11.495+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-01-19T13:48:11.496+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/2/approvers/active
2026-01-19T13:48:11.496+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/2/approvers/active", parameters={}
2026-01-19T13:48:11.512+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:11.530+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c1c3bce] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:11.514+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-01-19T13:48:11.536+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-19T13:48:11.514+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-01-19T13:48:11.540+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-19T13:48:11.515+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/2/approvers/active", parameters={}
2026-01-19T13:48:11.542+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getActiveApprovers(Long)
2026-01-19T13:48:11.545+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-19T13:48:11.529+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getActiveApprovers(Long)
2026-01-19T13:48:11.555+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-19T13:48:11.555+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-19T13:48:11.555+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-19T13:48:11.555+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-19T13:48:11.626+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2065887521 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:11.655+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:11.791+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:11.821+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:11.821+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-19T13:48:11.821+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:48:11.822+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cce3617] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:11.822+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42acb80a] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:11.823+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19ff4e1] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:11.824+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:11.826+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:48:11.834+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ac821f4] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:11.922+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1394224993 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:48:11.922+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@243536601 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:48:11.966+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-19T13:48:11.968+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:48:11.922+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@773346263 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:48:11.922+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1378714369 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:48:11.923+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:48:11.966+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-01-19T13:48:11.972+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-01-19T13:48:11.972+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-19T13:48:11.973+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c1c3bce]
2026-01-19T13:48:12.077+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:12.079+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ff3e073] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:12.091+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1423111017 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:12.091+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:12.092+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:11.987+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==> Parameters: 1(Long), 1(Long)
2026-01-19T13:48:11.998+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : ==> Parameters: 1(Long), 1(Long)
2026-01-19T13:48:12.001+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:48:12.185+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:12.218+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ff3e073]
2026-01-19T13:48:12.241+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:12.242+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:48:12.245+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:12.256+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : <==      Total: 12
2026-01-19T13:48:12.307+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cce3617]
2026-01-19T13:48:12.259+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : <==      Total: 12
2026-01-19T13:48:12.308+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19ff4e1]
2026-01-19T13:48:12.310+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:12.312+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-19T13:48:12.260+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 1
2026-01-19T13:48:12.320+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42acb80a]
2026-01-19T13:48:12.325+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:12.264+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 1
2026-01-19T13:48:12.308+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:12.317+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:12.337+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=4, username=test_user3, password=null, (truncated)...]
2026-01-19T13:48:12.337+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ac821f4]
2026-01-19T13:48:12.337+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-19T13:48:12.339+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:12.340+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:12.352+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:12.354+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=4, username=test_user3, password=null, (truncated)...]
2026-01-19T13:48:12.356+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:14.911+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-19T13:48:14.925+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/user
2026-01-19T13:48:14.930+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-19T13:48:14.937+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/user
2026-01-19T13:48:15.004+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-19T13:48:15.006+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-19T13:48:15.012+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-19T13:48:15.017+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-19T13:48:15.122+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/user
2026-01-19T13:48:15.068+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/company
2026-01-19T13:48:15.117+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/user
2026-01-19T13:48:15.123+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/company
2026-01-19T13:48:15.125+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-19T13:48:15.129+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-19T13:48:15.131+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-19T13:48:15.142+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-19T13:48:15.140+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-19T13:48:15.149+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-19T13:48:15.149+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-19T13:48:15.141+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-19T13:48:15.152+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-19T13:48:15.158+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:15.159+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12bba758] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:15.141+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-19T13:48:15.143+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-19T13:48:15.151+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:15.164+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-19T13:48:15.165+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:15.168+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@90566e3] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:15.166+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35620a4f] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:15.167+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:15.220+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@402994729 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:48:15.220+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@171906092 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:15.285+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@372150396 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:48:15.287+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1199403f] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:15.321+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.is_default DESC, uc.created_at DESC
2026-01-19T13:48:15.373+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 2(Long)
2026-01-19T13:48:15.369+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.is_default DESC, uc.created_at DESC
2026-01-19T13:48:15.371+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-19T13:48:15.397+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-19T13:48:15.395+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 2(Long)
2026-01-19T13:48:15.447+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1517320540 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:48:15.515+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-19T13:48:15.516+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-19T13:48:15.614+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.U.findActiveByUserId             : <==      Total: 1
2026-01-19T13:48:15.614+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.U.findActiveByUserId             : <==      Total: 1
2026-01-19T13:48:15.625+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@90566e3]
2026-01-19T13:48:15.626+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12bba758]
2026-01-19T13:48:15.627+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:15.628+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:15.636+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-19T13:48:15.637+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-19T13:48:15.647+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[UserCardDto(cardId=2, userId=2, cardName=개인카 (truncated)...]
2026-01-19T13:48:15.654+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[UserCardDto(cardId=2, userId=2, cardName=개인카 (truncated)...]
2026-01-19T13:48:15.662+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35620a4f]
2026-01-19T13:48:15.665+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1199403f]
2026-01-19T13:48:15.681+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:15.685+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:15.687+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:15.689+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:15.872+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-19T13:48:15.974+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-19T13:48:16.139+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:16.252+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:52.446+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/create
2026-01-19T13:48:52.463+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/expenses/create
2026-01-19T13:48:52.471+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/create
2026-01-19T13:48:52.473+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/expenses/create
2026-01-19T13:48:52.474+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/expenses/create", parameters={}
2026-01-19T13:48:52.480+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#createExpense(ExpenseReportDto)
2026-01-19T13:48:52.506+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ExpenseReportDto(expenseReportId=null, drafterId=2, reportDate=2026-01-19, title=null, totalAmount=1 (truncated)...]
2026-01-19T13:48:52.597+09:00  INFO 4928 --- [http-nio-8080-exec-1] c.i.b.controller.ExpenseController       : 지출결의서 생성 요청 - drafterId: 2, currentUserId: 2, totalAmount: 10000
2026-01-19T13:48:52.616+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:52.620+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ed7f71]
2026-01-19T13:48:52.622+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1681187365 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will be managed by Spring
2026-01-19T13:48:52.624+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-19T13:48:52.633+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-19T13:48:52.647+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-19T13:48:52.650+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ed7f71]
2026-01-19T13:48:52.654+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ed7f71] from current transaction
2026-01-19T13:48:52.656+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.B.findByCompanyAndCategory       : ==>  Preparing: SELECT b.*, COALESCE(( SELECT SUM(COALESCE(ed.actual_paid_amount, ed.amount)) FROM expense_detail_tb ed INNER JOIN expense_report_tb er ON ed.expense_report_id = er.expense_report_id WHERE er.company_id = b.company_id AND YEAR(er.report_date) = b.budget_year AND (b.budget_month IS NULL OR MONTH(er.report_date) = b.budget_month) AND ed.category = b.category AND er.status = 'APPROVED' ), 0) AS used_amount, CASE WHEN b.budget_amount > 0 THEN ROUND((COALESCE(( SELECT SUM(COALESCE(ed.actual_paid_amount, ed.amount)) FROM expense_detail_tb ed INNER JOIN expense_report_tb er ON ed.expense_report_id = er.expense_report_id WHERE er.company_id = b.company_id AND YEAR(er.report_date) = b.budget_year AND (b.budget_month IS NULL OR MONTH(er.report_date) = b.budget_month) AND ed.category = b.category AND er.status = 'APPROVED' ), 0) * 100.0 / b.budget_amount), 2) ELSE 0 END AS usage_rate FROM budget_tb b WHERE b.company_id = ? AND b.budget_year = ? AND (b.budget_month = ? OR (b.budget_month IS NULL AND ? IS NULL)) AND b.category = ?
2026-01-19T13:48:52.667+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.B.findByCompanyAndCategory       : ==> Parameters: 1(Long), 2026(Integer), 1(Integer), 1(Integer), 식비/회식(String)
2026-01-19T13:48:52.707+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.B.findByCompanyAndCategory       : <==      Total: 0
2026-01-19T13:48:52.708+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ed7f71]
2026-01-19T13:48:52.709+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ed7f71] from current transaction
2026-01-19T13:48:52.712+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.B.findByCompanyAndCategory       : ==>  Preparing: SELECT b.*, COALESCE(( SELECT SUM(COALESCE(ed.actual_paid_amount, ed.amount)) FROM expense_detail_tb ed INNER JOIN expense_report_tb er ON ed.expense_report_id = er.expense_report_id WHERE er.company_id = b.company_id AND YEAR(er.report_date) = b.budget_year AND (b.budget_month IS NULL OR MONTH(er.report_date) = b.budget_month) AND ed.category = b.category AND er.status = 'APPROVED' ), 0) AS used_amount, CASE WHEN b.budget_amount > 0 THEN ROUND((COALESCE(( SELECT SUM(COALESCE(ed.actual_paid_amount, ed.amount)) FROM expense_detail_tb ed INNER JOIN expense_report_tb er ON ed.expense_report_id = er.expense_report_id WHERE er.company_id = b.company_id AND YEAR(er.report_date) = b.budget_year AND (b.budget_month IS NULL OR MONTH(er.report_date) = b.budget_month) AND ed.category = b.category AND er.status = 'APPROVED' ), 0) * 100.0 / b.budget_amount), 2) ELSE 0 END AS usage_rate FROM budget_tb b WHERE b.company_id = ? AND b.budget_year = ? AND (b.budget_month = ? OR (b.budget_month IS NULL AND ? IS NULL)) AND b.category = ?
2026-01-19T13:48:52.719+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.B.findByCompanyAndCategory       : ==> Parameters: 1(Long), 2026(Integer), null, null, 식비/회식(String)
2026-01-19T13:48:52.747+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.B.findByCompanyAndCategory       : <==      Total: 0
2026-01-19T13:48:52.747+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ed7f71]
2026-01-19T13:48:52.748+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ed7f71] from current transaction
2026-01-19T13:48:52.749+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.insertExpenseReport            : ==>  Preparing: INSERT INTO expense_report_tb ( drafter_id, report_date, title, total_amount, status, payment_req_date, is_pre_approval, company_id ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-19T13:48:52.750+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.insertExpenseReport            : ==> Parameters: 2(Long), 2026-01-19(LocalDate), 지출결의서 - 2026-01-19(String), 10000(Long), WAIT(String), null, null, 1(Long)
2026-01-19T13:48:52.756+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.insertExpenseReport            : <==    Updates: 1
2026-01-19T13:48:52.759+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ed7f71]
2026-01-19T13:48:52.762+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.backend.service.ExpenseService       : 상세 항목 저장 시작 - 항목 수: 1
2026-01-19T13:48:52.763+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ed7f71] from current transaction
2026-01-19T13:48:52.763+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.insertExpenseDetail            : ==>  Preparing: INSERT INTO expense_detail_tb ( expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, company_id ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-19T13:48:52.765+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.insertExpenseDetail            : ==> Parameters: 59(Long), 식비/회식(String), 상호명1(String), PDF 압축 테스트(String), 10000(Long), null, CASH(String), 2026-01-19(LocalDate), (String), null, (String), 1(Long)
2026-01-19T13:48:52.770+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.insertExpenseDetail            : <==    Updates: 1
2026-01-19T13:48:52.771+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ed7f71]
2026-01-19T13:48:52.772+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.backend.service.ExpenseService       : 상세 항목 저장 완료
2026-01-19T13:48:52.773+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ed7f71] from current transaction
2026-01-19T13:48:52.773+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-19T13:48:52.774+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:48:52.781+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 1
2026-01-19T13:48:52.781+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ed7f71]
2026-01-19T13:48:52.782+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.backend.service.ExpenseService       : 결재 라인은 setApprovalLines API를 통해 별도로 설정됩니다.
2026-01-19T13:48:52.784+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ed7f71] from current transaction
2026-01-19T13:48:52.786+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:48:52.787+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:48:52.791+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:48:52.791+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ed7f71]
2026-01-19T13:48:52.792+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ed7f71] from current transaction
2026-01-19T13:48:52.795+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:48:52.796+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:48:52.799+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:48:52.799+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ed7f71]
2026-01-19T13:48:52.801+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ed7f71] from current transaction
2026-01-19T13:48:52.802+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.A.findActiveByCompanyId          : ==>  Preparing: SELECT * FROM audit_rule_tb WHERE company_id = ? AND is_active = 1 ORDER BY rule_type, rule_name
2026-01-19T13:48:52.803+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.A.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-19T13:48:52.808+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.A.findActiveByCompanyId          : <==      Total: 0
2026-01-19T13:48:52.808+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ed7f71]
2026-01-19T13:48:52.810+09:00  INFO 4928 --- [http-nio-8080-exec-1] c.i.backend.service.ExpenseService       : 지출결의서 생성 완료 - expenseReportId: 59
2026-01-19T13:48:52.811+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ed7f71]
2026-01-19T13:48:52.812+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ed7f71]
2026-01-19T13:48:52.812+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ed7f71]
2026-01-19T13:48:52.823+09:00  INFO 4928 --- [http-nio-8080-exec-1] c.i.b.controller.ExpenseController       : 지출결의서 생성 완료 - expenseId: 59
2026-01-19T13:48:52.823+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:52.824+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=기안서 저장 성공, data=59)]
2026-01-19T13:48:52.825+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:52.836+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/59/approval-lines
2026-01-19T13:48:52.839+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/expenses/59/approval-lines
2026-01-19T13:48:52.845+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/59/approval-lines
2026-01-19T13:48:52.847+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/expenses/59/approval-lines
2026-01-19T13:48:52.847+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : POST "/api/expenses/59/approval-lines", parameters={}
2026-01-19T13:48:52.848+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#setApprovalLines(Long, ApprovalLineRequest)
2026-01-19T13:48:52.851+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ExpenseController.ApprovalLineRequest(approvalLines=[ApprovalLineDto(approvalLineId=null, expenseRep (truncated)...]
2026-01-19T13:48:52.856+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:52.857+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5180f0f9]
2026-01-19T13:48:52.857+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1038061721 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will be managed by Spring
2026-01-19T13:48:52.858+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.insertApprovalLine             : ==>  Preparing: INSERT INTO approval_line_tb ( expense_report_id, approver_id, step_order, status, approval_date, signature_data, rejection_reason, company_id ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-19T13:48:52.860+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.insertApprovalLine             : ==> Parameters: 59(Long), 4(Long), 1(Integer), WAIT(String), null, null, null, 1(Long)
2026-01-19T13:48:52.865+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.insertApprovalLine             : <==    Updates: 1
2026-01-19T13:48:52.865+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5180f0f9]
2026-01-19T13:48:52.867+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.backend.service.ExpenseService       : 결재 라인 저장 완료 - expenseReportId: 59, 라인 수: 1
2026-01-19T13:48:52.867+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5180f0f9]
2026-01-19T13:48:52.868+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5180f0f9]
2026-01-19T13:48:52.868+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5180f0f9]
2026-01-19T13:48:52.873+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:52.873+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재 라인 설정 성공, data=null)]
2026-01-19T13:48:52.879+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:52.895+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/59
2026-01-19T13:48:52.974+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/59
2026-01-19T13:48:52.984+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/59
2026-01-19T13:48:52.985+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/59
2026-01-19T13:48:52.986+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/59", parameters={}
2026-01-19T13:48:52.989+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-19T13:48:52.993+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:52.999+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4882d179] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:53.003+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@965182413 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:53.004+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:48:53.007+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:48:53.021+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:48:53.022+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4882d179]
2026-01-19T13:48:53.022+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:53.022+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@327faf51] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:53.023+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1255018843 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:53.023+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:48:53.025+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:48:53.027+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:48:53.028+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@327faf51]
2026-01-19T13:48:53.034+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:53.034+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2881cee0]
2026-01-19T13:48:53.035+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@600001734 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will be managed by Spring
2026-01-19T13:48:53.036+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:48:53.037+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-19T13:48:53.040+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 39
2026-01-19T13:48:53.041+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2881cee0]
2026-01-19T13:48:53.042+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2881cee0] from current transaction
2026-01-19T13:48:53.044+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:48:53.045+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:48:53.047+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:48:53.048+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2881cee0]
2026-01-19T13:48:53.050+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2881cee0] from current transaction
2026-01-19T13:48:53.051+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:48:53.052+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:48:53.058+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:48:53.063+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2881cee0]
2026-01-19T13:48:53.063+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2881cee0] from current transaction
2026-01-19T13:48:53.064+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:48:53.065+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 98(Long), 1(Long)
2026-01-19T13:48:53.084+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-19T13:48:53.085+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2881cee0]
2026-01-19T13:48:53.085+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2881cee0]
2026-01-19T13:48:53.086+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2881cee0]
2026-01-19T13:48:53.086+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2881cee0]
2026-01-19T13:48:53.094+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:53.097+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ccf6f88] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:53.099+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@272710576 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:53.100+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:48:53.101+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:48:53.104+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:48:53.104+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ccf6f88]
2026-01-19T13:48:53.106+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:53.106+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@97ff216] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:53.107+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@787185566 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:53.108+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:48:53.108+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:48:53.118+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-19T13:48:53.118+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@97ff216]
2026-01-19T13:48:53.119+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:53.119+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69ac0e1f] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:53.120+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@523615870 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:53.120+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:53.120+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:53.124+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:53.124+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69ac0e1f]
2026-01-19T13:48:53.125+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:53.126+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=59, drafterId=2, r (truncated)...]
2026-01-19T13:48:53.133+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:53.155+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/details/98/receipt
2026-01-19T13:48:53.171+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/expenses/details/98/receipt
2026-01-19T13:48:53.191+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/details/98/receipt
2026-01-19T13:48:53.199+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/expenses/details/98/receipt
2026-01-19T13:48:53.200+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/expenses/details/98/receipt", parameters={multipart}
2026-01-19T13:48:53.302+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#uploadReceiptForDetail(Long, MultipartFile, Long)
2026-01-19T13:48:53.303+09:00  INFO 4928 --- [http-nio-8080-exec-9] c.i.b.controller.ExpenseController       : 상세 내역별 영수증 업로드 요청 - expenseDetailId: 98, expenseReportId: 59, userId: 2, filename: 영수증이미지.jpg
2026-01-19T13:48:53.304+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:53.304+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17af8d9c] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:53.304+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1097758517 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:53.304+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:48:53.305+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:48:53.307+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:48:53.307+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17af8d9c]
2026-01-19T13:48:53.308+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:53.308+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@410ba311] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:53.310+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@706938305 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:53.311+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:48:53.312+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:48:53.314+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:48:53.315+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@410ba311]
2026-01-19T13:48:53.318+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:53.318+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e69436b]
2026-01-19T13:48:53.319+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1087993884 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will be managed by Spring
2026-01-19T13:48:53.319+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:48:53.320+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-19T13:48:53.325+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 39
2026-01-19T13:48:53.332+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e69436b]
2026-01-19T13:48:53.332+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e69436b] from current transaction
2026-01-19T13:48:53.333+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:48:53.334+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:48:53.338+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:48:53.339+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e69436b]
2026-01-19T13:48:53.340+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e69436b] from current transaction
2026-01-19T13:48:53.341+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:48:53.343+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:48:53.352+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:48:53.353+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e69436b]
2026-01-19T13:48:53.356+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e69436b] from current transaction
2026-01-19T13:48:53.356+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:48:53.357+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 98(Long), 1(Long)
2026-01-19T13:48:53.380+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-19T13:48:53.382+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e69436b]
2026-01-19T13:48:53.382+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e69436b]
2026-01-19T13:48:53.383+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e69436b]
2026-01-19T13:48:53.384+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e69436b]
2026-01-19T13:48:53.389+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:53.389+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e37a553] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:53.390+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@297915442 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:53.390+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:48:53.391+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:48:53.394+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:48:53.394+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e37a553]
2026-01-19T13:48:53.395+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:53.396+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ecd478a] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:53.396+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2099471933 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:53.399+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:48:53.399+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:48:53.402+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-19T13:48:53.402+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ecd478a]
2026-01-19T13:48:53.404+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:53.404+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4805be26] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:53.405+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@747655611 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:53.405+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:53.405+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:53.411+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:53.411+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4805be26]
2026-01-19T13:48:53.412+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:53.412+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ad7471c] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:53.413+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@793126126 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:53.413+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:48:53.414+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:48:53.417+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:48:53.418+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ad7471c]
2026-01-19T13:48:53.420+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:53.421+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1da6c894]
2026-01-19T13:48:53.421+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@791230400 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will be managed by Spring
2026-01-19T13:48:53.422+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:48:53.423+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-19T13:48:53.430+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 39
2026-01-19T13:48:53.433+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1da6c894]
2026-01-19T13:48:53.434+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1da6c894] from current transaction
2026-01-19T13:48:53.434+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:48:53.435+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:48:53.438+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:48:53.438+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1da6c894]
2026-01-19T13:48:53.440+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1da6c894] from current transaction
2026-01-19T13:48:53.441+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:48:53.442+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:48:53.446+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:48:53.446+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1da6c894]
2026-01-19T13:48:55.515+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1da6c894] from current transaction
2026-01-19T13:48:55.516+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.insertReceipt      : ==>  Preparing: INSERT INTO receipt_tb ( expense_report_id, expense_detail_id, file_path, original_filename, file_size, uploaded_by, uploaded_at, company_id ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-19T13:48:55.519+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.insertReceipt      : ==> Parameters: 59(Long), 98(Long), uploads\receipts\45b7c649-62fd-4166-a86d-9603e02b2565.pdf(String), 영수증이미지.jpg(String), 2611017(Long), 2(Long), null, 1(Long)
2026-01-19T13:48:55.527+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.insertReceipt      : <==    Updates: 1
2026-01-19T13:48:55.532+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1da6c894]
2026-01-19T13:48:55.532+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1da6c894]
2026-01-19T13:48:55.549+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1da6c894]
2026-01-19T13:48:55.550+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1da6c894]
2026-01-19T13:48:55.588+09:00  INFO 4928 --- [http-nio-8080-exec-9] c.i.b.controller.ExpenseController       : 상세 내역별 영수증 업로드 완료 - expenseDetailId: 98
2026-01-19T13:48:55.590+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:55.592+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 업로드 완료, data=null)]
2026-01-19T13:48:55.596+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:57.352+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:48:57.353+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-19T13:48:57.353+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/59
2026-01-19T13:48:57.354+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/59
2026-01-19T13:48:57.355+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-19T13:48:57.369+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:48:57.370+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-19T13:48:57.373+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/59
2026-01-19T13:48:57.388+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:48:57.376+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/59
2026-01-19T13:48:57.385+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-19T13:48:57.389+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/59
2026-01-19T13:48:57.389+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-19T13:48:57.391+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:48:57.395+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/59
2026-01-19T13:48:57.447+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/59
2026-01-19T13:48:57.448+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-19T13:48:57.448+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-19T13:48:57.456+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:48:57.456+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/59
2026-01-19T13:48:57.457+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/59", parameters={}
2026-01-19T13:48:57.457+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-19T13:48:57.464+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-19T13:48:57.464+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:48:57.464+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/59", parameters={}
2026-01-19T13:48:57.465+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-19T13:48:57.465+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-19T13:48:57.471+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:57.466+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-19T13:48:57.469+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:57.470+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-19T13:48:57.471+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-19T13:48:57.471+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@599b85f3] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:57.474+09:00  INFO 4928 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-19T13:48:57.475+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a26cbe7] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:57.476+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:57.481+09:00  INFO 4928 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-19T13:48:57.482+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:57.483+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6db22148] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:57.484+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:57.484+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7989ccbb] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:57.485+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@116432424 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:48:57.485+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1335778694 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:57.488+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63937f6f] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:57.489+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:48:57.489+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1231428168 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:48:57.490+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:48:57.491+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:48:57.492+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:48:57.494+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:48:57.496+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:48:57.500+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@159920630 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:48:57.505+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-19T13:48:57.506+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1820349164 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:48:57.506+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:48:57.506+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:48:57.506+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:48:57.507+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:48:57.507+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-19T13:48:57.507+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6db22148]
2026-01-19T13:48:57.508+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@599b85f3]
2026-01-19T13:48:57.509+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a26cbe7]
2026-01-19T13:48:57.514+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:48:57.515+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:57.516+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:57.517+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:57.522+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54efd928] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:57.524+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@713b62b3] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:57.524+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59fc1d42] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:57.525+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1621758794 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:48:57.528+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@77665464 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:57.529+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1244488140 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:48:57.529+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:48:57.530+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:48:57.531+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:57.533+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:48:57.535+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:48:57.535+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:57.536+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-01-19T13:48:57.536+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-01-19T13:48:57.536+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7989ccbb]
2026-01-19T13:48:57.537+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63937f6f]
2026-01-19T13:48:57.538+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:57.539+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:57.541+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:57.541+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:48:57.586+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54efd928]
2026-01-19T13:48:57.541+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:48:57.588+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@713b62b3]
2026-01-19T13:48:57.542+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59fc1d42]
2026-01-19T13:48:57.595+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:57.596+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:48:57.598+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:57.547+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=3, userId=2, si (truncated)...]
2026-01-19T13:48:57.547+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=3, userId=2, si (truncated)...]
2026-01-19T13:48:57.603+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:57.605+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:57.744+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:57.744+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:57.750+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1be81d83]
2026-01-19T13:48:57.751+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6914c4c0]
2026-01-19T13:48:57.752+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1029967094 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will be managed by Spring
2026-01-19T13:48:57.752+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1930960169 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will be managed by Spring
2026-01-19T13:48:57.752+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:48:57.753+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:48:57.754+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-19T13:48:57.756+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-19T13:48:57.768+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 39
2026-01-19T13:48:57.768+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 39
2026-01-19T13:48:57.771+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6914c4c0]
2026-01-19T13:48:57.772+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1be81d83]
2026-01-19T13:48:57.819+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6914c4c0] from current transaction
2026-01-19T13:48:57.819+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1be81d83] from current transaction
2026-01-19T13:48:57.837+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:48:57.888+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:48:57.909+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:48:57.911+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:48:57.913+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:48:57.913+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:48:57.914+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1be81d83]
2026-01-19T13:48:57.914+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6914c4c0]
2026-01-19T13:48:57.915+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1be81d83] from current transaction
2026-01-19T13:48:57.915+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6914c4c0] from current transaction
2026-01-19T13:48:57.916+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:48:57.916+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:48:57.917+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:48:57.918+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:48:57.921+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:48:57.921+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:48:57.921+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6914c4c0]
2026-01-19T13:48:57.922+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1be81d83]
2026-01-19T13:48:57.923+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6914c4c0] from current transaction
2026-01-19T13:48:57.923+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1be81d83] from current transaction
2026-01-19T13:48:57.924+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:48:57.924+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:48:57.925+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 98(Long), 1(Long)
2026-01-19T13:48:57.925+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 98(Long), 1(Long)
2026-01-19T13:48:57.934+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-19T13:48:57.935+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-19T13:48:57.935+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1be81d83]
2026-01-19T13:48:57.938+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6914c4c0]
2026-01-19T13:48:57.939+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1be81d83]
2026-01-19T13:48:57.939+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6914c4c0]
2026-01-19T13:48:57.940+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1be81d83]
2026-01-19T13:48:57.940+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6914c4c0]
2026-01-19T13:48:57.940+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1be81d83]
2026-01-19T13:48:57.941+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6914c4c0]
2026-01-19T13:48:57.953+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:57.953+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:57.955+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7976d5b9] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:57.955+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67e78655] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:57.956+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1186392803 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:57.957+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@159311506 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:48:57.961+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:48:57.963+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:48:57.964+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:48:57.965+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:48:57.969+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:48:57.969+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:48:57.970+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67e78655]
2026-01-19T13:48:57.970+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7976d5b9]
2026-01-19T13:48:57.971+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:57.972+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:57.972+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f235df2] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:57.973+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ec23d2b] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:57.973+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1949152109 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:48:57.974+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1641475671 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:57.974+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:48:57.974+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:48:57.980+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:48:57.981+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:48:57.987+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-19T13:48:57.987+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-19T13:48:57.990+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f235df2]
2026-01-19T13:48:58.002+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ec23d2b]
2026-01-19T13:48:58.003+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:58.047+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:48:58.047+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f4bda85] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:58.047+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1be72e67] was not registered for synchronization because synchronization is not active
2026-01-19T13:48:58.051+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@819954978 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:48:58.051+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@782117924 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:48:58.051+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:58.054+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:48:58.070+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:58.071+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:48:58.084+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:58.085+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:48:58.089+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1be72e67]
2026-01-19T13:48:58.089+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f4bda85]
2026-01-19T13:48:58.091+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:58.091+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:48:58.094+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=59, drafterId=2, r (truncated)...]
2026-01-19T13:48:58.094+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=59, drafterId=2, r (truncated)...]
2026-01-19T13:48:58.102+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:48:58.106+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:49:03.094+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/receipts/42/download
2026-01-19T13:49:03.098+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/receipts/42/download
2026-01-19T13:49:03.100+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/receipts/42/download
2026-01-19T13:49:03.101+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/receipts/42/download
2026-01-19T13:49:03.102+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/receipts/42/download", parameters={}
2026-01-19T13:49:03.103+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#downloadReceipt(Long)
2026-01-19T13:49:03.104+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:49:03.105+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bd1b2b] was not registered for synchronization because synchronization is not active
2026-01-19T13:49:03.111+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2125783236 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:49:03.111+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectReceiptById  : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.receipt_id = ? AND r.company_id = ?
2026-01-19T13:49:03.113+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectReceiptById  : ==> Parameters: 42(Long), 1(Long)
2026-01-19T13:49:03.115+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectReceiptById  : <==      Total: 1
2026-01-19T13:49:03.115+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bd1b2b]
2026-01-19T13:49:03.115+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:49:03.116+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cec849d] was not registered for synchronization because synchronization is not active
2026-01-19T13:49:03.117+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@631108852 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:49:03.119+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:49:03.120+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:49:03.122+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:49:03.122+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cec849d]
2026-01-19T13:49:03.123+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:49:03.123+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bbad705] was not registered for synchronization because synchronization is not active
2026-01-19T13:49:03.124+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1135243395 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:49:03.125+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:49:03.126+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:49:03.130+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:49:03.133+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bbad705]
2026-01-19T13:49:03.133+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:49:03.134+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4176f9a4] was not registered for synchronization because synchronization is not active
2026-01-19T13:49:03.134+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@213453936 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:49:03.135+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-19T13:49:03.135+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-19T13:49:03.138+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-19T13:49:03.138+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4176f9a4]
2026-01-19T13:49:03.140+09:00  INFO 4928 --- [http-nio-8080-exec-3] SECURITY                                 : FILE_DOWNLOAD userId=2 expenseId=59 detail=영수증이미지.jpg
2026-01-19T13:49:03.142+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Found 'Content-Type:application/pdf' in response
2026-01-19T13:49:03.143+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [file [C:\InnerSignature\backend\uploads\receipts\45b7c649-62fd-4166-a86d-9603e02b2565.pdf]]
2026-01-19T13:49:03.209+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:50:06.961+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/receipts/42/download
2026-01-19T13:50:06.976+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/receipts/42/download
2026-01-19T13:50:06.980+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/receipts/42/download
2026-01-19T13:50:06.981+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/receipts/42/download
2026-01-19T13:50:06.985+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/receipts/42/download", parameters={}
2026-01-19T13:50:06.986+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#downloadReceipt(Long)
2026-01-19T13:50:06.988+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:06.990+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41473180] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:07.008+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1546855785 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:50:07.014+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectReceiptById  : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.receipt_id = ? AND r.company_id = ?
2026-01-19T13:50:07.016+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectReceiptById  : ==> Parameters: 42(Long), 1(Long)
2026-01-19T13:50:07.023+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectReceiptById  : <==      Total: 1
2026-01-19T13:50:07.031+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41473180]
2026-01-19T13:50:07.032+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:07.032+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29295be4] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:07.034+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1935429042 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:50:07.035+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:50:07.036+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:50:07.039+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:50:07.040+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29295be4]
2026-01-19T13:50:07.044+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:07.045+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32c4eae0] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:07.046+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1372680487 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:50:07.047+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:50:07.049+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:50:07.052+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:50:07.053+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32c4eae0]
2026-01-19T13:50:07.053+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:07.054+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ff9667f] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:07.056+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1795100810 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:50:07.061+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-19T13:50:07.065+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-19T13:50:07.070+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-19T13:50:07.070+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ff9667f]
2026-01-19T13:50:07.071+09:00  INFO 4928 --- [http-nio-8080-exec-2] SECURITY                                 : FILE_DOWNLOAD userId=2 expenseId=59 detail=영수증이미지.jpg
2026-01-19T13:50:07.074+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Found 'Content-Type:application/pdf' in response
2026-01-19T13:50:07.082+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [file [C:\InnerSignature\backend\uploads\receipts\45b7c649-62fd-4166-a86d-9603e02b2565.pdf]]
2026-01-19T13:50:07.120+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:50:33.274+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/59?userId=2
2026-01-19T13:50:33.278+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing DELETE /api/expenses/59?userId=2
2026-01-19T13:50:33.280+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/59
2026-01-19T13:50:33.281+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured DELETE /api/expenses/59?userId=2
2026-01-19T13:50:33.281+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : DELETE "/api/expenses/59?userId=2", parameters={masked}
2026-01-19T13:50:33.282+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#deleteExpense(Long)
2026-01-19T13:50:33.283+09:00  INFO 4928 --- [http-nio-8080-exec-3] c.i.b.controller.ExpenseController       : 지출결의서 삭제 요청 - expenseId: 59, userId: 2
2026-01-19T13:50:33.291+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:33.293+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52d20806]
2026-01-19T13:50:33.294+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@108236981 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will be managed by Spring
2026-01-19T13:50:33.294+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:50:33.295+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:50:33.299+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:50:33.299+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52d20806]
2026-01-19T13:50:33.300+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52d20806] from current transaction
2026-01-19T13:50:33.302+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-19T13:50:33.303+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-19T13:50:33.306+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-19T13:50:33.314+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52d20806]
2026-01-19T13:50:33.315+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52d20806] from current transaction
2026-01-19T13:50:33.315+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52d20806]
2026-01-19T13:50:33.315+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52d20806] from current transaction
2026-01-19T13:50:33.316+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52d20806]
2026-01-19T13:50:33.316+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52d20806] from current transaction
2026-01-19T13:50:33.316+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.MonthlyClosingMapper.isClosed    : ==>  Preparing: SELECT COUNT(*) > 0 FROM monthly_closing_tb WHERE company_id = ? AND closing_year = ? AND closing_month = ? AND is_closed = 1
2026-01-19T13:50:33.317+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.MonthlyClosingMapper.isClosed    : ==> Parameters: 1(Long), 2026(Integer), 1(Integer)
2026-01-19T13:50:33.321+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.MonthlyClosingMapper.isClosed    : <==      Total: 1
2026-01-19T13:50:33.321+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52d20806]
2026-01-19T13:50:33.323+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52d20806] from current transaction
2026-01-19T13:50:33.327+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.deleteExpenseReport            : ==>  Preparing: DELETE FROM expense_report_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:50:33.329+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.deleteExpenseReport            : ==> Parameters: 59(Long), 1(Long)
2026-01-19T13:50:33.334+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.deleteExpenseReport            : <==    Updates: 1
2026-01-19T13:50:33.334+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52d20806]
2026-01-19T13:50:33.335+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52d20806]
2026-01-19T13:50:33.335+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52d20806]
2026-01-19T13:50:33.336+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52d20806]
2026-01-19T13:50:33.345+09:00  INFO 4928 --- [http-nio-8080-exec-3] c.i.b.controller.ExpenseController       : 지출결의서 삭제 완료 - expenseId: 59
2026-01-19T13:50:33.346+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:50:33.348+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 삭제 완료, data=null)]
2026-01-19T13:50:33.349+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:50:34.378+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:50:34.381+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-19T13:50:34.383+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:50:34.391+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-19T13:50:34.384+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-19T13:50:34.394+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:50:34.384+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:50:34.384+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-19T13:50:34.400+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-19T13:50:34.389+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:50:34.398+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:50:34.447+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-19T13:50:34.405+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-19T13:50:34.405+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:50:34.412+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-19T13:50:34.437+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:50:34.450+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:50:34.451+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-19T13:50:34.454+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-19T13:50:34.456+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:50:34.456+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-19T13:50:34.467+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:50:34.467+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:50:34.468+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-19T13:50:34.469+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-19T13:50:34.469+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:50:34.469+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-19T13:50:34.471+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:50:34.471+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:50:34.472+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-19T13:50:34.472+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-19T13:50:34.472+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:50:34.484+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-19T13:50:34.484+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:50:34.484+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:50:34.485+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-19T13:50:34.485+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-19T13:50:34.486+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:50:34.487+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:50:34.487+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.488+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.488+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.489+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.495+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.495+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.495+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a901287] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.496+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ec9468c] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.496+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36fdb25e] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.496+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3be6803d] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.496+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2268040c] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.496+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71e6324a] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.500+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@181572407 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:50:34.502+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@780799063 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:50:34.502+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1585844981 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:50:34.503+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1593976064 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:50:34.503+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:50:34.504+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:50:34.504+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@830777216 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:50:34.505+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@217073477 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:50:34.505+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:50:34.506+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:50:34.506+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:50:34.510+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:50:34.511+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:50:34.511+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:50:34.513+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:50:34.515+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:50:34.519+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:50:34.521+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-19T13:50:34.524+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:50:34.527+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:50:34.531+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36fdb25e]
2026-01-19T13:50:34.531+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a901287]
2026-01-19T13:50:34.531+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:50:34.532+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-19T13:50:34.533+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.535+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.535+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ec9468c]
2026-01-19T13:50:34.536+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:50:34.536+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:50:34.536+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3be6803d]
2026-01-19T13:50:34.537+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22e73493] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.537+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30a68b7e] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.538+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.538+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2268040c]
2026-01-19T13:50:34.539+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71e6324a]
2026-01-19T13:50:34.539+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.539+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@996428203 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:50:34.543+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2142093875 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:50:34.544+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b2ebd06] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.544+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.544+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.545+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4326d631] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.546+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:50:34.547+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:50:34.547+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1319076007 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:50:34.548+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@781b1b5c] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.548+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71ea99c5] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.548+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1473091818 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:50:34.549+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:50:34.549+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:50:34.549+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:50:34.550+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@254053476 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:50:34.557+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:50:34.551+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@664543593 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:50:34.551+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:50:34.555+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:50:34.556+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:50:34.556+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:50:34.559+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:50:34.562+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:50:34.563+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:50:34.564+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22e73493]
2026-01-19T13:50:34.564+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30a68b7e]
2026-01-19T13:50:34.568+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.566+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:50:34.567+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.567+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:50:34.567+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:50:34.569+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e1bbb51] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.569+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:50:34.570+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24f5d281] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.571+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b2ebd06]
2026-01-19T13:50:34.571+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@781b1b5c]
2026-01-19T13:50:34.571+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:50:34.572+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@979511959 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:50:34.572+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4326d631]
2026-01-19T13:50:34.573+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1068312864 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:50:34.575+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:50:34.575+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:50:34.579+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:50:34.576+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71ea99c5]
2026-01-19T13:50:34.576+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-19T13:50:34.577+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.578+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:50:34.579+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:50:34.580+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:50:34.580+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:50:34.584+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27de6f46] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.584+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-19T13:50:34.584+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-19T13:50:34.585+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:50:34.587+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-19T13:50:34.594+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:50:34.595+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1379709650 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:50:34.616+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:50:34.606+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:50:34.613+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-19T13:50:34.621+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-19T13:50:34.613+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:50:34.618+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-19T13:50:34.621+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:50:34.627+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-19T13:50:34.649+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-19T13:50:34.630+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:50:34.637+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:50:34.643+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-19T13:50:34.645+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 21
2026-01-19T13:50:34.655+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.660+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-19T13:50:34.660+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:50:34.661+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:50:34.662+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24f5d281]
2026-01-19T13:50:34.662+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e1bbb51]
2026-01-19T13:50:34.662+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63271b9a] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.663+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27de6f46]
2026-01-19T13:50:34.663+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:50:34.664+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:50:34.664+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.665+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.666+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@438335875 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:50:34.667+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.667+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:50:34.668+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73ab43aa] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.668+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.668+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ffda56c] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.669+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:50:34.669+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c989a8d] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.669+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:50:34.670+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2042685060 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:50:34.670+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3564a488] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.672+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1818187505 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:50:34.672+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:50:34.674+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1751676423 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:50:34.675+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.675+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:50:34.677+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@11263657 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:50:34.677+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:50:34.678+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:50:34.678+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41c16f28] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.679+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:50:34.680+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:50:34.681+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:50:34.681+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:50:34.683+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:50:34.684+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2020502623 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:50:34.690+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:50:34.694+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63271b9a]
2026-01-19T13:50:34.696+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:50:34.696+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:50:34.697+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:50:34.699+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:50:34.699+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.702+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ffda56c]
2026-01-19T13:50:34.702+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:50:34.702+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73ab43aa]
2026-01-19T13:50:34.702+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:50:34.703+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c989a8d]
2026-01-19T13:50:34.703+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@486e3564] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.707+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@332270648 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:50:34.703+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.704+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:50:34.705+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3564a488]
2026-01-19T13:50:34.705+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:50:34.708+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:50:34.710+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12853e7e] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.710+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:50:34.710+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-19T13:50:34.710+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.711+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-19T13:50:34.711+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:50:34.712+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41c16f28]
2026-01-19T13:50:34.712+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1890660231 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:50:34.712+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:50:34.713+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4709f4c2] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.715+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:50:34.718+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.718+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:50:34.726+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1473857615 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:50:34.727+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:50:34.732+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64c49082] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.734+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-19T13:50:34.734+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:50:34.734+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@486e3564]
2026-01-19T13:50:34.735+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@783682333 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:50:34.735+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:50:34.736+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.737+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:50:34.739+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c9c1344] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.739+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 26
2026-01-19T13:50:34.740+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:50:34.742+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:50:34.742+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@895533734 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:50:34.742+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12853e7e]
2026-01-19T13:50:34.743+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4709f4c2]
2026-01-19T13:50:34.743+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-19T13:50:34.745+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.746+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:50:34.748+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-19T13:50:34.748+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3626b51f] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.748+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:50:34.749+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:50:34.749+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@225119083 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:50:34.749+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64c49082]
2026-01-19T13:50:34.752+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-19T13:50:34.752+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:50:34.754+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:50:34.761+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-19T13:50:34.762+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 21
2026-01-19T13:50:34.766+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:50:34.771+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c9c1344]
2026-01-19T13:50:34.772+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:50:34.781+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.790+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c9013] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.794+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1823909231 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:50:34.795+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 21
2026-01-19T13:50:34.796+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:50:34.797+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3626b51f]
2026-01-19T13:50:34.797+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:50:34.798+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.798+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a33db84] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.799+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1774065040 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:50:34.804+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:50:34.804+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:50:34.805+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:50:34.806+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c9013]
2026-01-19T13:50:34.816+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.817+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:50:34.817+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c50e0fa] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.818+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a33db84]
2026-01-19T13:50:34.819+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@141044075 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:50:34.819+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.819+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:50:34.821+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@360c4132] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.822+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-19T13:50:34.823+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1108820876 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:50:34.829+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:50:34.831+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-19T13:50:34.833+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 26
2026-01-19T13:50:34.834+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c50e0fa]
2026-01-19T13:50:34.834+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 26
2026-01-19T13:50:34.836+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.836+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@360c4132]
2026-01-19T13:50:34.836+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fff381b] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.836+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.837+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1690525230 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:50:34.837+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c7c53a4] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.837+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-19T13:50:34.837+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1756201160 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:50:34.839+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:50:34.839+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-19T13:50:34.839+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:50:34.850+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 21
2026-01-19T13:50:34.850+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:50:34.851+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fff381b]
2026-01-19T13:50:34.852+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c7c53a4]
2026-01-19T13:50:34.852+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.853+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:50:34.853+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f712705] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.854+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-19T13:50:34.854+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1773730576 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:50:34.855+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:50:34.855+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:50:34.855+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:50:34.872+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:50:34.880+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f712705]
2026-01-19T13:50:34.881+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.881+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@723d2415] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.883+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1692564568 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:50:34.884+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:50:34.885+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-19T13:50:34.895+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 26
2026-01-19T13:50:34.896+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@723d2415]
2026-01-19T13:50:34.898+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:50:34.899+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ab9851f] was not registered for synchronization because synchronization is not active
2026-01-19T13:50:34.899+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1639914449 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:50:34.900+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:50:34.901+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:50:34.903+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:50:34.903+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ab9851f]
2026-01-19T13:50:34.905+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:50:34.908+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-19T13:50:34.911+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:53:27.330+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:53:27.333+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-01-19T13:53:27.340+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/2/approvers/active
2026-01-19T13:53:27.340+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-01-19T13:53:27.342+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/2/approvers/active
2026-01-19T13:53:27.349+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:53:27.350+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/2/approvers/active
2026-01-19T13:53:27.355+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:53:27.350+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-01-19T13:53:27.353+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/2/approvers/active
2026-01-19T13:53:27.362+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expense-categories/merged
2026-01-19T13:53:27.365+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/2/approvers/active
2026-01-19T13:53:27.354+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-01-19T13:53:27.357+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/2/approvers/active
2026-01-19T13:53:27.366+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/2/approvers/active
2026-01-19T13:53:27.358+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:53:27.365+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-01-19T13:53:27.365+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/2/approvers/active
2026-01-19T13:53:27.368+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expense-categories/merged
2026-01-19T13:53:27.375+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/2/approvers/active", parameters={}
2026-01-19T13:53:27.380+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:53:27.382+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-01-19T13:53:27.382+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/2/approvers/active", parameters={}
2026-01-19T13:53:27.383+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-01-19T13:53:27.393+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-01-19T13:53:27.384+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getActiveApprovers(Long)
2026-01-19T13:53:27.384+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:53:27.385+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-01-19T13:53:27.390+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getActiveApprovers(Long)
2026-01-19T13:53:27.394+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-01-19T13:53:27.395+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-19T13:53:27.395+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:27.395+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-19T13:53:27.400+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-19T13:53:27.403+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:27.412+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@809a790] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:27.396+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-19T13:53:27.396+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-19T13:53:27.397+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-19T13:53:27.399+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cfbd7c1] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:27.413+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-19T13:53:27.414+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-19T13:53:27.416+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:27.462+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@50623203 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:53:27.483+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-01-19T13:53:27.478+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:27.481+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:27.482+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1525460581 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:53:27.483+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6112615a] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:27.493+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d2ff261] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:27.493+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==> Parameters: 1(Long), 1(Long)
2026-01-19T13:53:27.494+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c8dbcf4] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:27.494+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:53:27.500+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:53:27.501+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@241751377 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:53:27.501+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@906486658 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:53:27.507+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-19T13:53:27.508+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-19T13:53:27.510+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:53:27.511+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:53:27.512+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@266195744 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:53:27.512+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : <==      Total: 12
2026-01-19T13:53:27.514+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-01-19T13:53:27.515+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@809a790]
2026-01-19T13:53:27.518+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : ==> Parameters: 1(Long), 1(Long)
2026-01-19T13:53:27.518+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:53:27.518+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 1
2026-01-19T13:53:27.531+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:53:27.532+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-19T13:53:27.533+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d2ff261]
2026-01-19T13:53:27.533+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cfbd7c1]
2026-01-19T13:53:27.541+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:53:27.542+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:53:27.549+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=4, username=test_user3, password=null, (truncated)...]
2026-01-19T13:53:27.550+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:53:27.544+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:27.571+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@204b730c] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:27.573+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1146090446 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:53:27.576+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:53:27.578+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:53:27.609+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 1
2026-01-19T13:53:27.618+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6112615a]
2026-01-19T13:53:27.621+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:53:27.623+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=4, username=test_user3, password=null, (truncated)...]
2026-01-19T13:53:27.625+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:53:27.626+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:53:27.631+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@204b730c]
2026-01-19T13:53:27.646+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:53:27.648+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : <==      Total: 12
2026-01-19T13:53:27.659+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:53:27.660+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c8dbcf4]
2026-01-19T13:53:27.661+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:53:27.662+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:53:27.675+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-19T13:53:27.677+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:53:28.916+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-19T13:53:28.918+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/user
2026-01-19T13:53:28.918+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-19T13:53:28.919+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/user
2026-01-19T13:53:28.934+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-19T13:53:28.965+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/company
2026-01-19T13:53:28.939+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-19T13:53:28.942+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-19T13:53:28.944+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-19T13:53:28.967+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-19T13:53:28.971+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/user
2026-01-19T13:53:28.972+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/company
2026-01-19T13:53:28.975+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/user
2026-01-19T13:53:28.975+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-19T13:53:28.977+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-19T13:53:28.977+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-19T13:53:28.978+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-19T13:53:28.979+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-19T13:53:28.994+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-19T13:53:28.995+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-19T13:53:28.995+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-19T13:53:28.996+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:28.998+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14299c24] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:28.996+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-19T13:53:28.997+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-19T13:53:28.997+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-19T13:53:28.999+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:29.008+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19365ca1] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:28.999+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:29.016+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cec4410] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:29.001+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:29.008+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1219098725 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:53:29.034+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a84969d] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:29.035+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-19T13:53:29.046+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-19T13:53:29.048+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1807744467 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:53:29.048+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1432391102 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:53:29.050+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1442537760 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:53:29.051+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-19T13:53:29.057+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.is_default DESC, uc.created_at DESC
2026-01-19T13:53:29.058+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.is_default DESC, uc.created_at DESC
2026-01-19T13:53:29.061+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-19T13:53:29.062+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 2(Long)
2026-01-19T13:53:29.063+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 2(Long)
2026-01-19T13:53:29.066+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-19T13:53:29.068+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14299c24]
2026-01-19T13:53:29.068+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.U.findActiveByUserId             : <==      Total: 1
2026-01-19T13:53:29.069+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-19T13:53:29.072+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.U.findActiveByUserId             : <==      Total: 1
2026-01-19T13:53:29.075+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:53:29.075+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19365ca1]
2026-01-19T13:53:29.075+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cec4410]
2026-01-19T13:53:29.076+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a84969d]
2026-01-19T13:53:29.076+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-19T13:53:29.077+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:53:29.078+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:53:29.079+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:53:29.080+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:53:29.083+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[UserCardDto(cardId=2, userId=2, cardName=개인카 (truncated)...]
2026-01-19T13:53:29.081+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[UserCardDto(cardId=2, userId=2, cardName=개인카 (truncated)...]
2026-01-19T13:53:29.081+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-19T13:53:29.084+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:53:29.094+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:53:29.097+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:53:46.258+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/create
2026-01-19T13:53:46.262+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/expenses/create
2026-01-19T13:53:46.264+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/create
2026-01-19T13:53:46.265+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/expenses/create
2026-01-19T13:53:46.266+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/expenses/create", parameters={}
2026-01-19T13:53:46.267+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#createExpense(ExpenseReportDto)
2026-01-19T13:53:46.276+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ExpenseReportDto(expenseReportId=null, drafterId=2, reportDate=2026-01-19, title=null, totalAmount=1 (truncated)...]
2026-01-19T13:53:46.278+09:00  INFO 4928 --- [http-nio-8080-exec-4] c.i.b.controller.ExpenseController       : 지출결의서 생성 요청 - drafterId: 2, currentUserId: 2, totalAmount: 10000
2026-01-19T13:53:46.293+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:46.294+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b82e913]
2026-01-19T13:53:46.295+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@608117608 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will be managed by Spring
2026-01-19T13:53:46.296+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-19T13:53:46.309+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-19T13:53:46.314+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-19T13:53:46.315+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b82e913]
2026-01-19T13:53:46.316+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b82e913] from current transaction
2026-01-19T13:53:46.317+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.B.findByCompanyAndCategory       : ==>  Preparing: SELECT b.*, COALESCE(( SELECT SUM(COALESCE(ed.actual_paid_amount, ed.amount)) FROM expense_detail_tb ed INNER JOIN expense_report_tb er ON ed.expense_report_id = er.expense_report_id WHERE er.company_id = b.company_id AND YEAR(er.report_date) = b.budget_year AND (b.budget_month IS NULL OR MONTH(er.report_date) = b.budget_month) AND ed.category = b.category AND er.status = 'APPROVED' ), 0) AS used_amount, CASE WHEN b.budget_amount > 0 THEN ROUND((COALESCE(( SELECT SUM(COALESCE(ed.actual_paid_amount, ed.amount)) FROM expense_detail_tb ed INNER JOIN expense_report_tb er ON ed.expense_report_id = er.expense_report_id WHERE er.company_id = b.company_id AND YEAR(er.report_date) = b.budget_year AND (b.budget_month IS NULL OR MONTH(er.report_date) = b.budget_month) AND ed.category = b.category AND er.status = 'APPROVED' ), 0) * 100.0 / b.budget_amount), 2) ELSE 0 END AS usage_rate FROM budget_tb b WHERE b.company_id = ? AND b.budget_year = ? AND (b.budget_month = ? OR (b.budget_month IS NULL AND ? IS NULL)) AND b.category = ?
2026-01-19T13:53:46.324+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.B.findByCompanyAndCategory       : ==> Parameters: 1(Long), 2026(Integer), 1(Integer), 1(Integer), 식비/회식(String)
2026-01-19T13:53:46.329+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.B.findByCompanyAndCategory       : <==      Total: 0
2026-01-19T13:53:46.333+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b82e913]
2026-01-19T13:53:46.333+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b82e913] from current transaction
2026-01-19T13:53:46.335+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.B.findByCompanyAndCategory       : ==>  Preparing: SELECT b.*, COALESCE(( SELECT SUM(COALESCE(ed.actual_paid_amount, ed.amount)) FROM expense_detail_tb ed INNER JOIN expense_report_tb er ON ed.expense_report_id = er.expense_report_id WHERE er.company_id = b.company_id AND YEAR(er.report_date) = b.budget_year AND (b.budget_month IS NULL OR MONTH(er.report_date) = b.budget_month) AND ed.category = b.category AND er.status = 'APPROVED' ), 0) AS used_amount, CASE WHEN b.budget_amount > 0 THEN ROUND((COALESCE(( SELECT SUM(COALESCE(ed.actual_paid_amount, ed.amount)) FROM expense_detail_tb ed INNER JOIN expense_report_tb er ON ed.expense_report_id = er.expense_report_id WHERE er.company_id = b.company_id AND YEAR(er.report_date) = b.budget_year AND (b.budget_month IS NULL OR MONTH(er.report_date) = b.budget_month) AND ed.category = b.category AND er.status = 'APPROVED' ), 0) * 100.0 / b.budget_amount), 2) ELSE 0 END AS usage_rate FROM budget_tb b WHERE b.company_id = ? AND b.budget_year = ? AND (b.budget_month = ? OR (b.budget_month IS NULL AND ? IS NULL)) AND b.category = ?
2026-01-19T13:53:46.342+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.B.findByCompanyAndCategory       : ==> Parameters: 1(Long), 2026(Integer), null, null, 식비/회식(String)
2026-01-19T13:53:46.344+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.B.findByCompanyAndCategory       : <==      Total: 0
2026-01-19T13:53:46.347+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b82e913]
2026-01-19T13:53:46.348+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b82e913] from current transaction
2026-01-19T13:53:46.349+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.insertExpenseReport            : ==>  Preparing: INSERT INTO expense_report_tb ( drafter_id, report_date, title, total_amount, status, payment_req_date, is_pre_approval, company_id ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-19T13:53:46.349+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.insertExpenseReport            : ==> Parameters: 2(Long), 2026-01-19(LocalDate), 지출결의서 - 2026-01-19(String), 10000(Long), WAIT(String), null, null, 1(Long)
2026-01-19T13:53:46.354+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.insertExpenseReport            : <==    Updates: 1
2026-01-19T13:53:46.355+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b82e913]
2026-01-19T13:53:46.356+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.backend.service.ExpenseService       : 상세 항목 저장 시작 - 항목 수: 1
2026-01-19T13:53:46.356+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b82e913] from current transaction
2026-01-19T13:53:46.356+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.insertExpenseDetail            : ==>  Preparing: INSERT INTO expense_detail_tb ( expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, company_id ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-19T13:53:46.358+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.insertExpenseDetail            : ==> Parameters: 60(Long), 식비/회식(String), 상호명1(String), PDF 압축 테스트(String), 10000(Long), null, CASH(String), 2026-01-19(LocalDate), (String), null, (String), 1(Long)
2026-01-19T13:53:46.361+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.insertExpenseDetail            : <==    Updates: 1
2026-01-19T13:53:46.361+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b82e913]
2026-01-19T13:53:46.362+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.backend.service.ExpenseService       : 상세 항목 저장 완료
2026-01-19T13:53:46.365+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b82e913] from current transaction
2026-01-19T13:53:46.365+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-19T13:53:46.366+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:53:46.417+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 1
2026-01-19T13:53:46.461+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b82e913]
2026-01-19T13:53:46.480+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.backend.service.ExpenseService       : 결재 라인은 setApprovalLines API를 통해 별도로 설정됩니다.
2026-01-19T13:53:46.485+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b82e913] from current transaction
2026-01-19T13:53:46.512+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:53:46.515+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:53:46.529+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:53:46.530+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b82e913]
2026-01-19T13:53:46.532+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b82e913] from current transaction
2026-01-19T13:53:46.535+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:53:46.540+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:53:46.546+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:53:46.548+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b82e913]
2026-01-19T13:53:46.549+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b82e913] from current transaction
2026-01-19T13:53:46.550+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.A.findActiveByCompanyId          : ==>  Preparing: SELECT * FROM audit_rule_tb WHERE company_id = ? AND is_active = 1 ORDER BY rule_type, rule_name
2026-01-19T13:53:46.551+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.A.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-19T13:53:46.556+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.A.findActiveByCompanyId          : <==      Total: 0
2026-01-19T13:53:46.556+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b82e913]
2026-01-19T13:53:46.557+09:00  INFO 4928 --- [http-nio-8080-exec-4] c.i.backend.service.ExpenseService       : 지출결의서 생성 완료 - expenseReportId: 60
2026-01-19T13:53:46.558+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b82e913]
2026-01-19T13:53:46.558+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b82e913]
2026-01-19T13:53:46.558+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b82e913]
2026-01-19T13:53:46.581+09:00  INFO 4928 --- [http-nio-8080-exec-4] c.i.b.controller.ExpenseController       : 지출결의서 생성 완료 - expenseId: 60
2026-01-19T13:53:46.585+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:53:46.587+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=기안서 저장 성공, data=60)]
2026-01-19T13:53:46.590+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:53:46.607+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/60/approval-lines
2026-01-19T13:53:46.612+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/expenses/60/approval-lines
2026-01-19T13:53:46.620+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/60/approval-lines
2026-01-19T13:53:46.624+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/expenses/60/approval-lines
2026-01-19T13:53:46.626+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : POST "/api/expenses/60/approval-lines", parameters={}
2026-01-19T13:53:46.629+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#setApprovalLines(Long, ApprovalLineRequest)
2026-01-19T13:53:46.631+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ExpenseController.ApprovalLineRequest(approvalLines=[ApprovalLineDto(approvalLineId=null, expenseRep (truncated)...]
2026-01-19T13:53:46.651+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:46.659+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5eea984f]
2026-01-19T13:53:46.660+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1773310441 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will be managed by Spring
2026-01-19T13:53:46.671+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.insertApprovalLine             : ==>  Preparing: INSERT INTO approval_line_tb ( expense_report_id, approver_id, step_order, status, approval_date, signature_data, rejection_reason, company_id ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-19T13:53:46.675+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.insertApprovalLine             : ==> Parameters: 60(Long), 4(Long), 1(Integer), WAIT(String), null, null, null, 1(Long)
2026-01-19T13:53:46.708+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.insertApprovalLine             : <==    Updates: 1
2026-01-19T13:53:46.711+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5eea984f]
2026-01-19T13:53:46.712+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.backend.service.ExpenseService       : 결재 라인 저장 완료 - expenseReportId: 60, 라인 수: 1
2026-01-19T13:53:46.712+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5eea984f]
2026-01-19T13:53:46.714+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5eea984f]
2026-01-19T13:53:46.715+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5eea984f]
2026-01-19T13:53:46.730+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:53:46.732+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재 라인 설정 성공, data=null)]
2026-01-19T13:53:46.735+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:53:46.750+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/60
2026-01-19T13:53:46.817+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/60
2026-01-19T13:53:46.831+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/60
2026-01-19T13:53:46.866+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/60
2026-01-19T13:53:46.932+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/60", parameters={}
2026-01-19T13:53:46.966+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-19T13:53:46.972+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:46.972+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d99d926] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:46.975+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2005482302 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:53:46.976+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:53:46.977+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:53:46.981+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:53:46.981+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d99d926]
2026-01-19T13:53:46.984+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:46.985+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@712a4e04] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:46.986+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@809486909 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:53:46.988+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:53:46.989+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:53:47.006+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:53:47.011+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@712a4e04]
2026-01-19T13:53:47.015+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:47.016+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53b9c6b8]
2026-01-19T13:53:47.020+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1054915234 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will be managed by Spring
2026-01-19T13:53:47.021+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:53:47.023+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-19T13:53:47.033+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 39
2026-01-19T13:53:47.051+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53b9c6b8]
2026-01-19T13:53:47.051+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53b9c6b8] from current transaction
2026-01-19T13:53:47.055+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:53:47.061+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:53:47.079+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:53:47.083+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53b9c6b8]
2026-01-19T13:53:47.094+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53b9c6b8] from current transaction
2026-01-19T13:53:47.095+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:53:47.117+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:53:47.145+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:53:47.146+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53b9c6b8]
2026-01-19T13:53:47.148+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53b9c6b8] from current transaction
2026-01-19T13:53:47.149+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:53:47.150+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 99(Long), 1(Long)
2026-01-19T13:53:47.162+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-19T13:53:47.163+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53b9c6b8]
2026-01-19T13:53:47.164+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53b9c6b8]
2026-01-19T13:53:47.165+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53b9c6b8]
2026-01-19T13:53:47.166+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53b9c6b8]
2026-01-19T13:53:47.178+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:47.178+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72ec1023] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:47.179+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2005893169 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:53:47.179+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:53:47.180+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:53:47.183+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:53:47.183+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72ec1023]
2026-01-19T13:53:47.184+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:47.187+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60eb8a72] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:47.191+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1922364228 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:53:47.192+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:53:47.193+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:53:47.195+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-19T13:53:47.196+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60eb8a72]
2026-01-19T13:53:47.197+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:47.198+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5174cc33] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:47.199+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1836082293 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:53:47.199+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:53:47.200+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:53:47.206+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:53:47.207+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5174cc33]
2026-01-19T13:53:47.208+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:53:47.209+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=60, drafterId=2, r (truncated)...]
2026-01-19T13:53:47.211+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:53:47.225+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/details/99/receipt
2026-01-19T13:53:47.231+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/expenses/details/99/receipt
2026-01-19T13:53:47.247+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/details/99/receipt
2026-01-19T13:53:47.272+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/expenses/details/99/receipt
2026-01-19T13:53:47.329+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/expenses/details/99/receipt", parameters={multipart}
2026-01-19T13:53:47.433+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#uploadReceiptForDetail(Long, MultipartFile, Long)
2026-01-19T13:53:47.433+09:00  INFO 4928 --- [http-nio-8080-exec-1] c.i.b.controller.ExpenseController       : 상세 내역별 영수증 업로드 요청 - expenseDetailId: 99, expenseReportId: 60, userId: 2, filename: 영수증이미지.jpg
2026-01-19T13:53:47.434+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:47.434+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72f15be2] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:47.439+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1818416912 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:53:47.439+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:53:47.443+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:53:47.452+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:53:47.463+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72f15be2]
2026-01-19T13:53:47.465+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:47.466+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40fbb322] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:47.468+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1354087799 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:53:47.473+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:53:47.475+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:53:47.480+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:53:47.481+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40fbb322]
2026-01-19T13:53:47.491+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:47.494+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ce2bfdb]
2026-01-19T13:53:47.496+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@482223751 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will be managed by Spring
2026-01-19T13:53:47.496+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:53:47.497+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-19T13:53:47.500+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 39
2026-01-19T13:53:47.509+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ce2bfdb]
2026-01-19T13:53:47.510+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ce2bfdb] from current transaction
2026-01-19T13:53:47.511+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:53:47.512+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:53:47.516+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:53:47.517+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ce2bfdb]
2026-01-19T13:53:47.517+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ce2bfdb] from current transaction
2026-01-19T13:53:47.518+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:53:47.524+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:53:47.528+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:53:47.529+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ce2bfdb]
2026-01-19T13:53:47.530+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ce2bfdb] from current transaction
2026-01-19T13:53:47.531+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:53:47.532+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 99(Long), 1(Long)
2026-01-19T13:53:47.535+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-19T13:53:47.544+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ce2bfdb]
2026-01-19T13:53:47.544+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ce2bfdb]
2026-01-19T13:53:47.545+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ce2bfdb]
2026-01-19T13:53:47.545+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ce2bfdb]
2026-01-19T13:53:47.552+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:47.557+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4102fdbb] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:47.557+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1393002783 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:53:47.558+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:53:47.558+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:53:47.560+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:53:47.561+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4102fdbb]
2026-01-19T13:53:47.563+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:47.563+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e9ef10] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:47.564+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1414542803 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:53:47.564+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:53:47.565+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:53:47.567+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-19T13:53:47.567+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e9ef10]
2026-01-19T13:53:47.568+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:47.572+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51e19d78] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:47.574+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@482175291 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:53:47.574+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:53:47.574+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:53:47.576+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:53:47.576+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51e19d78]
2026-01-19T13:53:47.577+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:47.577+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72d4e06e] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:47.579+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@797161745 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:53:47.579+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:53:47.579+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:53:47.582+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:53:47.582+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72d4e06e]
2026-01-19T13:53:47.585+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:47.590+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20201300]
2026-01-19T13:53:47.591+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1197159550 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will be managed by Spring
2026-01-19T13:53:47.591+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:53:47.593+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-19T13:53:47.597+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 39
2026-01-19T13:53:47.598+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20201300]
2026-01-19T13:53:47.599+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20201300] from current transaction
2026-01-19T13:53:47.600+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:53:47.600+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:53:47.605+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:53:47.606+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20201300]
2026-01-19T13:53:47.606+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20201300] from current transaction
2026-01-19T13:53:47.607+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:53:47.609+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:53:47.612+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:53:47.612+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20201300]
2026-01-19T13:53:49.470+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20201300] from current transaction
2026-01-19T13:53:49.470+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.insertReceipt      : ==>  Preparing: INSERT INTO receipt_tb ( expense_report_id, expense_detail_id, file_path, original_filename, file_size, uploaded_by, uploaded_at, company_id ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-19T13:53:49.471+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.insertReceipt      : ==> Parameters: 60(Long), 99(Long), uploads\receipts\c56fd3c5-4d38-4fec-8759-08d9d5e138d1.pdf(String), 영수증이미지.jpg(String), 2611017(Long), 2(Long), null, 1(Long)
2026-01-19T13:53:49.474+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.insertReceipt      : <==    Updates: 1
2026-01-19T13:53:49.474+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20201300]
2026-01-19T13:53:49.474+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20201300]
2026-01-19T13:53:49.475+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20201300]
2026-01-19T13:53:49.475+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20201300]
2026-01-19T13:53:49.481+09:00  INFO 4928 --- [http-nio-8080-exec-1] c.i.b.controller.ExpenseController       : 상세 내역별 영수증 업로드 완료 - expenseDetailId: 99
2026-01-19T13:53:49.481+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:53:49.482+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 업로드 완료, data=null)]
2026-01-19T13:53:49.487+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:53:50.608+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:53:50.608+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/60
2026-01-19T13:53:50.612+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-19T13:53:50.611+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-19T13:53:50.611+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/60
2026-01-19T13:53:50.616+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:53:50.620+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/60
2026-01-19T13:53:50.622+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-19T13:53:50.623+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-19T13:53:50.625+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:53:50.626+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/60
2026-01-19T13:53:50.629+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-19T13:53:50.629+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-19T13:53:50.629+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:53:50.630+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/60
2026-01-19T13:53:50.630+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-19T13:53:50.633+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-19T13:53:50.630+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-19T13:53:50.640+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-19T13:53:50.631+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:53:50.631+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/60", parameters={}
2026-01-19T13:53:50.634+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/60
2026-01-19T13:53:50.639+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-19T13:53:50.646+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/60
2026-01-19T13:53:50.641+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-19T13:53:50.642+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:53:50.644+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-19T13:53:50.647+09:00  INFO 4928 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-19T13:53:50.649+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/60
2026-01-19T13:53:50.657+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/60", parameters={}
2026-01-19T13:53:50.659+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-19T13:53:50.660+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:50.661+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13378cb6] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:50.650+09:00  INFO 4928 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-19T13:53:50.665+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:50.666+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31e91306] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:50.651+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:50.674+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1eecca5f] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:50.657+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:50.676+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f104b67] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:50.657+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:50.677+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a116875] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:50.683+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@282018691 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:53:50.684+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1716226333 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:53:50.684+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1580091240 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:53:50.684+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1113066135 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:53:50.689+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:53:50.690+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:53:50.690+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:53:50.691+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-19T13:53:50.691+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1406052439 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:53:50.691+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:53:50.692+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:53:50.692+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:53:50.693+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:53:50.693+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-19T13:53:50.696+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:53:50.699+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:53:50.699+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:53:50.699+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:53:50.700+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13378cb6]
2026-01-19T13:53:50.705+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:50.705+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@500d363d] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:50.701+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1eecca5f]
2026-01-19T13:53:50.708+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:50.704+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-01-19T13:53:50.704+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-01-19T13:53:50.704+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f104b67]
2026-01-19T13:53:50.706+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@259957034 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:53:50.710+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@229663fc] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:50.710+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a116875]
2026-01-19T13:53:50.710+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31e91306]
2026-01-19T13:53:50.710+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:50.710+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:53:50.711+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1742446274 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:53:50.712+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:53:50.712+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:53:50.712+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7efa5a56] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:50.712+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:53:50.712+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:53:50.713+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=3, userId=2, si (truncated)...]
2026-01-19T13:53:50.713+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=3, userId=2, si (truncated)...]
2026-01-19T13:53:50.713+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1258221046 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:53:50.714+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:53:50.715+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:53:50.716+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:53:50.718+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:53:50.730+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:53:50.732+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:53:50.733+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@500d363d]
2026-01-19T13:53:50.734+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:53:50.741+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@229663fc]
2026-01-19T13:53:50.741+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:53:50.744+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:53:50.744+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7efa5a56]
2026-01-19T13:53:50.744+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:53:50.745+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:53:50.748+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:50.758+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48f00157]
2026-01-19T13:53:50.759+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@192471647 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will be managed by Spring
2026-01-19T13:53:50.759+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:50.759+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:53:50.760+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a4728]
2026-01-19T13:53:50.763+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-19T13:53:50.765+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@294800575 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will be managed by Spring
2026-01-19T13:53:50.765+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:53:50.767+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-19T13:53:50.772+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 39
2026-01-19T13:53:50.776+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48f00157]
2026-01-19T13:53:50.777+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48f00157] from current transaction
2026-01-19T13:53:50.778+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 39
2026-01-19T13:53:50.779+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:53:50.779+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a4728]
2026-01-19T13:53:50.779+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:53:50.780+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a4728] from current transaction
2026-01-19T13:53:50.780+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:53:50.781+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:53:50.782+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:53:50.783+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48f00157]
2026-01-19T13:53:50.783+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48f00157] from current transaction
2026-01-19T13:53:50.784+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:53:50.789+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:53:50.790+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a4728]
2026-01-19T13:53:50.793+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:53:50.795+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a4728] from current transaction
2026-01-19T13:53:50.797+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:53:50.798+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:53:50.803+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:53:50.806+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:53:50.807+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48f00157]
2026-01-19T13:53:50.808+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a4728]
2026-01-19T13:53:50.810+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48f00157] from current transaction
2026-01-19T13:53:50.810+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a4728] from current transaction
2026-01-19T13:53:50.811+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:53:50.811+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:53:50.811+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 99(Long), 1(Long)
2026-01-19T13:53:50.812+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 99(Long), 1(Long)
2026-01-19T13:53:50.814+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-19T13:53:50.814+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-19T13:53:50.814+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a4728]
2026-01-19T13:53:50.815+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48f00157]
2026-01-19T13:53:50.816+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a4728]
2026-01-19T13:53:50.817+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a4728]
2026-01-19T13:53:50.816+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48f00157]
2026-01-19T13:53:50.817+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a4728]
2026-01-19T13:53:50.821+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48f00157]
2026-01-19T13:53:50.823+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48f00157]
2026-01-19T13:53:50.841+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:50.841+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:50.846+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@617d4fc0] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:50.847+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57bbdc1a] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:50.847+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1499627270 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:53:50.848+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@70792740 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:53:50.848+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:53:50.849+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:53:50.850+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:53:50.854+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:53:50.868+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:53:50.868+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:53:50.877+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57bbdc1a]
2026-01-19T13:53:50.878+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@617d4fc0]
2026-01-19T13:53:50.878+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:50.880+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:50.882+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bf1b9a3] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:50.883+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@782faeaf] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:50.884+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1914958283 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:53:50.885+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1940385061 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:53:50.891+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:53:50.891+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:53:50.892+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:53:50.893+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:53:50.911+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-19T13:53:50.911+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-19T13:53:50.912+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@782faeaf]
2026-01-19T13:53:50.912+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bf1b9a3]
2026-01-19T13:53:50.913+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:50.913+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:50.913+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@292e32a2] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:50.914+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77e341c0] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:50.915+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@745647102 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:53:50.915+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@27906622 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:53:50.917+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:53:50.925+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:53:50.926+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:53:50.927+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:53:50.931+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:53:50.931+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:53:50.932+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@292e32a2]
2026-01-19T13:53:50.933+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77e341c0]
2026-01-19T13:53:50.934+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:53:50.935+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:53:50.939+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=60, drafterId=2, r (truncated)...]
2026-01-19T13:53:50.939+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=60, drafterId=2, r (truncated)...]
2026-01-19T13:53:50.942+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:53:50.942+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:53:53.190+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/receipts/43/download
2026-01-19T13:53:53.193+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/receipts/43/download
2026-01-19T13:53:53.194+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/receipts/43/download
2026-01-19T13:53:53.194+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/receipts/43/download
2026-01-19T13:53:53.195+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/receipts/43/download", parameters={}
2026-01-19T13:53:53.195+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#downloadReceipt(Long)
2026-01-19T13:53:53.196+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:53.196+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@101cd8a0] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:53.198+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@799645857 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:53:53.199+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectReceiptById  : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.receipt_id = ? AND r.company_id = ?
2026-01-19T13:53:53.200+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectReceiptById  : ==> Parameters: 43(Long), 1(Long)
2026-01-19T13:53:53.205+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectReceiptById  : <==      Total: 1
2026-01-19T13:53:53.205+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@101cd8a0]
2026-01-19T13:53:53.206+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:53.206+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@403a1757] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:53.207+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@274905171 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:53:53.207+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:53:53.207+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:53:53.210+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:53:53.210+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@403a1757]
2026-01-19T13:53:53.211+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:53.211+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ca0ca86] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:53.212+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2091968746 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:53:53.212+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:53:53.213+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:53:53.215+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:53:53.215+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ca0ca86]
2026-01-19T13:53:53.216+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:53:53.216+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e5c3875] was not registered for synchronization because synchronization is not active
2026-01-19T13:53:53.217+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@79834050 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:53:53.217+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-19T13:53:53.219+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-19T13:53:53.224+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-19T13:53:53.224+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e5c3875]
2026-01-19T13:53:53.225+09:00  INFO 4928 --- [http-nio-8080-exec-8] SECURITY                                 : FILE_DOWNLOAD userId=2 expenseId=60 detail=영수증이미지.jpg
2026-01-19T13:53:53.225+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Found 'Content-Type:application/pdf' in response
2026-01-19T13:53:53.225+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [file [C:\InnerSignature\backend\uploads\receipts\c56fd3c5-4d38-4fec-8759-08d9d5e138d1.pdf]]
2026-01-19T13:53:53.262+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:38.842+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-01-19T13:55:38.842+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:55:38.842+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/60
2026-01-19T13:55:38.842+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/2/approvers/active
2026-01-19T13:55:38.845+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/60
2026-01-19T13:55:38.844+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:55:38.844+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expense-categories/merged
2026-01-19T13:55:38.846+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/2/approvers/active
2026-01-19T13:55:38.846+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/60
2026-01-19T13:55:38.846+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:55:38.847+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-01-19T13:55:38.848+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/2/approvers/active
2026-01-19T13:55:38.853+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/2/approvers/active", parameters={}
2026-01-19T13:55:38.848+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/60", parameters={}
2026-01-19T13:55:38.848+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:55:38.851+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-01-19T13:55:38.854+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getActiveApprovers(Long)
2026-01-19T13:55:38.855+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-19T13:55:38.856+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:55:38.858+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-01-19T13:55:38.860+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-19T13:55:38.861+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:38.861+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:38.862+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-19T13:55:38.865+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-19T13:55:38.869+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60349860] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:38.873+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16c9534d] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:38.875+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-19T13:55:38.877+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:38.887+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:38.888+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bbbd539] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:38.888+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20cfb9d1] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:38.894+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@662101657 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:55:38.895+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@37225212 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:55:38.897+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@425226057 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:55:38.898+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1011345501 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:55:38.902+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-19T13:55:38.903+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-01-19T13:55:38.903+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:55:38.904+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:55:38.905+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:55:38.909+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==> Parameters: 1(Long), 1(Long)
2026-01-19T13:55:38.909+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:38.911+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:55:38.919+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:55:38.919+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:55:38.919+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 1
2026-01-19T13:55:38.919+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : <==      Total: 12
2026-01-19T13:55:38.920+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60349860]
2026-01-19T13:55:38.923+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16c9534d]
2026-01-19T13:55:38.924+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bbbd539]
2026-01-19T13:55:38.924+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20cfb9d1]
2026-01-19T13:55:38.925+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:38.925+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:38.925+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20c9f5b0] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:38.925+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:38.925+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:38.925+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ff75bba] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:38.926+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@552694882 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:55:38.926+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-19T13:55:38.926+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=4, username=test_user3, password=null, (truncated)...]
2026-01-19T13:55:38.927+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:55:38.927+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@854872492 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:55:38.928+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:38.928+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:38.931+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:38.932+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:55:38.940+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-01-19T13:55:38.943+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/2/approvers/active
2026-01-19T13:55:38.944+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:55:38.948+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expense-categories/merged
2026-01-19T13:55:38.958+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-01-19T13:55:38.958+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/2/approvers/active
2026-01-19T13:55:38.959+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-01-19T13:55:38.961+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/2/approvers/active
2026-01-19T13:55:38.961+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-01-19T13:55:38.962+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/2/approvers/active", parameters={}
2026-01-19T13:55:38.963+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-19T13:55:38.963+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getActiveApprovers(Long)
2026-01-19T13:55:38.964+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-19T13:55:38.964+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-19T13:55:38.965+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:38.970+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-19T13:55:38.971+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2db1c9e1] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:38.971+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:38.976+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f38c693] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:38.979+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:55:38.980+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:55:38.981+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ff75bba]
2026-01-19T13:55:38.982+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@925392911 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:55:38.990+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:38.983+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@169424846 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:55:38.989+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20c9f5b0]
2026-01-19T13:55:38.990+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-01-19T13:55:38.990+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:55:38.990+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-19T13:55:38.996+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==> Parameters: 1(Long), 1(Long)
2026-01-19T13:55:38.997+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:38.997+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:39.006+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:55:39.007+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a75982a]
2026-01-19T13:55:39.014+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@235381272 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will be managed by Spring
2026-01-19T13:55:39.016+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : <==      Total: 12
2026-01-19T13:55:39.023+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:55:39.023+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2db1c9e1]
2026-01-19T13:55:39.024+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 1
2026-01-19T13:55:39.025+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-19T13:55:39.025+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f38c693]
2026-01-19T13:55:39.025+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:39.026+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:39.026+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-19T13:55:39.029+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=4, username=test_user3, password=null, (truncated)...]
2026-01-19T13:55:39.030+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:39.030+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 39
2026-01-19T13:55:39.031+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:39.040+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a75982a]
2026-01-19T13:55:39.052+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a75982a] from current transaction
2026-01-19T13:55:39.053+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:55:39.054+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:39.057+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:55:39.059+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a75982a]
2026-01-19T13:55:39.060+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a75982a] from current transaction
2026-01-19T13:55:39.060+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:55:39.061+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:39.074+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:55:39.075+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a75982a]
2026-01-19T13:55:39.076+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a75982a] from current transaction
2026-01-19T13:55:39.076+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:55:39.077+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 99(Long), 1(Long)
2026-01-19T13:55:39.097+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-19T13:55:39.098+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a75982a]
2026-01-19T13:55:39.099+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a75982a]
2026-01-19T13:55:39.099+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a75982a]
2026-01-19T13:55:39.102+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a75982a]
2026-01-19T13:55:39.106+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:39.106+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3be52680] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:39.109+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1312055591 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:55:39.109+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:55:39.110+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:39.113+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:55:39.113+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3be52680]
2026-01-19T13:55:39.115+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:39.115+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e2324fb] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:39.119+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1281415321 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:55:39.119+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:55:39.121+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:39.124+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-19T13:55:39.124+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e2324fb]
2026-01-19T13:55:39.125+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:39.126+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55dbd46c] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:39.126+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@311965392 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:55:39.126+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:55:39.127+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:55:39.128+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:55:39.129+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55dbd46c]
2026-01-19T13:55:39.130+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:39.130+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=60, drafterId=2, r (truncated)...]
2026-01-19T13:55:39.132+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:39.141+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/60
2026-01-19T13:55:39.147+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/60
2026-01-19T13:55:39.148+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/60
2026-01-19T13:55:39.149+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/60", parameters={}
2026-01-19T13:55:39.152+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-19T13:55:39.156+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:39.157+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46575caf] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:39.158+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@611438896 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:55:39.158+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:55:39.159+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:39.160+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:55:39.161+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46575caf]
2026-01-19T13:55:39.162+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:39.163+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c67ca7a] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:39.163+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@547968893 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:55:39.164+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:55:39.165+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:39.172+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:55:39.172+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c67ca7a]
2026-01-19T13:55:39.174+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:39.175+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f136021]
2026-01-19T13:55:39.176+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@389935049 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will be managed by Spring
2026-01-19T13:55:39.176+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:55:39.178+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-19T13:55:39.190+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 39
2026-01-19T13:55:39.190+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f136021]
2026-01-19T13:55:39.191+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f136021] from current transaction
2026-01-19T13:55:39.192+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:55:39.193+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:39.227+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:55:39.227+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f136021]
2026-01-19T13:55:39.228+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f136021] from current transaction
2026-01-19T13:55:39.228+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:55:39.228+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:39.230+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:55:39.231+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f136021]
2026-01-19T13:55:39.231+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f136021] from current transaction
2026-01-19T13:55:39.232+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:55:39.232+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 99(Long), 1(Long)
2026-01-19T13:55:39.238+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-19T13:55:39.238+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f136021]
2026-01-19T13:55:39.238+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f136021]
2026-01-19T13:55:39.238+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f136021]
2026-01-19T13:55:39.239+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f136021]
2026-01-19T13:55:39.242+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:39.242+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18517d60] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:39.243+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2030980500 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:55:39.243+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:55:39.244+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:39.246+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:55:39.246+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18517d60]
2026-01-19T13:55:39.247+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:39.247+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49bc2bf1] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:39.248+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1511384539 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:55:39.249+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:55:39.252+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:39.256+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-19T13:55:39.257+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49bc2bf1]
2026-01-19T13:55:39.257+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:39.257+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@658e4ff3] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:39.258+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1304761104 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:55:39.259+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:55:39.259+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:55:39.262+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:55:39.263+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@658e4ff3]
2026-01-19T13:55:39.265+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:39.266+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=60, drafterId=2, r (truncated)...]
2026-01-19T13:55:39.272+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:40.016+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-19T13:55:40.016+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-19T13:55:40.018+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/company
2026-01-19T13:55:40.020+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/user
2026-01-19T13:55:40.033+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-19T13:55:40.035+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-19T13:55:40.035+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-19T13:55:40.037+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-19T13:55:40.037+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-19T13:55:40.038+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-19T13:55:40.043+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:40.060+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:40.061+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3efbcb1e] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:40.062+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77b1ebd7] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:40.070+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1746312155 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:55:40.071+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-19T13:55:40.071+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1968055034 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:55:40.072+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-19T13:55:40.072+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.is_default DESC, uc.created_at DESC
2026-01-19T13:55:40.073+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 2(Long)
2026-01-19T13:55:40.074+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-19T13:55:40.075+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3efbcb1e]
2026-01-19T13:55:40.075+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.U.findActiveByUserId             : <==      Total: 1
2026-01-19T13:55:40.076+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77b1ebd7]
2026-01-19T13:55:40.076+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:40.077+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:40.077+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-19T13:55:40.077+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[UserCardDto(cardId=2, userId=2, cardName=개인카 (truncated)...]
2026-01-19T13:55:40.078+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:40.078+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:40.091+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-19T13:55:40.093+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-19T13:55:40.094+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/company
2026-01-19T13:55:40.096+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-19T13:55:40.097+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/user
2026-01-19T13:55:40.103+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-19T13:55:40.107+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-19T13:55:40.109+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-19T13:55:40.103+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-19T13:55:40.110+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:40.111+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-19T13:55:40.112+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@96986f9] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:40.113+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:40.114+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@630518313 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:55:40.114+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19de82b0] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:40.115+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.is_default DESC, uc.created_at DESC
2026-01-19T13:55:40.123+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 2(Long)
2026-01-19T13:55:40.123+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1934182410 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:55:40.123+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-19T13:55:40.124+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-19T13:55:40.125+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.U.findActiveByUserId             : <==      Total: 1
2026-01-19T13:55:40.126+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@96986f9]
2026-01-19T13:55:40.127+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-19T13:55:40.127+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:40.127+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19de82b0]
2026-01-19T13:55:40.127+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[UserCardDto(cardId=2, userId=2, cardName=개인카 (truncated)...]
2026-01-19T13:55:40.128+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:40.128+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-19T13:55:40.128+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:40.130+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:47.184+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/60
2026-01-19T13:55:47.188+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing PUT /api/expenses/60
2026-01-19T13:55:47.189+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/60
2026-01-19T13:55:47.190+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured PUT /api/expenses/60
2026-01-19T13:55:47.191+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : PUT "/api/expenses/60", parameters={}
2026-01-19T13:55:47.191+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#updateExpense(Long, ExpenseReportDto)
2026-01-19T13:55:47.193+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ExpenseReportDto(expenseReportId=null, drafterId=2, reportDate=2026-01-19, title=null, totalAmount=1 (truncated)...]
2026-01-19T13:55:47.193+09:00  INFO 4928 --- [http-nio-8080-exec-2] c.i.b.controller.ExpenseController       : 지출결의서 수정 요청 - expenseId: 60, currentUserId: 2, totalAmount: 10000
2026-01-19T13:55:47.204+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:47.204+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb5439c]
2026-01-19T13:55:47.204+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@468744869 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will be managed by Spring
2026-01-19T13:55:47.205+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:55:47.205+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:47.208+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:55:47.208+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb5439c]
2026-01-19T13:55:47.209+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb5439c] from current transaction
2026-01-19T13:55:47.212+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.MonthlyClosingMapper.isClosed    : ==>  Preparing: SELECT COUNT(*) > 0 FROM monthly_closing_tb WHERE company_id = ? AND closing_year = ? AND closing_month = ? AND is_closed = 1
2026-01-19T13:55:47.213+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.MonthlyClosingMapper.isClosed    : ==> Parameters: 1(Long), 2026(Integer), 1(Integer)
2026-01-19T13:55:47.215+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.MonthlyClosingMapper.isClosed    : <==      Total: 1
2026-01-19T13:55:47.215+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb5439c]
2026-01-19T13:55:47.218+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb5439c] from current transaction
2026-01-19T13:55:47.220+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-19T13:55:47.221+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-19T13:55:47.226+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-19T13:55:47.230+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb5439c]
2026-01-19T13:55:47.231+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb5439c] from current transaction
2026-01-19T13:55:47.232+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:55:47.236+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:47.238+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:55:47.238+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb5439c]
2026-01-19T13:55:47.239+09:00  INFO 4928 --- [http-nio-8080-exec-2] c.i.backend.service.ExpenseService       : 지출결의서 수정 요청 - expenseReportId: 60, 변경사항 없음 (결제수단만 변경 가능)
2026-01-19T13:55:47.239+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb5439c] from current transaction
2026-01-19T13:55:47.240+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.updateExpenseReport            : ==>  Preparing: UPDATE expense_report_tb SET report_date = ?, total_amount = ?, payment_req_date = ?, is_pre_approval = ? WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:55:47.242+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.updateExpenseReport            : ==> Parameters: 2026-01-19(LocalDate), 10000(Long), null, null, 60(Long), 1(Long)
2026-01-19T13:55:47.245+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.updateExpenseReport            : <==    Updates: 1
2026-01-19T13:55:47.246+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb5439c]
2026-01-19T13:55:47.247+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.backend.service.ExpenseService       : 상세 항목 수정 시작 - 항목 수: 1
2026-01-19T13:55:47.248+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb5439c] from current transaction
2026-01-19T13:55:47.248+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.deleteExpenseDetail            : ==>  Preparing: DELETE FROM expense_detail_tb WHERE expense_detail_id = ? AND company_id = ?
2026-01-19T13:55:47.248+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.deleteExpenseDetail            : ==> Parameters: 99(Long), 1(Long)
2026-01-19T13:55:47.253+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.deleteExpenseDetail            : <==    Updates: 1
2026-01-19T13:55:47.253+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb5439c]
2026-01-19T13:55:47.255+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.backend.service.ExpenseService       : 상세 항목 삭제 - expenseDetailId: 99
2026-01-19T13:55:47.255+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb5439c] from current transaction
2026-01-19T13:55:47.256+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.insertExpenseDetail            : ==>  Preparing: INSERT INTO expense_detail_tb ( expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, company_id ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-19T13:55:47.258+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.insertExpenseDetail            : ==> Parameters: 60(Long), 식비/회식(String), 상호명1(String), PDF 압축 테스트(String), 10000(Long), null, CASH(String), 2026-01-19(LocalDate), (String), null, (String), 1(Long)
2026-01-19T13:55:47.264+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.insertExpenseDetail            : <==    Updates: 1
2026-01-19T13:55:47.264+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb5439c]
2026-01-19T13:55:47.269+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.backend.service.ExpenseService       : 상세 항목 추가 - category: 식비/회식
2026-01-19T13:55:47.270+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.backend.service.ExpenseService       : 상세 항목 수정 완료 - 업데이트: 0, 추가: 1, 삭제: 1
2026-01-19T13:55:47.270+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb5439c] from current transaction
2026-01-19T13:55:47.271+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:55:47.271+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:47.274+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-19T13:55:47.274+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb5439c]
2026-01-19T13:55:47.275+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb5439c] from current transaction
2026-01-19T13:55:47.276+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.deleteApprovalLines            : ==>  Preparing: DELETE FROM approval_line_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:55:47.276+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.deleteApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:47.279+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.deleteApprovalLines            : <==    Updates: 1
2026-01-19T13:55:47.279+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb5439c]
2026-01-19T13:55:47.280+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.backend.service.ExpenseService       : 결재 라인 수정 시작 - 라인 수: 1
2026-01-19T13:55:47.280+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb5439c] from current transaction
2026-01-19T13:55:47.281+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.insertApprovalLine             : ==>  Preparing: INSERT INTO approval_line_tb ( expense_report_id, approver_id, step_order, status, approval_date, signature_data, rejection_reason, company_id ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-19T13:55:47.281+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.insertApprovalLine             : ==> Parameters: 60(Long), 4(Long), 1(Integer), WAIT(String), null, null, null, 1(Long)
2026-01-19T13:55:47.285+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.insertApprovalLine             : <==    Updates: 1
2026-01-19T13:55:47.286+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb5439c]
2026-01-19T13:55:47.286+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.backend.service.ExpenseService       : 결재 라인 수정 완료
2026-01-19T13:55:47.287+09:00  INFO 4928 --- [http-nio-8080-exec-2] c.i.backend.service.ExpenseService       : 지출결의서 수정 완료 - expenseReportId: 60
2026-01-19T13:55:47.289+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb5439c]
2026-01-19T13:55:47.289+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb5439c]
2026-01-19T13:55:47.289+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb5439c]
2026-01-19T13:55:47.294+09:00  INFO 4928 --- [http-nio-8080-exec-2] c.i.b.controller.ExpenseController       : 지출결의서 수정 완료 - expenseId: 60
2026-01-19T13:55:47.294+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:47.295+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=기안서 수정 성공, data=60)]
2026-01-19T13:55:47.296+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:47.302+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/60
2026-01-19T13:55:47.308+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/60
2026-01-19T13:55:47.308+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/60
2026-01-19T13:55:47.309+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/60", parameters={}
2026-01-19T13:55:47.309+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-19T13:55:47.310+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:47.310+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1897949f] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:47.313+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1088114427 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:55:47.314+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:55:47.314+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:47.317+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:55:47.320+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1897949f]
2026-01-19T13:55:47.320+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:47.320+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a8eac1a] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:47.321+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@96821679 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:55:47.321+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:55:47.322+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:47.323+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:55:47.324+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a8eac1a]
2026-01-19T13:55:47.326+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:47.327+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e3ad688]
2026-01-19T13:55:47.327+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@793610938 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will be managed by Spring
2026-01-19T13:55:47.328+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:55:47.329+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-19T13:55:47.332+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 39
2026-01-19T13:55:47.333+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e3ad688]
2026-01-19T13:55:47.337+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e3ad688] from current transaction
2026-01-19T13:55:47.337+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:55:47.338+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:47.348+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:55:47.355+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e3ad688]
2026-01-19T13:55:47.356+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e3ad688] from current transaction
2026-01-19T13:55:47.357+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:55:47.359+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:47.372+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:55:47.373+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e3ad688]
2026-01-19T13:55:47.374+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e3ad688] from current transaction
2026-01-19T13:55:47.375+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:55:47.375+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 100(Long), 1(Long)
2026-01-19T13:55:47.378+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-19T13:55:47.379+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e3ad688]
2026-01-19T13:55:47.380+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e3ad688]
2026-01-19T13:55:47.381+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e3ad688]
2026-01-19T13:55:47.382+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e3ad688]
2026-01-19T13:55:47.389+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:47.391+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@359e2397] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:47.392+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@39869813 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:55:47.393+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:55:47.398+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:47.407+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:55:47.408+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@359e2397]
2026-01-19T13:55:47.408+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:47.409+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b6c6df0] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:47.411+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1596614545 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:55:47.412+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:55:47.413+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:47.478+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-19T13:55:47.494+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b6c6df0]
2026-01-19T13:55:47.515+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:47.523+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19783855] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:47.558+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1636025703 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:55:47.563+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:55:47.565+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:55:47.573+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:55:47.573+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19783855]
2026-01-19T13:55:47.574+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:47.575+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=60, drafterId=2, r (truncated)...]
2026-01-19T13:55:47.577+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:47.591+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/details/100/receipt
2026-01-19T13:55:47.601+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/expenses/details/100/receipt
2026-01-19T13:55:47.610+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/details/100/receipt
2026-01-19T13:55:47.611+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/expenses/details/100/receipt
2026-01-19T13:55:47.614+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : POST "/api/expenses/details/100/receipt", parameters={multipart}
2026-01-19T13:55:47.816+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#uploadReceiptForDetail(Long, MultipartFile, Long)
2026-01-19T13:55:47.819+09:00  INFO 4928 --- [http-nio-8080-exec-7] c.i.b.controller.ExpenseController       : 상세 내역별 영수증 업로드 요청 - expenseDetailId: 100, expenseReportId: 60, userId: 2, filename: 해운대 디오션 낮.jpg
2026-01-19T13:55:47.819+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:47.820+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cc97d82] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:47.824+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@617031762 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:55:47.827+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:55:47.830+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:47.837+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:55:47.839+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cc97d82]
2026-01-19T13:55:47.840+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:47.843+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f4fcbe4] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:47.843+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1570848360 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:55:47.844+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:55:47.846+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:47.848+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:55:47.854+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f4fcbe4]
2026-01-19T13:55:47.859+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:47.859+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@649017ab]
2026-01-19T13:55:47.861+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@822595712 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will be managed by Spring
2026-01-19T13:55:47.862+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:55:47.863+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-19T13:55:47.870+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 39
2026-01-19T13:55:47.872+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@649017ab]
2026-01-19T13:55:47.873+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@649017ab] from current transaction
2026-01-19T13:55:47.875+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:55:47.877+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:47.879+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:55:47.879+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@649017ab]
2026-01-19T13:55:47.881+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@649017ab] from current transaction
2026-01-19T13:55:47.881+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:55:47.882+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:47.885+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:55:47.885+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@649017ab]
2026-01-19T13:55:47.886+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@649017ab] from current transaction
2026-01-19T13:55:47.887+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:55:47.888+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 100(Long), 1(Long)
2026-01-19T13:55:47.889+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-19T13:55:47.890+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@649017ab]
2026-01-19T13:55:47.891+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@649017ab]
2026-01-19T13:55:47.892+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@649017ab]
2026-01-19T13:55:47.892+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@649017ab]
2026-01-19T13:55:47.894+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:47.895+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@399fdadc] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:47.895+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@395329496 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:55:47.895+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:55:47.896+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:47.897+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:55:47.898+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@399fdadc]
2026-01-19T13:55:47.898+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:47.900+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7adc89b7] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:47.900+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1028842762 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:55:47.901+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:55:47.901+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:47.903+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-19T13:55:47.903+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7adc89b7]
2026-01-19T13:55:47.904+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:47.904+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@336561bd] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:47.905+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@770365271 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:55:47.905+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:55:47.906+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:55:47.907+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:55:47.908+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@336561bd]
2026-01-19T13:55:47.908+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:47.908+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ff4707e] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:47.909+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1728351924 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:55:47.909+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:55:47.910+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:47.912+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:55:47.912+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ff4707e]
2026-01-19T13:55:47.914+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:47.914+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b285b09]
2026-01-19T13:55:47.915+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1412561128 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will be managed by Spring
2026-01-19T13:55:47.916+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:55:47.919+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-19T13:55:47.923+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 39
2026-01-19T13:55:47.924+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b285b09]
2026-01-19T13:55:47.924+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b285b09] from current transaction
2026-01-19T13:55:47.925+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:55:47.925+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:47.928+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:55:47.928+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b285b09]
2026-01-19T13:55:47.928+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b285b09] from current transaction
2026-01-19T13:55:47.929+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:55:47.929+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:47.931+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:55:47.931+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b285b09]
2026-01-19T13:55:51.489+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b285b09]
2026-01-19T13:55:51.490+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b285b09]
2026-01-19T13:55:51.496+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleException(Exception, HttpServletRequest)
2026-01-19T13:55:51.497+09:00 ERROR 4928 --- [http-nio-8080-exec-7] c.i.b.exception.GlobalExceptionHandler   : 예외 발생

jakarta.servlet.ServletException: Handler dispatch failed: java.lang.NoClassDefFoundError: net/coobird/thumbnailator/Thumbnails
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1104) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.49.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.49.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at com.innersignature.backend.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:84) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at com.innersignature.backend.security.RateLimitFilter.doFilterInternal(RateLimitFilter.java:87) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319) ~[spring-security-config-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240) ~[spring-security-config-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]
Caused by: java.lang.NoClassDefFoundError: net/coobird/thumbnailator/Thumbnails
	at com.innersignature.backend.util.ReceiptCompressor.resizeImageIfNeeded(ReceiptCompressor.java:100) ~[classes/:na]
	at com.innersignature.backend.util.ReceiptCompressor.compressImageToPdf(ReceiptCompressor.java:60) ~[classes/:na]
	at com.innersignature.backend.util.ReceiptCompressor.compressToPdf(ReceiptCompressor.java:47) ~[classes/:na]
	at com.innersignature.backend.service.ExpenseReceiptService.saveFile(ExpenseReceiptService.java:237) ~[classes/:na]
	at com.innersignature.backend.service.ExpenseReceiptService.uploadReceiptForDetail(ExpenseReceiptService.java:96) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.14.jar:6.2.14]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.14.jar:6.2.14]
	at com.innersignature.backend.service.ExpenseReceiptService$$SpringCGLIB$$0.uploadReceiptForDetail(<generated>) ~[classes/:na]
	at com.innersignature.backend.service.ExpenseService.uploadReceiptForDetail(ExpenseService.java:1390) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:724) ~[spring-aop-6.2.14.jar:6.2.14]
	at com.innersignature.backend.service.ExpenseService$$SpringCGLIB$$0.uploadReceiptForDetail(<generated>) ~[classes/:na]
	at com.innersignature.backend.controller.ExpenseController.uploadReceiptForDetail(ExpenseController.java:485) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:724) ~[spring-aop-6.2.14.jar:6.2.14]
	at com.innersignature.backend.controller.ExpenseController$$SpringCGLIB$$0.uploadReceiptForDetail(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.14.jar:6.2.14]
	... 104 common frames omitted
Caused by: java.lang.ClassNotFoundException: net.coobird.thumbnailator.Thumbnails
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:525) ~[na:na]
	... 148 common frames omitted

2026-01-19T13:55:51.563+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:51.564+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=서버 오류가 발생했습니다: Handler dispatch failed: java.lang.NoClassDefFound (truncated)...]
2026-01-19T13:55:51.567+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [jakarta.servlet.ServletException: Handler dispatch failed: java.lang.NoClassDefFoundError: net/coobird/thumbnailator/Thumbnails]
2026-01-19T13:55:51.572+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2026-01-19T13:55:54.529+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:55:54.530+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/60
2026-01-19T13:55:54.531+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-19T13:55:54.531+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:55:54.532+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:55:54.534+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/60
2026-01-19T13:55:54.534+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-19T13:55:54.535+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:55:54.536+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/60
2026-01-19T13:55:54.537+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-19T13:55:54.537+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:55:54.538+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/60", parameters={}
2026-01-19T13:55:54.539+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-19T13:55:54.541+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-19T13:55:54.540+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:54.541+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-19T13:55:54.542+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:54.542+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@aca99ce] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:54.543+09:00  INFO 4928 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-19T13:55:54.543+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7237a01b] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:54.547+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:54.550+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2022990725 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:55:54.554+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28230a28] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:54.555+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:55:54.557+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:55:54.558+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1230508271 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:55:54.576+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:55:54.577+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1523241227 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:55:54.579+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:54.579+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-19T13:55:54.581+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:55:54.582+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:55:54.587+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@aca99ce]
2026-01-19T13:55:54.589+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:55:54.591+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:54.592+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7237a01b]
2026-01-19T13:55:54.592+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46471781] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:54.593+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:54.593+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1055322316 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:55:54.593+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35345424] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:54.594+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:55:54.595+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1153906981 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:55:54.596+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:55:54.596+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:55:54.597+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:54.597+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-01-19T13:55:54.604+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28230a28]
2026-01-19T13:55:54.605+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:55:54.605+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:54.606+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46471781]
2026-01-19T13:55:54.606+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:55:54.606+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=3, userId=2, si (truncated)...]
2026-01-19T13:55:54.606+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:54.606+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35345424]
2026-01-19T13:55:54.608+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:54.608+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:55:54.611+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:54.624+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-19T13:55:54.630+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-19T13:55:54.639+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-19T13:55:54.640+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-19T13:55:54.641+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-19T13:55:54.645+09:00  INFO 4928 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-19T13:55:54.646+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:54.648+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:54.652+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d967b66]
2026-01-19T13:55:54.650+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ca3bcae] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:54.653+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@390384339 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will be managed by Spring
2026-01-19T13:55:54.653+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1765325197 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:55:54.653+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:55:54.654+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-19T13:55:54.655+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-19T13:55:54.656+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:55:54.660+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 39
2026-01-19T13:55:54.661+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d967b66]
2026-01-19T13:55:54.662+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-01-19T13:55:54.662+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d967b66] from current transaction
2026-01-19T13:55:54.662+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ca3bcae]
2026-01-19T13:55:54.662+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:55:54.663+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:54.663+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:54.664+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=3, userId=2, si (truncated)...]
2026-01-19T13:55:54.669+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:54.674+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:55:54.676+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d967b66]
2026-01-19T13:55:54.676+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d967b66] from current transaction
2026-01-19T13:55:54.677+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:55:54.677+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:54.680+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:55:54.681+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d967b66]
2026-01-19T13:55:54.689+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d967b66] from current transaction
2026-01-19T13:55:54.689+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:55:54.690+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 100(Long), 1(Long)
2026-01-19T13:55:54.692+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-19T13:55:54.692+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d967b66]
2026-01-19T13:55:54.692+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d967b66]
2026-01-19T13:55:54.693+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d967b66]
2026-01-19T13:55:54.693+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d967b66]
2026-01-19T13:55:54.697+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:54.697+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3da742b9] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:54.698+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@363997710 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:55:54.698+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:55:54.699+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:54.705+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:55:54.706+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3da742b9]
2026-01-19T13:55:54.706+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:54.706+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e8cf66a] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:54.706+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@960092552 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:55:54.707+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:55:54.707+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:54.710+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-19T13:55:54.711+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e8cf66a]
2026-01-19T13:55:54.711+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:54.712+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f7ae814] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:54.712+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@379353143 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:55:54.712+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:55:54.713+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:55:54.716+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:55:54.718+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f7ae814]
2026-01-19T13:55:54.720+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:54.721+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=60, drafterId=2, r (truncated)...]
2026-01-19T13:55:54.723+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:54.725+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/60
2026-01-19T13:55:54.728+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/60
2026-01-19T13:55:54.730+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/60/receipts
2026-01-19T13:55:54.731+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/60
2026-01-19T13:55:54.734+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/60", parameters={}
2026-01-19T13:55:54.735+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-19T13:55:54.742+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:54.750+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@488b0d4f] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:54.742+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/60/receipts
2026-01-19T13:55:54.753+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/60/receipts
2026-01-19T13:55:54.754+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/60/receipts
2026-01-19T13:55:54.756+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/60/receipts", parameters={}
2026-01-19T13:55:54.756+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1072878163 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:55:54.757+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-19T13:55:54.757+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:55:54.757+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 60, userId: 2
2026-01-19T13:55:54.757+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:54.758+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:54.758+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c9cf562] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:54.760+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:55:54.760+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@54706421 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:55:54.761+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@488b0d4f]
2026-01-19T13:55:54.761+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:55:54.762+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:54.762+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:54.762+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@646760dd] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:54.763+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1948891475 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:55:54.764+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:55:54.765+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:55:54.768+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:54.769+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c9cf562]
2026-01-19T13:55:54.771+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:54.773+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a4e5f7e] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:54.775+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@30578864 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:55:54.777+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:55:54.778+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:54.779+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:55:54.781+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@646760dd]
2026-01-19T13:55:54.785+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:55:54.789+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a4e5f7e]
2026-01-19T13:55:54.789+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:54.789+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:54.789+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e6611c4]
2026-01-19T13:55:54.790+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44f5d940] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:54.790+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2021798148 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will be managed by Spring
2026-01-19T13:55:54.790+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@479779599 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:55:54.790+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:55:54.790+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-19T13:55:54.791+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-19T13:55:54.791+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-19T13:55:54.794+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-19T13:55:54.795+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 39
2026-01-19T13:55:54.796+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44f5d940]
2026-01-19T13:55:54.797+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e6611c4]
2026-01-19T13:55:54.798+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:54.799+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e6611c4] from current transaction
2026-01-19T13:55:54.803+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@831e10d] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:54.805+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:55:54.806+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1650726546 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:55:54.806+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:54.806+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:55:54.808+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:54.809+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:55:54.850+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e6611c4]
2026-01-19T13:55:54.851+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e6611c4] from current transaction
2026-01-19T13:55:54.851+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:55:54.852+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:55:54.904+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@831e10d]
2026-01-19T13:55:54.900+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:54.906+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:54.910+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67023a2e] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:54.911+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1614579274 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:55:54.911+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:55:54.912+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:55:54.913+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 100(Long), 1(Long)
2026-01-19T13:55:54.913+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e6611c4]
2026-01-19T13:55:54.919+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e6611c4] from current transaction
2026-01-19T13:55:54.937+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:55:54.937+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-19T13:55:54.938+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 100(Long), 1(Long)
2026-01-19T13:55:54.938+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67023a2e]
2026-01-19T13:55:54.939+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:54.940+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-19T13:55:54.941+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-19T13:55:54.941+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:54.942+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e6611c4]
2026-01-19T13:55:54.947+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e6611c4]
2026-01-19T13:55:54.950+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e6611c4]
2026-01-19T13:55:54.952+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e6611c4]
2026-01-19T13:55:54.960+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:54.960+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b8357ff] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:54.960+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2026114798 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:55:54.961+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:55:54.961+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:54.963+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:55:54.963+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b8357ff]
2026-01-19T13:55:54.964+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:54.964+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@98708d7] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:54.965+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2026539703 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:55:54.967+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:55:54.967+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:54.970+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-19T13:55:54.970+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@98708d7]
2026-01-19T13:55:54.971+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:54.972+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c6f321d] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:54.973+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1562337015 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:55:54.973+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:55:54.973+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:55:54.975+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:55:54.975+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c6f321d]
2026-01-19T13:55:54.977+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:54.978+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=60, drafterId=2, r (truncated)...]
2026-01-19T13:55:54.979+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:54.992+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/60/receipts
2026-01-19T13:55:54.994+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/60/receipts
2026-01-19T13:55:54.995+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/60/receipts
2026-01-19T13:55:54.996+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/60/receipts", parameters={}
2026-01-19T13:55:54.996+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-19T13:55:54.997+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 60, userId: 2
2026-01-19T13:55:54.997+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:54.998+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3af8b9dc] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:55.001+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@500026783 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:55:55.001+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:55:55.002+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:55.004+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:55:55.005+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3af8b9dc]
2026-01-19T13:55:55.005+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:55.005+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46b8d6dc] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:55.006+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1891025641 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:55:55.006+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:55:55.007+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:55.009+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:55:55.010+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46b8d6dc]
2026-01-19T13:55:55.010+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:55.011+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37524c58] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:55.011+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@937189976 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:55:55.012+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-19T13:55:55.014+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-19T13:55:55.017+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-19T13:55:55.018+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37524c58]
2026-01-19T13:55:55.018+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:55.018+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50bc8752] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:55.019+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1974018449 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:55:55.020+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:55:55.020+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:55.022+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:55:55.023+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50bc8752]
2026-01-19T13:55:55.023+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:55.023+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a5d5d67] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:55.024+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1055907177 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:55:55.024+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:55:55.025+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 100(Long), 1(Long)
2026-01-19T13:55:55.027+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-19T13:55:55.027+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a5d5d67]
2026-01-19T13:55:55.028+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:55.028+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-19T13:55:55.028+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:56.053+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:55:56.053+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-01-19T13:55:56.055+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/60
2026-01-19T13:55:56.057+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:55:56.058+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expense-categories/merged
2026-01-19T13:55:56.060+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/60
2026-01-19T13:55:56.062+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/60
2026-01-19T13:55:56.062+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:55:56.062+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-01-19T13:55:56.064+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-01-19T13:55:56.063+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/60", parameters={}
2026-01-19T13:55:56.063+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:55:56.068+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/2/approvers/active
2026-01-19T13:55:56.071+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-01-19T13:55:56.074+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-19T13:55:56.072+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-19T13:55:56.072+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:55:56.075+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/2/approvers/active
2026-01-19T13:55:56.076+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-19T13:55:56.078+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:56.078+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:56.078+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/2/approvers/active
2026-01-19T13:55:56.079+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:56.079+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f2cca0b] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:56.079+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1684b2f3] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:56.080+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/2/approvers/active", parameters={}
2026-01-19T13:55:56.080+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47919b2a] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:56.107+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1981709582 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:55:56.108+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1055272022 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:55:56.114+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getActiveApprovers(Long)
2026-01-19T13:55:56.114+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:55:56.117+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:55:56.122+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1688075830 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:55:56.123+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:56.123+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-19T13:55:56.123+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:55:56.123+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-01-19T13:55:56.125+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-19T13:55:56.126+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:55:56.127+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:55:56.128+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : ==> Parameters: 1(Long), 1(Long)
2026-01-19T13:55:56.128+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:56.128+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f2cca0b]
2026-01-19T13:55:56.128+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1684b2f3]
2026-01-19T13:55:56.129+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1212b99c] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:56.129+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:56.129+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:56.130+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57919dd5] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:56.130+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d995b09] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:56.131+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : <==      Total: 12
2026-01-19T13:55:56.131+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@678465784 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:55:56.132+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@644604030 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:55:56.134+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47919b2a]
2026-01-19T13:55:56.134+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1711186574 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:55:56.135+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:55:56.135+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:55:56.135+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:56.135+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-19T13:55:56.136+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:56.136+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:55:56.136+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-19T13:55:56.137+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:55:56.139+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:56.140+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:55:56.140+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:55:56.143+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d995b09]
2026-01-19T13:55:56.142+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57919dd5]
2026-01-19T13:55:56.147+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:56.147+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:55:56.149+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 1
2026-01-19T13:55:56.154+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1212b99c]
2026-01-19T13:55:56.150+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-01-19T13:55:56.152+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:56.155+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:56.157+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=4, username=test_user3, password=null, (truncated)...]
2026-01-19T13:55:56.157+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expense-categories/merged
2026-01-19T13:55:56.166+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:56.169+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-01-19T13:55:56.169+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-01-19T13:55:56.170+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-01-19T13:55:56.172+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-19T13:55:56.174+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:56.176+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-19T13:55:56.177+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/2/approvers/active
2026-01-19T13:55:56.178+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@202e5d4d]
2026-01-19T13:55:56.179+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:56.180+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1464974177 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will be managed by Spring
2026-01-19T13:55:56.180+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7988fa98] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:56.180+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:55:56.180+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1786593363 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:55:56.181+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/2/approvers/active
2026-01-19T13:55:56.181+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-19T13:55:56.183+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-01-19T13:55:56.185+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/2/approvers/active
2026-01-19T13:55:56.190+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 39
2026-01-19T13:55:56.194+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.findMergedCategories           : ==> Parameters: 1(Long), 1(Long)
2026-01-19T13:55:56.195+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/2/approvers/active", parameters={}
2026-01-19T13:55:56.196+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@202e5d4d]
2026-01-19T13:55:56.199+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@202e5d4d] from current transaction
2026-01-19T13:55:56.201+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:55:56.197+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getActiveApprovers(Long)
2026-01-19T13:55:56.201+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.findMergedCategories           : <==      Total: 12
2026-01-19T13:55:56.203+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:56.205+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-19T13:55:56.205+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7988fa98]
2026-01-19T13:55:56.209+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-19T13:55:56.209+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:56.211+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:55:56.212+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-19T13:55:56.211+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:56.212+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@202e5d4d]
2026-01-19T13:55:56.213+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a77b507] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:56.213+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:56.213+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@202e5d4d] from current transaction
2026-01-19T13:55:56.214+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1352567554 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:55:56.214+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:55:56.221+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-19T13:55:56.221+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:56.224+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:55:56.226+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 1
2026-01-19T13:55:56.226+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:55:56.226+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a77b507]
2026-01-19T13:55:56.227+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@202e5d4d]
2026-01-19T13:55:56.228+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:56.228+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@202e5d4d] from current transaction
2026-01-19T13:55:56.229+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=4, username=test_user3, password=null, (truncated)...]
2026-01-19T13:55:56.229+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:55:56.230+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:56.231+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 100(Long), 1(Long)
2026-01-19T13:55:56.238+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-19T13:55:56.240+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@202e5d4d]
2026-01-19T13:55:56.241+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@202e5d4d]
2026-01-19T13:55:56.242+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@202e5d4d]
2026-01-19T13:55:56.242+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@202e5d4d]
2026-01-19T13:55:56.246+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:56.246+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f1ac30a] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:56.247+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@661702901 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:55:56.248+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:55:56.248+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:56.253+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:55:56.253+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f1ac30a]
2026-01-19T13:55:56.255+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:56.256+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c2d4683] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:56.257+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@356960415 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:55:56.257+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:55:56.257+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:56.259+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-19T13:55:56.260+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c2d4683]
2026-01-19T13:55:56.260+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:56.261+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3936a2ec] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:56.261+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@800715287 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:55:56.261+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:55:56.262+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:55:56.264+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:55:56.264+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3936a2ec]
2026-01-19T13:55:56.264+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:56.268+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=60, drafterId=2, r (truncated)...]
2026-01-19T13:55:56.269+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:56.277+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/60
2026-01-19T13:55:56.279+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/60/receipts
2026-01-19T13:55:56.282+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/60
2026-01-19T13:55:56.285+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/60/receipts
2026-01-19T13:55:56.287+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/60
2026-01-19T13:55:56.287+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/60/receipts
2026-01-19T13:55:56.288+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/60", parameters={}
2026-01-19T13:55:56.289+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/60/receipts", parameters={}
2026-01-19T13:55:56.289+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-19T13:55:56.290+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-19T13:55:56.291+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:56.292+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 60, userId: 2
2026-01-19T13:55:56.293+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d9c72b4] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:56.293+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:56.294+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d540417] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:56.295+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@468816089 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:55:56.295+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@176235780 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:55:56.295+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:55:56.295+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:55:56.296+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:56.296+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:56.299+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:55:56.299+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:55:56.304+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d540417]
2026-01-19T13:55:56.304+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d9c72b4]
2026-01-19T13:55:56.304+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:56.305+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:56.305+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b638099] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:56.305+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36c62e52] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:56.305+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@114966878 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:55:56.305+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@428676548 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:55:56.306+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:55:56.306+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:55:56.307+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:56.307+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:56.309+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:55:56.309+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:55:56.309+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b638099]
2026-01-19T13:55:56.310+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36c62e52]
2026-01-19T13:55:56.310+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:56.311+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@545dcd8b] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:56.311+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@57534673 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:55:56.312+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-19T13:55:56.313+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-19T13:55:56.313+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:56.314+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b31f565]
2026-01-19T13:55:56.318+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1447071334 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will be managed by Spring
2026-01-19T13:55:56.319+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:55:56.320+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-19T13:55:56.324+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-19T13:55:56.325+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@545dcd8b]
2026-01-19T13:55:56.327+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:56.327+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15e117f4] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:56.327+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 39
2026-01-19T13:55:56.328+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@795517270 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:55:56.328+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b31f565]
2026-01-19T13:55:56.328+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:55:56.328+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b31f565] from current transaction
2026-01-19T13:55:56.329+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:56.329+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:55:56.331+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:56.331+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:55:56.331+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15e117f4]
2026-01-19T13:55:56.333+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:56.334+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5895552d] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:56.336+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1163310972 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:55:56.337+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:55:56.338+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 100(Long), 1(Long)
2026-01-19T13:55:56.340+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-19T13:55:56.340+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:55:56.340+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5895552d]
2026-01-19T13:55:56.340+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b31f565]
2026-01-19T13:55:56.341+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:56.341+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b31f565] from current transaction
2026-01-19T13:55:56.342+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-19T13:55:56.343+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:55:56.344+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:56.344+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:56.358+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:55:56.358+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b31f565]
2026-01-19T13:55:56.359+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b31f565] from current transaction
2026-01-19T13:55:56.359+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:55:56.359+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 100(Long), 1(Long)
2026-01-19T13:55:56.362+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-19T13:55:56.362+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b31f565]
2026-01-19T13:55:56.363+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b31f565]
2026-01-19T13:55:56.363+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b31f565]
2026-01-19T13:55:56.363+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b31f565]
2026-01-19T13:55:56.370+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:56.372+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d6c6dd1] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:56.373+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@196092478 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:55:56.373+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:55:56.374+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:56.376+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:55:56.376+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d6c6dd1]
2026-01-19T13:55:56.376+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:56.376+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@550ee8c9] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:56.377+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2065827164 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:55:56.377+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:55:56.378+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:56.380+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-19T13:55:56.381+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@550ee8c9]
2026-01-19T13:55:56.381+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:56.382+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76641f58] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:56.383+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1410267645 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:55:56.384+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:55:56.384+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:55:56.386+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:55:56.386+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76641f58]
2026-01-19T13:55:56.388+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:56.388+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=60, drafterId=2, r (truncated)...]
2026-01-19T13:55:56.392+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:56.413+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/60/receipts
2026-01-19T13:55:56.419+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/60/receipts
2026-01-19T13:55:56.420+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/60/receipts
2026-01-19T13:55:56.421+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/60/receipts", parameters={}
2026-01-19T13:55:56.421+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-19T13:55:56.422+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 60, userId: 2
2026-01-19T13:55:56.422+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:56.422+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b662e62] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:56.423+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1309413577 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:55:56.423+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:55:56.424+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:56.427+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:55:56.428+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b662e62]
2026-01-19T13:55:56.428+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:56.428+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f3f9090] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:56.429+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@364950571 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:55:56.429+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:55:56.430+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:56.431+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:55:56.432+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f3f9090]
2026-01-19T13:55:56.434+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:56.435+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a6e47a8] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:56.435+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1230431589 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:55:56.436+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-19T13:55:56.437+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-19T13:55:56.438+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-19T13:55:56.439+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a6e47a8]
2026-01-19T13:55:56.440+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:56.440+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41fbdada] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:56.440+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2039518794 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:55:56.441+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:55:56.442+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:55:56.444+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:55:56.444+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41fbdada]
2026-01-19T13:55:56.445+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:56.445+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65da339b] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:56.446+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2062026992 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:55:56.447+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:55:56.447+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 100(Long), 1(Long)
2026-01-19T13:55:56.451+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-19T13:55:56.452+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65da339b]
2026-01-19T13:55:56.454+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:56.454+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-19T13:55:56.455+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:57.816+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-19T13:55:57.819+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-19T13:55:57.829+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/company
2026-01-19T13:55:57.839+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-19T13:55:57.839+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/user
2026-01-19T13:55:57.840+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-19T13:55:57.840+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-19T13:55:57.840+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-19T13:55:57.841+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-19T13:55:57.841+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:57.842+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@396048af] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:57.841+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-19T13:55:57.843+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:57.845+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d40402c] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:57.846+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@426903115 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:55:57.846+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-19T13:55:57.847+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-19T13:55:57.847+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2146750703 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:55:57.854+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.is_default DESC, uc.created_at DESC
2026-01-19T13:55:57.859+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 2(Long)
2026-01-19T13:55:57.862+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-19T13:55:57.865+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@396048af]
2026-01-19T13:55:57.870+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.U.findActiveByUserId             : <==      Total: 1
2026-01-19T13:55:57.871+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:57.871+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d40402c]
2026-01-19T13:55:57.872+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-19T13:55:57.872+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:57.873+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:57.874+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[UserCardDto(cardId=2, userId=2, cardName=개인카 (truncated)...]
2026-01-19T13:55:57.877+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:57.878+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-19T13:55:57.889+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-19T13:55:57.889+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/company
2026-01-19T13:55:57.891+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-19T13:55:57.891+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/user
2026-01-19T13:55:57.894+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-19T13:55:57.895+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-19T13:55:57.895+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-19T13:55:57.895+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-19T13:55:57.896+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:57.896+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-19T13:55:57.896+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c04ed97] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:57.897+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:55:57.897+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e78fbda] was not registered for synchronization because synchronization is not active
2026-01-19T13:55:57.904+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1649661723 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:55:57.904+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1748593502 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:55:57.904+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-19T13:55:57.905+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.is_default DESC, uc.created_at DESC
2026-01-19T13:55:57.906+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-19T13:55:57.906+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 2(Long)
2026-01-19T13:55:57.908+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.U.findActiveByUserId             : <==      Total: 1
2026-01-19T13:55:57.908+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e78fbda]
2026-01-19T13:55:57.909+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:57.910+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[UserCardDto(cardId=2, userId=2, cardName=개인카 (truncated)...]
2026-01-19T13:55:57.911+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-19T13:55:57.912+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c04ed97]
2026-01-19T13:55:57.912+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:55:57.913+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:55:57.915+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-19T13:55:57.922+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:56:20.505+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:56:20.509+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/60
2026-01-19T13:56:20.511+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-19T13:56:20.513+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/60
2026-01-19T13:56:20.516+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-19T13:56:20.524+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:56:20.526+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/60
2026-01-19T13:56:20.528+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-19T13:56:20.533+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/60
2026-01-19T13:56:20.535+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-19T13:56:20.538+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:56:20.544+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-19T13:56:20.538+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/60
2026-01-19T13:56:20.540+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-19T13:56:20.542+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/60
2026-01-19T13:56:20.545+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:56:20.545+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-19T13:56:20.545+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/60
2026-01-19T13:56:20.546+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-19T13:56:20.546+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/60
2026-01-19T13:56:20.556+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:56:20.558+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:56:20.556+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-19T13:56:20.557+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/60", parameters={}
2026-01-19T13:56:20.557+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-19T13:56:20.561+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-19T13:56:20.557+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/60", parameters={}
2026-01-19T13:56:20.558+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:20.560+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-19T13:56:20.561+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-19T13:56:20.562+09:00  INFO 4928 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-19T13:56:20.562+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-19T13:56:20.562+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19f407be] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:20.569+09:00  INFO 4928 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-19T13:56:20.569+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:20.570+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:20.572+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:20.576+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23bc2bfc] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:20.573+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:20.575+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@169a6170] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:20.576+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28a91287] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:20.576+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@395545400 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:56:20.580+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:56:20.577+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54db45eb] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:20.579+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1656615159 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:56:20.580+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1928078551 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:56:20.583+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@438039538 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:56:20.584+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:56:20.585+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:56:20.585+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:56:20.585+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-19T13:56:20.586+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:56:20.587+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:56:20.589+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@117008168 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:56:20.589+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:56:20.590+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-19T13:56:20.591+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:56:20.591+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:56:20.591+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:56:20.591+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:56:20.591+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19f407be]
2026-01-19T13:56:20.592+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23bc2bfc]
2026-01-19T13:56:20.593+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-01-19T13:56:20.593+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@169a6170]
2026-01-19T13:56:20.593+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:20.595+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-01-19T13:56:20.593+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:20.594+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28a91287]
2026-01-19T13:56:20.594+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:20.595+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@167567a9] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:20.595+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54db45eb]
2026-01-19T13:56:20.596+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@245634478 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:56:20.595+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77427ccf] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:20.595+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@393852c0] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:20.595+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:56:20.596+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:56:20.596+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:56:20.596+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1578526546 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:56:20.596+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1810024516 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:56:20.596+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=3, userId=2, si (truncated)...]
2026-01-19T13:56:20.597+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=3, userId=2, si (truncated)...]
2026-01-19T13:56:20.597+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:56:20.597+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:56:20.597+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:56:20.598+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:56:20.607+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:56:20.598+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:56:20.605+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:56:20.607+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:56:20.622+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@167567a9]
2026-01-19T13:56:20.623+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:56:20.624+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:56:20.625+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@393852c0]
2026-01-19T13:56:20.625+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:56:20.627+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:56:20.628+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:56:20.642+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77427ccf]
2026-01-19T13:56:20.657+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:20.657+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65a44375]
2026-01-19T13:56:20.659+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1663891505 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will be managed by Spring
2026-01-19T13:56:20.659+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:20.659+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:56:20.660+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cff17ed]
2026-01-19T13:56:20.662+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-19T13:56:20.662+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1979609099 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will be managed by Spring
2026-01-19T13:56:20.663+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:56:20.664+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-19T13:56:20.668+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 39
2026-01-19T13:56:20.671+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65a44375]
2026-01-19T13:56:20.672+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65a44375] from current transaction
2026-01-19T13:56:20.672+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 39
2026-01-19T13:56:20.672+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:56:20.672+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cff17ed]
2026-01-19T13:56:20.673+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:56:20.673+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cff17ed] from current transaction
2026-01-19T13:56:20.673+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:56:20.675+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:56:20.675+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:56:20.675+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65a44375]
2026-01-19T13:56:20.677+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65a44375] from current transaction
2026-01-19T13:56:20.677+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:56:20.678+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:56:20.678+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:56:20.678+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cff17ed]
2026-01-19T13:56:20.678+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cff17ed] from current transaction
2026-01-19T13:56:20.678+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:56:20.679+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:56:20.680+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:56:20.680+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65a44375]
2026-01-19T13:56:20.680+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65a44375] from current transaction
2026-01-19T13:56:20.680+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:56:20.681+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:56:20.681+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 100(Long), 1(Long)
2026-01-19T13:56:20.681+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cff17ed]
2026-01-19T13:56:20.684+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cff17ed] from current transaction
2026-01-19T13:56:20.686+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-19T13:56:20.686+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:56:20.686+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65a44375]
2026-01-19T13:56:20.687+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 100(Long), 1(Long)
2026-01-19T13:56:20.687+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65a44375]
2026-01-19T13:56:20.687+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65a44375]
2026-01-19T13:56:20.687+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65a44375]
2026-01-19T13:56:20.688+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-19T13:56:20.688+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cff17ed]
2026-01-19T13:56:20.689+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cff17ed]
2026-01-19T13:56:20.691+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cff17ed]
2026-01-19T13:56:20.691+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cff17ed]
2026-01-19T13:56:20.693+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:20.693+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1215206a] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:20.694+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@308269908 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:56:20.694+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:56:20.694+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:56:20.695+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:20.696+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d60390f] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:20.697+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:56:20.697+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1826979560 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:56:20.697+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1215206a]
2026-01-19T13:56:20.697+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:56:20.698+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:20.701+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:56:20.702+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a87f6e3] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:20.703+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1630182313 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:56:20.703+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:56:20.703+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:56:20.704+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:56:20.704+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d60390f]
2026-01-19T13:56:20.705+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:20.705+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28a7105e] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:20.705+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-19T13:56:20.705+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1690561540 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:56:20.706+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a87f6e3]
2026-01-19T13:56:20.706+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:56:20.706+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:20.707+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:56:20.707+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16fdd6d9] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:20.709+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1940392459 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:56:20.709+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:56:20.709+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:56:20.709+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-19T13:56:20.710+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28a7105e]
2026-01-19T13:56:20.710+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:20.710+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26471d6e] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:20.710+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@921881624 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:56:20.710+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:56:20.710+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:56:20.711+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16fdd6d9]
2026-01-19T13:56:20.711+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:56:20.711+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:56:20.712+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=60, drafterId=2, r (truncated)...]
2026-01-19T13:56:20.717+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:56:20.717+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26471d6e]
2026-01-19T13:56:20.717+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:56:20.719+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:56:20.729+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=60, drafterId=2, r (truncated)...]
2026-01-19T13:56:20.730+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/60/receipts
2026-01-19T13:56:20.740+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:56:20.756+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/60/receipts
2026-01-19T13:56:20.767+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/60/receipts
2026-01-19T13:56:20.777+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/60/receipts
2026-01-19T13:56:20.779+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/60/receipts
2026-01-19T13:56:20.779+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/60/receipts", parameters={}
2026-01-19T13:56:20.782+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-19T13:56:20.787+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 60, userId: 2
2026-01-19T13:56:20.791+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:20.793+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/60/receipts
2026-01-19T13:56:20.794+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5033e84] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:20.795+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1109093550 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:56:20.796+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/60/receipts
2026-01-19T13:56:20.796+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:56:20.796+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/60/receipts
2026-01-19T13:56:20.797+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:56:20.797+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/60/receipts", parameters={}
2026-01-19T13:56:20.802+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-19T13:56:20.805+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 60, userId: 2
2026-01-19T13:56:20.806+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:56:20.806+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:20.808+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5033e84]
2026-01-19T13:56:20.808+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@133523cd] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:20.808+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:20.809+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1643851963 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:56:20.809+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aac5ec4] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:20.809+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:56:20.810+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1179106315 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:56:20.810+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:56:20.811+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:56:20.812+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:56:20.813+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:56:20.813+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@133523cd]
2026-01-19T13:56:20.813+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:56:20.814+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:20.817+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aac5ec4]
2026-01-19T13:56:20.818+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48076a44] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:20.818+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:20.819+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1914049474 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:56:20.823+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70bde668] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:20.823+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:56:20.824+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1222626501 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:56:20.824+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:56:20.824+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-19T13:56:20.826+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-19T13:56:20.830+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:56:20.831+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48076a44]
2026-01-19T13:56:20.831+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-19T13:56:20.837+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:20.838+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70bde668]
2026-01-19T13:56:20.838+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ecab563] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:20.839+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:20.839+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@269132650 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:56:20.839+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ac94d7e] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:20.839+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-19T13:56:20.840+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1977116905 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:56:20.841+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-19T13:56:20.841+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:56:20.843+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:56:20.844+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-19T13:56:20.844+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ecab563]
2026-01-19T13:56:20.844+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:20.845+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53f85b92] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:20.845+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:56:20.846+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1477610787 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:56:20.846+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ac94d7e]
2026-01-19T13:56:20.846+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:56:20.849+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:56:20.846+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:20.853+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cca1f36] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:20.854+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1279790444 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:56:20.854+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:56:20.854+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:56:20.854+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53f85b92]
2026-01-19T13:56:20.855+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 100(Long), 1(Long)
2026-01-19T13:56:20.855+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:20.855+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33563f3a] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:20.857+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-19T13:56:20.857+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@576968201 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:56:20.858+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cca1f36]
2026-01-19T13:56:20.858+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:56:20.859+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:56:20.859+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 100(Long), 1(Long)
2026-01-19T13:56:20.860+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-19T13:56:20.861+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:56:20.867+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-19T13:56:20.930+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33563f3a]
2026-01-19T13:56:20.933+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:56:20.936+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-19T13:56:20.939+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:56:22.420+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/60?userId=2
2026-01-19T13:56:22.423+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing DELETE /api/expenses/60?userId=2
2026-01-19T13:56:22.424+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/60
2026-01-19T13:56:22.425+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured DELETE /api/expenses/60?userId=2
2026-01-19T13:56:22.425+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : DELETE "/api/expenses/60?userId=2", parameters={masked}
2026-01-19T13:56:22.426+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#deleteExpense(Long)
2026-01-19T13:56:22.428+09:00  INFO 4928 --- [http-nio-8080-exec-7] c.i.b.controller.ExpenseController       : 지출결의서 삭제 요청 - expenseId: 60, userId: 2
2026-01-19T13:56:22.437+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:22.437+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cab2d94]
2026-01-19T13:56:22.439+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@916481557 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will be managed by Spring
2026-01-19T13:56:22.439+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:56:22.439+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:56:22.441+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:56:22.442+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cab2d94]
2026-01-19T13:56:22.443+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cab2d94] from current transaction
2026-01-19T13:56:22.445+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-19T13:56:22.446+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-19T13:56:22.451+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-19T13:56:22.452+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cab2d94]
2026-01-19T13:56:22.453+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cab2d94] from current transaction
2026-01-19T13:56:22.453+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cab2d94]
2026-01-19T13:56:22.453+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cab2d94] from current transaction
2026-01-19T13:56:22.453+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cab2d94]
2026-01-19T13:56:22.454+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cab2d94] from current transaction
2026-01-19T13:56:22.454+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.MonthlyClosingMapper.isClosed    : ==>  Preparing: SELECT COUNT(*) > 0 FROM monthly_closing_tb WHERE company_id = ? AND closing_year = ? AND closing_month = ? AND is_closed = 1
2026-01-19T13:56:22.454+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.MonthlyClosingMapper.isClosed    : ==> Parameters: 1(Long), 2026(Integer), 1(Integer)
2026-01-19T13:56:22.456+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.MonthlyClosingMapper.isClosed    : <==      Total: 1
2026-01-19T13:56:22.456+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cab2d94]
2026-01-19T13:56:22.457+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cab2d94] from current transaction
2026-01-19T13:56:22.458+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.deleteExpenseReport            : ==>  Preparing: DELETE FROM expense_report_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:56:22.459+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.deleteExpenseReport            : ==> Parameters: 60(Long), 1(Long)
2026-01-19T13:56:22.462+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.deleteExpenseReport            : <==    Updates: 1
2026-01-19T13:56:22.462+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cab2d94]
2026-01-19T13:56:22.463+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cab2d94]
2026-01-19T13:56:22.463+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cab2d94]
2026-01-19T13:56:22.464+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cab2d94]
2026-01-19T13:56:22.475+09:00  INFO 4928 --- [http-nio-8080-exec-7] c.i.b.controller.ExpenseController       : 지출결의서 삭제 완료 - expenseId: 60
2026-01-19T13:56:22.476+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:56:22.476+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 삭제 완료, data=null)]
2026-01-19T13:56:22.477+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:56:23.306+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:56:23.307+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-19T13:56:23.310+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:56:23.310+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-19T13:56:23.316+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-19T13:56:23.316+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:56:23.321+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:56:23.321+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-19T13:56:23.323+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:56:23.327+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:56:23.327+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-19T13:56:23.327+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-19T13:56:23.338+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-19T13:56:23.339+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-19T13:56:23.334+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:56:23.336+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:56:23.337+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-19T13:56:23.337+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-19T13:56:23.342+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-19T13:56:23.339+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-19T13:56:23.339+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-19T13:56:23.341+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:56:23.341+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:56:23.343+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-19T13:56:23.343+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-19T13:56:23.344+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-19T13:56:23.344+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-19T13:56:23.345+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:56:23.346+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:56:23.346+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-19T13:56:23.346+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-19T13:56:23.347+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-19T13:56:23.348+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-19T13:56:23.353+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:56:23.355+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:56:23.356+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-19T13:56:23.357+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-19T13:56:23.359+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.357+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.357+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.360+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57381458] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.357+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:56:23.358+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.362+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f047ad0] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.358+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-19T13:56:23.360+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c15f4f3] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.360+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@853c79] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.362+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.363+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1367005568 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:56:23.373+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.376+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52705f1b] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.377+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2080658651 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:56:23.377+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:56:23.378+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6730bdcf] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.378+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1358001413 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:56:23.378+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@332865674 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:56:23.380+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:56:23.389+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:56:23.390+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:56:23.390+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:56:23.394+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:56:23.391+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@420003731 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:56:23.391+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:56:23.392+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1496148794 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:56:23.394+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:56:23.394+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:56:23.395+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-19T13:56:23.395+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:56:23.396+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-19T13:56:23.397+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:56:23.405+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c15f4f3]
2026-01-19T13:56:23.397+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:56:23.399+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:56:23.404+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57381458]
2026-01-19T13:56:23.404+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:56:23.405+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@853c79]
2026-01-19T13:56:23.405+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.407+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9a82d27] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.405+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f047ad0]
2026-01-19T13:56:23.409+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.406+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.407+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.408+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2044886693 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:56:23.409+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:56:23.411+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:56:23.412+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a975b85] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.412+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8cf2e0b] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.412+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@137cb7ff] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.412+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:56:23.412+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6730bdcf]
2026-01-19T13:56:23.413+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52705f1b]
2026-01-19T13:56:23.423+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.413+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@287388529 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:56:23.413+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@762680758 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:56:23.414+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@753678684 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:56:23.423+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:56:23.423+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.423+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48528392] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.423+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:56:23.424+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:56:23.424+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:56:23.424+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e2d48e4] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.424+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@125008796 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:56:23.425+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:56:23.425+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:56:23.425+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:56:23.426+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1817707555 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:56:23.426+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:56:23.427+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:56:23.429+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:56:23.429+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:56:23.429+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:56:23.429+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:56:23.430+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:56:23.430+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:56:23.432+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@137cb7ff]
2026-01-19T13:56:23.434+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8cf2e0b]
2026-01-19T13:56:23.437+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9a82d27]
2026-01-19T13:56:23.437+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:56:23.438+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:56:23.438+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a975b85]
2026-01-19T13:56:23.439+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.440+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.440+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.441+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48528392]
2026-01-19T13:56:23.441+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e2d48e4]
2026-01-19T13:56:23.441+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25142f5f] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.441+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:56:23.441+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2611386d] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.441+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77bb57dc] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.442+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.442+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:56:23.443+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1394714445 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:56:23.444+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:56:23.444+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1465906642 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:56:23.444+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1060277529 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:56:23.444+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6beb07b5] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.445+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:56:23.445+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-19T13:56:23.445+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:56:23.446+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:56:23.446+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:56:23.447+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@939083593 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:56:23.450+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:56:23.458+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-19T13:56:23.458+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-19T13:56:23.459+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-19T13:56:23.460+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:56:23.461+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-19T13:56:23.464+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:56:23.477+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:56:23.480+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-19T13:56:23.484+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:56:23.487+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-19T13:56:23.489+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 21
2026-01-19T13:56:23.492+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:56:23.493+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:56:23.493+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2611386d]
2026-01-19T13:56:23.493+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25142f5f]
2026-01-19T13:56:23.493+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-19T13:56:23.494+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:56:23.494+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:56:23.494+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.495+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.495+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77bb57dc]
2026-01-19T13:56:23.504+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.495+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:56:23.502+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:56:23.503+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b3551dc] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.503+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@340c7a19] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.504+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 21
2026-01-19T13:56:23.505+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74a07219] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.507+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.513+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.517+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1950926983 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:56:23.520+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@820434192 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:56:23.524+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6beb07b5]
2026-01-19T13:56:23.525+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1493749478 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:56:23.542+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:56:23.543+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:56:23.525+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@584b447d] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.540+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@978bb0] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.540+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:56:23.541+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:56:23.541+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.550+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33405e17] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.552+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2437477 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:56:23.545+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1182371447 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:56:23.545+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1016596283 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:56:23.547+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:56:23.548+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:56:23.555+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:56:23.568+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:56:23.555+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:56:23.555+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:56:23.580+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:56:23.582+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:56:23.607+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:56:23.608+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:56:23.608+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:56:23.608+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:56:23.624+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33405e17]
2026-01-19T13:56:23.626+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74a07219]
2026-01-19T13:56:23.626+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@340c7a19]
2026-01-19T13:56:23.627+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b3551dc]
2026-01-19T13:56:23.627+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.627+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:56:23.628+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.629+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:56:23.629+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50478c8] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.630+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-19T13:56:23.630+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22b067c4] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.630+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:56:23.630+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-19T13:56:23.631+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:56:23.637+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@872758937 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:56:23.637+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:56:23.638+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1975192889 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:56:23.663+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:56:23.639+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@978bb0]
2026-01-19T13:56:23.640+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:56:23.656+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@584b447d]
2026-01-19T13:56:23.656+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:56:23.659+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:56:23.663+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-19T13:56:23.664+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.676+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.677+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-19T13:56:23.678+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:56:23.678+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47f8ab48] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.679+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e51d3be] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.680+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2084247717 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:56:23.679+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:56:23.680+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2064544268 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:56:23.680+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:56:23.684+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:56:23.685+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:56:23.685+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:56:23.686+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:56:23.687+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:56:23.742+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.751+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:56:23.752+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 26
2026-01-19T13:56:23.752+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 26
2026-01-19T13:56:23.757+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4099e635] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.757+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e51d3be]
2026-01-19T13:56:23.769+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50478c8]
2026-01-19T13:56:23.769+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22b067c4]
2026-01-19T13:56:23.770+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1119141619 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:56:23.770+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:56:23.774+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:56:23.777+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.777+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.777+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:56:23.778+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:56:23.778+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47f8ab48]
2026-01-19T13:56:23.781+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:56:23.778+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f523b37] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.778+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51a7e4c] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.780+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:56:23.782+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:56:23.784+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:56:23.791+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@423024173 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:56:23.792+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@607500140 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:56:23.804+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:56:23.807+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-19T13:56:23.808+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-19T13:56:23.821+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-19T13:56:23.826+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-19T13:56:23.835+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:56:23.839+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4099e635]
2026-01-19T13:56:23.840+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 21
2026-01-19T13:56:23.842+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.843+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51a7e4c]
2026-01-19T13:56:23.843+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@312763ae] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.844+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.847+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1048609777 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:56:23.847+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@621440b4] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.853+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:56:23.854+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@875211428 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:56:23.854+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:56:23.855+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:56:23.855+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:56:23.857+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 21
2026-01-19T13:56:23.864+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f523b37]
2026-01-19T13:56:23.870+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:56:23.871+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.872+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@312763ae]
2026-01-19T13:56:23.872+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d2a8c3d] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.873+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:56:23.875+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@596608300 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:56:23.876+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:56:23.876+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:56:23.877+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:56:23.888+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:56:23.892+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:56:23.909+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@621440b4]
2026-01-19T13:56:23.920+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.920+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:56:23.924+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@611b9c3d] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.924+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d2a8c3d]
2026-01-19T13:56:23.925+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.925+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@558526794 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:56:23.928+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e3c12cc] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.929+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:56:23.935+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-19T13:56:23.930+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@120469074 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:56:23.938+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:56:23.939+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-19T13:56:23.956+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 26
2026-01-19T13:56:23.957+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 26
2026-01-19T13:56:23.963+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@611b9c3d]
2026-01-19T13:56:23.964+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e3c12cc]
2026-01-19T13:56:23.964+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.966+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:23.968+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1207acf8] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.969+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6907d762] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:23.970+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@801124593 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:56:23.971+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1460867836 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:56:23.972+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:56:23.972+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:56:23.974+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:56:23.974+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:56:23.988+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:56:23.988+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:56:23.989+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6907d762]
2026-01-19T13:56:23.990+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1207acf8]
2026-01-19T13:56:23.991+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:56:23.991+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:56:23.992+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-19T13:56:23.993+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-19T13:56:23.994+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:56:24.001+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:56:25.243+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:56:25.245+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-01-19T13:56:25.246+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-01-19T13:56:25.249+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/2/approvers/active
2026-01-19T13:56:25.250+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/2/approvers/active
2026-01-19T13:56:25.256+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:56:25.257+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-01-19T13:56:25.260+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:56:25.261+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:56:25.262+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expense-categories/merged
2026-01-19T13:56:25.263+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:56:25.263+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-01-19T13:56:25.263+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:56:25.264+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-01-19T13:56:25.269+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-01-19T13:56:25.268+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-01-19T13:56:25.269+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:25.270+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-19T13:56:25.272+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/2/approvers/active
2026-01-19T13:56:25.272+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@480b4360] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:25.273+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expense-categories/merged
2026-01-19T13:56:25.273+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-19T13:56:25.275+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/2/approvers/active
2026-01-19T13:56:25.294+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/2/approvers/active
2026-01-19T13:56:25.392+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/2/approvers/active
2026-01-19T13:56:25.393+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/2/approvers/active", parameters={}
2026-01-19T13:56:25.386+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-01-19T13:56:25.386+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@476937327 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:56:25.388+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:25.391+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/2/approvers/active
2026-01-19T13:56:25.405+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getActiveApprovers(Long)
2026-01-19T13:56:25.405+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-01-19T13:56:25.406+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:56:25.406+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d9b57cc] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:25.407+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/2/approvers/active
2026-01-19T13:56:25.407+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-19T13:56:25.408+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-01-19T13:56:25.423+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:56:25.424+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/2/approvers/active", parameters={}
2026-01-19T13:56:25.425+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-19T13:56:25.426+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-19T13:56:25.427+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@120427045 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:56:25.428+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getActiveApprovers(Long)
2026-01-19T13:56:25.429+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:25.430+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:56:25.436+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-19T13:56:25.437+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-01-19T13:56:25.437+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-19T13:56:25.437+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4266df2e] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:25.438+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@480b4360]
2026-01-19T13:56:25.447+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:25.460+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : ==> Parameters: 1(Long), 1(Long)
2026-01-19T13:56:25.463+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-19T13:56:25.468+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:25.474+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78071389] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:25.475+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:25.475+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21a069e5] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:25.477+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3940e169] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:25.477+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@616374376 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:56:25.478+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:56:25.482+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1514588264 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:56:25.487+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:56:25.487+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-19T13:56:25.491+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@946210637 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:56:25.491+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1217572744 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:56:25.491+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : <==      Total: 12
2026-01-19T13:56:25.491+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:56:25.492+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-19T13:56:25.494+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-01-19T13:56:25.494+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d9b57cc]
2026-01-19T13:56:25.496+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:56:25.502+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.findMergedCategories           : ==> Parameters: 1(Long), 1(Long)
2026-01-19T13:56:25.503+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:56:25.508+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-19T13:56:25.512+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:56:25.513+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 1
2026-01-19T13:56:25.513+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:56:25.514+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.findMergedCategories           : <==      Total: 12
2026-01-19T13:56:25.519+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 1
2026-01-19T13:56:25.525+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3940e169]
2026-01-19T13:56:25.527+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21a069e5]
2026-01-19T13:56:25.527+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78071389]
2026-01-19T13:56:25.528+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4266df2e]
2026-01-19T13:56:25.528+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:56:25.530+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:56:25.531+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:56:25.535+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:56:25.537+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=4, username=test_user3, password=null, (truncated)...]
2026-01-19T13:56:25.548+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:56:25.550+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-19T13:56:25.551+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=4, username=test_user3, password=null, (truncated)...]
2026-01-19T13:56:25.551+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:56:25.553+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:56:25.560+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:56:25.575+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:56:26.573+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-19T13:56:26.578+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/user
2026-01-19T13:56:26.579+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-19T13:56:26.579+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/user
2026-01-19T13:56:26.596+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-19T13:56:26.605+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/company
2026-01-19T13:56:26.606+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-19T13:56:26.607+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-19T13:56:26.609+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-19T13:56:26.612+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-19T13:56:26.621+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/company
2026-01-19T13:56:26.621+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/user
2026-01-19T13:56:26.622+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-19T13:56:26.622+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-19T13:56:26.636+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-19T13:56:26.622+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-19T13:56:26.623+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-19T13:56:26.635+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:26.640+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a6488c3] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:26.636+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-19T13:56:26.637+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-19T13:56:26.640+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/user
2026-01-19T13:56:26.641+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:26.641+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-19T13:56:26.643+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-19T13:56:26.644+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f0f97e6] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:26.645+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:26.645+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-19T13:56:26.646+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d09f958] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:26.646+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-19T13:56:26.648+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2039509216 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:56:26.656+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1942630824 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:56:26.657+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:26.658+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-19T13:56:26.658+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-19T13:56:26.659+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7121dff2] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:26.659+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-19T13:56:26.661+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-19T13:56:26.661+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@745360587 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:56:26.663+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.is_default DESC, uc.created_at DESC
2026-01-19T13:56:26.664+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@513784599 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:56:26.672+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 2(Long)
2026-01-19T13:56:26.674+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.is_default DESC, uc.created_at DESC
2026-01-19T13:56:26.676+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-19T13:56:26.676+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-19T13:56:26.676+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 2(Long)
2026-01-19T13:56:26.678+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a6488c3]
2026-01-19T13:56:26.678+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f0f97e6]
2026-01-19T13:56:26.680+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.U.findActiveByUserId             : <==      Total: 1
2026-01-19T13:56:26.681+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d09f958]
2026-01-19T13:56:26.680+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:56:26.681+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:56:26.687+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:56:26.689+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.U.findActiveByUserId             : <==      Total: 1
2026-01-19T13:56:26.692+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-19T13:56:26.693+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-19T13:56:26.696+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:56:26.695+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[UserCardDto(cardId=2, userId=2, cardName=개인카 (truncated)...]
2026-01-19T13:56:26.695+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7121dff2]
2026-01-19T13:56:26.696+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:56:26.703+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:56:26.704+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:56:26.705+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[UserCardDto(cardId=2, userId=2, cardName=개인카 (truncated)...]
2026-01-19T13:56:26.709+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:56:39.421+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/create
2026-01-19T13:56:39.440+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/expenses/create
2026-01-19T13:56:39.441+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/create
2026-01-19T13:56:39.443+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/expenses/create
2026-01-19T13:56:39.445+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/expenses/create", parameters={}
2026-01-19T13:56:39.445+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#createExpense(ExpenseReportDto)
2026-01-19T13:56:39.447+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ExpenseReportDto(expenseReportId=null, drafterId=2, reportDate=2026-01-19, title=null, totalAmount=1 (truncated)...]
2026-01-19T13:56:39.452+09:00  INFO 4928 --- [http-nio-8080-exec-6] c.i.b.controller.ExpenseController       : 지출결의서 생성 요청 - drafterId: 2, currentUserId: 2, totalAmount: 10000
2026-01-19T13:56:39.461+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:39.463+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb80ef7]
2026-01-19T13:56:39.464+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1650207933 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will be managed by Spring
2026-01-19T13:56:39.464+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-19T13:56:39.468+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-19T13:56:39.474+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-19T13:56:39.474+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb80ef7]
2026-01-19T13:56:39.475+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb80ef7] from current transaction
2026-01-19T13:56:39.475+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.B.findByCompanyAndCategory       : ==>  Preparing: SELECT b.*, COALESCE(( SELECT SUM(COALESCE(ed.actual_paid_amount, ed.amount)) FROM expense_detail_tb ed INNER JOIN expense_report_tb er ON ed.expense_report_id = er.expense_report_id WHERE er.company_id = b.company_id AND YEAR(er.report_date) = b.budget_year AND (b.budget_month IS NULL OR MONTH(er.report_date) = b.budget_month) AND ed.category = b.category AND er.status = 'APPROVED' ), 0) AS used_amount, CASE WHEN b.budget_amount > 0 THEN ROUND((COALESCE(( SELECT SUM(COALESCE(ed.actual_paid_amount, ed.amount)) FROM expense_detail_tb ed INNER JOIN expense_report_tb er ON ed.expense_report_id = er.expense_report_id WHERE er.company_id = b.company_id AND YEAR(er.report_date) = b.budget_year AND (b.budget_month IS NULL OR MONTH(er.report_date) = b.budget_month) AND ed.category = b.category AND er.status = 'APPROVED' ), 0) * 100.0 / b.budget_amount), 2) ELSE 0 END AS usage_rate FROM budget_tb b WHERE b.company_id = ? AND b.budget_year = ? AND (b.budget_month = ? OR (b.budget_month IS NULL AND ? IS NULL)) AND b.category = ?
2026-01-19T13:56:39.477+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.B.findByCompanyAndCategory       : ==> Parameters: 1(Long), 2026(Integer), 1(Integer), 1(Integer), 식비/회식(String)
2026-01-19T13:56:39.479+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.B.findByCompanyAndCategory       : <==      Total: 0
2026-01-19T13:56:39.479+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb80ef7]
2026-01-19T13:56:39.481+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb80ef7] from current transaction
2026-01-19T13:56:39.484+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.B.findByCompanyAndCategory       : ==>  Preparing: SELECT b.*, COALESCE(( SELECT SUM(COALESCE(ed.actual_paid_amount, ed.amount)) FROM expense_detail_tb ed INNER JOIN expense_report_tb er ON ed.expense_report_id = er.expense_report_id WHERE er.company_id = b.company_id AND YEAR(er.report_date) = b.budget_year AND (b.budget_month IS NULL OR MONTH(er.report_date) = b.budget_month) AND ed.category = b.category AND er.status = 'APPROVED' ), 0) AS used_amount, CASE WHEN b.budget_amount > 0 THEN ROUND((COALESCE(( SELECT SUM(COALESCE(ed.actual_paid_amount, ed.amount)) FROM expense_detail_tb ed INNER JOIN expense_report_tb er ON ed.expense_report_id = er.expense_report_id WHERE er.company_id = b.company_id AND YEAR(er.report_date) = b.budget_year AND (b.budget_month IS NULL OR MONTH(er.report_date) = b.budget_month) AND ed.category = b.category AND er.status = 'APPROVED' ), 0) * 100.0 / b.budget_amount), 2) ELSE 0 END AS usage_rate FROM budget_tb b WHERE b.company_id = ? AND b.budget_year = ? AND (b.budget_month = ? OR (b.budget_month IS NULL AND ? IS NULL)) AND b.category = ?
2026-01-19T13:56:39.487+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.B.findByCompanyAndCategory       : ==> Parameters: 1(Long), 2026(Integer), null, null, 식비/회식(String)
2026-01-19T13:56:39.490+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.B.findByCompanyAndCategory       : <==      Total: 0
2026-01-19T13:56:39.490+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb80ef7]
2026-01-19T13:56:39.490+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb80ef7] from current transaction
2026-01-19T13:56:39.491+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.insertExpenseReport            : ==>  Preparing: INSERT INTO expense_report_tb ( drafter_id, report_date, title, total_amount, status, payment_req_date, is_pre_approval, company_id ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-19T13:56:39.492+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.insertExpenseReport            : ==> Parameters: 2(Long), 2026-01-19(LocalDate), 지출결의서 - 2026-01-19(String), 10000(Long), WAIT(String), null, null, 1(Long)
2026-01-19T13:56:39.496+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.insertExpenseReport            : <==    Updates: 1
2026-01-19T13:56:39.496+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb80ef7]
2026-01-19T13:56:39.497+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.backend.service.ExpenseService       : 상세 항목 저장 시작 - 항목 수: 1
2026-01-19T13:56:39.500+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb80ef7] from current transaction
2026-01-19T13:56:39.501+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.insertExpenseDetail            : ==>  Preparing: INSERT INTO expense_detail_tb ( expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, company_id ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-19T13:56:39.502+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.insertExpenseDetail            : ==> Parameters: 61(Long), 식비/회식(String), 상호명2(String), PDF 압축 테스트(String), 10000(Long), null, CASH(String), 2026-01-19(LocalDate), (String), null, (String), 1(Long)
2026-01-19T13:56:39.505+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.insertExpenseDetail            : <==    Updates: 1
2026-01-19T13:56:39.506+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb80ef7]
2026-01-19T13:56:39.506+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.backend.service.ExpenseService       : 상세 항목 저장 완료
2026-01-19T13:56:39.506+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb80ef7] from current transaction
2026-01-19T13:56:39.506+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-19T13:56:39.507+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:56:39.510+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 1
2026-01-19T13:56:39.510+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb80ef7]
2026-01-19T13:56:39.511+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.backend.service.ExpenseService       : 결재 라인은 setApprovalLines API를 통해 별도로 설정됩니다.
2026-01-19T13:56:39.511+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb80ef7] from current transaction
2026-01-19T13:56:39.512+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:56:39.512+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:56:39.514+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:56:39.517+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb80ef7]
2026-01-19T13:56:39.519+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb80ef7] from current transaction
2026-01-19T13:56:39.519+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:56:39.520+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:56:39.521+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:56:39.522+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb80ef7]
2026-01-19T13:56:39.522+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb80ef7] from current transaction
2026-01-19T13:56:39.522+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.A.findActiveByCompanyId          : ==>  Preparing: SELECT * FROM audit_rule_tb WHERE company_id = ? AND is_active = 1 ORDER BY rule_type, rule_name
2026-01-19T13:56:39.522+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.A.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-19T13:56:39.526+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.A.findActiveByCompanyId          : <==      Total: 0
2026-01-19T13:56:39.526+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb80ef7]
2026-01-19T13:56:39.526+09:00  INFO 4928 --- [http-nio-8080-exec-6] c.i.backend.service.ExpenseService       : 지출결의서 생성 완료 - expenseReportId: 61
2026-01-19T13:56:39.527+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb80ef7]
2026-01-19T13:56:39.527+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb80ef7]
2026-01-19T13:56:39.527+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb80ef7]
2026-01-19T13:56:39.534+09:00  INFO 4928 --- [http-nio-8080-exec-6] c.i.b.controller.ExpenseController       : 지출결의서 생성 완료 - expenseId: 61
2026-01-19T13:56:39.535+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:56:39.536+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=기안서 저장 성공, data=61)]
2026-01-19T13:56:39.536+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:56:39.543+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/61/approval-lines
2026-01-19T13:56:39.546+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/expenses/61/approval-lines
2026-01-19T13:56:39.549+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/61/approval-lines
2026-01-19T13:56:39.551+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/expenses/61/approval-lines
2026-01-19T13:56:39.551+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : POST "/api/expenses/61/approval-lines", parameters={}
2026-01-19T13:56:39.552+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#setApprovalLines(Long, ApprovalLineRequest)
2026-01-19T13:56:39.553+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ExpenseController.ApprovalLineRequest(approvalLines=[ApprovalLineDto(approvalLineId=null, expenseRep (truncated)...]
2026-01-19T13:56:39.557+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:39.557+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42d9cf0e]
2026-01-19T13:56:39.558+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2113497053 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will be managed by Spring
2026-01-19T13:56:39.559+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.insertApprovalLine             : ==>  Preparing: INSERT INTO approval_line_tb ( expense_report_id, approver_id, step_order, status, approval_date, signature_data, rejection_reason, company_id ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-19T13:56:39.559+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.insertApprovalLine             : ==> Parameters: 61(Long), 4(Long), 1(Integer), WAIT(String), null, null, null, 1(Long)
2026-01-19T13:56:39.561+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.insertApprovalLine             : <==    Updates: 1
2026-01-19T13:56:39.562+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42d9cf0e]
2026-01-19T13:56:39.562+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.backend.service.ExpenseService       : 결재 라인 저장 완료 - expenseReportId: 61, 라인 수: 1
2026-01-19T13:56:39.562+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42d9cf0e]
2026-01-19T13:56:39.562+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42d9cf0e]
2026-01-19T13:56:39.562+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42d9cf0e]
2026-01-19T13:56:39.571+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:56:39.572+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재 라인 설정 성공, data=null)]
2026-01-19T13:56:39.572+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:56:39.579+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/61
2026-01-19T13:56:39.597+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/61
2026-01-19T13:56:39.612+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/61
2026-01-19T13:56:39.613+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/61
2026-01-19T13:56:39.618+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/61", parameters={}
2026-01-19T13:56:39.619+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-19T13:56:39.621+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:39.621+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3162fd30] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:39.624+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2072228792 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:56:39.624+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:56:39.626+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:56:39.628+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:56:39.629+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3162fd30]
2026-01-19T13:56:39.629+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:39.629+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@605e360a] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:39.630+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1998492024 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:56:39.630+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:56:39.635+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:56:39.638+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:56:39.638+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@605e360a]
2026-01-19T13:56:39.642+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:39.644+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4909d7f5]
2026-01-19T13:56:39.645+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1533057423 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will be managed by Spring
2026-01-19T13:56:39.647+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:56:39.653+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-19T13:56:39.667+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 39
2026-01-19T13:56:39.672+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4909d7f5]
2026-01-19T13:56:39.672+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4909d7f5] from current transaction
2026-01-19T13:56:39.673+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:56:39.674+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:56:39.677+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:56:39.679+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4909d7f5]
2026-01-19T13:56:39.680+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4909d7f5] from current transaction
2026-01-19T13:56:39.680+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:56:39.681+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:56:39.694+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:56:39.695+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4909d7f5]
2026-01-19T13:56:39.695+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4909d7f5] from current transaction
2026-01-19T13:56:39.695+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:56:39.696+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 101(Long), 1(Long)
2026-01-19T13:56:39.698+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-19T13:56:39.699+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4909d7f5]
2026-01-19T13:56:39.701+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4909d7f5]
2026-01-19T13:56:39.701+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4909d7f5]
2026-01-19T13:56:39.701+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4909d7f5]
2026-01-19T13:56:39.705+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:39.705+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26a456ce] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:39.706+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1179675853 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:56:39.706+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:56:39.707+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:56:39.710+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:56:39.711+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26a456ce]
2026-01-19T13:56:39.712+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:39.713+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39dfbb4] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:39.718+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@118214447 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:56:39.718+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:56:39.720+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:56:39.722+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-19T13:56:39.722+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39dfbb4]
2026-01-19T13:56:39.723+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:39.724+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34a47576] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:39.725+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1476945933 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:56:39.725+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:56:39.725+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:56:39.727+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:56:39.727+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34a47576]
2026-01-19T13:56:39.728+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:56:39.729+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=61, drafterId=2, r (truncated)...]
2026-01-19T13:56:39.732+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:56:39.744+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/details/101/receipt
2026-01-19T13:56:39.751+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/expenses/details/101/receipt
2026-01-19T13:56:39.757+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/details/101/receipt
2026-01-19T13:56:39.775+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/expenses/details/101/receipt
2026-01-19T13:56:39.783+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/expenses/details/101/receipt", parameters={multipart}
2026-01-19T13:56:39.956+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#uploadReceiptForDetail(Long, MultipartFile, Long)
2026-01-19T13:56:39.957+09:00  INFO 4928 --- [http-nio-8080-exec-4] c.i.b.controller.ExpenseController       : 상세 내역별 영수증 업로드 요청 - expenseDetailId: 101, expenseReportId: 61, userId: 2, filename: 해운대 디오션 낮.jpg
2026-01-19T13:56:39.957+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:39.957+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34f0637a] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:39.958+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1170038084 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:56:39.958+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:56:39.958+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:56:39.961+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:56:39.961+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34f0637a]
2026-01-19T13:56:39.961+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:39.962+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b91f6c8] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:39.963+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1280156019 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:56:39.965+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:56:39.965+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:56:39.967+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:56:39.967+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b91f6c8]
2026-01-19T13:56:39.970+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:39.970+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47d06cac]
2026-01-19T13:56:39.970+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@308583426 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will be managed by Spring
2026-01-19T13:56:39.970+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:56:39.971+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-19T13:56:39.974+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 39
2026-01-19T13:56:39.976+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47d06cac]
2026-01-19T13:56:39.976+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47d06cac] from current transaction
2026-01-19T13:56:39.976+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:56:39.977+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:56:39.979+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:56:39.979+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47d06cac]
2026-01-19T13:56:39.979+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47d06cac] from current transaction
2026-01-19T13:56:39.980+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:56:39.980+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:56:39.984+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:56:39.984+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47d06cac]
2026-01-19T13:56:39.986+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47d06cac] from current transaction
2026-01-19T13:56:39.986+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:56:39.988+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 101(Long), 1(Long)
2026-01-19T13:56:39.991+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-19T13:56:39.992+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47d06cac]
2026-01-19T13:56:39.993+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47d06cac]
2026-01-19T13:56:39.994+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47d06cac]
2026-01-19T13:56:39.994+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47d06cac]
2026-01-19T13:56:39.997+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:39.997+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b6528f4] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:39.999+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1256542139 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:56:40.000+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:56:40.000+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:56:40.004+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:56:40.004+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b6528f4]
2026-01-19T13:56:40.006+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:40.007+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c0013a3] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:40.007+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1586541663 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:56:40.007+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:56:40.008+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:56:40.010+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-19T13:56:40.010+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c0013a3]
2026-01-19T13:56:40.012+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:40.012+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f48cb8b] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:40.013+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@62476490 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:56:40.013+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:56:40.013+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:56:40.016+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:56:40.019+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f48cb8b]
2026-01-19T13:56:40.019+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:40.020+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2346e0bd] was not registered for synchronization because synchronization is not active
2026-01-19T13:56:40.022+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@175862733 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:56:40.022+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:56:40.023+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:56:40.025+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:56:40.026+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2346e0bd]
2026-01-19T13:56:40.028+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:56:40.029+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1af1aec9]
2026-01-19T13:56:40.029+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1603406128 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will be managed by Spring
2026-01-19T13:56:40.029+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:56:40.030+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-19T13:56:40.035+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 39
2026-01-19T13:56:40.037+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1af1aec9]
2026-01-19T13:56:40.037+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1af1aec9] from current transaction
2026-01-19T13:56:40.038+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:56:40.038+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:56:40.040+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:56:40.040+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1af1aec9]
2026-01-19T13:56:40.040+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1af1aec9] from current transaction
2026-01-19T13:56:40.041+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:56:40.041+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:56:40.044+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:56:40.045+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1af1aec9]
2026-01-19T13:56:43.724+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1af1aec9]
2026-01-19T13:56:43.724+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1af1aec9]
2026-01-19T13:56:43.728+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleException(Exception, HttpServletRequest)
2026-01-19T13:56:43.728+09:00 ERROR 4928 --- [http-nio-8080-exec-4] c.i.b.exception.GlobalExceptionHandler   : 예외 발생

jakarta.servlet.ServletException: Handler dispatch failed: java.lang.NoClassDefFoundError: net/coobird/thumbnailator/Thumbnails
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1104) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.49.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.49.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at com.innersignature.backend.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:84) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at com.innersignature.backend.security.RateLimitFilter.doFilterInternal(RateLimitFilter.java:87) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319) ~[spring-security-config-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240) ~[spring-security-config-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]
Caused by: java.lang.NoClassDefFoundError: net/coobird/thumbnailator/Thumbnails
	at com.innersignature.backend.util.ReceiptCompressor.resizeImageIfNeeded(ReceiptCompressor.java:100) ~[classes/:na]
	at com.innersignature.backend.util.ReceiptCompressor.compressImageToPdf(ReceiptCompressor.java:60) ~[classes/:na]
	at com.innersignature.backend.util.ReceiptCompressor.compressToPdf(ReceiptCompressor.java:47) ~[classes/:na]
	at com.innersignature.backend.service.ExpenseReceiptService.saveFile(ExpenseReceiptService.java:237) ~[classes/:na]
	at com.innersignature.backend.service.ExpenseReceiptService.uploadReceiptForDetail(ExpenseReceiptService.java:96) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.14.jar:6.2.14]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.14.jar:6.2.14]
	at com.innersignature.backend.service.ExpenseReceiptService$$SpringCGLIB$$0.uploadReceiptForDetail(<generated>) ~[classes/:na]
	at com.innersignature.backend.service.ExpenseService.uploadReceiptForDetail(ExpenseService.java:1390) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:724) ~[spring-aop-6.2.14.jar:6.2.14]
	at com.innersignature.backend.service.ExpenseService$$SpringCGLIB$$0.uploadReceiptForDetail(<generated>) ~[classes/:na]
	at com.innersignature.backend.controller.ExpenseController.uploadReceiptForDetail(ExpenseController.java:485) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:724) ~[spring-aop-6.2.14.jar:6.2.14]
	at com.innersignature.backend.controller.ExpenseController$$SpringCGLIB$$0.uploadReceiptForDetail(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.14.jar:6.2.14]
	... 104 common frames omitted
Caused by: java.lang.ClassNotFoundException: net.coobird.thumbnailator.Thumbnails
	... 148 common frames omitted

2026-01-19T13:56:43.773+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:56:43.774+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=서버 오류가 발생했습니다: Handler dispatch failed: java.lang.NoClassDefFound (truncated)...]
2026-01-19T13:56:43.775+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [jakarta.servlet.ServletException: Handler dispatch failed: java.lang.NoClassDefFoundError: net/coobird/thumbnailator/Thumbnails]
2026-01-19T13:56:43.778+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 500 INTERNAL_SERVER_ERROR
2026-01-19T13:58:31.751+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:58:31.752+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/61
2026-01-19T13:58:31.754+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-19T13:58:31.758+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/61
2026-01-19T13:58:31.758+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-19T13:58:31.768+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:58:31.770+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-19T13:58:31.771+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/61
2026-01-19T13:58:31.771+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-19T13:58:31.774+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/61
2026-01-19T13:58:31.774+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:58:31.775+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-19T13:58:31.775+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/61
2026-01-19T13:58:31.783+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-19T13:58:31.785+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-19T13:58:31.783+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:58:31.783+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/61
2026-01-19T13:58:31.783+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-19T13:58:31.783+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/61
2026-01-19T13:58:31.785+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-19T13:58:31.786+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:58:31.786+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/61
2026-01-19T13:58:31.787+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-19T13:58:31.788+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/61", parameters={}
2026-01-19T13:58:31.789+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-19T13:58:31.789+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:58:31.796+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:31.800+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d6c5a88] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:31.789+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/61", parameters={}
2026-01-19T13:58:31.791+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-19T13:58:31.793+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-19T13:58:31.794+09:00  INFO 4928 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-19T13:58:31.801+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-19T13:58:31.802+09:00  INFO 4928 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-19T13:58:31.807+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:31.808+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:31.810+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34b0173] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:31.809+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:31.809+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:31.809+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@769c1a35] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:31.814+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57238b38] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:31.814+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17789ae8] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:31.820+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@338473427 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:58:31.822+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@516807253 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:58:31.822+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@854796981 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:58:31.823+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:58:31.824+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-19T13:58:31.825+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1148956773 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:58:31.825+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1626999193 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:58:31.825+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:58:31.826+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:58:31.827+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:58:31.827+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-19T13:58:31.827+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:58:31.828+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:58:31.837+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:58:31.837+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:58:31.838+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-01-19T13:58:31.838+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:58:31.840+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34b0173]
2026-01-19T13:58:31.840+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d6c5a88]
2026-01-19T13:58:31.842+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:58:31.842+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:31.843+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=3, userId=2, si (truncated)...]
2026-01-19T13:58:31.843+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@190ccbc2] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:31.844+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:58:31.849+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1175469831 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:58:31.852+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:58:31.856+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:58:31.855+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:58:31.856+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-01-19T13:58:31.857+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:58:31.857+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57238b38]
2026-01-19T13:58:31.857+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@769c1a35]
2026-01-19T13:58:31.858+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17789ae8]
2026-01-19T13:58:31.859+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:31.861+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:31.866+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:58:31.866+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35fb53d9] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:31.867+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:58:31.871+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e0f7590] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:31.872+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=3, userId=2, si (truncated)...]
2026-01-19T13:58:31.873+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@708826719 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:58:31.881+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@190ccbc2]
2026-01-19T13:58:31.882+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@197787169 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:58:31.883+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:58:31.886+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:58:31.891+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:58:31.891+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:58:31.900+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:58:31.901+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:58:31.902+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:58:31.904+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:58:31.924+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:58:31.925+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:58:31.926+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e0f7590]
2026-01-19T13:58:31.926+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35fb53d9]
2026-01-19T13:58:31.953+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:31.955+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:31.956+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cbe239f]
2026-01-19T13:58:31.956+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77ef8c1b]
2026-01-19T13:58:31.957+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@401437517 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will be managed by Spring
2026-01-19T13:58:31.957+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@909448221 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will be managed by Spring
2026-01-19T13:58:31.958+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:58:31.958+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:58:31.958+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-19T13:58:31.959+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 1(Long)
2026-01-19T13:58:31.990+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 39
2026-01-19T13:58:31.990+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 39
2026-01-19T13:58:31.992+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77ef8c1b]
2026-01-19T13:58:31.994+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cbe239f]
2026-01-19T13:58:31.998+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77ef8c1b] from current transaction
2026-01-19T13:58:32.001+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cbe239f] from current transaction
2026-01-19T13:58:32.002+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:58:32.003+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:58:32.004+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:58:32.004+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:58:32.036+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:58:32.036+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:58:32.051+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77ef8c1b]
2026-01-19T13:58:32.052+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cbe239f]
2026-01-19T13:58:32.052+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77ef8c1b] from current transaction
2026-01-19T13:58:32.060+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cbe239f] from current transaction
2026-01-19T13:58:32.060+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:58:32.063+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:58:32.064+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:58:32.065+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:58:32.085+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:58:32.086+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:58:32.103+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cbe239f]
2026-01-19T13:58:32.104+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77ef8c1b]
2026-01-19T13:58:32.104+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cbe239f] from current transaction
2026-01-19T13:58:32.106+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77ef8c1b] from current transaction
2026-01-19T13:58:32.107+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:58:32.107+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:58:32.108+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 101(Long), 1(Long)
2026-01-19T13:58:32.117+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 101(Long), 1(Long)
2026-01-19T13:58:32.135+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-19T13:58:32.135+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-19T13:58:32.141+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77ef8c1b]
2026-01-19T13:58:32.141+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cbe239f]
2026-01-19T13:58:32.142+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77ef8c1b]
2026-01-19T13:58:32.142+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cbe239f]
2026-01-19T13:58:32.143+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77ef8c1b]
2026-01-19T13:58:32.143+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cbe239f]
2026-01-19T13:58:32.143+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77ef8c1b]
2026-01-19T13:58:32.144+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cbe239f]
2026-01-19T13:58:32.331+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:32.339+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4569de5d] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:32.344+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1973511707 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:58:32.349+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:32.353+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:58:32.354+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@474d370b] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:32.354+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:58:32.354+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1661308740 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:58:32.366+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:58:32.382+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:58:32.383+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:58:32.389+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4569de5d]
2026-01-19T13:58:32.390+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:32.402+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30e6a5c5] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:32.424+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1005981362 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:58:32.424+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:58:32.436+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:58:32.437+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@474d370b]
2026-01-19T13:58:32.437+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:58:32.438+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:32.439+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44f287b3] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:32.445+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1781073225 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:58:32.447+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:58:32.453+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-19T13:58:32.456+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:58:32.456+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30e6a5c5]
2026-01-19T13:58:32.457+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:32.467+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fe16b27] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:32.468+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2049716627 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:58:32.475+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:58:32.476+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:58:32.485+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-19T13:58:32.489+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44f287b3]
2026-01-19T13:58:32.490+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:32.492+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f646cef] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:32.493+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1073455535 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:58:32.504+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:58:32.505+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:58:32.509+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fe16b27]
2026-01-19T13:58:32.511+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:58:32.519+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:58:32.528+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=61, drafterId=2, r (truncated)...]
2026-01-19T13:58:32.532+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:58:32.536+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:58:32.537+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f646cef]
2026-01-19T13:58:32.544+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:58:32.550+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=61, drafterId=2, r (truncated)...]
2026-01-19T13:58:32.551+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:58:32.544+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/61/receipts
2026-01-19T13:58:32.567+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/61/receipts
2026-01-19T13:58:32.573+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/61/receipts
2026-01-19T13:58:32.599+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/61/receipts
2026-01-19T13:58:32.605+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/61/receipts
2026-01-19T13:58:32.611+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/61/receipts
2026-01-19T13:58:32.616+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/61/receipts", parameters={}
2026-01-19T13:58:32.618+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-19T13:58:32.618+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/61/receipts
2026-01-19T13:58:32.620+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 61, userId: 2
2026-01-19T13:58:32.620+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:32.620+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/61/receipts
2026-01-19T13:58:32.622+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14947a52] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:32.622+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/61/receipts", parameters={}
2026-01-19T13:58:32.623+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@541751884 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:58:32.623+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getReceipts(Long)
2026-01-19T13:58:32.624+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:58:32.625+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.controller.ExpenseController       : 영수증 목록 조회 요청 - expenseId: 61, userId: 2
2026-01-19T13:58:32.644+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:32.627+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:58:32.648+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@742d325a] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:32.660+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@265771904 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:58:32.660+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:58:32.668+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:58:32.670+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14947a52]
2026-01-19T13:58:32.674+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:58:32.674+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:32.686+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a0990cf] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:32.687+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@234371894 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:58:32.689+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:58:32.697+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:58:32.699+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@742d325a]
2026-01-19T13:58:32.701+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:58:32.701+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:32.706+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e192373] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:32.708+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@302979799 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:58:32.709+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:58:32.710+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-19T13:58:32.711+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a0990cf]
2026-01-19T13:58:32.714+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:58:32.715+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:32.719+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@aa3b8ac] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:32.719+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2086325983 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:58:32.720+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-19T13:58:32.721+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-19T13:58:32.737+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-19T13:58:32.746+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e192373]
2026-01-19T13:58:32.747+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:32.748+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fa79c89] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:32.749+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@678574773 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:58:32.752+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-19T13:58:32.752+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-19T13:58:32.752+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@aa3b8ac]
2026-01-19T13:58:32.753+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-19T13:58:32.755+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:32.769+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5301e860] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:32.769+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1156602996 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:58:32.788+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:58:32.789+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:58:32.818+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-19T13:58:32.818+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:58:32.821+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fa79c89]
2026-01-19T13:58:32.821+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5301e860]
2026-01-19T13:58:32.821+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:32.822+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:32.822+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f1f1ffb] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:32.823+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65159807] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:32.824+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@748655941 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:58:32.826+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@957034029 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:58:32.826+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:58:32.827+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:58:32.827+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:58:32.830+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 101(Long), 1(Long)
2026-01-19T13:58:32.836+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-19T13:58:32.836+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-19T13:58:32.837+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65159807]
2026-01-19T13:58:32.838+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f1f1ffb]
2026-01-19T13:58:32.839+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:58:32.839+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:32.840+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-19T13:58:32.840+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d2e64bb] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:32.841+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:58:32.842+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1255757858 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:58:32.844+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-19T13:58:32.859+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 101(Long), 1(Long)
2026-01-19T13:58:32.891+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-19T13:58:32.897+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d2e64bb]
2026-01-19T13:58:32.898+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:58:32.902+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 목록 조회 성공, data=[])]
2026-01-19T13:58:32.905+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:58:34.788+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/61?userId=2
2026-01-19T13:58:34.791+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing DELETE /api/expenses/61?userId=2
2026-01-19T13:58:34.792+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/61
2026-01-19T13:58:34.792+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured DELETE /api/expenses/61?userId=2
2026-01-19T13:58:34.793+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : DELETE "/api/expenses/61?userId=2", parameters={masked}
2026-01-19T13:58:34.800+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#deleteExpense(Long)
2026-01-19T13:58:34.807+09:00  INFO 4928 --- [http-nio-8080-exec-1] c.i.b.controller.ExpenseController       : 지출결의서 삭제 요청 - expenseId: 61, userId: 2
2026-01-19T13:58:34.820+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:34.820+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@100338d8]
2026-01-19T13:58:34.821+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@619955942 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will be managed by Spring
2026-01-19T13:58:34.821+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-19T13:58:34.822+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:58:34.826+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-19T13:58:34.832+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@100338d8]
2026-01-19T13:58:34.834+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@100338d8] from current transaction
2026-01-19T13:58:34.835+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-19T13:58:34.836+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-19T13:58:34.841+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-19T13:58:34.842+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@100338d8]
2026-01-19T13:58:34.843+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@100338d8] from current transaction
2026-01-19T13:58:34.843+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@100338d8]
2026-01-19T13:58:34.844+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@100338d8] from current transaction
2026-01-19T13:58:34.850+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@100338d8]
2026-01-19T13:58:34.852+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@100338d8] from current transaction
2026-01-19T13:58:34.852+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.MonthlyClosingMapper.isClosed    : ==>  Preparing: SELECT COUNT(*) > 0 FROM monthly_closing_tb WHERE company_id = ? AND closing_year = ? AND closing_month = ? AND is_closed = 1
2026-01-19T13:58:34.853+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.MonthlyClosingMapper.isClosed    : ==> Parameters: 1(Long), 2026(Integer), 1(Integer)
2026-01-19T13:58:34.854+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.MonthlyClosingMapper.isClosed    : <==      Total: 1
2026-01-19T13:58:34.855+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@100338d8]
2026-01-19T13:58:34.855+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@100338d8] from current transaction
2026-01-19T13:58:34.856+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.deleteExpenseReport            : ==>  Preparing: DELETE FROM expense_report_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-19T13:58:34.856+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.deleteExpenseReport            : ==> Parameters: 61(Long), 1(Long)
2026-01-19T13:58:34.859+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.deleteExpenseReport            : <==    Updates: 1
2026-01-19T13:58:34.860+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@100338d8]
2026-01-19T13:58:34.866+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@100338d8]
2026-01-19T13:58:34.866+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@100338d8]
2026-01-19T13:58:34.868+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@100338d8]
2026-01-19T13:58:34.891+09:00  INFO 4928 --- [http-nio-8080-exec-1] c.i.b.controller.ExpenseController       : 지출결의서 삭제 완료 - expenseId: 61
2026-01-19T13:58:34.892+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:58:34.893+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 삭제 완료, data=null)]
2026-01-19T13:58:34.900+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:58:36.176+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:58:36.180+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-19T13:58:36.182+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:58:36.184+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:58:36.184+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-19T13:58:36.189+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-19T13:58:36.191+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:58:36.194+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-19T13:58:36.196+09:00 DEBUG 4928 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-19T13:58:36.221+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:58:36.222+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-19T13:58:36.223+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:58:36.223+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-19T13:58:36.224+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:58:36.225+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:58:36.225+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-19T13:58:36.225+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-19T13:58:36.227+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-19T13:58:36.239+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-19T13:58:36.227+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:58:36.235+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:58:36.235+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-19T13:58:36.236+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:58:36.239+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-19T13:58:36.248+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:58:36.240+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-19T13:58:36.241+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:58:36.242+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:58:36.242+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-19T13:58:36.248+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-19T13:58:36.251+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:58:36.252+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.252+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.255+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a34032f] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.253+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:58:36.254+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-19T13:58:36.254+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-19T13:58:36.254+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:58:36.254+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@374c4c66] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.256+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:58:36.256+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-19T13:58:36.257+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-19T13:58:36.257+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:58:36.258+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@56804128 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:58:36.260+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.262+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1991134257 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:58:36.268+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.268+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.269+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.269+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:58:36.270+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ab954d3] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.270+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:58:36.270+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d02f9d9] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.271+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44e837a] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.271+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@766f55e8] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.273+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:58:36.273+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:58:36.283+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@314256703 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:58:36.284+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@309658910 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:58:36.284+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@913582592 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:58:36.285+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:58:36.286+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:58:36.287+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:58:36.287+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1479832828 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:58:36.288+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:58:36.288+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:58:36.289+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:58:36.289+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:58:36.290+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:58:36.290+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:58:36.290+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@374c4c66]
2026-01-19T13:58:36.291+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a34032f]
2026-01-19T13:58:36.293+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:58:36.293+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:58:36.293+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:58:36.293+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-19T13:58:36.293+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.294+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.294+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d02f9d9]
2026-01-19T13:58:36.300+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ab954d3]
2026-01-19T13:58:36.301+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44e837a]
2026-01-19T13:58:36.301+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@462f38f3] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.301+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d301cef] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.302+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.302+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.302+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.303+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:58:36.303+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1350565642 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:58:36.303+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@129099793 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:58:36.303+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28b83af2] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.303+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58cc1d0a] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.304+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52400f58] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.304+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@766f55e8]
2026-01-19T13:58:36.304+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:58:36.304+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:58:36.304+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1374121101 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:58:36.305+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@728725166 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:58:36.305+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2046615584 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:58:36.306+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.306+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:58:36.307+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:58:36.307+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:58:36.307+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:58:36.307+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:58:36.307+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1eaa7847] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.308+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:58:36.309+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@651428336 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:58:36.309+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:58:36.309+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:58:36.310+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:58:36.310+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:58:36.310+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:58:36.318+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:58:36.316+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:58:36.317+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d301cef]
2026-01-19T13:58:36.318+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@462f38f3]
2026-01-19T13:58:36.319+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28b83af2]
2026-01-19T13:58:36.319+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:58:36.320+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.320+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.320+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:58:36.321+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:58:36.321+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:58:36.321+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:58:36.322+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c158c14] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.323+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fd0a0e4] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.323+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52400f58]
2026-01-19T13:58:36.324+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58cc1d0a]
2026-01-19T13:58:36.392+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:58:36.393+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:58:36.326+09:00 DEBUG 4928 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:58:36.326+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1eaa7847]
2026-01-19T13:58:36.403+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:58:36.327+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1396885957 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:58:36.327+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@920022598 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:58:36.335+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.396+09:00 DEBUG 4928 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:58:36.402+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-19T13:58:36.409+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:58:36.409+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-19T13:58:36.409+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-19T13:58:36.409+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64491524] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.416+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:58:36.420+09:00 DEBUG 4928 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:58:36.421+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-19T13:58:36.425+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-19T13:58:36.433+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-19T13:58:36.434+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@908196922 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:58:36.436+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:58:36.436+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-19T13:58:36.442+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-19T13:58:36.444+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:58:36.510+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 21
2026-01-19T13:58:36.510+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 21
2026-01-19T13:58:36.509+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:58:36.524+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-19T13:58:36.525+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-19T13:58:36.526+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-19T13:58:36.527+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c158c14]
2026-01-19T13:58:36.527+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fd0a0e4]
2026-01-19T13:58:36.527+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:58:36.528+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-19T13:58:36.529+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-19T13:58:36.531+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.531+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.535+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:58:36.535+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-19T13:58:36.536+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.536+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fda490b] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.537+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@312088d6] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.537+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.542+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2304892a] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.539+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-19T13:58:36.539+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30f4edb4] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.540+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1332679112 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:58:36.542+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1798166934 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:58:36.542+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-19T13:58:36.543+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1788405997 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:58:36.543+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.544+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@65070992 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:58:36.544+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:58:36.551+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:58:36.551+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64491524]
2026-01-19T13:58:36.551+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:58:36.552+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20a491a] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.552+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:58:36.553+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:58:36.556+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:58:36.553+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:58:36.553+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.557+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3995fd4a] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.554+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:58:36.555+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@749727324 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:58:36.558+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@366559081 wrapping com.mysql.cj.jdbc.ConnectionImpl@219f8028] will not be managed by Spring
2026-01-19T13:58:36.558+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:58:36.558+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:58:36.559+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 3
2026-01-19T13:58:36.559+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-19T13:58:36.560+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:58:36.560+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fda490b]
2026-01-19T13:58:36.561+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@312088d6]
2026-01-19T13:58:36.561+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30f4edb4]
2026-01-19T13:58:36.565+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:58:36.565+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-19T13:58:36.567+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:58:36.568+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.571+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.571+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.571+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2304892a]
2026-01-19T13:58:36.573+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@213fede6] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.573+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4de8b378] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.574+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@206ff51a] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.574+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:58:36.574+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.574+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-19T13:58:36.575+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2087742171 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:58:36.575+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2025579563 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:58:36.576+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@937506286 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:58:36.577+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3995fd4a]
2026-01-19T13:58:36.579+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e1d4e7] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.580+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20a491a]
2026-01-19T13:58:36.581+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:58:36.582+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:58:36.583+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:58:36.584+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:58:36.585+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@69943400 wrapping com.mysql.cj.jdbc.ConnectionImpl@2246e4a9] will not be managed by Spring
2026-01-19T13:58:36.586+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.588+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-19T13:58:36.589+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-19T13:58:36.592+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:58:36.593+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-19T13:58:36.601+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:58:36.602+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@503b0f75] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.604+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:58:36.604+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@11128561 wrapping com.mysql.cj.jdbc.ConnectionImpl@3b77e7a5] will not be managed by Spring
2026-01-19T13:58:36.604+09:00 DEBUG 4928 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:58:36.605+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:58:36.605+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:58:36.621+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:58:36.621+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 26
2026-01-19T13:58:36.621+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@503b0f75]
2026-01-19T13:58:36.621+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@213fede6]
2026-01-19T13:58:36.622+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.622+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:58:36.622+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7695af44] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.622+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:58:36.623+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@672869549 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:58:36.624+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-19T13:58:36.624+09:00 DEBUG 4928 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:58:36.627+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-19T13:58:36.638+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 26
2026-01-19T13:58:36.639+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4de8b378]
2026-01-19T13:58:36.639+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:58:36.639+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.639+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e1d4e7]
2026-01-19T13:58:36.639+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@722be1f5] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.640+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:58:36.640+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2052128699 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:58:36.640+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=2, drafterId=2 (truncated)...]
2026-01-19T13:58:36.640+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-19T13:58:36.641+09:00 DEBUG 4928 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:58:36.642+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:58:36.642+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-19T13:58:36.643+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@206ff51a]
2026-01-19T13:58:36.643+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.644+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c021908] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.647+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@588965047 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:58:36.651+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:58:36.655+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long), 3(Long)
2026-01-19T13:58:36.670+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-19T13:58:36.670+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c021908]
2026-01-19T13:58:36.671+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 21
2026-01-19T13:58:36.671+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.671+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7695af44]
2026-01-19T13:58:36.671+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@626b3697] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.671+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 21
2026-01-19T13:58:36.671+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.672+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@239970699 wrapping com.mysql.cj.jdbc.ConnectionImpl@7239aec8] will not be managed by Spring
2026-01-19T13:58:36.672+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@722be1f5]
2026-01-19T13:58:36.672+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a371a46] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.672+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:58:36.672+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.673+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1896050635 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:58:36.673+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:58:36.673+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5baa7773] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.673+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:58:36.674+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1982009786 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:58:36.674+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:58:36.674+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:58:36.674+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:58:36.682+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:58:36.682+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:58:36.682+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:58:36.682+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5baa7773]
2026-01-19T13:58:36.682+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a371a46]
2026-01-19T13:58:36.682+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.682+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@626b3697]
2026-01-19T13:58:36.683+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.683+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@389e3c0c] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.683+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42e2e251] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.683+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:58:36.683+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@814208387 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:58:36.683+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-19T13:58:36.684+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1343567201 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:58:36.684+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:58:36.684+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-19T13:58:36.684+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-19T13:58:36.684+09:00 DEBUG 4928 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:58:36.684+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-19T13:58:36.694+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 26
2026-01-19T13:58:36.694+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 26
2026-01-19T13:58:36.694+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@389e3c0c]
2026-01-19T13:58:36.694+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42e2e251]
2026-01-19T13:58:36.694+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.694+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-19T13:58:36.696+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@490cee47] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.696+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58b4ed96] was not registered for synchronization because synchronization is not active
2026-01-19T13:58:36.696+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@3917110 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c05b533] will not be managed by Spring
2026-01-19T13:58:36.697+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@227634363 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ae83c7c] will not be managed by Spring
2026-01-19T13:58:36.697+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:58:36.697+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-19T13:58:36.697+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:58:36.698+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-19T13:58:36.702+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:58:36.702+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-19T13:58:36.702+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@490cee47]
2026-01-19T13:58:36.702+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58b4ed96]
2026-01-19T13:58:36.703+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:58:36.703+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-19T13:58:36.703+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-19T13:58:36.703+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-19T13:58:36.704+09:00 DEBUG 4928 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-19T13:58:36.705+09:00 DEBUG 4928 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
