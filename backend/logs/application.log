2026-02-09T11:16:13.238+09:00  INFO 40576 --- [main] c.i.backend.BackendApplication           : Starting BackendApplication using Java 17.0.17 with PID 40576 (C:\InnerSignature\backend\target\classes started by owner in C:\InnerSignature\backend)
2026-02-09T11:16:13.247+09:00 DEBUG 40576 --- [main] c.i.backend.BackendApplication           : Running with Spring Boot v3.5.8, Spring v6.2.14
2026-02-09T11:16:13.250+09:00  INFO 40576 --- [main] c.i.backend.BackendApplication           : The following 1 profile is active: "dev"
2026-02-09T11:16:14.578+09:00 DEBUG 40576 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Searching for mappers annotated with @Mapper
2026-02-09T11:16:14.579+09:00 DEBUG 40576 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Using auto-configuration base package 'com.innersignature.backend'
2026-02-09T11:16:14.856+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AccountCodeMappingMapper.class]
2026-02-09T11:16:14.857+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditLogMapper.class]
2026-02-09T11:16:14.857+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditRuleMapper.class]
2026-02-09T11:16:14.858+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\BudgetMapper.class]
2026-02-09T11:16:14.858+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyCardMapper.class]
2026-02-09T11:16:14.859+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyMapper.class]
2026-02-09T11:16:14.860+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CreditMapper.class]
2026-02-09T11:16:14.861+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseCategoryMapper.class]
2026-02-09T11:16:14.864+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseMapper.class]
2026-02-09T11:16:14.865+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\MonthlyClosingMapper.class]
2026-02-09T11:16:14.866+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PasswordResetTokenMapper.class]
2026-02-09T11:16:14.867+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PaymentMapper.class]
2026-02-09T11:16:14.868+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionMapper.class]
2026-02-09T11:16:14.870+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionPlanMapper.class]
2026-02-09T11:16:14.871+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserApproverMapper.class]
2026-02-09T11:16:14.874+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserCardMapper.class]
2026-02-09T11:16:14.875+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserMapper.class]
2026-02-09T11:16:14.880+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserSignatureMapper.class]
2026-02-09T11:16:14.887+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'accountCodeMappingMapper' and 'com.innersignature.backend.mapper.AccountCodeMappingMapper' mapperInterface
2026-02-09T11:16:14.896+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditLogMapper' and 'com.innersignature.backend.mapper.AuditLogMapper' mapperInterface
2026-02-09T11:16:14.900+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditRuleMapper' and 'com.innersignature.backend.mapper.AuditRuleMapper' mapperInterface
2026-02-09T11:16:14.906+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'budgetMapper' and 'com.innersignature.backend.mapper.BudgetMapper' mapperInterface
2026-02-09T11:16:14.909+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyCardMapper' and 'com.innersignature.backend.mapper.CompanyCardMapper' mapperInterface
2026-02-09T11:16:14.911+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyMapper' and 'com.innersignature.backend.mapper.CompanyMapper' mapperInterface
2026-02-09T11:16:14.915+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'creditMapper' and 'com.innersignature.backend.mapper.CreditMapper' mapperInterface
2026-02-09T11:16:14.918+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseCategoryMapper' and 'com.innersignature.backend.mapper.ExpenseCategoryMapper' mapperInterface
2026-02-09T11:16:14.931+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseMapper' and 'com.innersignature.backend.mapper.ExpenseMapper' mapperInterface
2026-02-09T11:16:14.933+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'monthlyClosingMapper' and 'com.innersignature.backend.mapper.MonthlyClosingMapper' mapperInterface
2026-02-09T11:16:14.937+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'passwordResetTokenMapper' and 'com.innersignature.backend.mapper.PasswordResetTokenMapper' mapperInterface
2026-02-09T11:16:14.940+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'paymentMapper' and 'com.innersignature.backend.mapper.PaymentMapper' mapperInterface
2026-02-09T11:16:14.942+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionMapper' and 'com.innersignature.backend.mapper.SubscriptionMapper' mapperInterface
2026-02-09T11:16:14.943+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionPlanMapper' and 'com.innersignature.backend.mapper.SubscriptionPlanMapper' mapperInterface
2026-02-09T11:16:14.945+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userApproverMapper' and 'com.innersignature.backend.mapper.UserApproverMapper' mapperInterface
2026-02-09T11:16:14.947+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userCardMapper' and 'com.innersignature.backend.mapper.UserCardMapper' mapperInterface
2026-02-09T11:16:14.951+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userMapper' and 'com.innersignature.backend.mapper.UserMapper' mapperInterface
2026-02-09T11:16:14.954+09:00 DEBUG 40576 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userSignatureMapper' and 'com.innersignature.backend.mapper.UserSignatureMapper' mapperInterface
2026-02-09T11:16:15.931+09:00  INFO 40576 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-02-09T11:16:15.966+09:00  INFO 40576 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-02-09T11:16:15.973+09:00  INFO 40576 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-02-09T11:16:16.146+09:00  INFO 40576 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-02-09T11:16:16.147+09:00  INFO 40576 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2809 ms
2026-02-09T11:16:16.260+09:00 DEBUG 40576 --- [main] c.i.b.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2026-02-09T11:16:16.260+09:00 DEBUG 40576 --- [main] c.i.backend.security.RateLimitFilter     : Filter 'rateLimitFilter' configured for use
2026-02-09T11:16:16.645+09:00 DEBUG 40576 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AccountCodeMappingMapper.xml]'
2026-02-09T11:16:16.666+09:00 DEBUG 40576 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditLogMapper.xml]'
2026-02-09T11:16:16.684+09:00 DEBUG 40576 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditRuleMapper.xml]'
2026-02-09T11:16:16.707+09:00 DEBUG 40576 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\BudgetMapper.xml]'
2026-02-09T11:16:16.721+09:00 DEBUG 40576 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyCardMapper.xml]'
2026-02-09T11:16:16.732+09:00 DEBUG 40576 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyMapper.xml]'
2026-02-09T11:16:16.750+09:00 DEBUG 40576 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CreditMapper.xml]'
2026-02-09T11:16:16.771+09:00 DEBUG 40576 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseCategoryMapper.xml]'
2026-02-09T11:16:16.826+09:00 DEBUG 40576 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseMapper.xml]'
2026-02-09T11:16:16.836+09:00 DEBUG 40576 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\MonthlyClosingMapper.xml]'
2026-02-09T11:16:16.845+09:00 DEBUG 40576 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PasswordResetTokenMapper.xml]'
2026-02-09T11:16:16.856+09:00 DEBUG 40576 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PaymentMapper.xml]'
2026-02-09T11:16:16.874+09:00 DEBUG 40576 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionMapper.xml]'
2026-02-09T11:16:16.883+09:00 DEBUG 40576 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionPlanMapper.xml]'
2026-02-09T11:16:16.907+09:00 DEBUG 40576 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserApproverMapper.xml]'
2026-02-09T11:16:16.916+09:00 DEBUG 40576 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserCardMapper.xml]'
2026-02-09T11:16:16.934+09:00 DEBUG 40576 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserMappeer.xml]'
2026-02-09T11:16:16.950+09:00 DEBUG 40576 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserSignatureMapper.xml]'
2026-02-09T11:16:17.704+09:00 DEBUG 40576 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 164 mappings in 'requestMappingHandlerMapping'
2026-02-09T11:16:17.838+09:00 DEBUG 40576 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /api/uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-02-09T11:16:17.868+09:00  WARN 40576 --- [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 825470ab-a130-4fcb-b08d-030b98a66150

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-02-09T11:16:17.880+09:00  INFO 40576 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-02-09T11:16:18.026+09:00 DEBUG 40576 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RateLimitFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-02-09T11:16:18.147+09:00 DEBUG 40576 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-02-09T11:16:18.222+09:00 DEBUG 40576 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-02-09T11:16:18.227+09:00 DEBUG 40576 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2026-02-09T11:16:18.511+09:00  INFO 40576 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-02-09T11:16:18.532+09:00  INFO 40576 --- [main] c.i.backend.BackendApplication           : Started BackendApplication in 6.018 seconds (process running for 6.563)
2026-02-09T11:16:27.966+09:00  INFO 40576 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-09T11:16:27.966+09:00  INFO 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-02-09T11:16:27.967+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2026-02-09T11:16:27.967+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2026-02-09T11:16:27.969+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2026-02-09T11:16:27.971+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@24eecabf
2026-02-09T11:16:27.971+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@75a226ea
2026-02-09T11:16:27.972+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-02-09T11:16:27.972+09:00  INFO 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms
2026-02-09T11:16:27.997+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-02-09T11:16:28.040+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-02-09T11:16:28.047+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-02-09T11:16:28.050+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-02-09T11:16:28.056+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-02-09T11:16:28.059+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-02-09T11:16:28.147+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_user, password=1234)]
2026-02-09T11:16:28.156+09:00  INFO 40576 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 로그인 시도 - username: test_user
2026-02-09T11:16:28.164+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:28.170+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14dbabfd] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:28.191+09:00  INFO 40576 --- [http-nio-8080-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-02-09T11:16:28.481+09:00  INFO 40576 --- [http-nio-8080-exec-2] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6f1b1104
2026-02-09T11:16:28.486+09:00  INFO 40576 --- [http-nio-8080-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-02-09T11:16:28.492+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@67523413 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:16:28.498+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-02-09T11:16:28.522+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_user(String)
2026-02-09T11:16:28.568+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-02-09T11:16:28.575+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14dbabfd]
2026-02-09T11:16:28.684+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:28.685+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cbebf4b] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:28.686+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@787754854 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:16:28.687+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:16:28.689+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 6(Long)
2026-02-09T11:16:28.706+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-02-09T11:16:28.708+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cbebf4b]
2026-02-09T11:16:28.851+09:00  INFO 40576 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 로그인 성공 - userId: 6, role: USER, companyId: 3
2026-02-09T11:16:28.852+09:00  INFO 40576 --- [http-nio-8080-exec-2] SECURITY                                 : LOGIN_SUCCESS userId=6 username=test_user role=USER
2026-02-09T11:16:28.868+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:28.879+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=6, username=test_user, password= (truncated)...]
2026-02-09T11:16:28.894+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:29.373+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-09T11:16:29.392+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-09T11:16:29.499+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/companies
2026-02-09T11:16:29.502+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-09T11:16:29.503+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-09T11:16:29.505+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-09T11:16:29.507+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:29.511+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@473f059b] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:29.530+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@672166527 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:16:29.532+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-09T11:16:29.565+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 6(Long)
2026-02-09T11:16:29.606+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-02-09T11:16:29.610+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@473f059b]
2026-02-09T11:16:29.614+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:29.629+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-09T11:16:29.635+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:30.411+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:16:30.410+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:16:30.416+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-09T11:16:30.416+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:16:30.416+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:16:30.417+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-09T11:16:30.428+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:16:30.440+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-09T11:16:30.440+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:16:30.448+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses
2026-02-09T11:16:30.450+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:16:30.476+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-09T11:16:30.492+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:16:30.500+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user", parameters={masked}
2026-02-09T11:16:30.502+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:16:30.500+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:16:30.506+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:16:30.508+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:30.513+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:30.513+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d18e6c5] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:30.513+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@792580a6] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:30.531+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@155105277 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:16:30.531+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1569761979 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:16:30.548+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:16:30.551+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:16:30.557+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-09T11:16:30.558+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-09T11:16:30.566+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:16:30.575+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@792580a6]
2026-02-09T11:16:30.577+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:30.580+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bddceec] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:30.581+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1050253925 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:16:30.595+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:16:30.596+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-09T11:16:30.600+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:16:30.600+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:16:30.604+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bddceec]
2026-02-09T11:16:30.610+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d18e6c5]
2026-02-09T11:16:30.614+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:30.630+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:30.642+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1477fe29] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:30.660+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:16:30.675+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:30.716+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:16:30.713+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1359064793 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:16:30.725+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:16:30.725+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:16:30.726+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:16:30.728+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:16:30.729+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-09T11:16:30.770+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:16:30.793+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:30.799+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-09T11:16:30.823+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c16b0b8] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:30.828+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1477fe29]
2026-02-09T11:16:30.912+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@145980304 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:16:30.914+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:30.915+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:16:30.915+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@439fd82d] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:30.919+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-09T11:16:30.919+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2094764133 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:16:30.923+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:16:30.947+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-09T11:16:30.959+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:16:30.964+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c16b0b8]
2026-02-09T11:16:30.965+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:30.966+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:16:30.967+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:16:30.989+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@439fd82d]
2026-02-09T11:16:30.990+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:31.013+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:31.022+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:16:31.024+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eca827b] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:31.028+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:16:31.030+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@243659755 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:16:31.032+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:16:31.045+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:16:31.046+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:16:31.058+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long)
2026-02-09T11:16:31.059+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:16:31.068+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:31.070+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38e95bfc] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:31.092+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@909030033 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:16:31.100+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:16:31.113+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-09T11:16:31.118+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-02-09T11:16:31.125+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eca827b]
2026-02-09T11:16:31.131+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:31.142+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d68b5a] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:31.144+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:16:31.146+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1131211410 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:16:31.178+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38e95bfc]
2026-02-09T11:16:31.195+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:16:31.196+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:31.208+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-09T11:16:31.228+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:16:31.246+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:31.258+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:16:31.282+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-09T11:16:31.314+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:16:31.343+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d68b5a]
2026-02-09T11:16:31.343+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:16:31.353+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:31.358+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:16:31.358+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44f44582] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:31.367+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:16:31.370+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@171494115 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:16:31.390+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:31.390+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:16:31.390+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f1072e] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:31.391+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-09T11:16:31.391+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@255256928 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:16:31.405+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:16:31.407+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:16:31.412+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-09T11:16:31.412+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44f44582]
2026-02-09T11:16:31.430+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:31.461+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@789e81bb] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:31.495+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:16:31.509+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@513803135 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:16:31.512+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f1072e]
2026-02-09T11:16:31.524+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:16:31.525+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:31.531+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:16:31.525+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long)
2026-02-09T11:16:31.534+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:31.539+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:16:31.558+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:16:31.562+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:16:31.562+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:16:31.565+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:16:31.567+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-02-09T11:16:31.576+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:31.576+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@789e81bb]
2026-02-09T11:16:31.576+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36f88983] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:31.578+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:31.580+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@943681836 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:16:31.586+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:16:31.597+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:16:31.600+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-09T11:16:31.613+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:31.627+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-09T11:16:31.631+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:16:31.638+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses
2026-02-09T11:16:31.642+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36f88983]
2026-02-09T11:16:31.643+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-09T11:16:31.644+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:31.644+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user", parameters={masked}
2026-02-09T11:16:31.646+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:16:31.648+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:16:31.650+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:31.664+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:31.671+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@346a26fc] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:31.681+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@984473089 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:16:31.728+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:16:31.729+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-09T11:16:31.732+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:16:31.732+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@346a26fc]
2026-02-09T11:16:31.733+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:31.734+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b90d43a] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:31.740+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@514347122 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:16:31.744+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:16:31.745+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-09T11:16:31.748+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:16:31.749+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b90d43a]
2026-02-09T11:16:31.750+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:31.751+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66f31295] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:31.753+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@465513333 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:16:31.759+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:16:31.761+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-09T11:16:31.766+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-09T11:16:31.767+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66f31295]
2026-02-09T11:16:31.769+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:31.770+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36ef161] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:31.771+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2113354787 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:16:31.771+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:16:31.772+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-09T11:16:31.774+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:16:31.775+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36ef161]
2026-02-09T11:16:31.777+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:31.778+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e255166] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:31.779+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1781812794 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:16:31.780+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:16:31.780+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long)
2026-02-09T11:16:31.786+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-02-09T11:16:31.792+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e255166]
2026-02-09T11:16:31.793+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:31.794+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ba13ac0] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:31.795+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@255586995 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:16:31.795+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:16:31.800+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-09T11:16:31.807+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-09T11:16:31.809+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ba13ac0]
2026-02-09T11:16:31.810+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:31.810+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ac674d4] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:31.811+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1753428598 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:16:31.811+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:16:31.812+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-09T11:16:31.816+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:16:31.817+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ac674d4]
2026-02-09T11:16:31.817+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:31.821+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e7a35f8] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:31.821+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@661882935 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:16:31.822+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:16:31.823+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long)
2026-02-09T11:16:31.827+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-02-09T11:16:31.830+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e7a35f8]
2026-02-09T11:16:31.831+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:31.832+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:16:31.833+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:32.920+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-02-09T11:16:32.920+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-02-09T11:16:32.927+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:16:32.933+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:16:32.937+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-02-09T11:16:32.945+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:16:32.948+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/me/signatures
2026-02-09T11:16:32.960+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:16:32.960+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-02-09T11:16:32.961+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:16:32.972+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-02-09T11:16:32.973+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:32.973+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-02-09T11:16:32.973+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b69b7ff] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:32.973+09:00  INFO 40576 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 6, companyId: 3
2026-02-09T11:16:32.975+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:32.983+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c1604dc] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:32.997+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@793234607 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:16:33.014+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:16:33.018+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1382339007 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:16:33.030+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-09T11:16:33.033+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-02-09T11:16:33.047+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.U.findByUserId                   : ==> Parameters: 6(Long), 3(Long)
2026-02-09T11:16:33.062+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:16:33.074+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b69b7ff]
2026-02-09T11:16:33.075+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:33.076+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:16:33.078+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:33.078+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-02-09T11:16:33.082+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c1604dc]
2026-02-09T11:16:33.095+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:33.119+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=10, userId=6, s (truncated)...]
2026-02-09T11:16:33.139+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:33.142+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-02-09T11:16:33.150+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/me/signatures
2026-02-09T11:16:33.166+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-02-09T11:16:33.177+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-02-09T11:16:33.177+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-02-09T11:16:33.180+09:00  INFO 40576 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 6, companyId: 3
2026-02-09T11:16:33.182+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:33.183+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b610998] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:33.196+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1924918588 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:16:33.208+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-02-09T11:16:33.211+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : ==> Parameters: 6(Long), 3(Long)
2026-02-09T11:16:33.226+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-02-09T11:16:33.228+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b610998]
2026-02-09T11:16:33.229+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:33.230+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=10, userId=6, s (truncated)...]
2026-02-09T11:16:33.232+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:34.629+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:16:34.629+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-09T11:16:34.642+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:16:34.649+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/companies
2026-02-09T11:16:34.654+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:16:34.655+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-09T11:16:34.655+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:16:34.729+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-09T11:16:34.740+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:16:34.740+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-09T11:16:34.740+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:34.741+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:34.741+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7713b8aa] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:34.742+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e0be35b] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:34.748+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2131741107 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:16:34.748+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1177463582 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:16:34.750+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-09T11:16:34.750+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:16:34.754+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 6(Long)
2026-02-09T11:16:34.755+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-09T11:16:34.765+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:16:34.766+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-02-09T11:16:34.772+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7713b8aa]
2026-02-09T11:16:34.773+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e0be35b]
2026-02-09T11:16:34.774+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:34.774+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:34.775+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:16:34.776+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-09T11:16:34.777+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:34.780+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:34.788+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:16:34.803+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:16:34.814+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:16:34.816+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:16:34.819+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:16:34.820+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:34.821+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39e4f93b] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:34.822+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1210814983 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:16:34.823+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:16:34.825+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-09T11:16:34.830+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:16:34.830+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39e4f93b]
2026-02-09T11:16:34.832+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:34.833+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:16:34.838+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:34.847+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:16:34.860+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:16:34.864+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:16:34.870+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:16:34.874+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:16:34.875+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:34.876+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d21c56f] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:34.876+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@611032241 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:16:34.877+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:16:34.878+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-09T11:16:34.888+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:16:34.889+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d21c56f]
2026-02-09T11:16:34.891+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:34.892+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:16:34.896+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:34.933+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:16:34.933+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-02-09T11:16:34.942+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/me/signatures
2026-02-09T11:16:34.942+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:16:34.943+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-02-09T11:16:34.944+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:16:34.944+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-02-09T11:16:34.945+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:16:34.945+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-02-09T11:16:34.945+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:16:34.945+09:00  INFO 40576 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 6, companyId: 3
2026-02-09T11:16:34.946+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:34.946+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:34.946+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1653753] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:34.947+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64b8d6e7] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:34.947+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@506402674 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:16:34.948+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1786721280 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:16:34.949+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-02-09T11:16:34.948+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:16:34.949+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==> Parameters: 6(Long), 3(Long)
2026-02-09T11:16:34.954+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-09T11:16:34.961+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:16:34.962+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-02-09T11:16:34.962+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1653753]
2026-02-09T11:16:34.962+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64b8d6e7]
2026-02-09T11:16:34.963+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:34.963+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:34.963+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:16:34.963+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=10, userId=6, s (truncated)...]
2026-02-09T11:16:34.964+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:34.966+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:34.982+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:16:34.983+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-02-09T11:16:34.994+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/me/signatures
2026-02-09T11:16:34.994+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:16:34.996+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-02-09T11:16:34.999+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:16:34.999+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-02-09T11:16:35.001+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:16:35.004+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-02-09T11:16:35.005+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:16:35.012+09:00  INFO 40576 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 6, companyId: 3
2026-02-09T11:16:35.012+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:35.015+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:35.015+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d1934ce] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:35.015+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a6a256e] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:35.019+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@690402741 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:16:35.022+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1498395286 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:16:35.023+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:16:35.031+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-02-09T11:16:35.033+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-09T11:16:35.042+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : ==> Parameters: 6(Long), 3(Long)
2026-02-09T11:16:35.049+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:16:35.049+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-02-09T11:16:35.050+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d1934ce]
2026-02-09T11:16:35.050+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a6a256e]
2026-02-09T11:16:35.050+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:35.052+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:35.053+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:16:35.054+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=10, userId=6, s (truncated)...]
2026-02-09T11:16:35.055+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:35.058+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:36.213+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-02-09T11:16:36.213+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-02-09T11:16:36.215+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:16:36.219+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-02-09T11:16:36.222+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:16:36.223+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:16:36.226+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/cards/company
2026-02-09T11:16:36.226+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:16:36.227+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-02-09T11:16:36.227+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:16:36.227+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-02-09T11:16:36.230+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:36.231+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-02-09T11:16:36.232+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@173c47e5] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:36.233+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:36.237+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e241c14] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:36.244+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@415900010 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:16:36.244+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@982918358 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:16:36.248+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:16:36.249+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-02-09T11:16:36.264+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-09T11:16:36.264+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-09T11:16:36.282+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:16:36.282+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 1
2026-02-09T11:16:36.292+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@173c47e5]
2026-02-09T11:16:36.292+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e241c14]
2026-02-09T11:16:36.293+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:36.296+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:36.296+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:16:36.304+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=3, cardNa (truncated)...]
2026-02-09T11:16:36.307+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:36.309+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:36.310+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-02-09T11:16:36.322+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/cards/company
2026-02-09T11:16:36.331+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-02-09T11:16:36.333+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-02-09T11:16:36.337+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-02-09T11:16:36.339+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:36.341+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@647404b4] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:36.341+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2051474464 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:16:36.342+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-02-09T11:16:36.343+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-09T11:16:36.347+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 1
2026-02-09T11:16:36.347+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@647404b4]
2026-02-09T11:16:36.349+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:36.349+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=3, cardNa (truncated)...]
2026-02-09T11:16:36.350+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:37.427+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:16:37.428+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-09T11:16:37.441+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:16:37.444+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/companies
2026-02-09T11:16:37.449+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:16:37.497+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-09T11:16:37.510+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:16:37.510+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-09T11:16:37.511+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:16:37.511+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-09T11:16:37.512+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:37.526+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:37.531+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1abb9596] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:37.531+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6383975f] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:37.544+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@492080048 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:16:37.544+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@755429704 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:16:37.548+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:16:37.548+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-09T11:16:37.549+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-09T11:16:37.556+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 6(Long)
2026-02-09T11:16:37.562+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:16:37.562+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-02-09T11:16:37.563+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1abb9596]
2026-02-09T11:16:37.563+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6383975f]
2026-02-09T11:16:37.564+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:37.564+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:37.564+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:16:37.565+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-09T11:16:37.565+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:37.566+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:37.576+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:16:37.583+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:16:37.589+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:16:37.591+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:16:37.592+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:16:37.592+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:37.593+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b423e3b] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:37.594+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@158325338 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:16:37.595+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:16:37.596+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-09T11:16:37.599+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:16:37.600+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b423e3b]
2026-02-09T11:16:37.602+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:37.603+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:16:37.604+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:37.609+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:16:37.621+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:16:37.623+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:16:37.624+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:16:37.624+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:16:37.624+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:37.625+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3959ed42] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:37.628+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1560416739 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:16:37.628+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:16:37.630+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-09T11:16:37.632+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:16:37.633+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3959ed42]
2026-02-09T11:16:37.634+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:37.635+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:16:37.637+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:37.708+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:16:37.708+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-02-09T11:16:37.714+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:16:37.715+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/cards/company
2026-02-09T11:16:37.715+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:16:37.716+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-02-09T11:16:37.716+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:16:37.716+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-02-09T11:16:37.724+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:16:37.725+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-02-09T11:16:37.725+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:37.725+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:37.727+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55bddbc0] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:37.727+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60dc1118] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:37.727+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2081804252 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:16:37.728+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1535379634 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:16:37.729+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:16:37.729+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-02-09T11:16:37.730+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-09T11:16:37.731+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-09T11:16:37.733+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:16:37.733+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 1
2026-02-09T11:16:37.734+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55bddbc0]
2026-02-09T11:16:37.734+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60dc1118]
2026-02-09T11:16:37.735+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:37.738+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:37.738+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:16:37.739+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=3, cardNa (truncated)...]
2026-02-09T11:16:37.739+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:37.739+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:37.742+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:16:37.744+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-02-09T11:16:37.750+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:16:37.754+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/cards/company
2026-02-09T11:16:37.759+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:16:37.759+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-02-09T11:16:37.759+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:16:37.760+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-02-09T11:16:37.760+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:16:37.761+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-02-09T11:16:37.764+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:37.762+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:37.783+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1372bc70] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:37.787+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5138dd52] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:37.788+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1080300089 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:16:37.788+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1646670628 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:16:37.789+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-02-09T11:16:37.789+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:16:37.790+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-09T11:16:37.791+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-09T11:16:37.794+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 1
2026-02-09T11:16:37.794+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1372bc70]
2026-02-09T11:16:37.795+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:16:37.795+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5138dd52]
2026-02-09T11:16:37.795+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:37.795+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:37.796+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=3, cardNa (truncated)...]
2026-02-09T11:16:37.796+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:16:37.797+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:37.797+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:38.947+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/user
2026-02-09T11:16:38.950+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-02-09T11:16:38.954+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/cards/user
2026-02-09T11:16:38.958+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-02-09T11:16:38.958+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-02-09T11:16:38.973+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-02-09T11:16:38.975+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:38.975+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79b5e956] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:38.978+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2130994928 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:16:38.979+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.created_at DESC
2026-02-09T11:16:38.980+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 6(Long)
2026-02-09T11:16:38.995+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.U.findActiveByUserId             : <==      Total: 1
2026-02-09T11:16:38.996+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79b5e956]
2026-02-09T11:16:38.997+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:39.003+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[UserCardDto(cardId=7, userId=6, cardName=이너사 (truncated)...]
2026-02-09T11:16:39.006+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:40.756+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:16:40.757+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/6/approvers
2026-02-09T11:16:40.757+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/6/approvers
2026-02-09T11:16:40.761+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:16:40.763+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:16:40.766+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:16:40.769+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:16:40.765+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/6/approvers
2026-02-09T11:16:40.773+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:40.776+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/6/approvers
2026-02-09T11:16:40.776+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4746b0fe] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:40.813+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/6/approvers
2026-02-09T11:16:40.824+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/6/approvers", parameters={}
2026-02-09T11:16:40.829+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getApprovers(Long)
2026-02-09T11:16:40.833+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-02-09T11:16:40.833+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@823544111 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:16:40.837+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:16:40.838+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-09T11:16:40.847+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-02-09T11:16:40.849+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:40.858+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:16:40.858+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ba4216e] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:40.859+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4746b0fe]
2026-02-09T11:16:40.861+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:40.862+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:16:40.866+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:40.866+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1686565550 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:16:40.877+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserApproverMapper.findByUserId  : ==>  Preparing: SELECT uam.*, u.korean_name AS approver_name, uc.position AS approver_position FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id LEFT JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) ORDER BY uam.priority ASC, uam.created_at ASC
2026-02-09T11:16:40.880+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserApproverMapper.findByUserId  : ==> Parameters: 6(Long), 3(Long)
2026-02-09T11:16:40.889+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserApproverMapper.findByUserId  : <==      Total: 2
2026-02-09T11:16:40.890+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ba4216e]
2026-02-09T11:16:40.891+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:40.892+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserApproverMappingDto(mappingId=4, userId=6, approve (truncated)...]
2026-02-09T11:16:40.894+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:40.902+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/approvers
2026-02-09T11:16:40.902+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/6/approvers
2026-02-09T11:16:40.907+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/6/approvers
2026-02-09T11:16:40.908+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/6/approvers
2026-02-09T11:16:40.909+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/6/approvers", parameters={}
2026-02-09T11:16:40.911+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/approvers
2026-02-09T11:16:40.912+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getApprovers(Long)
2026-02-09T11:16:40.913+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-02-09T11:16:40.914+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/approvers
2026-02-09T11:16:40.915+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-02-09T11:16:40.916+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/approvers
2026-02-09T11:16:40.916+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:40.919+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/approvers", parameters={}
2026-02-09T11:16:40.922+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17ef321a] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:40.923+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getApprovers()
2026-02-09T11:16:40.923+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@750229756 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:16:40.924+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:40.925+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserApproverMapper.findByUserId  : ==>  Preparing: SELECT uam.*, u.korean_name AS approver_name, uc.position AS approver_position FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id LEFT JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) ORDER BY uam.priority ASC, uam.created_at ASC
2026-02-09T11:16:40.926+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49494225] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:40.929+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserApproverMapper.findByUserId  : ==> Parameters: 6(Long), 3(Long)
2026-02-09T11:16:40.929+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1331623488 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:16:40.930+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.findApprovers    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY CASE uc.role WHEN 'USER' THEN 1 WHEN 'ACCOUNTANT' THEN 1 WHEN 'ADMIN' THEN 2 WHEN 'CEO' THEN 3 ELSE 99 END, u.korean_name
2026-02-09T11:16:40.931+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.findApprovers    : ==> Parameters: 3(Long)
2026-02-09T11:16:40.939+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserApproverMapper.findByUserId  : <==      Total: 2
2026-02-09T11:16:40.941+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17ef321a]
2026-02-09T11:16:40.942+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:40.944+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.findApprovers    : <==      Total: 4
2026-02-09T11:16:40.947+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserApproverMappingDto(mappingId=4, userId=6, approve (truncated)...]
2026-02-09T11:16:40.947+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49494225]
2026-02-09T11:16:40.948+09:00  INFO 40576 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 결재자 목록 조회 완료 - companyId: 3, count: 4
2026-02-09T11:16:40.948+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:40.949+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:40.956+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재자 목록 조회 성공, data=[UserDto(userId=7, username=test_accountant, pa (truncated)...]
2026-02-09T11:16:40.958+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:16:40.961+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/approvers
2026-02-09T11:16:40.988+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/approvers
2026-02-09T11:16:40.992+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/approvers
2026-02-09T11:16:40.995+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/approvers", parameters={}
2026-02-09T11:16:41.008+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getApprovers()
2026-02-09T11:16:41.009+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:16:41.030+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@157cf1cd] was not registered for synchronization because synchronization is not active
2026-02-09T11:16:41.037+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@37321853 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:16:41.039+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findApprovers    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY CASE uc.role WHEN 'USER' THEN 1 WHEN 'ACCOUNTANT' THEN 1 WHEN 'ADMIN' THEN 2 WHEN 'CEO' THEN 3 ELSE 99 END, u.korean_name
2026-02-09T11:16:41.041+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findApprovers    : ==> Parameters: 3(Long)
2026-02-09T11:16:41.054+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findApprovers    : <==      Total: 4
2026-02-09T11:16:41.054+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@157cf1cd]
2026-02-09T11:16:41.055+09:00  INFO 40576 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 결재자 목록 조회 완료 - companyId: 3, count: 4
2026-02-09T11:16:41.057+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:16:41.062+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재자 목록 조회 성공, data=[UserDto(userId=7, username=test_accountant, pa (truncated)...]
2026-02-09T11:16:41.064+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:21:10.396+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/6/approvers
2026-02-09T11:21:10.426+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/6/approvers
2026-02-09T11:21:10.433+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/6/approvers
2026-02-09T11:21:10.434+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/6/approvers
2026-02-09T11:21:10.435+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/6/approvers", parameters={}
2026-02-09T11:21:10.436+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getApprovers(Long)
2026-02-09T11:21:10.437+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-02-09T11:21:10.438+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-02-09T11:21:10.439+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:21:10.439+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73a67a0e] was not registered for synchronization because synchronization is not active
2026-02-09T11:21:10.443+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@223867552 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:21:10.446+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserApproverMapper.findByUserId  : ==>  Preparing: SELECT uam.*, u.korean_name AS approver_name, uc.position AS approver_position FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id LEFT JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) ORDER BY uam.priority ASC, uam.created_at ASC
2026-02-09T11:21:10.448+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserApproverMapper.findByUserId  : ==> Parameters: 6(Long), 3(Long)
2026-02-09T11:21:10.451+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserApproverMapper.findByUserId  : <==      Total: 2
2026-02-09T11:21:10.452+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73a67a0e]
2026-02-09T11:21:10.453+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:21:10.455+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserApproverMappingDto(mappingId=4, userId=6, approve (truncated)...]
2026-02-09T11:21:10.456+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:21:10.465+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/approvers
2026-02-09T11:21:10.469+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/approvers
2026-02-09T11:21:10.470+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/approvers
2026-02-09T11:21:10.471+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/approvers
2026-02-09T11:21:10.472+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/approvers", parameters={}
2026-02-09T11:21:10.473+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getApprovers()
2026-02-09T11:21:10.473+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:21:10.473+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bcbbc98] was not registered for synchronization because synchronization is not active
2026-02-09T11:21:10.474+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1383441492 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:21:10.474+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findApprovers    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY CASE uc.role WHEN 'USER' THEN 1 WHEN 'ACCOUNTANT' THEN 1 WHEN 'ADMIN' THEN 2 WHEN 'CEO' THEN 3 ELSE 99 END, u.korean_name
2026-02-09T11:21:10.476+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findApprovers    : ==> Parameters: 3(Long)
2026-02-09T11:21:10.481+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findApprovers    : <==      Total: 4
2026-02-09T11:21:10.481+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bcbbc98]
2026-02-09T11:21:10.482+09:00  INFO 40576 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 결재자 목록 조회 완료 - companyId: 3, count: 4
2026-02-09T11:21:10.483+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:21:10.483+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재자 목록 조회 성공, data=[UserDto(userId=7, username=test_accountant, pa (truncated)...]
2026-02-09T11:21:10.484+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:21:12.822+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/6/approvers
2026-02-09T11:21:12.827+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/6/approvers
2026-02-09T11:21:12.833+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/6/approvers
2026-02-09T11:21:12.836+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/6/approvers
2026-02-09T11:21:12.837+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/6/approvers", parameters={}
2026-02-09T11:21:12.838+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getApprovers(Long)
2026-02-09T11:21:12.839+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-02-09T11:21:12.839+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-02-09T11:21:12.840+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:21:12.841+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6598fb3] was not registered for synchronization because synchronization is not active
2026-02-09T11:21:12.843+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@930555224 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:21:12.844+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserApproverMapper.findByUserId  : ==>  Preparing: SELECT uam.*, u.korean_name AS approver_name, uc.position AS approver_position FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id LEFT JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) ORDER BY uam.priority ASC, uam.created_at ASC
2026-02-09T11:21:12.848+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserApproverMapper.findByUserId  : ==> Parameters: 6(Long), 3(Long)
2026-02-09T11:21:12.851+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserApproverMapper.findByUserId  : <==      Total: 2
2026-02-09T11:21:12.851+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6598fb3]
2026-02-09T11:21:12.852+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:21:12.853+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserApproverMappingDto(mappingId=4, userId=6, approve (truncated)...]
2026-02-09T11:21:12.854+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:21:12.860+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/approvers
2026-02-09T11:21:12.869+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/approvers
2026-02-09T11:21:12.870+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/approvers
2026-02-09T11:21:12.871+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/approvers
2026-02-09T11:21:12.871+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/approvers", parameters={}
2026-02-09T11:21:12.872+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getApprovers()
2026-02-09T11:21:12.873+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:21:12.873+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@159e7b9d] was not registered for synchronization because synchronization is not active
2026-02-09T11:21:12.874+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1223833826 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:21:12.875+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.findApprovers    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY CASE uc.role WHEN 'USER' THEN 1 WHEN 'ACCOUNTANT' THEN 1 WHEN 'ADMIN' THEN 2 WHEN 'CEO' THEN 3 ELSE 99 END, u.korean_name
2026-02-09T11:21:12.878+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.findApprovers    : ==> Parameters: 3(Long)
2026-02-09T11:21:12.884+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.findApprovers    : <==      Total: 4
2026-02-09T11:21:12.884+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@159e7b9d]
2026-02-09T11:21:12.884+09:00  INFO 40576 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 결재자 목록 조회 완료 - companyId: 3, count: 4
2026-02-09T11:21:12.885+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:21:12.886+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재자 목록 조회 성공, data=[UserDto(userId=7, username=test_accountant, pa (truncated)...]
2026-02-09T11:21:12.888+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:21:19.422+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/6/approvers
2026-02-09T11:21:19.482+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/6/approvers
2026-02-09T11:21:19.496+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/6/approvers
2026-02-09T11:21:19.498+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/6/approvers
2026-02-09T11:21:19.500+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/6/approvers", parameters={}
2026-02-09T11:21:19.502+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getApprovers(Long)
2026-02-09T11:21:19.504+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-02-09T11:21:19.508+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-02-09T11:21:19.513+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:21:19.514+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b095dc] was not registered for synchronization because synchronization is not active
2026-02-09T11:21:19.521+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@435973756 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:21:19.522+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserApproverMapper.findByUserId  : ==>  Preparing: SELECT uam.*, u.korean_name AS approver_name, uc.position AS approver_position FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id LEFT JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) ORDER BY uam.priority ASC, uam.created_at ASC
2026-02-09T11:21:19.523+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserApproverMapper.findByUserId  : ==> Parameters: 6(Long), 3(Long)
2026-02-09T11:21:19.527+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserApproverMapper.findByUserId  : <==      Total: 2
2026-02-09T11:21:19.529+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b095dc]
2026-02-09T11:21:19.530+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:21:19.531+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserApproverMappingDto(mappingId=4, userId=6, approve (truncated)...]
2026-02-09T11:21:19.532+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:21:19.541+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/approvers
2026-02-09T11:21:19.551+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/approvers
2026-02-09T11:21:19.555+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/approvers
2026-02-09T11:21:19.558+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/approvers
2026-02-09T11:21:19.564+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/approvers", parameters={}
2026-02-09T11:21:19.565+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getApprovers()
2026-02-09T11:21:19.566+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:21:19.567+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@452bcc35] was not registered for synchronization because synchronization is not active
2026-02-09T11:21:19.588+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1434614359 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:21:19.589+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.findApprovers    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY CASE uc.role WHEN 'USER' THEN 1 WHEN 'ACCOUNTANT' THEN 1 WHEN 'ADMIN' THEN 2 WHEN 'CEO' THEN 3 ELSE 99 END, u.korean_name
2026-02-09T11:21:19.591+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.findApprovers    : ==> Parameters: 3(Long)
2026-02-09T11:21:19.600+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.findApprovers    : <==      Total: 4
2026-02-09T11:21:19.602+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@452bcc35]
2026-02-09T11:21:19.602+09:00  INFO 40576 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 결재자 목록 조회 완료 - companyId: 3, count: 4
2026-02-09T11:21:19.603+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:21:19.604+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재자 목록 조회 성공, data=[UserDto(userId=7, username=test_accountant, pa (truncated)...]
2026-02-09T11:21:19.605+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:21:31.002+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/6/approvers
2026-02-09T11:21:31.020+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/6/approvers
2026-02-09T11:21:31.023+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/6/approvers
2026-02-09T11:21:31.026+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/6/approvers
2026-02-09T11:21:31.033+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/6/approvers", parameters={}
2026-02-09T11:21:31.037+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getApprovers(Long)
2026-02-09T11:21:31.038+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-02-09T11:21:31.042+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-02-09T11:21:31.043+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:21:31.047+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60ca913c] was not registered for synchronization because synchronization is not active
2026-02-09T11:21:31.068+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1502320965 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:21:31.073+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserApproverMapper.findByUserId  : ==>  Preparing: SELECT uam.*, u.korean_name AS approver_name, uc.position AS approver_position FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id LEFT JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) ORDER BY uam.priority ASC, uam.created_at ASC
2026-02-09T11:21:31.074+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserApproverMapper.findByUserId  : ==> Parameters: 6(Long), 3(Long)
2026-02-09T11:21:31.112+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserApproverMapper.findByUserId  : <==      Total: 2
2026-02-09T11:21:31.134+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60ca913c]
2026-02-09T11:21:31.135+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:21:31.166+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserApproverMappingDto(mappingId=4, userId=6, approve (truncated)...]
2026-02-09T11:21:31.263+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:21:31.283+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/approvers
2026-02-09T11:21:31.305+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/approvers
2026-02-09T11:21:31.313+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/approvers
2026-02-09T11:21:31.314+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/approvers
2026-02-09T11:21:31.324+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/approvers", parameters={}
2026-02-09T11:21:31.330+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getApprovers()
2026-02-09T11:21:31.332+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:21:31.332+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12fd9ceb] was not registered for synchronization because synchronization is not active
2026-02-09T11:21:31.333+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1211488418 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:21:31.334+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.findApprovers    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY CASE uc.role WHEN 'USER' THEN 1 WHEN 'ACCOUNTANT' THEN 1 WHEN 'ADMIN' THEN 2 WHEN 'CEO' THEN 3 ELSE 99 END, u.korean_name
2026-02-09T11:21:31.337+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.findApprovers    : ==> Parameters: 3(Long)
2026-02-09T11:21:31.347+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.findApprovers    : <==      Total: 4
2026-02-09T11:21:31.350+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12fd9ceb]
2026-02-09T11:21:31.351+09:00  INFO 40576 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 결재자 목록 조회 완료 - companyId: 3, count: 4
2026-02-09T11:21:31.353+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:21:31.353+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재자 목록 조회 성공, data=[UserDto(userId=7, username=test_accountant, pa (truncated)...]
2026-02-09T11:21:31.355+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:04.167+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-02-09T11:22:04.183+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-02-09T11:22:04.195+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/logout
2026-02-09T11:22:04.202+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-02-09T11:22:04.212+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-02-09T11:22:04.213+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-02-09T11:22:04.233+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiI2IiwidXNlcm5hbWUiOiJ (truncated)...]
2026-02-09T11:22:04.273+09:00  INFO 40576 --- [http-nio-8080-exec-10] SECURITY                                 : LOGOUT userId=6
2026-02-09T11:22:04.327+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:04.365+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-02-09T11:22:04.383+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:07.029+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-02-09T11:22:07.033+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-02-09T11:22:07.037+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-02-09T11:22:07.043+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-02-09T11:22:07.053+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-02-09T11:22:07.053+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-02-09T11:22:07.055+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_exec, password=1234)]
2026-02-09T11:22:07.056+09:00  INFO 40576 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 로그인 시도 - username: test_exec
2026-02-09T11:22:07.068+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:07.069+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c9450a8] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:07.080+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1475213125 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:07.082+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-02-09T11:22:07.084+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_exec(String)
2026-02-09T11:22:07.098+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-02-09T11:22:07.100+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c9450a8]
2026-02-09T11:22:07.198+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:07.200+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@393391ed] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:07.201+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1640284909 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:07.201+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:07.203+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:07.206+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:07.211+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@393391ed]
2026-02-09T11:22:07.212+09:00  INFO 40576 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 로그인 성공 - userId: 9, role: ADMIN, companyId: 3
2026-02-09T11:22:07.212+09:00  INFO 40576 --- [http-nio-8080-exec-8] SECURITY                                 : LOGIN_SUCCESS userId=9 username=test_exec role=ADMIN
2026-02-09T11:22:07.213+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:07.216+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=9, username=test_exec, password= (truncated)...]
2026-02-09T11:22:07.217+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:07.429+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-09T11:22:07.447+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-09T11:22:07.453+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies
2026-02-09T11:22:07.474+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-09T11:22:07.481+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-09T11:22:07.554+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-09T11:22:07.743+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:07.849+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f6e01b2] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:07.980+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1417727307 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:08.005+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-09T11:22:08.018+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 9(Long)
2026-02-09T11:22:08.036+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-09T11:22:08.050+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f6e01b2]
2026-02-09T11:22:08.052+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:08.069+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-09T11:22:08.092+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:08.139+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:22:08.144+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:22:08.145+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:22:08.146+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:22:08.148+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:22:08.169+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:22:08.171+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:08.191+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:08.191+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:08.194+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:22:08.211+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:08.212+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:22:08.213+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-09T11:22:08.216+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-09T11:22:08.217+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:22:08.217+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:22:08.235+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:22:08.235+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:22:08.236+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:08.237+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:08.238+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:08.251+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-09T11:22:08.247+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:22:08.253+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:22:08.248+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:08.249+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:22:08.256+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:08.252+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-09T11:22:08.254+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:22:08.254+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:22:08.256+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:22:08.261+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-09T11:22:08.262+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-09T11:22:08.264+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:22:08.265+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:22:08.267+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:22:08.284+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:22:08.276+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:22:08.280+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:08.281+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:22:08.284+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:22:08.285+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:22:08.286+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-09T11:22:08.286+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:22:08.302+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:22:08.303+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.289+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-09T11:22:08.305+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:08.305+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:22:08.306+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-09T11:22:08.311+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:22:08.297+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:22:08.297+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:22:08.297+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:22:08.300+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:22:08.304+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@262270aa] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.313+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:22:08.314+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:22:08.314+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:22:08.321+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:22:08.322+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-09T11:22:08.323+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.323+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:22:08.324+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.331+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:22:08.335+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-09T11:22:08.335+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3548b2b3] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.336+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.336+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@439a3245] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.336+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:22:08.337+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:22:08.338+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@204066963 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:08.338+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@462960b4] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.339+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@352593772 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:08.340+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.341+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-09T11:22:08.341+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:22:08.342+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:22:08.342+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@789df38b] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.344+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:22:08.345+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.347+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:08.351+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2075880644 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:08.351+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@153967645 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:08.352+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31367163] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.353+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:08.355+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2118938767 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:08.356+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-09T11:22:08.358+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:22:08.366+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:08.366+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:22:08.367+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3548b2b3]
2026-02-09T11:22:08.368+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:08.378+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:08.381+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:08.385+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@390409298 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:08.386+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-09T11:22:08.386+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-09T11:22:08.389+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-09T11:22:08.390+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:22:08.390+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:22:08.390+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:22:08.391+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:08.395+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:08.396+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@262270aa]
2026-02-09T11:22:08.402+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@789df38b]
2026-02-09T11:22:08.406+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@439a3245]
2026-02-09T11:22:08.406+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@462960b4]
2026-02-09T11:22:08.408+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-09T11:22:08.411+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:22:08.413+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:08.414+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:08.415+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:08.416+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.416+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31367163]
2026-02-09T11:22:08.416+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:22:08.417+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:22:08.418+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:22:08.418+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:22:08.418+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5485265c] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.420+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:08.421+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:08.421+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:08.422+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:08.429+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:22:08.430+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1962458436 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:08.435+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-09T11:22:08.446+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:08.451+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:08.457+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:22:08.458+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:22:08.466+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-09T11:22:08.458+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:22:08.462+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:08.468+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:22:08.464+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-09T11:22:08.466+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-09T11:22:08.466+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:22:08.466+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:08.504+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:22:08.470+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-09T11:22:08.470+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:08.506+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:22:08.506+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-09T11:22:08.487+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:22:08.488+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.505+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:22:08.506+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-09T11:22:08.507+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:22:08.507+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-09T11:22:08.507+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ab1880c] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.510+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.511+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:22:08.524+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-09T11:22:08.529+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:22:08.529+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:22:08.531+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2133382734 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:08.532+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@764eb2b9] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.533+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5485265c]
2026-02-09T11:22:08.533+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-09T11:22:08.536+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.538+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.540+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:08.543+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1537900573 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:08.546+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:08.546+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-09T11:22:08.546+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c43f772] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.546+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48798d32] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.547+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:08.555+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:08.555+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:22:08.555+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-09T11:22:08.563+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1365387939 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:08.571+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-09T11:22:08.563+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1482808778 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:08.566+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:08.570+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:08.571+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-09T11:22:08.572+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.575+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:08.575+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:08.579+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:22:08.580+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-09T11:22:08.587+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c6112e6] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.587+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:08.588+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ab1880c]
2026-02-09T11:22:08.589+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:22:08.593+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:08.593+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1534034055 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:08.597+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.597+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:22:08.598+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@764eb2b9]
2026-02-09T11:22:08.598+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-09T11:22:08.598+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ba6008a] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.598+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:22:08.599+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.601+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-09T11:22:08.605+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-09T11:22:08.606+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:08.608+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1828789786 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:08.610+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:22:08.616+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76ab063a] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.621+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c43f772]
2026-02-09T11:22:08.621+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48798d32]
2026-02-09T11:22:08.621+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:22:08.621+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.623+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1970518316 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:08.623+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:08.624+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.629+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:22:08.629+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7087c31] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.629+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:08.630+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-09T11:22:08.630+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65cd83f4] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.631+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1101063612 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:08.633+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:08.634+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:08.635+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1641644642 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:08.637+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:08.637+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:22:08.639+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:22:08.639+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:08.649+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:08.653+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:22:08.655+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:08.656+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:22:08.657+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:22:08.658+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76ab063a]
2026-02-09T11:22:08.658+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ba6008a]
2026-02-09T11:22:08.665+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:22:08.666+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.666+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:08.677+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:22:08.678+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:08.679+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-09T11:22:08.681+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:22:08.681+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f7c2f1f] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.683+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:22:08.683+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.683+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65cd83f4]
2026-02-09T11:22:08.683+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c6112e6]
2026-02-09T11:22:08.684+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7087c31]
2026-02-09T11:22:08.684+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@21521948 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:08.685+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:08.686+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dd752e1] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.687+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.694+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:08.694+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:08.695+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:08.697+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:08.700+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2022592412 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:08.701+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79ef8e00] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.701+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-09T11:22:08.702+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:22:08.705+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:08.707+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-09T11:22:08.707+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:08.710+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1882480874 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:08.713+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:08.717+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:08.718+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:08.732+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:22:08.720+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:08.724+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:08.726+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-09T11:22:08.737+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:08.733+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:22:08.735+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:22:08.738+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-09T11:22:08.741+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.741+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:22:08.741+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-09T11:22:08.741+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@537d9ea8] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.744+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:22:08.752+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:22:08.753+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-09T11:22:08.753+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f7c2f1f]
2026-02-09T11:22:08.754+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:22:08.754+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1093516286 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:08.755+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-09T11:22:08.755+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.756+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:22:08.756+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:08.757+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c5a1852] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.757+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-09T11:22:08.757+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.758+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:08.761+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:08.761+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-09T11:22:08.762+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@358034444 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:08.764+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66487432] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.765+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-09T11:22:08.765+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dd752e1]
2026-02-09T11:22:08.765+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79ef8e00]
2026-02-09T11:22:08.771+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:08.772+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1466689314 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:08.772+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.773+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.775+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.775+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:08.778+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:08.778+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bb2579c] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.778+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a959822] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.779+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e00b1d4] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.779+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:08.780+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:08.781+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@976419605 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:08.781+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@218270155 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:08.784+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@537d9ea8]
2026-02-09T11:22:08.784+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-09T11:22:08.786+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:22:08.788+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:08.791+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@947565347 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:08.791+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.794+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:08.797+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-09(LocalDate)
2026-02-09T11:22:08.798+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:22:08.805+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c5a1852]
2026-02-09T11:22:08.807+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:08.815+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4234764e] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.815+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66487432]
2026-02-09T11:22:08.815+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.819+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:08.819+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1797936168 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:08.823+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.828+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:22:08.829+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c4ac7fb] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.831+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:08.834+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79ca120c] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.834+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a959822]
2026-02-09T11:22:08.835+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:08.836+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1902924742 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:08.841+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:08.844+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:08.847+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-09T11:22:08.848+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1552290019 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:08.849+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e00b1d4]
2026-02-09T11:22:08.852+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:22:08.853+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:22:08.859+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bb2579c]
2026-02-09T11:22:08.862+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:22:08.862+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.863+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-09T11:22:08.865+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:08.866+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:08.866+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:08.874+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:22:08.875+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17b891a8] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.883+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4234764e]
2026-02-09T11:22:08.885+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:22:08.905+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-09T11:22:08.913+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-09T11:22:08.913+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@703596712 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:08.914+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.918+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c4ac7fb]
2026-02-09T11:22:08.918+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:08.919+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-09T11:22:08.920+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:22:08.930+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1745add0] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.932+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.935+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:08.939+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:22:08.946+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79ca120c]
2026-02-09T11:22:08.949+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-09T11:22:08.942+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:22:08.943+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-09T11:22:08.945+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1990344560 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:08.946+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25e18fa8] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.949+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:08.949+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:08.950+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-09T11:22:08.956+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:08.962+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1327506317 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:08.962+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:22:08.964+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:22:08.964+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-09T11:22:08.966+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-09T11:22:08.968+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:08.969+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:08.969+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:08.970+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-09T11:22:08.970+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17b891a8]
2026-02-09T11:22:08.970+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:22:08.974+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:08.975+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:08.976+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:22:08.978+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.979+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:22:08.981+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-09T11:22:08.995+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.989+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:22:08.991+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:22:08.992+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:22:08.994+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50b8aed6] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.995+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:08.995+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bc0605c] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:08.999+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:08.999+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25e18fa8]
2026-02-09T11:22:09.000+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1745add0]
2026-02-09T11:22:09.001+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@56508600 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:09.001+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:22:09.005+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1490810929 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:09.007+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9445eea] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.007+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.007+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.007+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:09.007+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-09T11:22:09.008+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-09T11:22:09.012+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@49130776 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:09.012+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44baa87a] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.012+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5107bf8f] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.014+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:09.014+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:22:09.015+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-09T11:22:09.015+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-09T11:22:09.015+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2052906008 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:09.016+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1805034322 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:09.017+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:22:09.018+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:22:09.020+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:09.020+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:09.021+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.028+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:09.023+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:09.024+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-09T11:22:09.025+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-09T11:22:09.028+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@449a79ec] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.028+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bc0605c]
2026-02-09T11:22:09.029+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50b8aed6]
2026-02-09T11:22:09.029+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1999928459 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:09.029+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:09.030+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.030+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-09T11:22:09.030+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-09T11:22:09.030+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c224bd0] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.031+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-09T11:22:09.033+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-09T11:22:09.034+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:09.036+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@158963868 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:09.037+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9445eea]
2026-02-09T11:22:09.039+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:09.039+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:09.041+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:09.041+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:09.046+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:09.046+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:09.049+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-09T11:22:09.049+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-09T11:22:09.051+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5107bf8f]
2026-02-09T11:22:09.051+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44baa87a]
2026-02-09T11:22:09.051+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-09T11:22:09.054+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:09.057+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:09.061+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:09.061+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.062+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.062+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@449a79ec]
2026-02-09T11:22:09.066+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c224bd0]
2026-02-09T11:22:09.067+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:22:09.067+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4686c38c] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.068+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79d25fe8] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.068+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:09.069+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.069+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:22:09.070+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@714204948 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:09.071+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1757069776 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:09.083+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-09T11:22:09.090+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-09T11:22:09.091+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4747d387] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.092+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:22:09.093+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.095+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:22:09.099+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-09T11:22:09.100+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:09.103+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1228237940 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:09.103+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-09T11:22:09.103+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e8c5246] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.104+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-09T11:22:09.106+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-09T11:22:09.109+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:22:09.114+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:22:09.115+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1219887001 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:09.115+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-09T11:22:09.116+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-09T11:22:09.117+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:09.117+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-09T11:22:09.121+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:09.117+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-09T11:22:09.121+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-09T11:22:09.122+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:22:09.122+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-09T11:22:09.122+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-09T11:22:09.123+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-09T11:22:09.124+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-09T11:22:09.124+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-09T11:22:09.127+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.127+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:22:09.128+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4747d387]
2026-02-09T11:22:09.128+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4686c38c]
2026-02-09T11:22:09.130+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79d25fe8]
2026-02-09T11:22:09.130+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:09.130+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e18de7d] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.131+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:09.131+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.137+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.138+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:09.142+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e8c5246]
2026-02-09T11:22:09.146+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1220154644 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:09.146+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:22:09.151+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a552cda] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.154+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a621c60] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.154+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:22:09.154+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.162+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dd9e680] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.155+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-09T11:22:09.155+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:09.155+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1987770401 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:09.159+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1242046979 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:09.163+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1909167391 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:09.163+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:09.165+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-09T11:22:09.167+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:22:09.174+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:09.175+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:09.177+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:09.182+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-09T11:22:09.184+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:22:09.188+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:09.189+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:09.189+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:09.190+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-09T11:22:09.192+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-09T11:22:09.198+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e18de7d]
2026-02-09T11:22:09.195+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:22:09.198+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-09T11:22:09.199+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:22:09.199+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:09.199+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-09T11:22:09.200+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:22:09.200+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:09.200+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:09.201+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-09T11:22:09.201+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:22:09.202+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-09T11:22:09.202+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.202+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a552cda]
2026-02-09T11:22:09.203+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dd9e680]
2026-02-09T11:22:09.203+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a621c60]
2026-02-09T11:22:09.204+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:09.204+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-09T11:22:09.205+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9062def] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.205+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.206+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.206+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.208+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:22:09.215+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-09T11:22:09.216+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@544539825 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:09.216+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c736820] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.216+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53a1f530] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.217+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c097b3] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.217+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.218+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:22:09.218+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:22:09.218+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1875094152 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:09.219+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1644094498 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:09.219+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@728439543 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:09.222+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35458f98] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.232+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1243819701 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:09.223+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:09.223+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:22:09.228+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:09.229+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:09.231+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:09.233+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-09T11:22:09.236+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:22:09.238+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:09.241+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:09.241+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:09.241+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-09(LocalDate)
2026-02-09T11:22:09.244+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:22:09.245+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:22:09.254+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.255+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9062def]
2026-02-09T11:22:09.256+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22e47993] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.257+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:09.258+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@159174699 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:09.258+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:22:09.258+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:09.259+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:09.262+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:09.263+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:09.271+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-09T11:22:09.275+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-09T11:22:09.275+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:09.276+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:09.277+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:22:09.282+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:09.282+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35458f98]
2026-02-09T11:22:09.284+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:09.284+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c097b3]
2026-02-09T11:22:09.285+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c736820]
2026-02-09T11:22:09.287+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53a1f530]
2026-02-09T11:22:09.290+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:22:09.291+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:09.291+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22e47993]
2026-02-09T11:22:09.291+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.291+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.292+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.294+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:22:09.295+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-09T11:22:09.295+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.295+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@691dd8f0] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.295+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6737306b] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.296+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@754003d4] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.297+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:09.297+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.298+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dd0c228] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.299+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1826989935 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:09.302+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@284325573 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:09.302+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@697589817 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:09.305+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:22:09.317+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c3e643e] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.317+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1282999008 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:09.317+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:22:09.318+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:09.318+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:09.319+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@301040373 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:09.319+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:22:09.320+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:22:09.320+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-09T11:22:09.331+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:09.331+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:09.331+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:09.337+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:22:09.337+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:22:09.349+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:09.364+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:09.365+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-09T11:22:09.365+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:22:09.374+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@754003d4]
2026-02-09T11:22:09.375+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@691dd8f0]
2026-02-09T11:22:09.375+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:22:09.375+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.376+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:09.377+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.379+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:22:09.379+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-09T11:22:09.383+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@749544d7] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.384+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:22:09.384+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e686cae] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.384+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dd0c228]
2026-02-09T11:22:09.385+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6737306b]
2026-02-09T11:22:09.385+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@20887346 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:09.386+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@399134991 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:09.386+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:09.386+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:09.387+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:09.389+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.389+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:22:09.395+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:22:09.396+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:22:09.397+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c3e643e]
2026-02-09T11:22:09.398+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@632addbe] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.400+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:22:09.409+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-09T11:22:09.411+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:09.444+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:22:09.411+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:09.424+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.442+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1035996632 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:09.445+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:22:09.446+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:09.463+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58e9363] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.465+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1515063416 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:09.464+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:09.464+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:22:09.470+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-09T11:22:09.472+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:09.478+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-09T11:22:09.479+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:22:09.481+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:09.482+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:22:09.483+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:09.484+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:09.486+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@749544d7]
2026-02-09T11:22:09.488+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e686cae]
2026-02-09T11:22:09.490+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.494+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:09.491+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:22:09.492+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.494+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31df48e5] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.494+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:22:09.495+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:22:09.495+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5edf969b] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.495+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@643507309 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:09.496+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:09.499+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.500+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@11719275 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:09.501+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:09.505+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:09.502+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ee4e69] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.507+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2021491519 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:09.507+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:09.502+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-09T11:22:09.503+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:09.508+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:09.511+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:09.512+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-09T11:22:09.514+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-09T11:22:09.514+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-09T11:22:09.515+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-09T11:22:09.515+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-09T11:22:09.516+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-09T11:22:09.516+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.516+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d00a7ff] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.517+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1162974437 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:09.517+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-09T11:22:09.518+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-09T11:22:09.539+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:09.539+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:09.539+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31df48e5]
2026-02-09T11:22:09.540+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ee4e69]
2026-02-09T11:22:09.540+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:09.540+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.540+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.540+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:09.540+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58e9363]
2026-02-09T11:22:09.540+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-09T11:22:09.540+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bafa33] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.540+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d3d19df] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.541+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@632addbe]
2026-02-09T11:22:09.541+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:22:09.541+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.541+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d00a7ff]
2026-02-09T11:22:09.541+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1323897345 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:09.541+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1062378263 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:09.541+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.542+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5edf969b]
2026-02-09T11:22:09.542+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49a083b1] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.542+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:22:09.542+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:09.542+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:09.543+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64871c43] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.543+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.543+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@943985773 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:09.544+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:22:09.544+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-09T11:22:09.544+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:09.544+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1366682176 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:09.544+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73b333de] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.544+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:09.545+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:09.545+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:22:09.546+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1366952061 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:09.547+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:09.548+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-09T11:22:09.548+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:09.549+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:09.550+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-09T11:22:09.553+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-09T11:22:09.553+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-09T11:22:09.554+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-09T11:22:09.554+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-09T11:22:09.555+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-09T11:22:09.555+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-09T11:22:09.556+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.556+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@202fc8c9] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.556+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@957331995 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:09.557+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-09T11:22:09.557+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-09(LocalDate)
2026-02-09T11:22:09.572+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:09.572+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:09.572+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d3d19df]
2026-02-09T11:22:09.572+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73b333de]
2026-02-09T11:22:09.573+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.573+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.573+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72d01eff] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.573+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38e0d110] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.574+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1460015771 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:09.574+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1386686481 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:09.574+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-09T11:22:09.574+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:09.574+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-09T11:22:09.574+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:22:09.574+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@202fc8c9]
2026-02-09T11:22:09.576+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-09T11:22:09.575+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:22:09.575+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:22:09.575+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64871c43]
2026-02-09T11:22:09.576+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:09.576+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:09.577+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bafa33]
2026-02-09T11:22:09.577+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-09T11:22:09.577+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49a083b1]
2026-02-09T11:22:09.577+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.578+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:09.578+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.578+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:09.578+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ae0c6d4] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.578+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:22:09.578+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b4021c8] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.580+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@911846095 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:09.581+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:09.582+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:22:09.582+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@917538842 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:09.582+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:09.586+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:22:09.587+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:09.591+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:09.589+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:22:09.591+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:09.593+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:22:09.597+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:09.597+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:09.600+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:09.600+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:22:09.602+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:22:09.602+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:22:09.613+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:09.613+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:09.616+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:09.616+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:22:09.619+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:22:09.619+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:22:09.621+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:22:09.621+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-09T11:22:09.621+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:22:09.621+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:22:09.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:22:09.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-09T11:22:09.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:22:09.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-09T11:22:09.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.623+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ede07c5] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.623+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:22:09.623+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2038667958 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:09.624+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:22:09.624+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:09.624+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.626+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:09.626+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74610661] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.627+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1064000327 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:09.627+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-09T11:22:09.628+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-09T11:22:09.631+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-09T11:22:09.631+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:09.631+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-09T11:22:09.631+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:22:09.637+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ae0c6d4]
2026-02-09T11:22:09.646+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:09.647+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b4021c8]
2026-02-09T11:22:09.647+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38e0d110]
2026-02-09T11:22:09.648+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72d01eff]
2026-02-09T11:22:09.648+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.653+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ede07c5]
2026-02-09T11:22:09.653+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.654+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-09T11:22:09.655+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:09.655+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.655+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10a55e9e] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.659+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.662+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22163bbf] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.664+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74610661]
2026-02-09T11:22:09.666+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1487011924 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:09.664+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:22:09.665+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4327da39] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.668+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:09.665+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2082466872 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:09.666+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72599817] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.667+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:09.667+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:22:09.668+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@829559620 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:09.670+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:09.672+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:09.673+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2092386742 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:09.674+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-09T11:22:09.674+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-09T11:22:09.674+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:09.677+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-09T11:22:09.677+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:09.686+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:22:09.687+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:09.689+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:09.690+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:09.691+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:22:09.694+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:09.699+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:22:09.700+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-09T11:22:09.701+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-09T11:22:09.701+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:22:09.701+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:09.702+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:22:09.702+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:22:09.733+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.733+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-09T11:22:09.734+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14d70f47] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.739+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:22:09.739+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@972491887 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:09.740+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:22:09.744+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:22:09.745+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:09.745+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-09T11:22:09.745+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:09.748+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-09T11:22:09.749+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.755+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72599817]
2026-02-09T11:22:09.756+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4327da39]
2026-02-09T11:22:09.756+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22163bbf]
2026-02-09T11:22:09.756+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10a55e9e]
2026-02-09T11:22:09.759+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4157223e] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.759+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:22:09.765+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:09.766+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.766+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.766+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.767+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@957373108 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:09.777+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:22:09.778+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@176ba36d] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.778+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cd7a27e] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.778+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c2db2e4] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.781+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-09T11:22:09.782+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:09.786+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-09T11:22:09.788+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1793086891 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:09.788+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@789556632 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:09.788+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1984320593 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:09.789+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-09T11:22:09.796+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:09.799+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14d70f47]
2026-02-09T11:22:09.806+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:22:09.806+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:09.806+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:22:09.807+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:09.808+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-09T11:22:09.808+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-09T11:22:09.810+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-09T11:22:09.810+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:09.811+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-09T11:22:09.823+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:09.830+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:09.831+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:22:09.833+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:22:09.837+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:22:09.848+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-09T11:22:09.857+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4157223e]
2026-02-09T11:22:09.858+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.857+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-09T11:22:09.858+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:09.858+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@481afffe] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.859+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:22:09.860+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-09T11:22:09.860+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@372051892 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:09.861+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-09T11:22:09.870+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-09T11:22:09.870+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-09T11:22:09.871+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:22:09.873+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:09.884+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:09.884+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:22:09.885+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c2db2e4]
2026-02-09T11:22:09.895+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@176ba36d]
2026-02-09T11:22:09.912+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cd7a27e]
2026-02-09T11:22:09.914+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:09.915+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:22:09.915+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:09.916+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.916+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.916+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.925+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:22:09.925+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:22:09.925+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fc7e21e] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.925+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@272b615b] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.936+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8f06fc0] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.943+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:09.946+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:22:09.949+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:22:09.947+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1397122966 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:09.948+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1838272024 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:09.948+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@162920690 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:09.950+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:22:09.950+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:22:09.951+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:09.951+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:09.951+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:09.953+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-09T11:22:09.963+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:09.966+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.967+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:09.971+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:09.972+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:09.973+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:22:09.973+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@481afffe]
2026-02-09T11:22:09.973+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@539a162b] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.985+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-09T11:22:09.988+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.989+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@323738210 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:09.990+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:09.990+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-09T11:22:09.990+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bed7d72] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:09.992+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:09.993+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:22:09.994+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1947704062 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:09.994+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:22:09.995+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:09.996+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:09.996+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:09.996+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7935d039] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.001+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:10.002+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:22:10.003+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:10.013+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8f06fc0]
2026-02-09T11:22:10.013+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1206117982 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:10.019+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:10.024+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@272b615b]
2026-02-09T11:22:10.025+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fc7e21e]
2026-02-09T11:22:10.027+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.027+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-09T11:22:10.028+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@539a162b]
2026-02-09T11:22:10.028+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.028+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.028+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17d9f0c] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.029+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.029+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-09T11:22:10.029+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20635b9] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.030+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ddf3c00] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.030+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:10.036+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@175664780 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:10.036+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9256b00] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.037+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2128330011 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:10.037+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1841884343 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:10.043+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bed7d72]
2026-02-09T11:22:10.047+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:22:10.047+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@168632129 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:10.047+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:10.048+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:10.048+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.049+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-09T11:22:10.049+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:22:10.050+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:10.050+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:10.050+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d682cd8] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.052+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:22:10.053+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1835981546 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:10.053+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:10.062+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-09T11:22:10.074+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:10.075+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7935d039]
2026-02-09T11:22:10.078+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:10.088+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:10.089+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:22:10.089+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:10.090+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-09T11:22:10.108+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-09T11:22:10.109+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:22:10.110+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20635b9]
2026-02-09T11:22:10.114+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9256b00]
2026-02-09T11:22:10.114+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ddf3c00]
2026-02-09T11:22:10.129+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:10.117+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17d9f0c]
2026-02-09T11:22:10.118+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:10.128+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d682cd8]
2026-02-09T11:22:10.129+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.129+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.130+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:22:10.131+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:10.132+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:10.137+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.138+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cd48182] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.138+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4320d4b5] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.139+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:10.141+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:22:10.143+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-09T11:22:10.144+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64c5d84b] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.156+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@265076828 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:10.157+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@390844397 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:10.159+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:10.164+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:10.165+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:10.166+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1214723815 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:10.167+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:22:10.167+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:10.177+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:10.168+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-09T11:22:10.169+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:22:10.171+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:10.173+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:10.174+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-09T11:22:10.180+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-09T11:22:10.179+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:10.179+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-09T11:22:10.180+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:10.182+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:22:10.181+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:22:10.181+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:22:10.182+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:22:10.183+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:22:10.185+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:22:10.183+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-09T11:22:10.184+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.189+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4364a4ea] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.187+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.189+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:22:10.189+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1070260457 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:10.190+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@506da282] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.190+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:22:10.191+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-09T11:22:10.191+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1032176252 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:10.192+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.193+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:22:10.194+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:10.194+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45e5209e] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.195+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:10.195+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2067955989 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:10.196+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-09T11:22:10.197+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-09T11:22:10.233+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-09T11:22:10.233+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:10.234+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-09T11:22:10.235+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:10.236+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-09T11:22:10.256+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cd48182]
2026-02-09T11:22:10.256+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64c5d84b]
2026-02-09T11:22:10.256+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45e5209e]
2026-02-09T11:22:10.256+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@506da282]
2026-02-09T11:22:10.256+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4320d4b5]
2026-02-09T11:22:10.257+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:10.262+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-09T11:22:10.272+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.272+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:10.273+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.279+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.281+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:22:10.282+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4364a4ea]
2026-02-09T11:22:10.282+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@455bebc5] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.283+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-09T11:22:10.296+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b89e222] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.296+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e5e450e] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.297+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:10.297+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:10.298+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@253125797 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:10.298+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:10.315+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@105721443 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:10.316+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1919526718 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:10.321+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:22:10.322+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-09T11:22:10.324+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:22:10.328+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:22:10.330+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:10.330+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:10.332+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:10.332+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-09T11:22:10.361+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:22:10.333+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-09T11:22:10.335+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:22:10.349+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:10.352+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:10.360+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:22:10.361+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-09T11:22:10.372+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:22:10.378+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:22:10.385+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-09T11:22:10.386+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:22:10.387+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:22:10.395+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:10.395+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:10.396+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:22:10.397+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@455bebc5]
2026-02-09T11:22:10.398+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:22:10.398+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.398+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b89e222]
2026-02-09T11:22:10.398+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e5e450e]
2026-02-09T11:22:10.399+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:22:10.399+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.399+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.399+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cbdb8b6] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.400+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.400+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.405+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:22:10.405+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ed41a7] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.406+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b7b8692] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.410+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@688601567 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:10.410+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67c0d5b4] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.410+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3087d992] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.411+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.412+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@527603484 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:10.413+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@174107531 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:10.413+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:10.414+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@321696668 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:10.419+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1823313081 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:10.419+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d67d] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.419+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:10.420+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:10.425+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:10.426+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:10.428+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:22:10.435+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:10.428+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1466002012 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:10.430+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:10.434+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:10.436+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-09T11:22:10.441+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:10.448+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:10.450+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:22:10.452+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cbdb8b6]
2026-02-09T11:22:10.452+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:10.454+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67c0d5b4]
2026-02-09T11:22:10.457+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-09T11:22:10.458+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:10.458+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:22:10.461+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.462+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.463+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3087d992]
2026-02-09T11:22:10.466+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b7b8692]
2026-02-09T11:22:10.471+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ed41a7]
2026-02-09T11:22:10.472+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a26fce2] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.472+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2db393ed] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.473+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.473+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.474+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.475+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:10.482+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1006608152 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:10.482+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1287626394 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:10.484+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5da6c2d0] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.485+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6392847f] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.485+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6054de01] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.491+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d67d]
2026-02-09T11:22:10.492+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:10.493+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:10.494+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1399049151 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:10.495+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@338346377 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:10.496+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@257645525 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:10.496+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.498+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:10.498+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:10.499+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:10.499+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:22:10.499+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:10.499+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e1eb027] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.504+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:22:10.504+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:10.504+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:10.505+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1211704487 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:10.512+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:22:10.514+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:22:10.514+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:10.514+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:10.515+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:22:10.518+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6392847f]
2026-02-09T11:22:10.518+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2db393ed]
2026-02-09T11:22:10.519+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-09T11:22:10.519+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:10.520+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a26fce2]
2026-02-09T11:22:10.521+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:10.521+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.521+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5da6c2d0]
2026-02-09T11:22:10.521+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6054de01]
2026-02-09T11:22:10.524+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.528+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:22:10.529+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b589af8] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.530+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.530+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.530+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61d94210] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.531+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:10.533+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@440752261 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:10.533+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:22:10.538+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32b46bd5] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.539+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48f361fe] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.540+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1286959909 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:10.542+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-02-09T11:22:10.543+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:22:10.543+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e1eb027]
2026-02-09T11:22:10.547+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@998212224 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:10.547+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@235997751 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:10.551+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:10.556+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-09T11:22:10.556+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:10.557+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:10.558+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:22:10.559+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:10.589+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:22:10.590+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:10.590+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-09T11:22:10.594+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-02-09T11:22:10.597+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-09T11:22:10.598+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:10.602+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b589af8]
2026-02-09T11:22:10.602+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/monthly-trend
2026-02-09T11:22:10.610+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-09T11:22:10.610+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:10.612+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61d94210]
2026-02-09T11:22:10.611+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.612+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-02-09T11:22:10.612+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32b46bd5]
2026-02-09T11:22:10.612+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.613+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b1070e8] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-02-09T11:22:10.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14c3ceb7] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.623+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@888192552 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:10.623+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-02-09T11:22:10.629+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-09T11:22:10.637+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f10bf6d] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.649+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1059182589 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:10.650+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:10.650+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48f361fe]
2026-02-09T11:22:10.650+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:22:10.651+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@510363545 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:10.651+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:10.653+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:10.653+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:10.655+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:22:10.655+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:22:10.655+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:10.662+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:22:10.663+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.663+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-09T11:22:10.665+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:10.666+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b3c586b] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.671+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1677463071 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:10.671+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? AND status = 'APPROVED' GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-09T11:22:10.672+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 3(Long)
2026-02-09T11:22:10.696+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:10.698+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-09T11:22:10.699+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:22:10.702+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14c3ceb7]
2026-02-09T11:22:10.702+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f10bf6d]
2026-02-09T11:22:10.703+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b1070e8]
2026-02-09T11:22:10.721+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.749+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7aaa5c0c] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.728+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:10.728+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.750+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1888916376 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:10.750+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:22:10.751+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cd79144] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.754+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 3
2026-02-09T11:22:10.792+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b3c586b]
2026-02-09T11:22:10.793+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:10.767+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:22:10.770+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:10.778+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@68697350 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:10.794+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-02-09T11:22:10.795+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-09T11:22:10.796+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:10.816+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:10.817+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:10.837+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-09T11:22:10.848+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7aaa5c0c]
2026-02-09T11:22:10.849+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:10.851+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.851+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cd79144]
2026-02-09T11:22:10.853+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ce5fa97] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.853+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:10.854+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1686603067 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:10.899+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b2d8ef4] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:10.909+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:10.909+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1536189796 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:10.991+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:11.059+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:22:11.218+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-09T11:22:11.236+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-09T11:22:11.272+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ce5fa97]
2026-02-09T11:22:11.286+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-09T11:22:11.287+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:11.287+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b2d8ef4]
2026-02-09T11:22:11.287+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@289a635d] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:11.288+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:11.288+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1271399835 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:11.318+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:22:11.349+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:11.399+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:11.454+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:11.546+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:11.578+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@289a635d]
2026-02-09T11:22:11.605+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:11.617+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d1a6753] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:11.618+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@115438374 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:11.625+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:22:11.626+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-09T11:22:11.752+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-09T11:22:11.886+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d1a6753]
2026-02-09T11:22:11.951+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:11.982+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:22:12.008+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:12.256+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:22:12.256+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:22:12.258+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-02-09T11:22:12.259+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-02-09T11:22:12.357+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:22:12.357+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:22:12.357+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-02-09T11:22:12.434+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:22:12.358+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-02-09T11:22:12.398+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:22:12.398+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:22:12.476+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/me/signatures
2026-02-09T11:22:12.412+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:22:12.435+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/me/signatures
2026-02-09T11:22:12.459+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:22:12.487+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-02-09T11:22:12.488+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:22:12.491+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-02-09T11:22:12.492+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:22:12.492+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-02-09T11:22:12.494+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:22:12.507+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-02-09T11:22:12.511+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:22:12.512+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-02-09T11:22:12.513+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:22:12.513+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-02-09T11:22:12.513+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:22:12.513+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-02-09T11:22:12.514+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-02-09T11:22:12.514+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:12.514+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_exec
2026-02-09T11:22:12.520+09:00  INFO 40576 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 9, companyId: 3
2026-02-09T11:22:12.522+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:12.522+09:00  INFO 40576 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 9, companyId: 3
2026-02-09T11:22:12.530+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@83209a1] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:12.530+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:22:12.534+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:12.538+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:22:12.539+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ecba663] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:12.539+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:12.541+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42f140c3] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:12.544+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@644ebfd5] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:12.548+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:22:12.549+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-02-09T11:22:12.551+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1574673470 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:12.562+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1961014273 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:12.563+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:12.563+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:22:12.564+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:12.575+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:22:12.578+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-02-09T11:22:12.592+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:12.597+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1486407293 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:12.597+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@750426853 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:12.605+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_exec
2026-02-09T11:22:12.618+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:12.619+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-02-09T11:22:12.620+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:22:12.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-02-09T11:22:12.627+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@83209a1]
2026-02-09T11:22:12.628+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.U.findByUserId                   : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:12.629+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:22:12.630+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:22:12.635+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:12.635+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:12.637+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:22:12.639+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ecba663]
2026-02-09T11:22:12.650+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@154332b7] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:12.651+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:12.652+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@624998130 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:12.652+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:22:12.652+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:22:12.653+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:12.654+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:22:12.655+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:22:12.656+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:22:12.661+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:22:12.656+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:22:12.657+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-02-09T11:22:12.657+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-02-09T11:22:12.675+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42f140c3]
2026-02-09T11:22:12.661+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:22:12.662+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:22:12.663+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:22:12.675+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@644ebfd5]
2026-02-09T11:22:12.677+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:22:12.680+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:12.695+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:22:12.698+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:22:12.701+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:22:12.703+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:12.703+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@154332b7]
2026-02-09T11:22:12.703+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=2, userId=9, si (truncated)...]
2026-02-09T11:22:12.703+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:22:12.704+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:22:12.704+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:22:12.706+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=2, userId=9, si (truncated)...]
2026-02-09T11:22:12.706+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:12.707+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:12.708+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:22:12.723+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:12.725+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27613693] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:12.710+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:12.712+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:22:12.717+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:12.719+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:22:12.721+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-02-09T11:22:12.727+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@96351252 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:12.729+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51819f9f] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:12.739+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-09T11:22:12.731+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:12.733+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-02-09T11:22:12.735+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:12.739+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:12.740+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@642205868 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:12.740+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-02-09T11:22:12.756+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dece0c0] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:12.757+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/my-approvals
2026-02-09T11:22:12.758+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_exec
2026-02-09T11:22:12.762+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:12.763+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:22:12.787+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-02-09T11:22:12.798+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-02-09T11:22:12.802+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-09T11:22:12.807+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1644323034 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:12.810+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:12.811+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:12.812+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:22:12.814+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-02-09T11:22:12.817+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_exec
2026-02-09T11:22:12.818+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:22:12.824+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27613693]
2026-02-09T11:22:12.825+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:12.827+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-02-09T11:22:12.827+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_exec", parameters={masked}
2026-02-09T11:22:12.834+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:12.834+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:12.834+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69a8d646] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:12.845+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:12.848+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:22:12.849+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:22:12.849+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6293e9b4] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:12.855+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68afcd4f] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:12.855+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51819f9f]
2026-02-09T11:22:12.856+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:12.857+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1290309339 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:12.861+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@235566916 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:12.862+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:12.862+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59791fb] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:12.863+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:22:12.863+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:22:12.864+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:22:12.865+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1771741191 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:12.865+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1246967630 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:12.866+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:22:12.867+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:22:12.869+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:12.870+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:12.871+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:12.872+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:12.872+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dece0c0]
2026-02-09T11:22:12.885+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:22:12.890+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:12.891+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:12.891+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:12.893+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:22:12.893+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 5
2026-02-09T11:22:12.897+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:22:12.899+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:22:12.903+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6293e9b4]
2026-02-09T11:22:12.903+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68afcd4f]
2026-02-09T11:22:12.906+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:22:12.908+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:12.911+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:12.912+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:12.912+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:12.913+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:12.913+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:22:12.918+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69a8d646]
2026-02-09T11:22:12.918+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59791fb]
2026-02-09T11:22:12.920+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:22:12.923+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:22:12.928+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4db33db0] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:12.934+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1533035772 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:12.929+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:22:12.932+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:12.932+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:12.933+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:22:12.933+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:12.935+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:12.936+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:12.936+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a42250c] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:12.936+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f61c4f0] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:12.936+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:22:12.945+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:22:12.957+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:12.957+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57cc3784] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:12.958+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1840597607 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:12.958+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1992334510 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:12.971+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:22:12.972+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:22:12.976+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:22:12.976+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:22:12.972+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1609240682 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:12.973+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:12.973+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:12.974+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:22:12.977+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:22:12.977+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:22:12.978+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:12.981+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:12.983+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:12.989+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45c9c45b] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:12.984+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:12.986+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:12.989+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@596108035 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:12.989+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3503e3b3] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:12.998+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:12.999+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1424509133 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:13.000+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:13.003+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:13.003+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:22:13.003+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:13.003+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:13.007+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:13.010+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4db33db0]
2026-02-09T11:22:13.010+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57cc3784]
2026-02-09T11:22:13.010+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f61c4f0]
2026-02-09T11:22:13.021+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a42250c]
2026-02-09T11:22:13.022+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.022+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:13.022+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:13.026+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:13.032+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.032+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.033+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18222aa5] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.034+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:22:13.034+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1286130348 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:13.034+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45c9c45b]
2026-02-09T11:22:13.034+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3251c833] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.034+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@350b3ec4] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.035+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:22:13.035+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:13.035+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.037+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1935068365 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:13.037+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1055524652 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:13.038+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 31(Long), 10(Long), 6(Long), 1(Long)
2026-02-09T11:22:13.039+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-02-09T11:22:13.043+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6477337b] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.044+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:13.045+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:13.046+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-09T11:22:13.055+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@261197399 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:13.058+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_exec(String), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:13.060+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:13.060+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-02-09T11:22:13.061+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:22:13.062+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-02-09T11:22:13.066+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:13.066+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 5
2026-02-09T11:22:13.068+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:22:13.071+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:22:13.071+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-09T11:22:13.073+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3503e3b3]
2026-02-09T11:22:13.074+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18222aa5]
2026-02-09T11:22:13.080+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3251c833]
2026-02-09T11:22:13.080+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.081+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.081+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.081+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:13.081+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2790f003] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.084+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 34
2026-02-09T11:22:13.094+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@558ecc26] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.094+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f1eb2f4] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.100+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:22:13.101+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-02-09T11:22:13.107+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1546685277 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:13.107+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@350b3ec4]
2026-02-09T11:22:13.108+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2142937951 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:13.108+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6477337b]
2026-02-09T11:22:13.108+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1135803764 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:13.111+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:13.111+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:13.111+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.113+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:22:13.116+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:13.116+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:13.118+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:22:13.121+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:13.125+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c9f24f9] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.131+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:22:13.133+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_exec(String), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:13.136+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:22:13.138+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:22:13.138+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2096804346 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:13.147+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:13.147+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:22:13.148+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:13.150+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-02-09T11:22:13.157+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:22:13.158+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:22:13.159+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:13.163+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:13.165+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/my-approvals
2026-02-09T11:22:13.166+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:22:13.166+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@558ecc26]
2026-02-09T11:22:13.166+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2790f003]
2026-02-09T11:22:13.167+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-02-09T11:22:13.168+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-09T11:22:13.170+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.198+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@378ab938] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.171+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:13.173+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.174+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:13.192+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-02-09T11:22:13.195+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f1eb2f4]
2026-02-09T11:22:13.201+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1781183793 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:13.202+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:22:13.203+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25e0abd] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.203+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c9f24f9]
2026-02-09T11:22:13.213+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-02-09T11:22:13.213+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:13.213+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:22:13.214+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:13.214+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@586084893 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:13.215+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.236+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.237+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-02-09T11:22:13.238+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:13.241+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_exec
2026-02-09T11:22:13.253+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:13.253+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13a4bfbc] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.253+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a6dbadd] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.265+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:13.277+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:13.277+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-09T11:22:13.278+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@370797021 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:13.282+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1819753622 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:13.283+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:22:13.295+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_exec
2026-02-09T11:22:13.296+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:22:13.296+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:22:13.299+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:22:13.341+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:13.377+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25e0abd]
2026-02-09T11:22:13.349+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:22:13.362+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_exec", parameters={masked}
2026-02-09T11:22:13.363+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-09T11:22:13.375+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:13.377+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@378ab938]
2026-02-09T11:22:13.378+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.378+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:22:13.379+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:22:13.380+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:13.381+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32ec7281] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.381+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:22:13.382+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.390+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:22:13.391+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1075158403 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:13.393+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:13.391+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:22:13.391+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b76a4f] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.393+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:13.397+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:13.403+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 5
2026-02-09T11:22:13.404+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 35
2026-02-09T11:22:13.404+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.405+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2081750404 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:13.408+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:22:13.425+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a6dbadd]
2026-02-09T11:22:13.425+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13a4bfbc]
2026-02-09T11:22:13.445+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@514e182f] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.450+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 34
2026-02-09T11:22:13.456+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:13.457+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:22:13.457+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.458+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.458+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1728607637 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:13.458+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32ec7281]
2026-02-09T11:22:13.465+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:13.465+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:22:13.465+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@206506e4] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.466+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e5f2a6f] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.466+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:22:13.467+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.482+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35b8af88] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.467+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:22:13.468+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@401206119 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:13.479+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1211114311 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:13.481+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:13.483+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1474878056 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:13.483+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:22:13.483+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:13.512+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:13.520+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:13.527+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:13.531+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:13.527+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.528+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:13.528+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b76a4f]
2026-02-09T11:22:13.531+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:13.533+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e14dbe4] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.534+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.535+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2003476865 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:13.536+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:22:13.538+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c4665e0] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.540+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:13.540+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:13.541+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35b8af88]
2026-02-09T11:22:13.542+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 34
2026-02-09T11:22:13.544+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e5f2a6f]
2026-02-09T11:22:13.541+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:13.541+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@514e182f]
2026-02-09T11:22:13.541+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1712949557 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:13.541+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@206506e4]
2026-02-09T11:22:13.542+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.545+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.547+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:13.547+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:13.547+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:13.558+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.558+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e47b296] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.564+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f7fff68] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.565+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:22:13.574+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:13.574+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b8fd2b2] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.585+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1056149561 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:13.585+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@759642254 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:13.586+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:13.587+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1138081537 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:13.591+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:13.595+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:22:13.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:13.631+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:13.635+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:22:13.641+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:22:13.644+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:22:13.641+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e14dbe4]
2026-02-09T11:22:13.643+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-09T11:22:13.643+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:13.643+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c4665e0]
2026-02-09T11:22:13.644+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 31(Long), 10(Long), 6(Long), 1(Long)
2026-02-09T11:22:13.645+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:22:13.645+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.661+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.661+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:22:13.662+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@590cea90] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.662+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@580983e1] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.662+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:22:13.662+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@18858414 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:13.667+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@932156517 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:13.668+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.677+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:22:13.677+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:13.677+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74405e05] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.678+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:22:13.679+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_exec(String), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:13.679+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@703682333 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:13.680+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:13.681+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 5
2026-02-09T11:22:13.682+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 35
2026-02-09T11:22:13.685+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b8fd2b2]
2026-02-09T11:22:13.685+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:13.685+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f7fff68]
2026-02-09T11:22:13.685+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e47b296]
2026-02-09T11:22:13.686+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:13.687+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:13.697+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:22:13.700+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.701+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.707+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-02-09T11:22:13.707+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@590cea90]
2026-02-09T11:22:13.708+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70e1f282] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.708+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-09T11:22:13.715+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45a65754] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.716+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:13.717+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:13.721+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:13.723+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1087756105 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:13.730+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@580983e1]
2026-02-09T11:22:13.731+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@589936747 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:13.744+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:22:13.748+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74405e05]
2026-02-09T11:22:13.749+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:22:13.749+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.750+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:13.750+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:13.751+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.753+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-09T11:22:13.753+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75221759] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.755+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:13.782+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3745375] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.792+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@412911425 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:13.794+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@637136846 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:13.794+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:13.795+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:22:13.798+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_exec(String), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:13.799+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:22:13.802+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 35
2026-02-09T11:22:13.809+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70e1f282]
2026-02-09T11:22:13.812+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 34
2026-02-09T11:22:13.818+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:13.818+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45a65754]
2026-02-09T11:22:13.819+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:22:13.820+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.821+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:13.824+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-09T11:22:13.824+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:22:13.831+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@566437ea] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.836+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75221759]
2026-02-09T11:22:13.836+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3745375]
2026-02-09T11:22:13.838+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@563074693 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:13.839+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:13.840+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:13.847+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:13.848+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-02-09T11:22:13.848+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:22:13.849+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:13.850+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:13.850+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:13.882+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:13.885+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@566437ea]
2026-02-09T11:22:13.894+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:13.899+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e34d1f1] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:13.901+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2040032442 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:13.913+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:22:13.914+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-09T11:22:13.924+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 35
2026-02-09T11:22:13.943+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e34d1f1]
2026-02-09T11:22:13.951+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:13.952+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:22:13.962+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:15.688+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_exec
2026-02-09T11:22:15.716+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_exec
2026-02-09T11:22:15.728+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-09T11:22:15.738+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_exec
2026-02-09T11:22:15.740+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_exec", parameters={masked}
2026-02-09T11:22:15.749+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:22:15.751+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:15.754+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f108c65] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:15.766+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1360921322 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:15.768+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:15.770+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:15.771+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:15.772+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f108c65]
2026-02-09T11:22:15.774+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:15.778+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@679737d7] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:15.779+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2049578314 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:15.780+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:15.783+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:15.786+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:15.788+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@679737d7]
2026-02-09T11:22:15.794+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:15.795+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48126cf9] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:15.801+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@384156579 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:15.802+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:15.813+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_exec(String), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:15.822+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-09T11:22:15.823+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48126cf9]
2026-02-09T11:22:15.825+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:15.828+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7589f5b7] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:15.828+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@774318683 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:15.829+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:22:15.831+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_exec(String), 2147483647(Integer), 0(Integer)
2026-02-09T11:22:15.833+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-09T11:22:15.835+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7589f5b7]
2026-02-09T11:22:15.836+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:15.837+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-02-09T11:22:15.838+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:16.582+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:22:16.583+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:22:16.585+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-02-09T11:22:16.586+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-02-09T11:22:16.605+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:22:16.614+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:22:16.617+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:22:16.617+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-02-09T11:22:16.619+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-02-09T11:22:16.628+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:22:16.635+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:22:16.638+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/me/signatures
2026-02-09T11:22:16.638+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:22:16.639+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:22:16.639+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/me/signatures
2026-02-09T11:22:16.639+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-02-09T11:22:16.646+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:22:16.647+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:22:16.653+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-02-09T11:22:16.654+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-02-09T11:22:16.663+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:16.669+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:22:16.669+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-02-09T11:22:16.670+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-02-09T11:22:16.670+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20936f62] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:16.670+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:16.672+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dcc1b9a] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:16.671+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-02-09T11:22:16.673+09:00  INFO 40576 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 9, companyId: 3
2026-02-09T11:22:16.671+09:00  INFO 40576 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 9, companyId: 3
2026-02-09T11:22:16.674+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:16.674+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:16.698+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25f37e9e] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:16.704+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@748f5258] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:16.706+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@114137904 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:16.706+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@957697948 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:16.708+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:16.708+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:22:16.729+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:16.731+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:16.750+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@902927141 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:16.751+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1863628113 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:16.760+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-02-09T11:22:16.786+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:16.786+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:22:16.787+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-02-09T11:22:16.788+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:16.788+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dcc1b9a]
2026-02-09T11:22:16.788+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20936f62]
2026-02-09T11:22:16.800+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:16.819+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:16.820+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:16.821+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57b26e7b] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:16.822+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:22:16.823+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@618715477 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:16.824+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:22:16.825+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:16.839+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-02-09T11:22:16.841+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:22:16.861+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-02-09T11:22:16.861+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@748f5258]
2026-02-09T11:22:16.862+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25f37e9e]
2026-02-09T11:22:16.863+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:16.863+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:16.864+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=2, userId=9, si (truncated)...]
2026-02-09T11:22:16.864+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=2, userId=9, si (truncated)...]
2026-02-09T11:22:16.865+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:16.865+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:16.930+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:22:16.936+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57b26e7b]
2026-02-09T11:22:16.958+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:16.965+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:22:16.966+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:17.296+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:22:17.297+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:22:17.297+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-02-09T11:22:17.298+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-02-09T11:22:17.327+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:22:17.329+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:22:17.337+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:22:17.330+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-02-09T11:22:17.333+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-02-09T11:22:17.338+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:22:17.338+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:22:17.339+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/cards/company
2026-02-09T11:22:17.342+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/cards/company
2026-02-09T11:22:17.344+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:22:17.345+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:22:17.345+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-02-09T11:22:17.349+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-02-09T11:22:17.352+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:22:17.353+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:22:17.353+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-02-09T11:22:17.353+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-02-09T11:22:17.354+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:17.354+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:22:17.354+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-02-09T11:22:17.355+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-02-09T11:22:17.356+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d75ec2d] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:17.357+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:17.357+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:17.357+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:17.359+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31977c0c] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:17.362+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5620bc58] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:17.363+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74ecc719] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:17.364+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2007613671 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:17.367+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:22:17.370+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:17.378+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@742172594 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:17.378+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1444477777 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:17.378+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1889335861 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:17.381+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-02-09T11:22:17.382+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:22:17.388+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-02-09T11:22:17.388+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:17.389+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-09T11:22:17.389+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d75ec2d]
2026-02-09T11:22:17.390+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-09T11:22:17.391+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:17.392+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:17.398+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:22:17.399+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:17.400+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 1
2026-02-09T11:22:17.401+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:17.402+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 1
2026-02-09T11:22:17.405+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5620bc58]
2026-02-09T11:22:17.406+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31977c0c]
2026-02-09T11:22:17.407+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:17.406+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74ecc719]
2026-02-09T11:22:17.409+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:17.407+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:17.407+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=3, cardNa (truncated)...]
2026-02-09T11:22:17.411+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=3, cardNa (truncated)...]
2026-02-09T11:22:17.411+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b486dc] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:17.414+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:17.417+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:17.420+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@75946310 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:17.429+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:22:17.442+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:22:17.496+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:22:17.502+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b486dc]
2026-02-09T11:22:17.503+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:17.506+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:22:17.514+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:17.879+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:22:17.880+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:22:17.881+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/9/approvers
2026-02-09T11:22:17.881+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/9/approvers
2026-02-09T11:22:17.895+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:22:17.896+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:22:17.896+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/9/approvers
2026-02-09T11:22:17.899+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/9/approvers
2026-02-09T11:22:17.903+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:22:17.905+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:22:17.905+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/9/approvers
2026-02-09T11:22:17.906+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:22:17.906+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/9/approvers
2026-02-09T11:22:17.906+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:22:17.906+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/9/approvers
2026-02-09T11:22:17.907+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:22:17.907+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/9/approvers
2026-02-09T11:22:17.908+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:22:17.908+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/9/approvers", parameters={}
2026-02-09T11:22:17.908+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:22:17.915+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/9/approvers", parameters={}
2026-02-09T11:22:17.916+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:22:17.916+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getApprovers(Long)
2026-02-09T11:22:17.916+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:17.917+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getApprovers(Long)
2026-02-09T11:22:17.917+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:17.918+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19ff09cd] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:17.918+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-02-09T11:22:17.924+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-02-09T11:22:17.931+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@df7e791] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:17.931+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-02-09T11:22:17.932+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-02-09T11:22:17.932+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1867963502 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:17.933+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:17.933+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:17.933+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:17.934+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2deaf083] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:17.934+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1597f24c] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:17.943+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:17.946+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@483499007 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:17.960+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:22:17.962+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:17.963+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@883389382 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:17.965+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserApproverMapper.findByUserId  : ==>  Preparing: SELECT uam.*, u.korean_name AS approver_name, uc.position AS approver_position FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id LEFT JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) ORDER BY uam.priority ASC, uam.created_at ASC
2026-02-09T11:22:17.972+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1271516156 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:17.972+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:17.975+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserApproverMapper.findByUserId  : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:17.975+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserApproverMapper.findByUserId  : ==>  Preparing: SELECT uam.*, u.korean_name AS approver_name, uc.position AS approver_position FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id LEFT JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) ORDER BY uam.priority ASC, uam.created_at ASC
2026-02-09T11:22:17.978+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@df7e791]
2026-02-09T11:22:17.981+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserApproverMapper.findByUserId  : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:17.983+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:22:17.983+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:17.984+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19ff09cd]
2026-02-09T11:22:17.985+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29b5477] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:17.986+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:17.988+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserApproverMapper.findByUserId  : <==      Total: 1
2026-02-09T11:22:17.988+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@820175066 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:17.991+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:22:17.994+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2deaf083]
2026-02-09T11:22:17.996+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserApproverMapper.findByUserId  : <==      Total: 1
2026-02-09T11:22:17.996+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:22:17.998+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:18.001+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:18.001+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1597f24c]
2026-02-09T11:22:18.002+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:22:18.002+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserApproverMappingDto(mappingId=2, userId=9, approve (truncated)...]
2026-02-09T11:22:18.009+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:18.011+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:18.014+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserApproverMappingDto(mappingId=2, userId=9, approve (truncated)...]
2026-02-09T11:22:18.029+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/approvers
2026-02-09T11:22:18.030+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:22:18.034+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:18.036+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29b5477]
2026-02-09T11:22:18.041+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/approvers
2026-02-09T11:22:18.045+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:18.046+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/approvers
2026-02-09T11:22:18.050+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:22:18.051+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/approvers
2026-02-09T11:22:18.058+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:18.060+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/approvers
2026-02-09T11:22:18.065+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/approvers
2026-02-09T11:22:18.085+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/approvers
2026-02-09T11:22:18.086+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/approvers", parameters={}
2026-02-09T11:22:18.086+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/approvers
2026-02-09T11:22:18.086+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getApprovers()
2026-02-09T11:22:18.086+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/approvers", parameters={}
2026-02-09T11:22:18.095+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:18.099+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getApprovers()
2026-02-09T11:22:18.101+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f44b0ae] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:18.102+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:18.103+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f48c1c1] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:18.108+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@402235160 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:18.112+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@457885646 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:18.115+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findApprovers    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY CASE uc.role WHEN 'USER' THEN 1 WHEN 'ACCOUNTANT' THEN 1 WHEN 'ADMIN' THEN 2 WHEN 'CEO' THEN 3 ELSE 99 END, u.korean_name
2026-02-09T11:22:18.116+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.findApprovers    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY CASE uc.role WHEN 'USER' THEN 1 WHEN 'ACCOUNTANT' THEN 1 WHEN 'ADMIN' THEN 2 WHEN 'CEO' THEN 3 ELSE 99 END, u.korean_name
2026-02-09T11:22:18.117+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findApprovers    : ==> Parameters: 3(Long)
2026-02-09T11:22:18.117+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.findApprovers    : ==> Parameters: 3(Long)
2026-02-09T11:22:18.128+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findApprovers    : <==      Total: 4
2026-02-09T11:22:18.128+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.findApprovers    : <==      Total: 4
2026-02-09T11:22:18.131+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f48c1c1]
2026-02-09T11:22:18.131+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f44b0ae]
2026-02-09T11:22:18.133+09:00  INFO 40576 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 결재자 목록 조회 완료 - companyId: 3, count: 4
2026-02-09T11:22:18.134+09:00  INFO 40576 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 결재자 목록 조회 완료 - companyId: 3, count: 4
2026-02-09T11:22:18.134+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:18.140+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:18.140+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재자 목록 조회 성공, data=[UserDto(userId=7, username=test_accountant, pa (truncated)...]
2026-02-09T11:22:18.141+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재자 목록 조회 성공, data=[UserDto(userId=7, username=test_accountant, pa (truncated)...]
2026-02-09T11:22:18.142+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:18.145+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:18.749+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:22:18.749+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:22:18.750+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:22:18.750+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:22:18.797+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:22:18.815+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:22:18.828+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:22:18.833+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:22:18.833+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:22:18.834+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:22:18.835+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:22:18.835+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:22:18.835+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:22:18.852+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:22:18.853+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:18.853+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:22:18.854+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:22:18.855+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:22:18.861+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3714e729] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:18.867+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:22:18.867+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:22:18.867+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:22:18.868+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:22:18.868+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:22:18.877+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:22:18.879+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:18.880+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:22:18.879+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:22:18.880+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@449dd464] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:18.881+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:22:18.885+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1053952910 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:18.885+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:22:18.898+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:18.902+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:22:18.903+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1923691549 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:18.903+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:22:18.903+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32c67679] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:18.904+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:18.904+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:18.905+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:18.916+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:18.917+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5734acab] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:18.919+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1485645713 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:18.920+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:22:18.922+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:22:18.923+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3714e729]
2026-02-09T11:22:18.924+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1080949018 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:18.924+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:18.928+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:22:18.930+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:18.935+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:22:18.936+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@449dd464]
2026-02-09T11:22:18.937+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:22:18.946+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:18.946+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:22:18.947+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56c554a6] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:18.947+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:18.949+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1631778615 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:18.962+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:22:18.963+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:22:18.982+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:22:18.985+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56c554a6]
2026-02-09T11:22:18.987+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:22:18.988+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:18.987+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:22:18.988+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5734acab]
2026-02-09T11:22:18.989+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:22:18.989+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32c67679]
2026-02-09T11:22:18.991+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:18.995+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:19.003+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:19.004+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:22:19.013+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:22:19.015+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:19.019+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:20.429+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:22:20.430+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:22:20.431+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-02-09T11:22:20.431+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-02-09T11:22:20.448+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:22:20.448+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:22:20.460+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:22:20.448+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-02-09T11:22:20.458+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-02-09T11:22:20.460+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:22:20.461+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:22:20.462+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/companies
2026-02-09T11:22:20.462+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/companies
2026-02-09T11:22:20.472+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:22:20.472+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:22:20.481+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-02-09T11:22:20.481+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-02-09T11:22:20.481+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:22:20.489+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:22:20.490+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-02-09T11:22:20.490+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-02-09T11:22:20.494+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:20.494+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:22:20.494+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-02-09T11:22:20.495+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-02-09T11:22:20.495+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27360cfa] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:20.496+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:20.497+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:20.497+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:20.498+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fcbdc39] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:20.498+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56079c4a] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:20.498+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a5c98dd] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:20.503+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@6489647 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:20.507+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:22:20.512+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@725369255 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:20.512+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@405529526 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:20.514+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:20.514+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:20.514+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:20.515+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:20.521+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:20.534+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@550316004 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:20.544+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:20.546+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:20.546+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:20.547+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:22:20.547+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:20.549+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56079c4a]
2026-02-09T11:22:20.549+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27360cfa]
2026-02-09T11:22:20.556+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fcbdc39]
2026-02-09T11:22:20.556+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:20.557+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:20.557+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:20.562+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:20.563+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:22:20.564+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=7, userId=9, companyId=3 (truncated)...]
2026-02-09T11:22:20.565+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ef752ad] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:20.566+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a5c98dd]
2026-02-09T11:22:20.567+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:20.572+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:20.573+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2098278651 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:20.583+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:20.585+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:22:20.586+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=7, userId=9, companyId=3 (truncated)...]
2026-02-09T11:22:20.587+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:22:20.589+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:20.601+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/3/applications
2026-02-09T11:22:20.610+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company/3
2026-02-09T11:22:20.614+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/3/applications
2026-02-09T11:22:20.615+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company/3
2026-02-09T11:22:20.632+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:22:20.637+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ef752ad]
2026-02-09T11:22:20.638+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:20.640+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/3/applications
2026-02-09T11:22:20.640+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:22:20.646+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies/3/applications
2026-02-09T11:22:20.648+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/3/applications
2026-02-09T11:22:20.648+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/3
2026-02-09T11:22:20.649+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:20.651+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/company/3
2026-02-09T11:22:20.649+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/3/applications
2026-02-09T11:22:20.650+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies/3/applications
2026-02-09T11:22:20.652+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/3
2026-02-09T11:22:20.653+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/3", parameters={}
2026-02-09T11:22:20.652+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/3/applications", parameters={}
2026-02-09T11:22:20.652+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/3/applications
2026-02-09T11:22:20.653+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-02-09T11:22:20.653+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-02-09T11:22:20.654+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/3/applications", parameters={}
2026-02-09T11:22:20.660+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/3
2026-02-09T11:22:20.670+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-09T11:22:20.671+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-09T11:22:20.672+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-02-09T11:22:20.672+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/company/3
2026-02-09T11:22:20.673+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-09T11:22:20.674+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-09T11:22:20.679+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-09T11:22:20.684+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/3
2026-02-09T11:22:20.684+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:20.685+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:20.685+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-09T11:22:20.686+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/3", parameters={}
2026-02-09T11:22:20.686+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67974381] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:20.686+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49f448b4] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:20.689+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:20.690+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-02-09T11:22:20.690+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@484239062 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:20.691+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@524fe6cf] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:20.691+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-09T11:22:20.691+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:20.693+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1750173052 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:20.694+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-09T11:22:20.695+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:20.695+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:20.695+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:20.697+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6104e7b7] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:20.697+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:20.697+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@686186131 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:20.698+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:20.704+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:20.706+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@929479476 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:20.707+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:20.707+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:20.710+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:20.710+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@524fe6cf]
2026-02-09T11:22:20.711+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67974381]
2026-02-09T11:22:20.711+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:20.712+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:20.712+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:20.718+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c494998] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:20.719+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:20.719+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:20.719+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27ea6a96] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:20.720+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@416762120 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:20.720+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6104e7b7]
2026-02-09T11:22:20.720+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49f448b4]
2026-02-09T11:22:20.722+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1560003307 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:20.722+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-02-09T11:22:20.724+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:20.725+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:20.725+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-02-09T11:22:20.727+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 3(Long)
2026-02-09T11:22:20.730+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d9e5fae] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:20.732+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5512d833] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:20.733+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 3(Long)
2026-02-09T11:22:20.733+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@459354869 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:20.733+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1109069214 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:20.734+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-02-09T11:22:20.734+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-02-09T11:22:20.735+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 3(Long)
2026-02-09T11:22:20.738+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 3(Long)
2026-02-09T11:22:20.744+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 5
2026-02-09T11:22:20.745+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 1
2026-02-09T11:22:20.746+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27ea6a96]
2026-02-09T11:22:20.747+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c494998]
2026-02-09T11:22:20.747+09:00  INFO 40576 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 3, count: 5
2026-02-09T11:22:20.749+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 1
2026-02-09T11:22:20.749+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 5
2026-02-09T11:22:20.750+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:20.750+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:20.750+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5512d833]
2026-02-09T11:22:20.750+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d9e5fae]
2026-02-09T11:22:20.751+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=30, userId=29, companyId (truncated)...]
2026-02-09T11:22:20.751+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=5, username=test_ceo, passw (truncated)...]
2026-02-09T11:22:20.757+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:20.753+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:20.757+09:00  INFO 40576 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 3, count: 5
2026-02-09T11:22:20.758+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:20.759+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=30, userId=29, companyId (truncated)...]
2026-02-09T11:22:20.760+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:20.761+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:20.762+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=5, username=test_ceo, passw (truncated)...]
2026-02-09T11:22:20.763+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:22.008+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:22:22.012+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:22:22.013+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-09T11:22:22.013+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-09T11:22:22.013+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-09T11:22:22.015+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-09T11:22:22.027+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-09T11:22:22.027+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-09T11:22:22.039+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-09T11:22:22.040+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-09T11:22:22.051+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:22:22.051+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:22:22.061+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-09T11:22:22.072+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-09T11:22:22.079+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-09T11:22:22.079+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:22:22.079+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-09T11:22:22.080+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:22:22.096+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-09T11:22:22.081+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-09T11:22:22.081+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-09T11:22:22.081+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-09T11:22:22.094+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:22:22.096+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:22:22.097+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-09T11:22:22.097+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-09T11:22:22.100+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-09T11:22:22.101+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-09T11:22:22.101+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:22:22.101+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:22:22.101+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-09T11:22:22.102+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-09T11:22:22.102+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-09T11:22:22.102+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-09T11:22:22.103+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:22:22.103+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:22:22.107+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-09T11:22:22.108+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-09T11:22:22.116+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-09T11:22:22.108+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-09T11:22:22.108+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-09T11:22:22.117+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:22.109+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:22.118+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35449e32] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:22.115+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:22.116+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-09T11:22:22.117+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-09T11:22:22.117+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-09T11:22:22.118+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31da9cbc] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:22.119+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3652f2d5] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:22.119+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-09T11:22:22.119+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:22.120+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-09T11:22:22.121+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:22.121+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@567b4ff6] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:22.124+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:22.124+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70563920] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:22.128+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ca61b02] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:22.132+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@774361831 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:22.132+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@85461770 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:22.132+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1003832010 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:22.133+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:22.141+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1443850224 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:22.142+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-09T11:22:22.144+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:22:22.145+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:22.145+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-09T11:22:22.145+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-09T11:22:22.146+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:22.147+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-09(LocalDate)
2026-02-09T11:22:22.150+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@169560586 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:22.150+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1883778589 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:22.152+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-09T11:22:22.153+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-09T11:22:22.154+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-09T11:22:22.155+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-09T11:22:22.156+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:22.162+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35449e32]
2026-02-09T11:22:22.162+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:22.164+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-09T11:22:22.164+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-09T11:22:22.165+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-09T11:22:22.165+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:22:22.165+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-09T11:22:22.166+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47342ab3] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:22.166+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70563920]
2026-02-09T11:22:22.184+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ca61b02]
2026-02-09T11:22:22.205+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@567b4ff6]
2026-02-09T11:22:22.205+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3652f2d5]
2026-02-09T11:22:22.216+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31da9cbc]
2026-02-09T11:22:22.217+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1097986593 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:22.219+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:22.219+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:22.220+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:22.221+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:22.222+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:22.223+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:22:22.227+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-09T11:22:22.229+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:22:22.227+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-09T11:22:22.227+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-09T11:22:22.227+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:22:22.229+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-09T11:22:22.229+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:22.231+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:22.233+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:22.251+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-09T11:22:22.236+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:22.246+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:22.247+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-09T11:22:22.262+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-09T11:22:22.253+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-09T11:22:22.255+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-09T11:22:22.256+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-09T11:22:22.265+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-09T11:22:22.265+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-09T11:22:22.297+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:22:22.301+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-09T11:22:22.307+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-09T11:22:22.310+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-09T11:22:22.319+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-09T11:22:22.313+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-09T11:22:22.313+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47342ab3]
2026-02-09T11:22:22.317+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-09T11:22:22.319+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-09T11:22:22.320+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-09T11:22:22.320+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-09T11:22:22.324+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:22.325+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-09T11:22:22.327+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:22:22.325+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-09T11:22:22.325+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-09T11:22:22.325+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-09T11:22:22.327+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:22.327+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:22.328+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-09T11:22:22.335+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:22.336+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43fb21db] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:22.337+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1967695285 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:22.329+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-09T11:22:22.329+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-09T11:22:22.333+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@556208a] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:22.340+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-09T11:22:22.341+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-09T11:22:22.341+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-09T11:22:22.342+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@121128529 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:22.348+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-09T11:22:22.349+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:22.349+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:22.349+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-09T11:22:22.352+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41df97e3] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:22.357+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a9bdb92] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:22.358+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-09T11:22:22.358+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1846793049 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:22.362+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@855315034 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:22.362+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-09T11:22:22.362+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-09T11:22:22.362+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-09T11:22:22.366+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-09(LocalDate)
2026-02-09T11:22:22.370+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43fb21db]
2026-02-09T11:22:22.371+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-09T11:22:22.373+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-09T11:22:22.373+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:22.379+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@556208a]
2026-02-09T11:22:22.382+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-09T11:22:22.382+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:22.382+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:22.383+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-09T11:22:22.385+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-09T11:22:22.387+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:22.396+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41df97e3]
2026-02-09T11:22:22.401+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:22.405+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-09T11:22:22.410+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-09T11:22:22.416+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:22.417+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a9bdb92]
2026-02-09T11:22:22.423+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:22.431+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-09T11:22:22.434+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:23.469+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:22:23.469+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:22:23.470+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-02-09T11:22:23.470+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-02-09T11:22:23.491+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:22:23.491+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:22:23.491+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-02-09T11:22:23.493+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-02-09T11:22:23.497+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:22:23.499+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:22:23.499+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/companies
2026-02-09T11:22:23.499+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:22:23.500+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/companies
2026-02-09T11:22:23.500+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:22:23.501+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-02-09T11:22:23.502+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:22:23.502+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-02-09T11:22:23.502+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:22:23.503+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-02-09T11:22:23.503+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:22:23.503+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-02-09T11:22:23.503+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:22:23.506+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-02-09T11:22:23.506+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:23.507+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-02-09T11:22:23.520+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:23.530+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:23.535+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63249cdb] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:23.535+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:23.538+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3498396] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:23.539+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@431d7b69] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:23.544+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4756a657] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:23.548+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1412749992 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:23.550+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:23.552+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:23.552+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1772555454 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:23.552+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@922699454 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:23.552+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@736118412 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:23.553+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:23.553+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:23.554+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:22:23.556+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:23.556+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:23.557+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:23.559+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:23.568+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63249cdb]
2026-02-09T11:22:23.569+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:23.570+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:23.570+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:23.571+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:22:23.571+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@392011d8] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:23.572+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@431d7b69]
2026-02-09T11:22:23.572+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4756a657]
2026-02-09T11:22:23.572+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3498396]
2026-02-09T11:22:23.573+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@445759799 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:23.580+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:23.581+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:23.585+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:23.586+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:22:23.586+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=7, userId=9, companyId=3 (truncated)...]
2026-02-09T11:22:23.587+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=7, userId=9, companyId=3 (truncated)...]
2026-02-09T11:22:23.588+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:22:23.588+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:22:23.589+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:23.590+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:23.594+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:23.607+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/3/applications
2026-02-09T11:22:23.607+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company/3
2026-02-09T11:22:23.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/3/applications
2026-02-09T11:22:23.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company/3
2026-02-09T11:22:23.638+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/3/applications
2026-02-09T11:22:23.638+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/3
2026-02-09T11:22:23.639+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/3/applications
2026-02-09T11:22:23.653+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/company/3
2026-02-09T11:22:23.641+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/3
2026-02-09T11:22:23.651+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:22:23.654+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@392011d8]
2026-02-09T11:22:23.653+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies/3/applications
2026-02-09T11:22:23.653+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/3
2026-02-09T11:22:23.653+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies/3/applications
2026-02-09T11:22:23.654+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/company/3
2026-02-09T11:22:23.654+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:23.655+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/3/applications
2026-02-09T11:22:23.655+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/3", parameters={}
2026-02-09T11:22:23.656+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/3/applications
2026-02-09T11:22:23.658+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-02-09T11:22:23.656+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/3
2026-02-09T11:22:23.657+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:22:23.657+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/3/applications", parameters={}
2026-02-09T11:22:23.658+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/3/applications", parameters={}
2026-02-09T11:22:23.659+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-09T11:22:23.659+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/3", parameters={}
2026-02-09T11:22:23.660+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:23.660+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-02-09T11:22:23.661+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-02-09T11:22:23.662+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-09T11:22:23.663+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-02-09T11:22:23.663+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-09T11:22:23.665+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-09T11:22:23.674+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:23.676+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-09T11:22:23.677+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-09T11:22:23.677+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-09T11:22:23.677+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4eaac707] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:23.678+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-09T11:22:23.682+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:23.683+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:23.684+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1905364433 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:23.685+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:23.685+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@620a04ee] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:23.685+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3faa3ee0] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:23.686+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:23.690+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64ed913b] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:23.697+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1969954066 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:23.698+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:23.698+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@323513173 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:23.698+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:23.708+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:23.711+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:23.714+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:23.720+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@89995107 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:23.727+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:23.729+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:23.731+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:23.732+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:23.732+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:23.733+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3faa3ee0]
2026-02-09T11:22:23.733+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64ed913b]
2026-02-09T11:22:23.733+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4eaac707]
2026-02-09T11:22:23.733+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:23.734+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:23.734+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:23.734+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15476e79] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:23.735+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16312971] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:23.735+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75ba6e9e] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:23.735+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2071203599 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:23.736+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@517805765 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:23.736+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1831869905 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:23.737+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-02-09T11:22:23.737+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-02-09T11:22:23.738+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-02-09T11:22:23.739+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 3(Long)
2026-02-09T11:22:23.739+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 3(Long)
2026-02-09T11:22:23.740+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 3(Long)
2026-02-09T11:22:23.751+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 1
2026-02-09T11:22:23.751+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 5
2026-02-09T11:22:23.751+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 5
2026-02-09T11:22:23.752+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:23.757+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15476e79]
2026-02-09T11:22:23.757+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16312971]
2026-02-09T11:22:23.757+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75ba6e9e]
2026-02-09T11:22:23.757+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@620a04ee]
2026-02-09T11:22:23.758+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:23.767+09:00  INFO 40576 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 3, count: 5
2026-02-09T11:22:23.768+09:00  INFO 40576 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 3, count: 5
2026-02-09T11:22:23.769+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:23.769+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=30, userId=29, companyId (truncated)...]
2026-02-09T11:22:23.770+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:23.770+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:23.770+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ea838a9] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:23.779+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=5, username=test_ceo, passw (truncated)...]
2026-02-09T11:22:23.779+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:23.779+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=5, username=test_ceo, passw (truncated)...]
2026-02-09T11:22:23.784+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1634525061 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:23.786+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:23.790+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-02-09T11:22:23.790+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:23.794+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 3(Long)
2026-02-09T11:22:23.821+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 1
2026-02-09T11:22:23.823+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ea838a9]
2026-02-09T11:22:23.823+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:23.826+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=30, userId=29, companyId (truncated)...]
2026-02-09T11:22:23.833+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:24.550+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:22:24.551+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:22:24.551+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:22:24.552+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:22:24.565+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:22:24.565+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:22:24.566+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:22:24.567+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:22:24.569+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:22:24.571+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:22:24.571+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:22:24.572+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:22:24.572+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:22:24.572+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:22:24.573+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:22:24.573+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:22:24.579+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:22:24.579+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:22:24.580+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:22:24.581+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:22:24.591+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:22:24.732+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:24.686+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:22:24.730+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:22:24.733+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:24.732+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:22:24.733+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3695e6c2] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:24.733+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:22:24.733+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ab1d554] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:24.734+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:22:24.735+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:22:24.738+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:22:24.739+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:24.739+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:24.739+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3328561d] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:24.740+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61d71fda] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:24.761+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@388652081 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:24.761+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@608555332 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:24.779+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:24.779+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1189460601 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:24.782+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:22:24.784+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:24.787+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:22:24.789+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:24.790+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@137335325 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:24.807+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:22:24.814+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:22:24.816+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:22:24.817+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:24.822+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ab1d554]
2026-02-09T11:22:24.823+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:22:24.824+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:22:24.824+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:24.825+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3328561d]
2026-02-09T11:22:24.828+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:22:24.829+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3695e6c2]
2026-02-09T11:22:24.829+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5eb074e0] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:24.830+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:24.834+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61d71fda]
2026-02-09T11:22:24.835+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:24.835+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1757988056 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:24.835+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:22:24.836+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:24.836+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:22:24.836+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:22:24.837+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:22:24.837+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:24.837+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:24.840+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:22:24.845+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:24.890+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:22:24.900+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5eb074e0]
2026-02-09T11:22:24.910+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:24.920+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:22:24.924+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:27.627+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:22:27.628+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:22:27.629+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-09T11:22:27.630+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-09T11:22:27.630+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-09T11:22:27.638+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-09T11:22:27.631+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-09T11:22:27.639+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-09T11:22:27.639+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-09T11:22:27.640+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-09T11:22:27.645+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:22:27.645+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:22:27.646+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-09T11:22:27.646+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-09T11:22:27.649+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-09T11:22:27.650+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:22:27.650+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-09T11:22:27.657+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:22:27.657+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-09T11:22:27.657+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-09T11:22:27.667+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-09T11:22:27.668+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:22:27.669+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-09T11:22:27.669+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:22:27.670+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-09T11:22:27.675+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-09T11:22:27.677+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-09T11:22:27.677+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:22:27.677+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-09T11:22:27.678+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:22:27.678+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-09T11:22:27.685+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-09T11:22:27.694+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-09T11:22:27.695+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:22:27.696+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-09T11:22:27.698+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:22:27.698+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-09T11:22:27.698+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-09T11:22:27.700+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-09T11:22:27.702+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:27.702+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-09T11:22:27.702+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:27.703+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-09T11:22:27.704+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-09T11:22:27.704+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:27.706+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a1aa014] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:27.707+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-09T11:22:27.711+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ae38f3b] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:27.714+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-09T11:22:27.714+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-09T11:22:27.715+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@327eff23] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:27.716+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-09T11:22:27.717+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:27.718+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:27.725+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:27.728+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31274f1f] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:27.727+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38774a0a] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:27.728+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55fc3899] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:27.732+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@557957005 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:27.732+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1117185132 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:27.733+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:22:27.734+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2136642998 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:27.734+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@461032377 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:27.734+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@114578197 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:27.734+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:27.734+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1364641596 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:27.735+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:27.735+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-09T11:22:27.736+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-09T11:22:27.736+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-09T11:22:27.737+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:27.745+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-09T11:22:27.746+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-09T11:22:27.747+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-09T11:22:27.747+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-09T11:22:27.748+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-09(LocalDate)
2026-02-09T11:22:27.754+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:22:27.756+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a1aa014]
2026-02-09T11:22:27.757+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-09T11:22:27.757+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-09T11:22:27.757+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-09T11:22:27.758+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:27.758+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-09T11:22:27.758+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:27.761+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55fc3899]
2026-02-09T11:22:27.761+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31274f1f]
2026-02-09T11:22:27.761+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@327eff23]
2026-02-09T11:22:27.761+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ae38f3b]
2026-02-09T11:22:27.762+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38774a0a]
2026-02-09T11:22:27.762+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:22:27.762+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:27.763+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:27.766+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:27.767+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:27.768+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:27.769+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:27.769+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-09T11:22:27.769+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-09T11:22:27.770+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-09T11:22:27.770+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2956b57f] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:27.771+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-09T11:22:27.772+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-09T11:22:27.773+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:27.779+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:27.782+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:27.791+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1615005568 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:27.791+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:27.793+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-09T11:22:27.795+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-09T11:22:27.797+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-09T11:22:27.803+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-09T11:22:27.812+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:22:27.834+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-09T11:22:27.836+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-09T11:22:27.836+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-09T11:22:27.837+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:22:27.837+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-09T11:22:27.837+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-09T11:22:27.837+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-09T11:22:27.843+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-09T11:22:27.849+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-09T11:22:27.851+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-09T11:22:27.859+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-09T11:22:27.860+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-09T11:22:27.863+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:22:27.874+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-09T11:22:27.879+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-09T11:22:27.874+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-09T11:22:27.881+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-09T11:22:27.877+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-09T11:22:27.878+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-09T11:22:27.878+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2956b57f]
2026-02-09T11:22:27.880+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-09T11:22:27.882+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:27.883+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:27.883+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-09T11:22:27.884+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:27.885+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-09T11:22:27.885+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bd0eb93] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:27.885+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@106865be] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:27.886+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-09T11:22:27.886+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:22:27.887+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:27.887+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1067710000 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:27.889+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1689866136 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:27.892+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:27.893+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:27.893+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ff7e789] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:27.895+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-09T11:22:27.896+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-09T11:22:27.898+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61d45d05] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:27.918+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1656591331 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:27.930+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-09T11:22:27.931+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-09T11:22:27.931+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@164624967 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:27.931+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-09T11:22:27.933+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-09T11:22:27.934+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-09(LocalDate)
2026-02-09T11:22:27.934+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-09T11:22:27.944+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-09T11:22:27.944+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-09T11:22:27.945+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-09T11:22:27.948+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ff7e789]
2026-02-09T11:22:27.949+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-09T11:22:27.950+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@106865be]
2026-02-09T11:22:27.951+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bd0eb93]
2026-02-09T11:22:27.951+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61d45d05]
2026-02-09T11:22:27.951+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:27.951+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:27.952+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:27.952+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:27.952+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-09T11:22:27.953+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-09T11:22:27.953+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-09T11:22:27.953+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-09T11:22:27.954+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:27.954+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:27.955+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:27.956+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:29.071+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:22:29.071+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:22:29.072+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-02-09T11:22:29.073+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-02-09T11:22:29.073+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/pending
2026-02-09T11:22:29.073+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-02-09T11:22:29.106+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:22:29.107+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:22:29.109+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-02-09T11:22:29.139+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:22:29.140+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:22:29.140+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/me
2026-02-09T11:22:29.155+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-02-09T11:22:29.140+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:22:29.156+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:22:29.141+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:22:29.143+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-02-09T11:22:29.145+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-02-09T11:22:29.146+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-02-09T11:22:29.155+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-02-09T11:22:29.157+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:22:29.157+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:22:29.158+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/me
2026-02-09T11:22:29.158+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/companies
2026-02-09T11:22:29.158+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-02-09T11:22:29.161+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:29.161+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/companies/pending
2026-02-09T11:22:29.162+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:22:29.162+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-02-09T11:22:29.166+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-02-09T11:22:29.166+09:00  INFO 40576 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 9, companyId: 3
2026-02-09T11:22:29.166+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5711fd35] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:29.167+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-02-09T11:22:29.167+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:29.168+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-02-09T11:22:29.168+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-02-09T11:22:29.179+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:29.181+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-02-09T11:22:29.181+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76bb9e74] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:29.181+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-02-09T11:22:29.181+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-02-09T11:22:29.182+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64c47af] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:29.182+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-02-09T11:22:29.189+09:00  INFO 40576 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 9, companyId: 3
2026-02-09T11:22:29.211+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:29.190+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:29.202+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@189140522 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:29.202+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1509306466 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:29.209+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:29.211+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@605df9a1] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:29.216+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19042034] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:29.221+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@712957337 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:29.222+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:29.229+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:22:29.231+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2446d3e9] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:29.232+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:29.233+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:29.235+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:29.240+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:29.248+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1859554324 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:29.251+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:29.251+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@773110746 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:29.252+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:29.252+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:29.252+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:22:29.258+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:29.258+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:29.258+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64c47af]
2026-02-09T11:22:29.258+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76bb9e74]
2026-02-09T11:22:29.258+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1430873915 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:29.261+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5711fd35]
2026-02-09T11:22:29.263+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 9(Long), PENDING(String)
2026-02-09T11:22:29.264+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:29.264+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:29.266+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:22:29.270+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:29.270+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19ced11b] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:29.271+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cb8d5c4] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:29.271+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-09T11:22:29.271+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:22:29.272+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1990836796 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:29.272+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1667131867 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:29.275+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:29.281+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:29.281+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:29.283+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:22:29.284+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:22:29.284+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-02-09T11:22:29.284+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19042034]
2026-02-09T11:22:29.300+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:29.300+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:22:29.300+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@605df9a1]
2026-02-09T11:22:29.301+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2446d3e9]
2026-02-09T11:22:29.301+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:29.302+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:29.303+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:29.304+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=7, userId=9, companyId=3 (truncated)...]
2026-02-09T11:22:29.305+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67e9f11] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:29.305+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-09T11:22:29.306+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:29.306+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@814524280 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:29.317+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:29.321+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:29.323+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:29.335+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:22:29.335+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:29.342+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cb8d5c4]
2026-02-09T11:22:29.343+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19ced11b]
2026-02-09T11:22:29.344+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:29.345+09:00  INFO 40576 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 9, companyId: 3, role: ADMIN
2026-02-09T11:22:29.345+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:22:29.354+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:29.354+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:29.355+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:29.355+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67e9f11]
2026-02-09T11:22:29.355+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=9, username=test_exec, passwo (truncated)...]
2026-02-09T11:22:29.356+09:00  INFO 40576 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 9, companyId: 3, role: ADMIN
2026-02-09T11:22:29.357+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:29.357+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:29.358+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=9, username=test_exec, passwo (truncated)...]
2026-02-09T11:22:29.413+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:32.206+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:22:32.207+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:22:32.209+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-09T11:22:32.210+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-09T11:22:32.211+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-09T11:22:32.212+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-09T11:22:32.247+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-09T11:22:32.248+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-09T11:22:32.248+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-09T11:22:32.249+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-09T11:22:32.279+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:22:32.279+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:22:32.279+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-09T11:22:32.279+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-09T11:22:32.280+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-09T11:22:32.280+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-09T11:22:32.289+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:22:32.289+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:22:32.290+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-09T11:22:32.290+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-09T11:22:32.291+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-09T11:22:32.291+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:22:32.291+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-09T11:22:32.302+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:22:32.303+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-09T11:22:32.303+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-09T11:22:32.304+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-09T11:22:32.304+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:22:32.305+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-09T11:22:32.305+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:22:32.314+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-09T11:22:32.314+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-09T11:22:32.314+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-09T11:22:32.314+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:22:32.321+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-09T11:22:32.321+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:22:32.322+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-09T11:22:32.322+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-09T11:22:32.325+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:32.323+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-09T11:22:32.323+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:32.323+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-09T11:22:32.324+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:32.324+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-09T11:22:32.327+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26277aa1] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:32.327+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-09T11:22:32.329+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b398fb0] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:32.330+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-09T11:22:32.330+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69722316] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:32.332+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-09T11:22:32.330+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-09T11:22:32.331+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-09T11:22:32.333+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:32.333+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:32.334+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:32.335+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e34b86c] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:32.335+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c91e434] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:32.335+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@390a6a47] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:32.340+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1308418401 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:32.340+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1756658438 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:32.340+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1205979861 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:32.341+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-09T11:22:32.342+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1575793022 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:32.342+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2012162482 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:32.343+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@171043587 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:32.343+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:22:32.344+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:32.344+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-09T11:22:32.345+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-09T11:22:32.346+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-09T11:22:32.347+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-09T11:22:32.348+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:32.350+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:32.350+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-09T11:22:32.352+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-09T11:22:32.352+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-09(LocalDate)
2026-02-09T11:22:32.361+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-09T11:22:32.365+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26277aa1]
2026-02-09T11:22:32.366+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:32.371+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-09T11:22:32.371+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-09T11:22:32.371+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-09T11:22:32.371+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:32.371+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-09T11:22:32.371+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:22:32.374+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:32.378+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e34b86c]
2026-02-09T11:22:32.378+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@390a6a47]
2026-02-09T11:22:32.381+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b398fb0]
2026-02-09T11:22:32.382+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c91e434]
2026-02-09T11:22:32.387+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69722316]
2026-02-09T11:22:32.388+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-09T11:22:32.390+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:32.390+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:32.391+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:32.395+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:32.395+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:32.395+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-09T11:22:32.399+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-09T11:22:32.400+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-09T11:22:32.401+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11cd134a] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:32.405+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-09T11:22:32.406+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:22:32.406+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-09T11:22:32.407+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:32.410+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:32.412+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@358223663 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:32.413+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:32.413+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:32.414+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-09T11:22:32.417+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-09T11:22:32.429+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-09T11:22:32.429+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:22:32.433+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-09T11:22:32.440+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-09T11:22:32.455+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-09T11:22:32.472+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-09T11:22:32.456+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-09T11:22:32.457+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:22:32.459+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-09T11:22:32.472+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-09T11:22:32.473+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-09T11:22:32.473+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-09T11:22:32.476+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-09T11:22:32.477+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-09T11:22:32.478+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:32.478+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-09T11:22:32.479+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-09T11:22:32.479+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-09T11:22:32.479+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:22:32.480+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c192668] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:32.480+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-09T11:22:32.480+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-09T11:22:32.481+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:32.481+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11cd134a]
2026-02-09T11:22:32.486+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1810379935 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:32.487+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-09T11:22:32.493+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-09T11:22:32.488+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-09T11:22:32.490+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bc1cc00] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:32.491+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:32.491+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-09T11:22:32.494+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:32.495+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-09T11:22:32.495+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1639788105 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:32.496+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:22:32.496+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-09T11:22:32.497+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64b5caf8] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:32.497+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:32.497+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-09T11:22:32.498+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:32.501+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1555389552 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:32.503+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-09T11:22:32.512+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-09T11:22:32.502+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@287e764b] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:32.503+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-09T11:22:32.514+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1510662722 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:32.521+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-09T11:22:32.521+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-09T11:22:32.521+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-02-09T11:22:32.523+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-09(LocalDate)
2026-02-09T11:22:32.523+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64b5caf8]
2026-02-09T11:22:32.523+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c192668]
2026-02-09T11:22:32.524+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:32.525+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:32.525+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-09T11:22:32.526+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-02-09T11:22:32.526+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-09T11:22:32.527+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:32.531+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:32.531+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bc1cc00]
2026-02-09T11:22:32.539+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-09T11:22:32.541+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:32.541+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@287e764b]
2026-02-09T11:22:32.542+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-09T11:22:32.542+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:32.544+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:32.544+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-09T11:22:32.554+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:33.277+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:22:33.279+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:22:33.279+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-02-09T11:22:33.281+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-02-09T11:22:33.295+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:22:33.295+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:22:33.296+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-02-09T11:22:33.298+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-02-09T11:22:33.302+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/companies
2026-02-09T11:22:33.303+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/companies
2026-02-09T11:22:33.300+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:22:33.301+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:22:33.303+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-02-09T11:22:33.304+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-02-09T11:22:33.312+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-02-09T11:22:33.304+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:22:33.305+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:22:33.305+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-02-09T11:22:33.313+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-02-09T11:22:33.313+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:22:33.315+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:33.314+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:22:33.314+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-02-09T11:22:33.315+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:22:33.315+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d48f1ef] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:33.316+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:22:33.317+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:33.318+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:33.317+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:33.318+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23cee5b6] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:33.318+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@82fc0c9] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:33.319+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@446b8667] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:33.334+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@36780817 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:33.335+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:33.336+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:33.338+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1636398442 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:33.338+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@533110445 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:33.338+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@887590845 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:33.339+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:22:33.339+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:33.340+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:33.341+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:33.342+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:33.344+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:33.351+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:33.352+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d48f1ef]
2026-02-09T11:22:33.354+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:33.354+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:22:33.356+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:33.356+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23cee5b6]
2026-02-09T11:22:33.356+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@446b8667]
2026-02-09T11:22:33.357+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=7, userId=9, companyId=3 (truncated)...]
2026-02-09T11:22:33.357+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:33.358+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:33.358+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:33.361+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:33.367+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=7, userId=9, companyId=3 (truncated)...]
2026-02-09T11:22:33.376+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:22:33.401+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:33.384+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/3/applications
2026-02-09T11:22:33.384+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company/3
2026-02-09T11:22:33.385+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@82fc0c9]
2026-02-09T11:22:33.399+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:33.406+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:33.407+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@382704cc] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:33.416+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/3/applications
2026-02-09T11:22:33.417+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company/3
2026-02-09T11:22:33.419+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1207423456 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:33.430+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/3/applications
2026-02-09T11:22:33.431+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/3
2026-02-09T11:22:33.432+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/3/applications
2026-02-09T11:22:33.432+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/3
2026-02-09T11:22:33.444+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:22:33.446+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/company/3
2026-02-09T11:22:33.446+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies/3/applications
2026-02-09T11:22:33.447+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies/3/applications
2026-02-09T11:22:33.447+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/company/3
2026-02-09T11:22:33.447+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:22:33.449+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/3
2026-02-09T11:22:33.451+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/3/applications
2026-02-09T11:22:33.451+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/3/applications
2026-02-09T11:22:33.453+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/3
2026-02-09T11:22:33.456+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/3", parameters={}
2026-02-09T11:22:33.457+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/3/applications", parameters={}
2026-02-09T11:22:33.457+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/3/applications", parameters={}
2026-02-09T11:22:33.460+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/3", parameters={}
2026-02-09T11:22:33.462+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-02-09T11:22:33.463+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-02-09T11:22:33.463+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-02-09T11:22:33.464+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:22:33.465+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-02-09T11:22:33.465+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-09T11:22:33.465+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-09T11:22:33.466+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-09T11:22:33.466+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@382704cc]
2026-02-09T11:22:33.466+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-09T11:22:33.467+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-09T11:22:33.468+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-09T11:22:33.469+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-09T11:22:33.469+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:33.469+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-09T11:22:33.470+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:33.470+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:33.470+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:33.471+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:22:33.471+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:33.471+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16a12036] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:33.471+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b8250aa] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:33.475+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@746b9bbc] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:33.477+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e04a737] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:33.477+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:33.478+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1090042867 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:33.478+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1633406599 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:33.478+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1447683154 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:33.481+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:33.482+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:33.491+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:33.493+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:33.495+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:33.496+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:33.505+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1522900158 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:33.514+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:33.518+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:33.518+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:33.520+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:33.522+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:33.524+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e04a737]
2026-02-09T11:22:33.529+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b8250aa]
2026-02-09T11:22:33.530+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@746b9bbc]
2026-02-09T11:22:33.535+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:33.535+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:33.541+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:33.543+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48284899] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:33.544+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b402646] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:33.545+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72d703bd] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:33.546+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:33.547+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1665037236 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:33.549+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@49161348 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:33.550+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1514786848 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:33.551+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16a12036]
2026-02-09T11:22:33.553+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-02-09T11:22:33.554+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-02-09T11:22:33.554+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-02-09T11:22:33.554+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:33.555+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 3(Long)
2026-02-09T11:22:33.557+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 3(Long)
2026-02-09T11:22:33.558+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 3(Long)
2026-02-09T11:22:33.559+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@160c2f34] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:33.561+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@244609040 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:33.563+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-02-09T11:22:33.563+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 1
2026-02-09T11:22:33.563+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 5
2026-02-09T11:22:33.563+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 1
2026-02-09T11:22:33.563+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 3(Long)
2026-02-09T11:22:33.564+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72d703bd]
2026-02-09T11:22:33.564+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48284899]
2026-02-09T11:22:33.564+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b402646]
2026-02-09T11:22:33.565+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:33.568+09:00  INFO 40576 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 3, count: 5
2026-02-09T11:22:33.569+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:33.569+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=30, userId=29, companyId (truncated)...]
2026-02-09T11:22:33.571+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 5
2026-02-09T11:22:33.572+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:33.572+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=30, userId=29, companyId (truncated)...]
2026-02-09T11:22:33.573+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@160c2f34]
2026-02-09T11:22:33.573+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:33.574+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=5, username=test_ceo, passw (truncated)...]
2026-02-09T11:22:33.574+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:33.576+09:00  INFO 40576 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 3, count: 5
2026-02-09T11:22:33.585+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:33.604+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:33.605+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=5, username=test_ceo, passw (truncated)...]
2026-02-09T11:22:33.617+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:34.913+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:22:34.913+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:22:34.914+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:22:34.914+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:22:34.936+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:22:34.936+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:22:34.942+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:22:34.945+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:22:34.945+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:22:34.948+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:22:34.954+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:22:34.956+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:22:34.960+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:22:34.960+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:22:34.961+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:22:34.961+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:22:34.966+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:22:34.964+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:22:34.964+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:22:34.965+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:22:34.967+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:34.981+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34b6c813] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:34.977+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:22:34.980+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:22:34.980+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:22:34.983+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:22:34.985+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:22:34.984+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:34.984+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:22:34.985+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:22:34.986+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44748b46] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:34.986+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:22:34.987+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:34.987+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:34.993+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43868f45] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:34.991+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4301343e] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:35.001+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1031034831 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:35.002+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1037588752 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:35.005+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:35.005+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:22:35.006+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@442538917 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:22:35.006+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@492486579 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:35.007+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:35.008+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:35.008+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:22:35.008+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:22:35.021+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:22:35.023+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:22:35.023+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:35.024+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:22:35.029+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44748b46]
2026-02-09T11:22:35.030+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34b6c813]
2026-02-09T11:22:35.030+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:35.033+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:35.033+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b1f8936] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:35.034+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:22:35.034+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:22:35.035+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:22:35.035+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1353854659 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:35.039+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:35.042+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43868f45]
2026-02-09T11:22:35.043+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4301343e]
2026-02-09T11:22:35.045+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:22:35.047+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:35.048+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:35.049+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:22:35.050+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:22:35.051+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:22:35.052+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:35.054+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:35.097+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:22:35.105+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b1f8936]
2026-02-09T11:22:35.121+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:35.135+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:22:35.136+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:35.974+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:22:35.975+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:22:35.977+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-02-09T11:22:35.979+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-02-09T11:22:36.013+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:22:36.013+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:22:36.019+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:22:36.013+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-02-09T11:22:36.014+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-02-09T11:22:36.019+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:22:36.019+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:22:36.020+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/companies
2026-02-09T11:22:36.020+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:22:36.020+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/companies
2026-02-09T11:22:36.020+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:22:36.021+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-02-09T11:22:36.021+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:22:36.021+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-02-09T11:22:36.022+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:36.021+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:22:36.021+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-02-09T11:22:36.022+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-02-09T11:22:36.022+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fab7ead] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:36.029+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:22:36.030+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-02-09T11:22:36.031+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-02-09T11:22:36.032+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:36.032+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:36.035+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:36.036+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10147ef3] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:36.038+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@469e776d] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:36.038+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1027993092 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:36.039+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4735fa27] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:36.047+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:22:36.050+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:36.051+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@302270629 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:36.051+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1641720568 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:36.053+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:36.053+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:36.054+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:36.056+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@869529327 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:36.058+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:36.058+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:36.062+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:22:36.067+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:36.064+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:36.067+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fab7ead]
2026-02-09T11:22:36.070+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10147ef3]
2026-02-09T11:22:36.071+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:36.076+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:36.077+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:36.078+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@469e776d]
2026-02-09T11:22:36.078+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:22:36.081+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73815772] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:36.082+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:36.086+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:36.087+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:36.088+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@27523141 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:36.089+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=7, userId=9, companyId=3 (truncated)...]
2026-02-09T11:22:36.090+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4735fa27]
2026-02-09T11:22:36.102+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:22:36.106+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:36.112+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:36.113+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:22:36.114+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=7, userId=9, companyId=3 (truncated)...]
2026-02-09T11:22:36.120+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/3/applications
2026-02-09T11:22:36.120+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company/3
2026-02-09T11:22:36.122+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:36.134+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/3/applications
2026-02-09T11:22:36.135+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company/3
2026-02-09T11:22:36.139+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/3/applications
2026-02-09T11:22:36.140+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/3
2026-02-09T11:22:36.150+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies/3/applications
2026-02-09T11:22:36.152+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/3/applications
2026-02-09T11:22:36.152+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/company/3
2026-02-09T11:22:36.152+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:22:36.155+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/3/applications
2026-02-09T11:22:36.156+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/3
2026-02-09T11:22:36.157+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/3/applications", parameters={}
2026-02-09T11:22:36.163+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/3
2026-02-09T11:22:36.163+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73815772]
2026-02-09T11:22:36.164+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies/3/applications
2026-02-09T11:22:36.164+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/company/3
2026-02-09T11:22:36.165+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-02-09T11:22:36.165+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/3", parameters={}
2026-02-09T11:22:36.168+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:36.170+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/3/applications
2026-02-09T11:22:36.173+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/3
2026-02-09T11:22:36.177+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-09T11:22:36.177+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-02-09T11:22:36.180+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:22:36.181+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/3/applications", parameters={}
2026-02-09T11:22:36.181+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/3", parameters={}
2026-02-09T11:22:36.190+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-09T11:22:36.195+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-09T11:22:36.197+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:36.202+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-02-09T11:22:36.207+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-02-09T11:22:36.216+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-09T11:22:36.211+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:36.212+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-09T11:22:36.213+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-09T11:22:36.218+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-09T11:22:36.236+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@394105db] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:36.237+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:36.239+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32c0ab0a] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:36.238+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-09T11:22:36.238+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:36.239+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1021669183 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:36.241+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@777221db] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:36.241+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:36.241+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:36.243+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@972955511 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:36.246+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:36.244+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39fea33c] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:36.246+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:36.247+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@357973806 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:36.248+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:36.249+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:36.252+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1682094269 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:36.254+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:36.255+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:36.256+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:36.258+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:36.259+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:36.268+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:36.269+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@777221db]
2026-02-09T11:22:36.269+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@394105db]
2026-02-09T11:22:36.269+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39fea33c]
2026-02-09T11:22:36.270+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:36.270+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:36.273+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:36.273+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:36.273+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e77a2a6] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:36.274+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@299a512f] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:36.276+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32c0ab0a]
2026-02-09T11:22:36.276+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e2316ab] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:36.280+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@946678858 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:22:36.282+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@415557146 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:36.286+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:36.286+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1376297232 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:36.287+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-02-09T11:22:36.290+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-02-09T11:22:36.291+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d833b54] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:36.291+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-02-09T11:22:36.293+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 3(Long)
2026-02-09T11:22:36.294+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 3(Long)
2026-02-09T11:22:36.294+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1316905252 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:36.297+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 3(Long)
2026-02-09T11:22:36.299+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-02-09T11:22:36.305+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 3(Long)
2026-02-09T11:22:36.308+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 5
2026-02-09T11:22:36.310+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 1
2026-02-09T11:22:36.310+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 1
2026-02-09T11:22:36.311+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e77a2a6]
2026-02-09T11:22:36.314+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@299a512f]
2026-02-09T11:22:36.314+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e2316ab]
2026-02-09T11:22:36.315+09:00  INFO 40576 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 3, count: 5
2026-02-09T11:22:36.315+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:36.315+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:36.316+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:36.316+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=30, userId=29, companyId (truncated)...]
2026-02-09T11:22:36.317+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=30, userId=29, companyId (truncated)...]
2026-02-09T11:22:36.319+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=5, username=test_ceo, passw (truncated)...]
2026-02-09T11:22:36.320+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:36.320+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:36.322+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:36.325+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 5
2026-02-09T11:22:36.348+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d833b54]
2026-02-09T11:22:36.349+09:00  INFO 40576 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 3, count: 5
2026-02-09T11:22:36.350+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:36.351+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=5, username=test_ceo, passw (truncated)...]
2026-02-09T11:22:36.355+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:36.899+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:22:36.900+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:22:36.900+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:22:36.901+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:22:36.923+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:22:36.923+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:22:36.933+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:22:36.933+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:22:36.924+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:22:36.929+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:22:36.933+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:22:36.944+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:22:36.934+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:22:36.943+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:22:36.944+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:22:36.944+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:22:36.945+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:22:36.945+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:22:36.945+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:22:36.945+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:22:36.946+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:36.946+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:22:36.953+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:22:36.953+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:22:36.954+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69155a12] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:36.954+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:22:36.954+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:36.962+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:22:36.972+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:22:36.973+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b9a7f51] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:36.973+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:22:36.974+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:22:36.977+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:36.977+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:36.978+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19ee3374] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:36.978+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@761f921a] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:36.996+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@472263753 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:36.997+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1423188496 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:22:36.997+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@867064505 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:22:36.997+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1201032631 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:22:37.004+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:22:37.004+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:22:37.004+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:22:37.005+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:22:37.006+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:22:37.018+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:22:37.019+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:22:37.023+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:22:37.036+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:22:37.037+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:22:37.037+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:22:37.038+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:22:37.040+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69155a12]
2026-02-09T11:22:37.040+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b9a7f51]
2026-02-09T11:22:37.044+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@761f921a]
2026-02-09T11:22:37.044+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19ee3374]
2026-02-09T11:22:37.045+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:37.045+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:22:37.051+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:37.051+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:37.052+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:22:37.052+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@135659d5] was not registered for synchronization because synchronization is not active
2026-02-09T11:22:37.052+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:22:37.052+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:22:37.053+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:37.053+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1563253533 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:22:37.054+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:37.064+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:22:37.066+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:22:37.073+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:22:37.116+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:22:37.124+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@135659d5]
2026-02-09T11:22:37.134+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:22:37.146+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:22:37.156+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:23:09.869+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:23:09.869+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:23:09.871+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/9/approvers
2026-02-09T11:23:09.871+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/9/approvers
2026-02-09T11:23:09.890+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:23:09.891+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:23:09.895+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/9/approvers
2026-02-09T11:23:09.898+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:23:09.900+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/9/approvers
2026-02-09T11:23:09.903+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:23:09.905+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:23:09.906+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/9/approvers
2026-02-09T11:23:09.907+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/9/approvers
2026-02-09T11:23:09.907+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:23:09.908+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:23:09.908+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/9/approvers
2026-02-09T11:23:09.910+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/9/approvers
2026-02-09T11:23:09.913+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:23:09.914+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:23:09.915+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/9/approvers", parameters={}
2026-02-09T11:23:09.915+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/9/approvers", parameters={}
2026-02-09T11:23:09.915+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:23:09.917+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:23:09.915+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:23:09.916+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getApprovers(Long)
2026-02-09T11:23:09.916+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getApprovers(Long)
2026-02-09T11:23:09.917+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9b02921] was not registered for synchronization because synchronization is not active
2026-02-09T11:23:09.917+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c58ab77] was not registered for synchronization because synchronization is not active
2026-02-09T11:23:09.918+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-02-09T11:23:09.918+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-02-09T11:23:09.925+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-02-09T11:23:09.922+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-02-09T11:23:09.927+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:23:09.926+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:23:09.930+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@196bdff4] was not registered for synchronization because synchronization is not active
2026-02-09T11:23:09.932+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4379443a] was not registered for synchronization because synchronization is not active
2026-02-09T11:23:09.936+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@441204335 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:23:09.937+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@333816835 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:23:09.937+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:23:09.938+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:23:09.938+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:23:09.939+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1386339114 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:23:09.939+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2072624330 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:23:09.941+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:23:09.942+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserApproverMapper.findByUserId  : ==>  Preparing: SELECT uam.*, u.korean_name AS approver_name, uc.position AS approver_position FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id LEFT JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) ORDER BY uam.priority ASC, uam.created_at ASC
2026-02-09T11:23:09.946+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserApproverMapper.findByUserId  : ==>  Preparing: SELECT uam.*, u.korean_name AS approver_name, uc.position AS approver_position FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id LEFT JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) ORDER BY uam.priority ASC, uam.created_at ASC
2026-02-09T11:23:09.946+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:23:09.947+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserApproverMapper.findByUserId  : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:23:09.949+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserApproverMapper.findByUserId  : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:23:09.950+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c58ab77]
2026-02-09T11:23:09.953+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:23:09.955+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:23:09.957+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:23:09.957+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9b02921]
2026-02-09T11:23:09.958+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:23:09.961+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:23:09.962+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c6ec04] was not registered for synchronization because synchronization is not active
2026-02-09T11:23:09.969+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@931475174 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:23:09.970+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserApproverMapper.findByUserId  : <==      Total: 1
2026-02-09T11:23:09.972+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserApproverMapper.findByUserId  : <==      Total: 1
2026-02-09T11:23:09.973+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:23:09.974+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@196bdff4]
2026-02-09T11:23:09.974+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4379443a]
2026-02-09T11:23:09.977+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:23:09.978+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:23:09.980+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:23:09.980+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserApproverMappingDto(mappingId=2, userId=9, approve (truncated)...]
2026-02-09T11:23:09.980+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserApproverMappingDto(mappingId=2, userId=9, approve (truncated)...]
2026-02-09T11:23:09.981+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:23:09.983+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:23:09.990+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/approvers
2026-02-09T11:23:09.991+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:23:09.995+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/approvers
2026-02-09T11:23:10.000+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c6ec04]
2026-02-09T11:23:10.001+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/approvers
2026-02-09T11:23:10.004+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:23:10.005+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/approvers
2026-02-09T11:23:10.005+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:23:10.006+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/approvers
2026-02-09T11:23:10.006+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:23:10.006+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/approvers
2026-02-09T11:23:10.008+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/approvers
2026-02-09T11:23:10.013+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/approvers
2026-02-09T11:23:10.014+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/approvers", parameters={}
2026-02-09T11:23:10.015+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/approvers", parameters={}
2026-02-09T11:23:10.017+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getApprovers()
2026-02-09T11:23:10.017+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getApprovers()
2026-02-09T11:23:10.018+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:23:10.018+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:23:10.018+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30c178cf] was not registered for synchronization because synchronization is not active
2026-02-09T11:23:10.020+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7703264a] was not registered for synchronization because synchronization is not active
2026-02-09T11:23:10.020+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1935600229 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:23:10.021+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.findApprovers    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY CASE uc.role WHEN 'USER' THEN 1 WHEN 'ACCOUNTANT' THEN 1 WHEN 'ADMIN' THEN 2 WHEN 'CEO' THEN 3 ELSE 99 END, u.korean_name
2026-02-09T11:23:10.023+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@35579837 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:23:10.023+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.findApprovers    : ==> Parameters: 3(Long)
2026-02-09T11:23:10.023+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findApprovers    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY CASE uc.role WHEN 'USER' THEN 1 WHEN 'ACCOUNTANT' THEN 1 WHEN 'ADMIN' THEN 2 WHEN 'CEO' THEN 3 ELSE 99 END, u.korean_name
2026-02-09T11:23:10.024+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findApprovers    : ==> Parameters: 3(Long)
2026-02-09T11:23:10.027+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.findApprovers    : <==      Total: 4
2026-02-09T11:23:10.027+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7703264a]
2026-02-09T11:23:10.028+09:00  INFO 40576 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 결재자 목록 조회 완료 - companyId: 3, count: 4
2026-02-09T11:23:10.028+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findApprovers    : <==      Total: 4
2026-02-09T11:23:10.029+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:23:10.029+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30c178cf]
2026-02-09T11:23:10.029+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재자 목록 조회 성공, data=[UserDto(userId=7, username=test_accountant, pa (truncated)...]
2026-02-09T11:23:10.030+09:00  INFO 40576 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 결재자 목록 조회 완료 - companyId: 3, count: 4
2026-02-09T11:23:10.030+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:23:10.030+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:23:10.033+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재자 목록 조회 성공, data=[UserDto(userId=7, username=test_accountant, pa (truncated)...]
2026-02-09T11:23:10.040+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:25:32.361+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:25:32.361+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:25:32.366+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:25:32.366+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:25:32.378+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:25:32.379+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:25:32.380+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:25:32.380+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:25:32.381+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:25:32.382+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:25:32.382+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:25:32.382+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:25:32.382+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:25:32.382+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:25:32.383+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:25:32.383+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:25:32.383+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:25:32.384+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:25:32.384+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:25:32.384+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:25:32.385+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:25:32.385+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:25:32.389+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:25:32.390+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:25:32.391+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:25:32.392+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:25:32.392+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@362047fb] was not registered for synchronization because synchronization is not active
2026-02-09T11:25:32.392+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:25:32.392+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e1aff57] was not registered for synchronization because synchronization is not active
2026-02-09T11:25:32.394+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:25:32.395+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:25:32.398+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:25:32.398+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@188345516 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:25:32.400+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:25:32.402+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:25:32.402+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@708766638 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:25:32.402+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:25:32.403+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@85834e3] was not registered for synchronization because synchronization is not active
2026-02-09T11:25:32.403+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37b8a4fc] was not registered for synchronization because synchronization is not active
2026-02-09T11:25:32.404+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:25:32.409+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:25:32.411+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:25:32.414+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@503836568 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:25:32.414+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@38044916 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:25:32.414+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:25:32.414+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:25:32.415+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:25:32.415+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@362047fb]
2026-02-09T11:25:32.416+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:25:32.418+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:25:32.419+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:25:32.420+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:25:32.420+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e1aff57]
2026-02-09T11:25:32.424+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1211ab1c] was not registered for synchronization because synchronization is not active
2026-02-09T11:25:32.425+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:25:32.426+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1355385711 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:25:32.426+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:25:32.427+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:25:32.428+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:25:32.429+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:25:32.428+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:25:32.428+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:25:32.434+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37b8a4fc]
2026-02-09T11:25:32.435+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@85834e3]
2026-02-09T11:25:32.435+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:25:32.436+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:25:32.437+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:25:32.437+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:25:32.440+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:25:32.443+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:25:32.453+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:25:32.459+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1211ab1c]
2026-02-09T11:25:32.461+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:25:32.462+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:25:32.463+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:25:43.884+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:25:43.886+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:25:43.888+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:25:43.890+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:25:43.915+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:25:43.918+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:25:43.918+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:25:43.920+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:25:43.924+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:25:43.925+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32892774] was not registered for synchronization because synchronization is not active
2026-02-09T11:25:43.927+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1554969949 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:25:43.928+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:25:43.930+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:25:43.933+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:25:43.933+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32892774]
2026-02-09T11:25:43.933+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:25:43.934+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:25:43.935+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:25:52.640+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:25:52.672+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:25:52.696+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:25:52.700+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:25:52.703+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:25:52.706+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:25:52.707+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:25:52.709+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:25:52.711+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:25:52.712+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ce69fcb] was not registered for synchronization because synchronization is not active
2026-02-09T11:25:52.716+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2025277392 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:25:52.719+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:25:52.726+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:25:52.735+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:25:52.743+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ce69fcb]
2026-02-09T11:25:52.745+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:25:52.748+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:25:52.751+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:26:03.371+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:26:03.397+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:26:03.400+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:26:03.401+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:26:03.401+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:26:03.403+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:26:03.407+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:26:03.409+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:26:03.410+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:26:03.410+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44322376] was not registered for synchronization because synchronization is not active
2026-02-09T11:26:03.412+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1719972941 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:26:03.413+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:26:03.416+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:26:03.418+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:26:03.419+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44322376]
2026-02-09T11:26:03.420+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:26:03.422+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:26:03.423+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:26:11.202+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:26:11.208+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:26:11.218+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:26:11.231+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:26:11.233+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:26:11.235+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:26:11.235+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:26:11.236+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:26:11.236+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:26:11.238+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@469f9fe5] was not registered for synchronization because synchronization is not active
2026-02-09T11:26:11.245+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1015907023 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:26:11.245+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:26:11.248+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:26:11.251+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:26:11.254+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@469f9fe5]
2026-02-09T11:26:11.256+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:26:11.257+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:26:11.258+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:26:20.477+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:26:20.480+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:26:20.482+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:26:20.483+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:26:20.483+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:26:20.484+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:26:20.484+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:26:20.484+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:26:20.485+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:26:20.485+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63e1c334] was not registered for synchronization because synchronization is not active
2026-02-09T11:26:20.488+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1614390037 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:26:20.491+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:26:20.494+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:26:20.496+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:26:20.497+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63e1c334]
2026-02-09T11:26:20.498+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:26:20.499+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:26:20.500+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:26:23.298+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:26:23.321+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:26:23.324+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:26:23.325+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:26:23.325+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:26:23.326+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:26:23.328+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:26:23.330+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@22ccc00b and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('SUPERADMIN', 'TAX_ACCOUNTANT')]
2026-02-09T11:26:23.335+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-09T11:26:23.338+09:00  WARN 40576 --- [http-nio-8080-exec-10] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-09T11:26:23.339+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:26:23.339+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-09T11:26:23.341+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-09T11:26:23.344+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-09T11:26:24.315+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:26:24.440+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:26:24.442+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:26:24.456+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:26:24.459+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:26:24.459+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:26:24.460+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:26:24.462+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:26:24.463+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:26:24.464+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d25aad8] was not registered for synchronization because synchronization is not active
2026-02-09T11:26:24.471+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1945716615 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:26:24.474+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:26:24.478+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:26:24.494+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:26:24.495+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d25aad8]
2026-02-09T11:26:24.497+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:26:24.498+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:26:24.499+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:26:24.500+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:26:24.501+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:26:24.501+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:26:24.509+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:26:24.509+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:26:24.510+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:26:24.510+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:26:24.513+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:26:24.515+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:26:24.516+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d22b0d0] was not registered for synchronization because synchronization is not active
2026-02-09T11:26:24.534+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2034658966 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:26:24.542+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:26:24.546+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:26:24.557+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:26:24.559+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d22b0d0]
2026-02-09T11:26:24.559+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:26:24.561+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:26:24.562+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:26:37.624+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:26:37.627+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:26:37.629+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:26:37.629+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:26:37.630+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:26:37.631+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:26:37.632+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:26:37.640+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:26:37.645+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:26:37.646+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e9912d] was not registered for synchronization because synchronization is not active
2026-02-09T11:26:37.659+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2096679242 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:26:37.661+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:26:37.665+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:26:37.668+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:26:37.668+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e9912d]
2026-02-09T11:26:37.672+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:26:37.673+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:26:37.675+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:26:41.675+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:26:41.678+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:26:41.681+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:26:41.682+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:26:41.683+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:26:41.684+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:26:41.697+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:26:41.698+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:26:41.702+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:26:41.706+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@593b6aa4] was not registered for synchronization because synchronization is not active
2026-02-09T11:26:41.713+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@685550353 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:26:41.714+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:26:41.746+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:26:41.765+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:26:41.765+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@593b6aa4]
2026-02-09T11:26:41.766+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:26:41.766+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:26:41.767+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:26:50.596+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:26:50.612+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:26:50.614+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:26:50.615+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:26:50.616+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:26:50.616+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:26:50.616+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:26:50.617+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@22ccc00b and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('SUPERADMIN', 'TAX_ACCOUNTANT')]
2026-02-09T11:26:50.618+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-09T11:26:50.621+09:00  WARN 40576 --- [http-nio-8080-exec-1] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-09T11:26:50.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:26:50.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-09T11:26:50.623+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-09T11:26:50.623+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-09T11:26:51.493+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:26:51.498+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:26:51.499+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:26:51.500+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:26:51.514+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:26:51.514+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:26:51.522+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:26:51.523+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:26:51.524+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:26:51.524+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49b5f930] was not registered for synchronization because synchronization is not active
2026-02-09T11:26:51.526+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@626140131 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:26:51.526+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:26:51.531+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:26:51.533+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:26:51.534+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49b5f930]
2026-02-09T11:26:51.535+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:26:51.538+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:26:51.541+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:27:04.092+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:27:04.095+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:27:04.097+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:27:04.097+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:27:04.098+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:27:04.098+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:27:04.099+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:27:04.103+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:27:04.104+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:27:04.105+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@237a2e04] was not registered for synchronization because synchronization is not active
2026-02-09T11:27:04.141+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1217148912 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:27:04.156+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:27:04.161+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:27:04.163+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:27:04.163+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@237a2e04]
2026-02-09T11:27:04.164+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:27:04.165+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:27:04.166+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:27:15.746+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:27:15.755+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:27:15.759+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:27:15.780+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:27:15.781+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:27:15.783+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:27:15.783+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:27:15.786+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:27:15.789+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:27:15.790+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d08bfdf] was not registered for synchronization because synchronization is not active
2026-02-09T11:27:15.792+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1909001222 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:27:15.794+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:27:15.798+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:27:15.802+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:27:15.804+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d08bfdf]
2026-02-09T11:27:15.805+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:27:15.805+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:27:15.806+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:29:26.584+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:29:26.708+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:29:26.724+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:29:26.725+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:29:26.726+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:29:26.726+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:29:26.727+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:29:26.729+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:29:26.730+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:29:26.735+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@349e3430] was not registered for synchronization because synchronization is not active
2026-02-09T11:29:26.747+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1581822304 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:29:26.748+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:29:26.757+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:29:26.762+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:29:26.762+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@349e3430]
2026-02-09T11:29:26.763+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:29:26.763+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:29:26.764+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:29:31.878+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:29:31.902+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:29:31.921+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:29:31.924+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:29:31.926+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:29:31.926+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:29:31.927+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:29:31.928+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:29:31.929+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:29:31.929+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69d45cc7] was not registered for synchronization because synchronization is not active
2026-02-09T11:29:31.936+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1689003859 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:29:31.938+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:29:31.941+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:29:31.946+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:29:31.958+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69d45cc7]
2026-02-09T11:29:31.959+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:29:31.960+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:29:31.962+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:29:38.362+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:29:38.520+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:29:38.524+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:29:38.525+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:29:38.528+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:29:38.532+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:29:38.539+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:29:38.542+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:29:38.544+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:29:38.556+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cf3a890] was not registered for synchronization because synchronization is not active
2026-02-09T11:29:38.593+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1714630794 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:29:38.610+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:29:38.613+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:29:38.646+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:29:38.657+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cf3a890]
2026-02-09T11:29:38.658+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:29:38.671+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:29:38.672+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:30:27.053+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:30:27.055+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:30:27.059+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-09T11:30:27.060+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:30:27.061+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:30:27.092+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:30:27.092+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:30:27.095+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:30:27.095+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-09T11:30:27.097+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:30:27.126+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:30:27.133+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:30:27.133+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:30:27.133+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies
2026-02-09T11:30:27.134+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:30:27.134+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:30:27.134+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:30:27.135+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:30:27.144+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-09T11:30:27.194+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:30:27.196+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:30:27.196+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:30:27.197+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:30:27.199+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-09T11:30:27.218+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:30:27.218+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:30:27.226+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:30:27.226+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:30:27.226+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-09T11:30:27.226+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:30:27.226+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:30:27.228+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:30:27.228+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:30:27.229+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:30:27.229+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:30:27.229+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@735dba08] was not registered for synchronization because synchronization is not active
2026-02-09T11:30:27.232+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@522593c9] was not registered for synchronization because synchronization is not active
2026-02-09T11:30:27.234+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ad8dc46] was not registered for synchronization because synchronization is not active
2026-02-09T11:30:27.234+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43d5afd7] was not registered for synchronization because synchronization is not active
2026-02-09T11:30:27.239+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@546701ec] was not registered for synchronization because synchronization is not active
2026-02-09T11:30:27.247+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@809821838 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:30:27.247+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1312373435 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:30:27.249+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@968467196 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:30:27.249+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@767950761 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:30:27.251+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-09T11:30:27.281+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:30:27.281+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:30:27.287+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@695036699 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:30:27.303+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:30:27.292+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:30:27.293+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 9(Long)
2026-02-09T11:30:27.296+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:30:27.302+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:30:27.305+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:30:27.317+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:30:27.339+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:30:27.339+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:30:27.339+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-09T11:30:27.339+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:30:27.339+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:30:27.348+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@546701ec]
2026-02-09T11:30:27.348+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ad8dc46]
2026-02-09T11:30:27.348+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43d5afd7]
2026-02-09T11:30:27.349+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@735dba08]
2026-02-09T11:30:27.349+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@522593c9]
2026-02-09T11:30:27.349+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:30:27.349+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:30:27.350+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:30:27.350+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:30:27.351+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:30:27.351+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c962bf3] was not registered for synchronization because synchronization is not active
2026-02-09T11:30:27.351+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e6cabdd] was not registered for synchronization because synchronization is not active
2026-02-09T11:30:27.352+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-09T11:30:27.352+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:30:27.352+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:30:27.353+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@930723914 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:30:27.353+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@668787491 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:30:27.356+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:30:27.356+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:30:27.359+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:30:27.359+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:30:27.360+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:30:27.363+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:30:27.371+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:30:27.376+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:30:27.376+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:30:27.378+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e6cabdd]
2026-02-09T11:30:27.378+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c962bf3]
2026-02-09T11:30:27.379+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:30:27.379+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:30:27.379+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:30:27.379+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:30:27.380+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:30:27.381+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:30:29.385+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:30:29.389+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:30:29.393+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-09T11:30:29.395+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:30:29.401+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:30:29.465+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:30:29.494+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:30:29.514+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-09T11:30:29.514+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:30:29.515+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:30:29.516+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:30:29.516+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:30:29.517+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies
2026-02-09T11:30:29.517+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:30:29.518+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:30:29.518+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:30:29.518+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:30:29.543+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-09T11:30:29.543+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:30:29.543+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:30:29.543+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:30:29.544+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:30:29.544+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-09T11:30:29.544+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:30:29.545+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:30:29.556+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:30:29.557+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:30:29.557+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-09T11:30:29.557+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:30:29.560+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:30:29.560+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:30:29.560+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:30:29.561+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:30:29.561+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:30:29.561+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c31bf6b] was not registered for synchronization because synchronization is not active
2026-02-09T11:30:29.561+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:30:29.562+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52f98166] was not registered for synchronization because synchronization is not active
2026-02-09T11:30:29.566+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28383ec3] was not registered for synchronization because synchronization is not active
2026-02-09T11:30:29.566+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34fc2615] was not registered for synchronization because synchronization is not active
2026-02-09T11:30:29.572+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@165ad0e] was not registered for synchronization because synchronization is not active
2026-02-09T11:30:29.574+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1469600539 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:30:29.575+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:30:29.575+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@698314361 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:30:29.575+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@993821356 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:30:29.575+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1879853389 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:30:29.575+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1794762539 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:30:29.576+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:30:29.576+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:30:29.576+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:30:29.576+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-09T11:30:29.577+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:30:29.578+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:30:29.579+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:30:29.580+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:30:29.581+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 9(Long)
2026-02-09T11:30:29.583+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:30:29.584+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c31bf6b]
2026-02-09T11:30:29.585+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:30:29.586+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:30:29.586+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52f98166]
2026-02-09T11:30:29.586+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:30:29.586+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-09T11:30:29.586+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:30:29.586+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:30:29.586+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:30:29.587+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:30:29.587+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28383ec3]
2026-02-09T11:30:29.588+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@165ad0e]
2026-02-09T11:30:29.589+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34fc2615]
2026-02-09T11:30:29.589+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24ba5042] was not registered for synchronization because synchronization is not active
2026-02-09T11:30:29.589+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:30:29.590+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:30:29.591+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:30:29.593+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1267759342 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:30:29.594+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-09T11:30:29.594+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@593cae74] was not registered for synchronization because synchronization is not active
2026-02-09T11:30:29.594+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:30:29.595+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:30:29.596+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:30:29.600+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@359207123 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:30:29.601+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:30:29.603+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:30:29.610+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:30:29.618+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:30:29.625+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:30:29.625+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:30:29.626+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24ba5042]
2026-02-09T11:30:29.626+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@593cae74]
2026-02-09T11:30:29.626+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:30:29.626+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:30:29.627+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:30:29.627+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:30:29.628+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:30:29.629+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:30:29.660+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:30:29.661+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:30:29.668+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:30:29.669+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:30:29.671+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:30:29.673+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:30:29.672+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:30:29.674+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:30:29.674+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:30:29.675+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:30:29.674+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:30:29.677+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:30:29.676+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:30:29.677+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ba93ca3] was not registered for synchronization because synchronization is not active
2026-02-09T11:30:29.678+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:30:29.687+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1288536488 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:30:29.687+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a506871] was not registered for synchronization because synchronization is not active
2026-02-09T11:30:29.691+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:30:29.692+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@264443379 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:30:29.695+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:30:29.695+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:30:29.699+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:30:29.726+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:30:29.732+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ba93ca3]
2026-02-09T11:30:29.732+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:30:29.733+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a506871]
2026-02-09T11:30:29.733+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:30:29.734+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:30:29.734+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:30:29.734+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a279066] was not registered for synchronization because synchronization is not active
2026-02-09T11:30:29.735+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1393393331 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:30:29.735+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:30:29.736+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:30:29.740+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:30:29.771+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:30:29.772+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a279066]
2026-02-09T11:30:29.773+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:30:29.775+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:30:29.776+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:30:34.495+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:30:34.528+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:30:34.528+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-09T11:30:34.529+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:30:34.536+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:30:34.637+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:30:34.639+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:30:34.672+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:30:34.672+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:30:34.674+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:30:34.675+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:30:34.675+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:30:34.675+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:30:34.684+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:30:34.685+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:30:34.685+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:30:34.686+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e0f26af] was not registered for synchronization because synchronization is not active
2026-02-09T11:30:34.686+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:30:34.687+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@441ec106] was not registered for synchronization because synchronization is not active
2026-02-09T11:30:34.702+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:30:34.702+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:30:34.702+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-09T11:30:34.709+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1338902272 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:30:34.711+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:30:34.710+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:30:34.710+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:30:34.711+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies
2026-02-09T11:30:34.715+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:30:34.715+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:30:34.716+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:30:34.716+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-09T11:30:34.717+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:30:34.732+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1131145042 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:30:34.733+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:30:34.741+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-09T11:30:34.742+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:30:34.743+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:30:34.743+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:30:34.765+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:30:34.839+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-09T11:30:35.002+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:30:35.059+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:30:35.088+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:30:35.095+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c03bcb1] was not registered for synchronization because synchronization is not active
2026-02-09T11:30:35.092+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e0f26af]
2026-02-09T11:30:35.093+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a7ac317] was not registered for synchronization because synchronization is not active
2026-02-09T11:30:35.093+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:30:35.104+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:30:35.105+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1369831415 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:30:35.105+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a7095b1] was not registered for synchronization because synchronization is not active
2026-02-09T11:30:35.106+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:30:35.107+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:30:35.109+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:30:35.113+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:30:35.114+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@505266944 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:30:35.115+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:30:35.171+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1145214444 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:30:35.176+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:30:35.177+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@441ec106]
2026-02-09T11:30:35.177+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-09T11:30:35.178+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:30:35.178+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:30:35.181+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 9(Long)
2026-02-09T11:30:35.187+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75858e71] was not registered for synchronization because synchronization is not active
2026-02-09T11:30:35.189+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:30:35.191+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@433958799 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:30:35.191+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a7ac317]
2026-02-09T11:30:35.191+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:30:35.192+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:30:35.192+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:30:35.193+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:30:35.194+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-09T11:30:35.194+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:30:35.194+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c03bcb1]
2026-02-09T11:30:35.195+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a7095b1]
2026-02-09T11:30:35.197+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:30:35.198+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:30:35.199+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:30:35.199+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:30:35.201+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a3f7b42] was not registered for synchronization because synchronization is not active
2026-02-09T11:30:35.202+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-09T11:30:35.202+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75858e71]
2026-02-09T11:30:35.203+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2051001286 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:30:35.203+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:30:35.203+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:30:35.206+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:30:35.209+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:30:35.211+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:30:35.211+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:30:35.218+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:30:35.220+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a3f7b42]
2026-02-09T11:30:35.220+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:30:35.221+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:30:35.222+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:31:20.780+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:31:20.782+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:31:20.783+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-09T11:31:20.785+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:31:20.786+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:31:20.875+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:31:20.901+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:31:20.906+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:31:20.906+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:31:20.906+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-09T11:31:20.916+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:31:20.907+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:31:20.915+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:31:20.915+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:31:20.917+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies
2026-02-09T11:31:20.917+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:31:20.919+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:31:20.920+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:31:20.924+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:31:20.924+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-09T11:31:20.925+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:31:20.925+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:31:20.926+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:31:20.926+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:31:20.927+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-09T11:31:20.927+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:31:20.930+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:31:20.931+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:31:20.941+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:31:20.946+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-09T11:31:20.965+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:31:20.998+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b932750] was not registered for synchronization because synchronization is not active
2026-02-09T11:31:21.119+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:31:21.219+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:31:21.266+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:31:21.270+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a9a750c] was not registered for synchronization because synchronization is not active
2026-02-09T11:31:21.288+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:31:21.288+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@678abba7] was not registered for synchronization because synchronization is not active
2026-02-09T11:31:21.288+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@648cccaa] was not registered for synchronization because synchronization is not active
2026-02-09T11:31:21.290+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7489f06b] was not registered for synchronization because synchronization is not active
2026-02-09T11:31:21.298+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@88598178 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:31:21.303+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@585895785 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:31:21.304+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:31:21.310+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:31:21.311+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@508141792 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:31:21.311+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@567864905 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:31:21.313+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@360773374 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:31:21.320+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:31:21.321+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:31:21.322+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-09T11:31:21.322+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:31:21.323+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:31:21.341+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 9(Long)
2026-02-09T11:31:21.342+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:31:21.344+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:31:21.350+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:31:21.365+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b932750]
2026-02-09T11:31:21.367+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:31:21.370+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-09T11:31:21.371+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:31:21.371+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:31:21.372+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:31:21.374+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:31:21.374+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@648cccaa]
2026-02-09T11:31:21.375+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@678abba7]
2026-02-09T11:31:21.375+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a9a750c]
2026-02-09T11:31:21.375+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7489f06b]
2026-02-09T11:31:21.376+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:31:21.381+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:31:21.382+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:31:21.382+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:31:21.382+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:31:21.383+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-09T11:31:21.383+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:31:21.385+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@129e0cb7] was not registered for synchronization because synchronization is not active
2026-02-09T11:31:21.394+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@406b9d9a] was not registered for synchronization because synchronization is not active
2026-02-09T11:31:21.399+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:31:21.403+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:31:21.404+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1752981383 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:31:21.410+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@236869308 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:31:21.426+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:31:21.427+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:31:21.432+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:31:21.433+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:31:21.450+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:31:21.450+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:31:21.453+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@406b9d9a]
2026-02-09T11:31:21.453+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@129e0cb7]
2026-02-09T11:31:21.454+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:31:21.454+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:31:21.455+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:31:21.457+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:31:21.457+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:31:21.457+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:31:21.458+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:31:21.461+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:31:21.495+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:31:21.497+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:31:21.506+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:31:21.509+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:31:21.510+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:31:21.511+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:31:21.511+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:31:21.511+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:31:21.513+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:31:21.514+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:31:21.517+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:31:21.517+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75139724] was not registered for synchronization because synchronization is not active
2026-02-09T11:31:21.521+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:31:21.521+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1147078930 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:31:21.521+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58222b12] was not registered for synchronization because synchronization is not active
2026-02-09T11:31:21.522+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:31:21.524+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@131212541 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:31:21.526+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:31:21.526+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:31:21.532+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:31:21.536+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:31:21.538+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75139724]
2026-02-09T11:31:21.538+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:31:21.539+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:31:21.540+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:31:21.541+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58222b12]
2026-02-09T11:31:21.542+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:31:21.543+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:31:21.560+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e0806fb] was not registered for synchronization because synchronization is not active
2026-02-09T11:31:21.561+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1203488403 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:31:21.564+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:31:21.569+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:31:21.582+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:31:21.584+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e0806fb]
2026-02-09T11:31:21.584+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:31:21.587+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:31:21.588+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:31:21.789+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:31:21.790+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:31:21.814+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:31:21.815+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:31:21.816+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:31:21.817+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:31:21.853+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:31:21.853+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:31:21.858+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:31:21.859+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:31:21.859+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:31:21.859+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:31:21.860+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:31:21.860+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:31:21.860+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:31:21.861+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:31:21.864+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:31:21.866+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:31:21.866+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:31:21.867+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:31:21.867+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:31:21.868+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:31:21.868+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:31:21.869+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:31:21.869+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:31:21.869+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:31:21.870+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:31:21.871+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:31:21.871+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:31:21.873+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:31:21.874+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:31:21.874+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:31:21.881+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:31:21.881+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:31:21.882+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:31:21.882+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:31:21.882+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:31:21.883+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:31:21.883+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42a3ad88] was not registered for synchronization because synchronization is not active
2026-02-09T11:31:21.883+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58385401] was not registered for synchronization because synchronization is not active
2026-02-09T11:31:21.884+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:31:21.884+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:31:21.884+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:31:21.885+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:31:21.885+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1580760843 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:31:21.886+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@975241221 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:31:21.887+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:31:21.887+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ef99480] was not registered for synchronization because synchronization is not active
2026-02-09T11:31:21.888+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13542455] was not registered for synchronization because synchronization is not active
2026-02-09T11:31:21.888+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:31:21.889+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:31:21.889+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:31:21.890+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:31:21.890+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1619550330 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:31:21.892+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:31:21.893+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:31:21.894+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:31:21.895+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@755309928 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:31:21.896+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69e2ee27] was not registered for synchronization because synchronization is not active
2026-02-09T11:31:21.897+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:31:21.898+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@392dba99] was not registered for synchronization because synchronization is not active
2026-02-09T11:31:21.899+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:31:21.902+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:31:21.903+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:31:21.905+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1007316999 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:31:21.905+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:31:21.905+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:31:21.907+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:31:21.908+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58385401]
2026-02-09T11:31:21.908+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42a3ad88]
2026-02-09T11:31:21.910+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:31:21.910+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:31:21.910+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:31:21.910+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5671f8b0] was not registered for synchronization because synchronization is not active
2026-02-09T11:31:21.911+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:31:21.911+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1291007523 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will not be managed by Spring
2026-02-09T11:31:21.911+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:31:21.912+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:31:21.914+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1235619409 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:31:21.914+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:31:21.915+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:31:21.920+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:31:21.921+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:31:21.922+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13542455]
2026-02-09T11:31:21.923+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ef99480]
2026-02-09T11:31:21.928+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:31:21.929+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:31:21.930+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:31:21.931+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77dd3dc2] was not registered for synchronization because synchronization is not active
2026-02-09T11:31:21.931+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:31:21.932+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1082224290 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:31:21.932+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:31:21.932+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:31:21.935+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:31:21.941+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:31:21.952+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69e2ee27]
2026-02-09T11:31:21.954+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:31:21.954+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:31:21.955+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:31:21.957+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5671f8b0]
2026-02-09T11:31:21.958+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@392dba99]
2026-02-09T11:31:21.958+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:31:21.959+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:31:21.959+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:31:21.959+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:31:21.959+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:31:21.967+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:31:21.969+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:31:21.970+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:31:21.970+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77dd3dc2]
2026-02-09T11:31:21.971+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:31:21.977+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:31:21.983+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:31:21.985+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:31:30.085+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/13
2026-02-09T11:31:30.093+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing PUT /api/expense-categories/13
2026-02-09T11:31:30.094+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/13
2026-02-09T11:31:30.099+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured PUT /api/expense-categories/13
2026-02-09T11:31:30.099+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : PUT "/api/expense-categories/13", parameters={}
2026-02-09T11:31:30.100+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#updateCategory(Long, ExpenseCategoryDto)
2026-02-09T11:31:30.105+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ExpenseCategoryDto(categoryId=null, companyId=null, categoryName=null, displayOrder=null, isActive=f (truncated)...]
2026-02-09T11:31:30.106+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.updateCategory(java.lang.Long,com.innersignature.backend.dto.ExpenseCategoryDto); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:31:30.107+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.updateCategory(java.lang.Long,com.innersignature.backend.dto.ExpenseCategoryDto); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:31:30.122+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:31:30.123+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41605a70]
2026-02-09T11:31:30.125+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1218776493 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will be managed by Spring
2026-02-09T11:31:30.125+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseCategoryMapper.findById   : ==>  Preparing: SELECT ec.*, CASE WHEN ec.company_id IS NULL THEN 1 ELSE 0 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec LEFT JOIN user_tb u ON ec.created_by = u.user_id WHERE ec.category_id = ? AND ( ec.company_id = ? OR ec.company_id IS NULL )
2026-02-09T11:31:30.126+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseCategoryMapper.findById   : ==> Parameters: 13(Long), 3(Long)
2026-02-09T11:31:30.131+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseCategoryMapper.findById   : <==      Total: 1
2026-02-09T11:31:30.131+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41605a70]
2026-02-09T11:31:30.132+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41605a70] from current transaction
2026-02-09T11:31:30.133+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseCategoryMapper.update     : ==>  Preparing: UPDATE expense_category_tb SET category_name = ?, display_order = ?, is_active = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:31:30.134+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseCategoryMapper.update     : ==> Parameters: 탕비실 비품(String), 12(Integer), false(Boolean), 13(Long), 3(Long)
2026-02-09T11:31:30.141+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseCategoryMapper.update     : <==    Updates: 1
2026-02-09T11:31:30.141+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41605a70]
2026-02-09T11:31:30.142+09:00  INFO 40576 --- [http-nio-8080-exec-2] c.i.b.service.ExpenseCategoryService     : 항목 수정 완료 - categoryId: 13, isGlobal: false
2026-02-09T11:31:30.142+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41605a70] from current transaction
2026-02-09T11:31:30.143+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseCategoryMapper.findById   : ==>  Preparing: SELECT ec.*, CASE WHEN ec.company_id IS NULL THEN 1 ELSE 0 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec LEFT JOIN user_tb u ON ec.created_by = u.user_id WHERE ec.category_id = ? AND ( ec.company_id = ? OR ec.company_id IS NULL )
2026-02-09T11:31:30.143+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseCategoryMapper.findById   : ==> Parameters: 13(Long), 3(Long)
2026-02-09T11:31:30.147+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseCategoryMapper.findById   : <==      Total: 1
2026-02-09T11:31:30.148+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41605a70]
2026-02-09T11:31:30.149+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41605a70]
2026-02-09T11:31:30.149+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41605a70]
2026-02-09T11:31:30.150+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41605a70]
2026-02-09T11:31:30.156+09:00  INFO 40576 --- [http-nio-8080-exec-2] c.i.b.c.ExpenseCategoryController        : 항목 수정 완료 - categoryId: 13
2026-02-09T11:31:30.157+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:31:30.158+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=항목이 수정되었습니다., data=ExpenseCategoryDto(categoryId=13, companyId=3,  (truncated)...]
2026-02-09T11:31:30.159+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:31:30.860+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:31:30.865+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:31:30.866+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:31:30.873+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:31:30.874+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:31:30.874+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:31:30.875+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:31:30.875+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:31:30.875+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:31:30.876+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@144a9a16] was not registered for synchronization because synchronization is not active
2026-02-09T11:31:30.878+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1014320370 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:31:30.901+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:31:30.916+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:31:30.919+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : <==      Total: 12
2026-02-09T11:31:30.920+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@144a9a16]
2026-02-09T11:31:30.922+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:31:30.922+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:31:30.923+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:31:35.196+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/reorder
2026-02-09T11:31:35.200+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing PUT /api/expense-categories/reorder
2026-02-09T11:31:35.201+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/reorder
2026-02-09T11:31:35.201+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured PUT /api/expense-categories/reorder
2026-02-09T11:31:35.202+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : PUT "/api/expense-categories/reorder", parameters={}
2026-02-09T11:31:35.202+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#reorderCategories(List)
2026-02-09T11:31:35.203+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [[1, 3, 2, 4, 5, 6, 7, 8, 9, 11, 10, 12]]
2026-02-09T11:31:35.204+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.reorderCategories(java.util.List); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:31:35.205+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.reorderCategories(java.util.List); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:31:35.209+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:31:35.209+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d554b66]
2026-02-09T11:31:35.212+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@570591986 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will be managed by Spring
2026-02-09T11:31:35.212+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:31:35.213+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 0(Integer), 1(Long), 3(Long)
2026-02-09T11:31:35.219+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:31:35.220+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d554b66]
2026-02-09T11:31:35.221+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d554b66] from current transaction
2026-02-09T11:31:35.221+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:31:35.225+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 1(Integer), 3(Long), 3(Long)
2026-02-09T11:31:35.232+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:31:35.232+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d554b66]
2026-02-09T11:31:35.232+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d554b66] from current transaction
2026-02-09T11:31:35.232+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:31:35.233+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 2(Integer), 2(Long), 3(Long)
2026-02-09T11:31:35.236+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:31:35.236+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d554b66]
2026-02-09T11:31:35.236+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d554b66] from current transaction
2026-02-09T11:31:35.237+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:31:35.237+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 3(Integer), 4(Long), 3(Long)
2026-02-09T11:31:35.240+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:31:35.240+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d554b66]
2026-02-09T11:31:35.241+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d554b66] from current transaction
2026-02-09T11:31:35.241+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:31:35.241+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 4(Integer), 5(Long), 3(Long)
2026-02-09T11:31:35.243+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:31:35.244+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d554b66]
2026-02-09T11:31:35.244+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d554b66] from current transaction
2026-02-09T11:31:35.247+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:31:35.248+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 5(Integer), 6(Long), 3(Long)
2026-02-09T11:31:35.250+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:31:35.250+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d554b66]
2026-02-09T11:31:35.251+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d554b66] from current transaction
2026-02-09T11:31:35.251+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:31:35.251+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 6(Integer), 7(Long), 3(Long)
2026-02-09T11:31:35.253+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:31:35.253+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d554b66]
2026-02-09T11:31:35.254+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d554b66] from current transaction
2026-02-09T11:31:35.254+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:31:35.254+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 7(Integer), 8(Long), 3(Long)
2026-02-09T11:31:35.256+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:31:35.256+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d554b66]
2026-02-09T11:31:35.257+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d554b66] from current transaction
2026-02-09T11:31:35.257+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:31:35.257+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 8(Integer), 9(Long), 3(Long)
2026-02-09T11:31:35.259+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:31:35.260+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d554b66]
2026-02-09T11:31:35.260+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d554b66] from current transaction
2026-02-09T11:31:35.260+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:31:35.263+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 9(Integer), 11(Long), 3(Long)
2026-02-09T11:31:35.266+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:31:35.266+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d554b66]
2026-02-09T11:31:35.266+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d554b66] from current transaction
2026-02-09T11:31:35.267+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:31:35.267+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 10(Integer), 10(Long), 3(Long)
2026-02-09T11:31:35.269+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:31:35.269+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d554b66]
2026-02-09T11:31:35.270+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d554b66] from current transaction
2026-02-09T11:31:35.270+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:31:35.270+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 11(Integer), 12(Long), 3(Long)
2026-02-09T11:31:35.273+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:31:35.273+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d554b66]
2026-02-09T11:31:35.273+09:00  INFO 40576 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 항목 순서 일괄 변경 완료 - 항목 수: 12, isGlobal: false
2026-02-09T11:31:35.273+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d554b66]
2026-02-09T11:31:35.273+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d554b66]
2026-02-09T11:31:35.274+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d554b66]
2026-02-09T11:31:35.276+09:00  INFO 40576 --- [http-nio-8080-exec-10] c.i.b.c.ExpenseCategoryController        : 항목 순서 일괄 변경 완료 - 항목 수: 12
2026-02-09T11:31:35.276+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:31:35.276+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=항목 순서가 변경되었습니다., data=null)]
2026-02-09T11:31:35.277+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:31:36.989+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/reorder
2026-02-09T11:31:36.993+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing PUT /api/expense-categories/reorder
2026-02-09T11:31:36.994+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/reorder
2026-02-09T11:31:36.996+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured PUT /api/expense-categories/reorder
2026-02-09T11:31:36.997+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : PUT "/api/expense-categories/reorder", parameters={}
2026-02-09T11:31:37.000+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#reorderCategories(List)
2026-02-09T11:31:37.001+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [[1, 3, 2, 4, 5, 6, 7, 8, 9, 10, 11, 12]]
2026-02-09T11:31:37.001+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.reorderCategories(java.util.List); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:31:37.002+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.reorderCategories(java.util.List); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:31:37.013+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:31:37.015+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484cb1e9]
2026-02-09T11:31:37.016+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1659905392 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will be managed by Spring
2026-02-09T11:31:37.016+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:31:37.017+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 0(Integer), 1(Long), 3(Long)
2026-02-09T11:31:37.019+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:31:37.020+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484cb1e9]
2026-02-09T11:31:37.021+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484cb1e9] from current transaction
2026-02-09T11:31:37.021+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:31:37.022+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 1(Integer), 3(Long), 3(Long)
2026-02-09T11:31:37.025+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:31:37.026+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484cb1e9]
2026-02-09T11:31:37.030+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484cb1e9] from current transaction
2026-02-09T11:31:37.031+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:31:37.032+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 2(Integer), 2(Long), 3(Long)
2026-02-09T11:31:37.035+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:31:37.035+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484cb1e9]
2026-02-09T11:31:37.036+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484cb1e9] from current transaction
2026-02-09T11:31:37.036+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:31:37.037+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 3(Integer), 4(Long), 3(Long)
2026-02-09T11:31:37.039+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:31:37.039+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484cb1e9]
2026-02-09T11:31:37.040+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484cb1e9] from current transaction
2026-02-09T11:31:37.040+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:31:37.041+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 4(Integer), 5(Long), 3(Long)
2026-02-09T11:31:37.043+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:31:37.043+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484cb1e9]
2026-02-09T11:31:37.044+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484cb1e9] from current transaction
2026-02-09T11:31:37.044+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:31:37.044+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 5(Integer), 6(Long), 3(Long)
2026-02-09T11:31:37.050+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:31:37.050+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484cb1e9]
2026-02-09T11:31:37.050+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484cb1e9] from current transaction
2026-02-09T11:31:37.051+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:31:37.051+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 6(Integer), 7(Long), 3(Long)
2026-02-09T11:31:37.053+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:31:37.053+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484cb1e9]
2026-02-09T11:31:37.053+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484cb1e9] from current transaction
2026-02-09T11:31:37.053+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:31:37.054+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 7(Integer), 8(Long), 3(Long)
2026-02-09T11:31:37.056+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:31:37.057+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484cb1e9]
2026-02-09T11:31:37.057+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484cb1e9] from current transaction
2026-02-09T11:31:37.057+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:31:37.057+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 8(Integer), 9(Long), 3(Long)
2026-02-09T11:31:37.059+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:31:37.059+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484cb1e9]
2026-02-09T11:31:37.059+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484cb1e9] from current transaction
2026-02-09T11:31:37.060+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:31:37.060+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 9(Integer), 10(Long), 3(Long)
2026-02-09T11:31:37.062+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:31:37.064+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484cb1e9]
2026-02-09T11:31:37.065+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484cb1e9] from current transaction
2026-02-09T11:31:37.065+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:31:37.065+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 10(Integer), 11(Long), 3(Long)
2026-02-09T11:31:37.067+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:31:37.067+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484cb1e9]
2026-02-09T11:31:37.068+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484cb1e9] from current transaction
2026-02-09T11:31:37.068+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:31:37.068+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 11(Integer), 12(Long), 3(Long)
2026-02-09T11:31:37.070+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:31:37.070+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484cb1e9]
2026-02-09T11:31:37.070+09:00  INFO 40576 --- [http-nio-8080-exec-6] c.i.b.service.ExpenseCategoryService     : 항목 순서 일괄 변경 완료 - 항목 수: 12, isGlobal: false
2026-02-09T11:31:37.071+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484cb1e9]
2026-02-09T11:31:37.072+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484cb1e9]
2026-02-09T11:31:37.072+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484cb1e9]
2026-02-09T11:31:37.074+09:00  INFO 40576 --- [http-nio-8080-exec-6] c.i.b.c.ExpenseCategoryController        : 항목 순서 일괄 변경 완료 - 항목 수: 12
2026-02-09T11:31:37.074+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:31:37.074+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=항목 순서가 변경되었습니다., data=null)]
2026-02-09T11:31:37.075+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:31:58.550+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/create
2026-02-09T11:31:58.551+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/expense-categories/create
2026-02-09T11:31:58.552+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/create
2026-02-09T11:31:58.553+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/expense-categories/create
2026-02-09T11:31:58.553+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/expense-categories/create", parameters={}
2026-02-09T11:31:58.553+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#createCategory(ExpenseCategoryDto)
2026-02-09T11:31:58.554+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ExpenseCategoryDto(categoryId=null, companyId=null, categoryName=수정 테스트, displayOrder=12, isActive=t (truncated)...]
2026-02-09T11:31:58.555+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.createCategory(com.innersignature.backend.dto.ExpenseCategoryDto); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:31:58.556+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.createCategory(com.innersignature.backend.dto.ExpenseCategoryDto); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:31:58.566+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:31:58.566+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50a83132]
2026-02-09T11:31:58.566+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@146938355 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will be managed by Spring
2026-02-09T11:31:58.566+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.existsByName                   : ==>  Preparing: SELECT COUNT(*) > 0 FROM expense_category_tb WHERE category_name = ? AND ( company_id = ? )
2026-02-09T11:31:58.567+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.existsByName                   : ==> Parameters: 수정 테스트(String), 3(Long)
2026-02-09T11:31:58.571+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.existsByName                   : <==      Total: 1
2026-02-09T11:31:58.572+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50a83132]
2026-02-09T11:31:58.572+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50a83132] from current transaction
2026-02-09T11:31:58.575+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseCategoryMapper.insert     : ==>  Preparing: INSERT INTO expense_category_tb ( company_id, category_name, display_order, is_active, created_by ) VALUES ( ?, ?, COALESCE(?, 0), COALESCE(?, 1), ? )
2026-02-09T11:31:58.576+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseCategoryMapper.insert     : ==> Parameters: 3(Long), 수정 테스트(String), 12(Integer), true(Boolean), 9(Long)
2026-02-09T11:31:58.589+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseCategoryMapper.insert     : <==    Updates: 1
2026-02-09T11:31:58.593+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50a83132]
2026-02-09T11:31:58.593+09:00  INFO 40576 --- [http-nio-8080-exec-5] c.i.b.service.ExpenseCategoryService     : 항목 생성 완료 - categoryId: 14, isGlobal: false
2026-02-09T11:31:58.597+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50a83132] from current transaction
2026-02-09T11:31:58.598+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseCategoryMapper.findById   : ==>  Preparing: SELECT ec.*, CASE WHEN ec.company_id IS NULL THEN 1 ELSE 0 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec LEFT JOIN user_tb u ON ec.created_by = u.user_id WHERE ec.category_id = ? AND ( ec.company_id = ? OR ec.company_id IS NULL )
2026-02-09T11:31:58.599+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseCategoryMapper.findById   : ==> Parameters: 14(Long), 3(Long)
2026-02-09T11:31:58.601+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseCategoryMapper.findById   : <==      Total: 1
2026-02-09T11:31:58.602+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50a83132]
2026-02-09T11:31:58.602+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50a83132]
2026-02-09T11:31:58.602+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50a83132]
2026-02-09T11:31:58.602+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50a83132]
2026-02-09T11:31:58.615+09:00  INFO 40576 --- [http-nio-8080-exec-5] c.i.b.c.ExpenseCategoryController        : 항목 생성 완료 - categoryId: 14
2026-02-09T11:31:58.616+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:31:58.616+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=항목이 생성되었습니다., data=ExpenseCategoryDto(categoryId=14, companyId=3,  (truncated)...]
2026-02-09T11:31:58.617+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:31:59.457+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:31:59.470+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:31:59.471+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:31:59.472+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:31:59.472+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:31:59.472+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:31:59.473+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:31:59.473+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:31:59.474+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:31:59.474+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69d9e83c] was not registered for synchronization because synchronization is not active
2026-02-09T11:31:59.476+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@133472505 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:31:59.477+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:31:59.483+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:31:59.487+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:31:59.487+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69d9e83c]
2026-02-09T11:31:59.488+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:31:59.488+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:31:59.489+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:32:03.541+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/14
2026-02-09T11:32:03.543+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing PUT /api/expense-categories/14
2026-02-09T11:32:03.547+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/14
2026-02-09T11:32:03.548+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured PUT /api/expense-categories/14
2026-02-09T11:32:03.548+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : PUT "/api/expense-categories/14", parameters={}
2026-02-09T11:32:03.549+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#updateCategory(Long, ExpenseCategoryDto)
2026-02-09T11:32:03.549+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ExpenseCategoryDto(categoryId=null, companyId=null, categoryName=수정 테스트1, displayOrder=12, isActive= (truncated)...]
2026-02-09T11:32:03.550+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.updateCategory(java.lang.Long,com.innersignature.backend.dto.ExpenseCategoryDto); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:32:03.551+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.updateCategory(java.lang.Long,com.innersignature.backend.dto.ExpenseCategoryDto); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:32:03.554+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:32:03.555+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b92b4a8]
2026-02-09T11:32:03.555+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1396623969 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will be managed by Spring
2026-02-09T11:32:03.558+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseCategoryMapper.findById   : ==>  Preparing: SELECT ec.*, CASE WHEN ec.company_id IS NULL THEN 1 ELSE 0 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec LEFT JOIN user_tb u ON ec.created_by = u.user_id WHERE ec.category_id = ? AND ( ec.company_id = ? OR ec.company_id IS NULL )
2026-02-09T11:32:03.558+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseCategoryMapper.findById   : ==> Parameters: 14(Long), 3(Long)
2026-02-09T11:32:03.566+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseCategoryMapper.findById   : <==      Total: 1
2026-02-09T11:32:03.569+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b92b4a8]
2026-02-09T11:32:03.569+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b92b4a8] from current transaction
2026-02-09T11:32:03.569+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.existsByName                   : ==>  Preparing: SELECT COUNT(*) > 0 FROM expense_category_tb WHERE category_name = ? AND ( company_id = ? )
2026-02-09T11:32:03.569+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.existsByName                   : ==> Parameters: 수정 테스트1(String), 3(Long)
2026-02-09T11:32:03.571+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.existsByName                   : <==      Total: 1
2026-02-09T11:32:03.571+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b92b4a8]
2026-02-09T11:32:03.572+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b92b4a8] from current transaction
2026-02-09T11:32:03.572+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseCategoryMapper.update     : ==>  Preparing: UPDATE expense_category_tb SET category_name = ?, display_order = ?, is_active = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:32:03.572+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseCategoryMapper.update     : ==> Parameters: 수정 테스트1(String), 12(Integer), true(Boolean), 14(Long), 3(Long)
2026-02-09T11:32:03.576+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseCategoryMapper.update     : <==    Updates: 1
2026-02-09T11:32:03.577+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b92b4a8]
2026-02-09T11:32:03.577+09:00  INFO 40576 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 항목 수정 완료 - categoryId: 14, isGlobal: false
2026-02-09T11:32:03.577+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b92b4a8] from current transaction
2026-02-09T11:32:03.581+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseCategoryMapper.findById   : ==>  Preparing: SELECT ec.*, CASE WHEN ec.company_id IS NULL THEN 1 ELSE 0 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec LEFT JOIN user_tb u ON ec.created_by = u.user_id WHERE ec.category_id = ? AND ( ec.company_id = ? OR ec.company_id IS NULL )
2026-02-09T11:32:03.582+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseCategoryMapper.findById   : ==> Parameters: 14(Long), 3(Long)
2026-02-09T11:32:03.584+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseCategoryMapper.findById   : <==      Total: 1
2026-02-09T11:32:03.584+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b92b4a8]
2026-02-09T11:32:03.585+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b92b4a8]
2026-02-09T11:32:03.585+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b92b4a8]
2026-02-09T11:32:03.585+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b92b4a8]
2026-02-09T11:32:03.589+09:00  INFO 40576 --- [http-nio-8080-exec-7] c.i.b.c.ExpenseCategoryController        : 항목 수정 완료 - categoryId: 14
2026-02-09T11:32:03.590+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:32:03.591+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=항목이 수정되었습니다., data=ExpenseCategoryDto(categoryId=14, companyId=3,  (truncated)...]
2026-02-09T11:32:03.591+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:32:04.562+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:32:04.574+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:32:04.576+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:32:04.583+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:32:04.583+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:32:04.584+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:32:04.586+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:32:04.591+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:32:04.592+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:32:04.598+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cc84bba] was not registered for synchronization because synchronization is not active
2026-02-09T11:32:04.614+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1544318165 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:32:04.614+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:32:04.618+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:32:04.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:32:04.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cc84bba]
2026-02-09T11:32:04.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:32:04.623+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:32:04.624+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:32:07.773+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:32:07.801+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:32:07.813+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:32:07.821+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:32:07.828+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:32:07.849+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:32:07.851+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:32:07.852+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@22ccc00b and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('SUPERADMIN', 'TAX_ACCOUNTANT')]
2026-02-09T11:32:07.854+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-09T11:32:07.854+09:00  WARN 40576 --- [http-nio-8080-exec-6] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-09T11:32:07.861+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:32:07.863+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-09T11:32:07.865+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-09T11:32:07.868+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-09T11:32:09.109+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:32:09.112+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:32:09.114+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:32:09.115+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:32:09.116+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:32:09.116+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:32:09.117+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:32:09.120+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:32:09.121+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:32:09.121+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@324c74bb] was not registered for synchronization because synchronization is not active
2026-02-09T11:32:09.131+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1055021738 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:32:09.132+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:32:09.134+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:32:09.137+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:32:09.138+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@324c74bb]
2026-02-09T11:32:09.138+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:32:09.139+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:32:09.140+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:35:06.561+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/reorder
2026-02-09T11:35:06.565+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing PUT /api/expense-categories/reorder
2026-02-09T11:35:06.566+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/reorder
2026-02-09T11:35:06.566+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured PUT /api/expense-categories/reorder
2026-02-09T11:35:06.567+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : PUT "/api/expense-categories/reorder", parameters={}
2026-02-09T11:35:06.567+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#reorderCategories(List)
2026-02-09T11:35:06.568+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [[1, 3, 2, 4, 5, 6, 8, 7, 9, 10, 11, 12, 14]]
2026-02-09T11:35:06.568+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.reorderCategories(java.util.List); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:35:06.569+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.reorderCategories(java.util.List); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:35:06.576+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:35:06.577+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a1c5098]
2026-02-09T11:35:06.578+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1453519399 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b00044a] will be managed by Spring
2026-02-09T11:35:06.579+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:35:06.579+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 0(Integer), 1(Long), 3(Long)
2026-02-09T11:35:06.583+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:35:06.584+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a1c5098]
2026-02-09T11:35:06.585+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a1c5098] from current transaction
2026-02-09T11:35:06.585+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:35:06.585+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 1(Integer), 3(Long), 3(Long)
2026-02-09T11:35:06.588+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:35:06.589+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a1c5098]
2026-02-09T11:35:06.593+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a1c5098] from current transaction
2026-02-09T11:35:06.595+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:35:06.595+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 2(Integer), 2(Long), 3(Long)
2026-02-09T11:35:06.598+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:35:06.599+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a1c5098]
2026-02-09T11:35:06.599+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a1c5098] from current transaction
2026-02-09T11:35:06.599+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:35:06.599+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 3(Integer), 4(Long), 3(Long)
2026-02-09T11:35:06.602+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:35:06.602+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a1c5098]
2026-02-09T11:35:06.602+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a1c5098] from current transaction
2026-02-09T11:35:06.603+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:35:06.603+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 4(Integer), 5(Long), 3(Long)
2026-02-09T11:35:06.605+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:35:06.605+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a1c5098]
2026-02-09T11:35:06.609+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a1c5098] from current transaction
2026-02-09T11:35:06.610+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:35:06.611+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 5(Integer), 6(Long), 3(Long)
2026-02-09T11:35:06.614+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:35:06.614+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a1c5098]
2026-02-09T11:35:06.616+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a1c5098] from current transaction
2026-02-09T11:35:06.617+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:35:06.617+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 6(Integer), 8(Long), 3(Long)
2026-02-09T11:35:06.619+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:35:06.619+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a1c5098]
2026-02-09T11:35:06.620+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a1c5098] from current transaction
2026-02-09T11:35:06.620+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:35:06.620+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 7(Integer), 7(Long), 3(Long)
2026-02-09T11:35:06.623+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:35:06.623+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a1c5098]
2026-02-09T11:35:06.626+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a1c5098] from current transaction
2026-02-09T11:35:06.626+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:35:06.627+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 8(Integer), 9(Long), 3(Long)
2026-02-09T11:35:06.631+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:35:06.631+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a1c5098]
2026-02-09T11:35:06.631+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a1c5098] from current transaction
2026-02-09T11:35:06.632+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:35:06.632+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 9(Integer), 10(Long), 3(Long)
2026-02-09T11:35:06.634+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:35:06.634+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a1c5098]
2026-02-09T11:35:06.635+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a1c5098] from current transaction
2026-02-09T11:35:06.635+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:35:06.635+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 10(Integer), 11(Long), 3(Long)
2026-02-09T11:35:06.638+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:35:06.638+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a1c5098]
2026-02-09T11:35:06.638+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a1c5098] from current transaction
2026-02-09T11:35:06.638+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:35:06.639+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 11(Integer), 12(Long), 3(Long)
2026-02-09T11:35:06.643+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:35:06.643+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a1c5098]
2026-02-09T11:35:06.644+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a1c5098] from current transaction
2026-02-09T11:35:06.644+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:35:06.644+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 12(Integer), 14(Long), 3(Long)
2026-02-09T11:35:06.646+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 1
2026-02-09T11:35:06.647+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a1c5098]
2026-02-09T11:35:06.647+09:00  INFO 40576 --- [http-nio-8080-exec-6] c.i.b.service.ExpenseCategoryService     : 항목 순서 일괄 변경 완료 - 항목 수: 13, isGlobal: false
2026-02-09T11:35:06.647+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a1c5098]
2026-02-09T11:35:06.647+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a1c5098]
2026-02-09T11:35:06.648+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a1c5098]
2026-02-09T11:35:06.659+09:00  INFO 40576 --- [http-nio-8080-exec-6] c.i.b.c.ExpenseCategoryController        : 항목 순서 일괄 변경 완료 - 항목 수: 13
2026-02-09T11:35:06.660+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:35:06.660+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=항목 순서가 변경되었습니다., data=null)]
2026-02-09T11:35:06.661+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:35:08.503+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:35:08.510+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:35:08.513+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-02-09T11:35:08.515+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-02-09T11:35:08.515+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:35:08.516+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:35:08.518+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-02-09T11:35:08.527+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:35:08.519+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:35:08.522+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-02-09T11:35:08.527+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/companies
2026-02-09T11:35:08.527+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:35:08.527+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:35:08.529+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-02-09T11:35:08.529+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/companies
2026-02-09T11:35:08.529+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:35:08.530+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:35:08.530+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-02-09T11:35:08.530+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-02-09T11:35:08.530+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:35:08.530+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:35:08.531+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-02-09T11:35:08.532+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-02-09T11:35:08.532+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:35:08.532+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:35:08.532+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:35:08.533+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-02-09T11:35:08.533+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71745337] was not registered for synchronization because synchronization is not active
2026-02-09T11:35:08.533+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c912046] was not registered for synchronization because synchronization is not active
2026-02-09T11:35:08.533+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@589b28c0] was not registered for synchronization because synchronization is not active
2026-02-09T11:35:08.534+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:35:08.537+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1929793188 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:35:08.537+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@813259622 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:35:08.537+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@271b0b87] was not registered for synchronization because synchronization is not active
2026-02-09T11:35:08.539+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:35:08.539+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:35:08.539+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@441906795 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:35:08.542+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:35:08.543+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:35:08.543+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:35:08.543+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@722311006 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:35:08.545+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:35:08.545+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:35:08.546+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:35:08.548+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71745337]
2026-02-09T11:35:08.548+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:35:08.548+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:35:08.549+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:35:08.549+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e028cce] was not registered for synchronization because synchronization is not active
2026-02-09T11:35:08.549+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:35:08.550+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c912046]
2026-02-09T11:35:08.550+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1035774283 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:35:08.550+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@589b28c0]
2026-02-09T11:35:08.550+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:35:08.550+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:35:08.551+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:35:08.551+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:35:08.551+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:35:08.551+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:35:08.551+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@271b0b87]
2026-02-09T11:35:08.552+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=7, userId=9, companyId=3 (truncated)...]
2026-02-09T11:35:08.553+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:35:08.553+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:35:08.553+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:35:08.554+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=7, userId=9, companyId=3 (truncated)...]
2026-02-09T11:35:08.559+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:35:08.581+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:35:08.581+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/3/applications
2026-02-09T11:35:08.582+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company/3
2026-02-09T11:35:08.583+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e028cce]
2026-02-09T11:35:08.585+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:35:08.587+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:35:08.593+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/3/applications
2026-02-09T11:35:08.594+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company/3
2026-02-09T11:35:08.595+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:35:08.600+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/3/applications
2026-02-09T11:35:08.601+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/3
2026-02-09T11:35:08.612+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies/3/applications
2026-02-09T11:35:08.605+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/3/applications
2026-02-09T11:35:08.613+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/company/3
2026-02-09T11:35:08.613+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/3/applications
2026-02-09T11:35:08.614+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/3
2026-02-09T11:35:08.614+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies/3/applications
2026-02-09T11:35:08.614+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/3/applications", parameters={}
2026-02-09T11:35:08.614+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/3", parameters={}
2026-02-09T11:35:08.615+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/3/applications
2026-02-09T11:35:08.615+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-02-09T11:35:08.615+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-02-09T11:35:08.617+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/3
2026-02-09T11:35:08.618+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/3/applications", parameters={}
2026-02-09T11:35:08.619+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-09T11:35:08.619+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-09T11:35:08.619+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-02-09T11:35:08.620+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-09T11:35:08.620+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/company/3
2026-02-09T11:35:08.620+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-09T11:35:08.620+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-09T11:35:08.620+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:35:08.621+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/3
2026-02-09T11:35:08.621+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:35:08.621+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-09T11:35:08.621+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2edacc05] was not registered for synchronization because synchronization is not active
2026-02-09T11:35:08.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/3", parameters={}
2026-02-09T11:35:08.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4161a067] was not registered for synchronization because synchronization is not active
2026-02-09T11:35:08.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:35:08.624+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@906499677 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:35:08.625+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-02-09T11:35:08.625+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1756660261 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:35:08.625+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65bb780a] was not registered for synchronization because synchronization is not active
2026-02-09T11:35:08.626+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:35:08.626+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-09T11:35:08.626+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:35:08.627+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1237677151 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:35:08.628+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:35:08.628+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-09T11:35:08.629+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:35:08.629+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:35:08.630+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:35:08.631+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:35:08.631+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42f2e033] was not registered for synchronization because synchronization is not active
2026-02-09T11:35:08.632+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:35:08.632+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@497803114 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:35:08.632+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2edacc05]
2026-02-09T11:35:08.633+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:35:08.633+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:35:08.633+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:35:08.634+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:35:08.634+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65bb780a]
2026-02-09T11:35:08.634+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:35:08.635+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4161a067]
2026-02-09T11:35:08.635+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e7ea19e] was not registered for synchronization because synchronization is not active
2026-02-09T11:35:08.635+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:35:08.636+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:35:08.636+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1186789552 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:35:08.636+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c25be4f] was not registered for synchronization because synchronization is not active
2026-02-09T11:35:08.636+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e5f58fb] was not registered for synchronization because synchronization is not active
2026-02-09T11:35:08.637+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:35:08.637+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-02-09T11:35:08.637+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@576777961 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:35:08.637+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1660008399 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:35:08.637+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42f2e033]
2026-02-09T11:35:08.638+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 3(Long)
2026-02-09T11:35:08.638+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-02-09T11:35:08.638+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-02-09T11:35:08.642+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 3(Long)
2026-02-09T11:35:08.643+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 3(Long)
2026-02-09T11:35:08.639+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:35:08.643+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3132fc5] was not registered for synchronization because synchronization is not active
2026-02-09T11:35:08.644+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1446356204 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:35:08.645+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 1
2026-02-09T11:35:08.645+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-02-09T11:35:08.646+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e7ea19e]
2026-02-09T11:35:08.646+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 1
2026-02-09T11:35:08.646+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 5
2026-02-09T11:35:08.647+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 3(Long)
2026-02-09T11:35:08.647+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:35:08.647+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c25be4f]
2026-02-09T11:35:08.647+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e5f58fb]
2026-02-09T11:35:08.648+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:35:08.648+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=30, userId=29, companyId (truncated)...]
2026-02-09T11:35:08.648+09:00  INFO 40576 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 3, count: 5
2026-02-09T11:35:08.649+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=30, userId=29, companyId (truncated)...]
2026-02-09T11:35:08.649+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:35:08.649+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:35:08.650+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:35:08.652+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=5, username=test_ceo, passw (truncated)...]
2026-02-09T11:35:08.653+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 5
2026-02-09T11:35:08.655+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:35:08.662+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3132fc5]
2026-02-09T11:35:08.663+09:00  INFO 40576 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 3, count: 5
2026-02-09T11:35:08.663+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:35:08.667+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=5, username=test_ceo, passw (truncated)...]
2026-02-09T11:35:08.683+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:35:09.264+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:35:09.265+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:35:09.266+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:35:09.268+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:35:09.280+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:35:09.280+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:35:09.280+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:35:09.281+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:35:09.282+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:35:09.283+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:35:09.283+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:35:09.283+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:35:09.283+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:35:09.284+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:35:09.284+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:35:09.284+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:35:09.284+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:35:09.285+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:35:09.285+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:35:09.285+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:35:09.285+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:35:09.286+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:35:09.286+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:35:09.286+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:35:09.286+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:35:09.288+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35864ab5] was not registered for synchronization because synchronization is not active
2026-02-09T11:35:09.287+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:35:09.288+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:35:09.288+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@377e4e8d] was not registered for synchronization because synchronization is not active
2026-02-09T11:35:09.293+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:35:09.292+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:35:09.293+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:35:09.294+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:35:09.295+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:35:09.295+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68a9d024] was not registered for synchronization because synchronization is not active
2026-02-09T11:35:09.295+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e05d3f4] was not registered for synchronization because synchronization is not active
2026-02-09T11:35:09.299+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@795245433 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:35:09.299+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@128370796 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:35:09.300+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@46721876 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:35:09.301+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:35:09.301+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:35:09.301+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:35:09.302+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@181499150 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:35:09.302+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:35:09.304+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:35:09.306+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:35:09.307+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:35:09.316+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:35:09.316+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:35:09.317+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@377e4e8d]
2026-02-09T11:35:09.317+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:35:09.317+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:35:09.319+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:35:09.320+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35864ab5]
2026-02-09T11:35:09.321+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:35:09.321+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:35:09.321+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:35:09.322+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:35:09.329+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e05d3f4]
2026-02-09T11:35:09.329+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68a9d024]
2026-02-09T11:35:09.330+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ec6c3d] was not registered for synchronization because synchronization is not active
2026-02-09T11:35:09.330+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:35:09.331+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:35:09.332+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@282867787 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:35:09.332+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:35:09.332+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:35:09.333+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:35:09.334+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:35:09.334+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:35:09.335+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:35:09.352+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:35:09.354+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ec6c3d]
2026-02-09T11:35:09.355+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:35:09.362+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:35:09.363+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:35:11.895+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/reorder
2026-02-09T11:35:11.900+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing PUT /api/expense-categories/reorder
2026-02-09T11:35:11.903+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/reorder
2026-02-09T11:35:11.904+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured PUT /api/expense-categories/reorder
2026-02-09T11:35:11.904+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : PUT "/api/expense-categories/reorder", parameters={}
2026-02-09T11:35:11.914+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#reorderCategories(List)
2026-02-09T11:35:11.926+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [[1, 3, 2, 4, 5, 6, 8, 7, 9, 10, 11, 12, 14]]
2026-02-09T11:35:11.930+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.reorderCategories(java.util.List); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:35:11.931+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.reorderCategories(java.util.List); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:35:11.937+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:35:11.938+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe3db0b]
2026-02-09T11:35:11.939+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1101667720 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will be managed by Spring
2026-02-09T11:35:11.945+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:35:11.946+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 0(Integer), 1(Long), 3(Long)
2026-02-09T11:35:11.949+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:35:11.949+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe3db0b]
2026-02-09T11:35:11.949+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe3db0b] from current transaction
2026-02-09T11:35:11.950+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:35:11.950+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 1(Integer), 3(Long), 3(Long)
2026-02-09T11:35:11.953+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:35:11.953+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe3db0b]
2026-02-09T11:35:11.953+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe3db0b] from current transaction
2026-02-09T11:35:11.954+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:35:11.954+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 2(Integer), 2(Long), 3(Long)
2026-02-09T11:35:11.959+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:35:11.960+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe3db0b]
2026-02-09T11:35:11.962+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe3db0b] from current transaction
2026-02-09T11:35:11.962+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:35:11.963+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 3(Integer), 4(Long), 3(Long)
2026-02-09T11:35:11.965+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:35:11.966+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe3db0b]
2026-02-09T11:35:11.966+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe3db0b] from current transaction
2026-02-09T11:35:11.966+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:35:11.967+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 4(Integer), 5(Long), 3(Long)
2026-02-09T11:35:11.969+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:35:11.970+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe3db0b]
2026-02-09T11:35:11.970+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe3db0b] from current transaction
2026-02-09T11:35:11.970+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:35:11.971+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 5(Integer), 6(Long), 3(Long)
2026-02-09T11:35:11.975+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:35:11.977+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe3db0b]
2026-02-09T11:35:11.977+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe3db0b] from current transaction
2026-02-09T11:35:11.978+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:35:11.978+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 6(Integer), 8(Long), 3(Long)
2026-02-09T11:35:11.980+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:35:11.981+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe3db0b]
2026-02-09T11:35:11.981+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe3db0b] from current transaction
2026-02-09T11:35:11.981+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:35:11.982+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 7(Integer), 7(Long), 3(Long)
2026-02-09T11:35:11.984+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:35:11.984+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe3db0b]
2026-02-09T11:35:11.984+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe3db0b] from current transaction
2026-02-09T11:35:11.985+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:35:11.985+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 8(Integer), 9(Long), 3(Long)
2026-02-09T11:35:11.988+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:35:11.988+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe3db0b]
2026-02-09T11:35:11.988+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe3db0b] from current transaction
2026-02-09T11:35:11.988+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:35:11.992+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 9(Integer), 10(Long), 3(Long)
2026-02-09T11:35:11.996+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:35:11.996+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe3db0b]
2026-02-09T11:35:11.996+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe3db0b] from current transaction
2026-02-09T11:35:11.997+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:35:11.997+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 10(Integer), 11(Long), 3(Long)
2026-02-09T11:35:11.999+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:35:11.999+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe3db0b]
2026-02-09T11:35:12.000+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe3db0b] from current transaction
2026-02-09T11:35:12.000+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:35:12.000+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 11(Integer), 12(Long), 3(Long)
2026-02-09T11:35:12.003+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 0
2026-02-09T11:35:12.003+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe3db0b]
2026-02-09T11:35:12.004+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe3db0b] from current transaction
2026-02-09T11:35:12.004+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : ==>  Preparing: UPDATE expense_category_tb SET display_order = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:35:12.005+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : ==> Parameters: 12(Integer), 14(Long), 3(Long)
2026-02-09T11:35:12.011+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.updateDisplayOrder             : <==    Updates: 1
2026-02-09T11:35:12.012+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe3db0b]
2026-02-09T11:35:12.012+09:00  INFO 40576 --- [http-nio-8080-exec-3] c.i.b.service.ExpenseCategoryService     : 항목 순서 일괄 변경 완료 - 항목 수: 13, isGlobal: false
2026-02-09T11:35:12.012+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe3db0b]
2026-02-09T11:35:12.012+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe3db0b]
2026-02-09T11:35:12.012+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe3db0b]
2026-02-09T11:35:12.026+09:00  INFO 40576 --- [http-nio-8080-exec-3] c.i.b.c.ExpenseCategoryController        : 항목 순서 일괄 변경 완료 - 항목 수: 13
2026-02-09T11:35:12.028+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:35:12.028+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=항목 순서가 변경되었습니다., data=null)]
2026-02-09T11:35:12.028+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:36:21.367+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:36:21.406+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:36:21.412+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:36:21.413+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:36:21.415+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:36:21.416+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:36:21.418+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:36:21.419+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:36:21.424+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:36:21.426+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22240d32] was not registered for synchronization because synchronization is not active
2026-02-09T11:36:21.431+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@856272198 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:36:21.432+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:36:21.438+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:36:21.453+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:36:21.457+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22240d32]
2026-02-09T11:36:21.459+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:36:21.459+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:36:21.461+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:36:25.298+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:36:25.348+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:36:25.351+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:36:25.358+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:36:25.359+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:36:25.359+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:36:25.360+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:36:25.374+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:36:25.375+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:36:25.376+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d990aac] was not registered for synchronization because synchronization is not active
2026-02-09T11:36:25.378+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1989242978 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:36:25.378+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:36:25.381+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:36:25.386+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:36:25.386+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d990aac]
2026-02-09T11:36:25.387+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:36:25.387+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:36:25.390+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:36:29.882+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:36:29.891+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:36:29.892+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:36:29.893+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:36:29.894+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:36:29.896+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:36:29.920+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:36:29.927+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:36:29.928+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:36:29.931+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f6dd284] was not registered for synchronization because synchronization is not active
2026-02-09T11:36:29.940+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@944835413 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:36:29.943+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:36:29.949+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:36:29.957+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:36:29.958+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f6dd284]
2026-02-09T11:36:29.958+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:36:29.965+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:36:29.966+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:36:43.754+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:36:43.757+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:36:43.759+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:36:43.761+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:36:43.763+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:36:43.772+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:36:43.782+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:36:43.785+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:36:43.786+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:36:43.791+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f56d67b] was not registered for synchronization because synchronization is not active
2026-02-09T11:36:43.800+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@803864297 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:36:43.802+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:36:43.809+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:36:43.813+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:36:43.813+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f56d67b]
2026-02-09T11:36:43.814+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:36:43.815+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:36:43.816+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:37:21.301+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:37:21.322+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:37:21.324+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:37:21.325+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:37:21.325+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:37:21.326+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:37:21.327+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:37:21.327+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:37:21.328+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:37:21.328+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@434b197f] was not registered for synchronization because synchronization is not active
2026-02-09T11:37:21.330+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1026343533 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:37:21.331+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:37:21.333+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:37:21.336+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:37:21.338+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@434b197f]
2026-02-09T11:37:21.339+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:37:21.340+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:37:21.340+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:37:26.530+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:37:26.547+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:37:26.560+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:37:26.561+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:37:26.562+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:37:26.562+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:37:26.562+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:37:26.563+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:37:26.563+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:37:26.564+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@185dd9c1] was not registered for synchronization because synchronization is not active
2026-02-09T11:37:26.566+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@174383797 wrapping com.mysql.cj.jdbc.ConnectionImpl@5168849b] will not be managed by Spring
2026-02-09T11:37:26.567+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:37:26.570+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:37:26.580+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:37:26.583+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@185dd9c1]
2026-02-09T11:37:26.585+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:37:26.588+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:37:26.589+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:37:33.784+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:37:33.788+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:37:33.790+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:37:33.796+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:37:33.797+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:37:33.813+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:37:33.815+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:37:33.815+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:37:33.816+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:37:33.816+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@312eb9bd] was not registered for synchronization because synchronization is not active
2026-02-09T11:37:33.818+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1002299608 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:37:33.818+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:37:33.825+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:37:33.827+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:37:33.827+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@312eb9bd]
2026-02-09T11:37:33.828+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:37:33.828+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:37:33.829+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:40:40.303+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:40:40.340+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:40:40.341+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:40:40.342+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:40:40.342+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:40:40.343+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:40:40.343+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:40:40.344+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:40:40.344+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:40:40.344+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@de8b297] was not registered for synchronization because synchronization is not active
2026-02-09T11:40:40.346+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@533423435 wrapping com.mysql.cj.jdbc.ConnectionImpl@78150ac7] will not be managed by Spring
2026-02-09T11:40:40.347+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:40:40.355+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:40:40.360+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:40:40.360+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@de8b297]
2026-02-09T11:40:40.361+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:40:40.361+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:40:40.362+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:40:48.145+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:40:48.152+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:40:48.161+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:40:48.163+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:40:48.164+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:40:48.167+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:40:48.168+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:40:48.168+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:40:48.169+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:40:48.169+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51980ed2] was not registered for synchronization because synchronization is not active
2026-02-09T11:40:48.173+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@271186948 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:40:48.174+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:40:48.180+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:40:48.189+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:40:48.190+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51980ed2]
2026-02-09T11:40:48.190+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:40:48.191+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:40:48.192+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:41:06.436+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:41:06.439+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:41:06.443+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:41:06.443+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:41:06.443+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:41:06.446+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:41:06.446+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:41:06.447+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@22ccc00b and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('SUPERADMIN', 'TAX_ACCOUNTANT')]
2026-02-09T11:41:06.451+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-09T11:41:06.451+09:00  WARN 40576 --- [http-nio-8080-exec-5] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-09T11:41:06.452+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:41:06.452+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-09T11:41:06.453+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-09T11:41:06.455+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-09T11:41:41.619+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:41:41.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:41:41.623+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:41:41.625+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:41:41.627+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:41:41.637+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:41:41.639+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:41:41.670+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:41:41.674+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:41:41.689+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11a5f77c] was not registered for synchronization because synchronization is not active
2026-02-09T11:41:41.705+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1890697995 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:41:41.706+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:41:41.709+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:41:41.712+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:41:41.712+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11a5f77c]
2026-02-09T11:41:41.713+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:41:41.713+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:41:41.715+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:41:42.323+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:41:42.326+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:41:42.327+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:41:42.328+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:41:42.328+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:41:42.328+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:41:42.329+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:41:42.331+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@22ccc00b and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('SUPERADMIN', 'TAX_ACCOUNTANT')]
2026-02-09T11:41:42.332+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-09T11:41:42.333+09:00  WARN 40576 --- [http-nio-8080-exec-4] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-09T11:41:42.338+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:41:42.338+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-09T11:41:42.339+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-09T11:41:42.340+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-09T11:42:27.376+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:42:27.380+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:42:27.381+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:42:27.381+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:42:27.382+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:42:27.383+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:42:27.392+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:42:27.399+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:42:27.400+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:42:27.401+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23181eb3] was not registered for synchronization because synchronization is not active
2026-02-09T11:42:27.408+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1659898895 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-02-09T11:42:27.408+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:42:27.411+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:42:27.417+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:42:27.417+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23181eb3]
2026-02-09T11:42:27.417+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:42:27.417+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:42:27.419+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:42:28.147+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:42:28.154+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:42:28.155+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:42:28.156+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:42:28.156+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:42:28.156+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:42:28.156+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:42:28.157+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@22ccc00b and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('SUPERADMIN', 'TAX_ACCOUNTANT')]
2026-02-09T11:42:28.158+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-09T11:42:28.158+09:00  WARN 40576 --- [http-nio-8080-exec-6] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-09T11:42:28.159+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:42:28.159+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-09T11:42:28.160+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-09T11:42:28.160+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-09T11:44:16.540+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:44:16.563+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:44:16.565+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:44:16.566+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:44:16.566+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:44:16.567+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:44:16.567+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:44:16.569+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@22ccc00b and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('SUPERADMIN', 'TAX_ACCOUNTANT')]
2026-02-09T11:44:16.579+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-09T11:44:16.583+09:00  WARN 40576 --- [http-nio-8080-exec-8] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-09T11:44:16.584+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:44:16.587+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-09T11:44:16.589+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-09T11:44:16.591+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-09T11:44:28.495+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:44:28.499+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:44:28.500+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:44:28.501+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:44:28.501+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:44:28.501+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-09T11:44:28.600+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:44:28.603+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:44:28.608+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:44:28.605+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:44:28.606+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:44:28.606+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:44:28.611+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:44:28.611+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:44:28.613+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:44:28.619+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:44:28.617+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:44:28.617+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:44:28.618+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-09T11:44:28.619+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:44:28.619+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:44:28.619+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:44:28.620+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:44:28.620+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:44:28.621+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies
2026-02-09T11:44:28.621+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:44:28.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:44:28.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:44:28.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:44:28.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:44:28.623+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-09T11:44:28.623+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:44:28.623+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:44:28.624+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:44:28.624+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:44:28.624+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:44:28.624+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-09T11:44:28.625+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:44:28.625+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:44:28.626+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:44:28.627+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:44:28.627+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:44:28.628+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-09T11:44:28.629+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b35267f] was not registered for synchronization because synchronization is not active
2026-02-09T11:44:28.629+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:44:28.630+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68e959dc] was not registered for synchronization because synchronization is not active
2026-02-09T11:44:28.630+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:44:28.631+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:44:28.631+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:44:28.632+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ecafa47] was not registered for synchronization because synchronization is not active
2026-02-09T11:44:28.633+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dacb26b] was not registered for synchronization because synchronization is not active
2026-02-09T11:44:28.634+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:44:28.634+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@201ee72d] was not registered for synchronization because synchronization is not active
2026-02-09T11:44:28.635+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:44:28.636+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@210613898 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:44:28.637+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@186971643 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:44:28.638+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b8ee373] was not registered for synchronization because synchronization is not active
2026-02-09T11:44:28.639+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@250972235 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:44:28.639+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@33749531 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:44:28.639+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:44:28.639+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@846472820 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:44:28.639+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:44:28.640+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:44:28.644+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:44:28.646+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:44:28.646+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-09T11:44:28.648+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:44:28.650+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:44:28.651+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:44:28.658+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 9(Long)
2026-02-09T11:44:28.664+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:44:28.666+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:44:28.666+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:44:28.667+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b35267f]
2026-02-09T11:44:28.667+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:44:28.668+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68e959dc]
2026-02-09T11:44:28.668+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ecafa47]
2026-02-09T11:44:28.669+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@445038889 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:44:28.669+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:44:28.669+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-09T11:44:28.669+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dacb26b]
2026-02-09T11:44:28.670+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:44:28.670+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:44:28.671+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:44:28.671+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:44:28.672+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@201ee72d]
2026-02-09T11:44:28.673+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:44:28.674+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@146f7c45] was not registered for synchronization because synchronization is not active
2026-02-09T11:44:28.676+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:44:28.681+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:44:28.681+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:44:28.682+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:44:28.683+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12368956] was not registered for synchronization because synchronization is not active
2026-02-09T11:44:28.684+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@977366905 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:44:28.685+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:44:28.690+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:44:28.705+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-09T11:44:28.707+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1428585922 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:44:28.717+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:44:28.707+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:44:28.712+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:44:28.715+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:44:28.716+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:44:28.719+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:44:28.720+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:44:28.720+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:44:28.721+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:44:28.723+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:44:28.728+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:44:28.783+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b8ee373]
2026-02-09T11:44:28.785+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:44:28.766+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:44:28.767+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:44:28.782+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:44:28.787+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:44:28.787+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:44:28.788+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:44:28.789+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:44:28.799+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:44:28.799+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:44:28.861+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:44:28.867+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:44:28.868+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:44:28.868+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:44:28.868+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12368956]
2026-02-09T11:44:28.869+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@146f7c45]
2026-02-09T11:44:28.872+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:44:28.878+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73b369b2] was not registered for synchronization because synchronization is not active
2026-02-09T11:44:28.881+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@970351542 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:44:28.879+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:44:28.880+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:44:28.880+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:44:28.881+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:44:28.882+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:44:28.882+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:44:28.887+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f112a3] was not registered for synchronization because synchronization is not active
2026-02-09T11:44:28.930+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:44:28.933+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:44:28.934+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:44:28.950+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:44:28.934+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:44:28.954+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:44:28.955+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:44:28.956+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:44:28.956+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46fdf4a3] was not registered for synchronization because synchronization is not active
2026-02-09T11:44:28.938+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:44:28.949+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1308166895 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:44:28.949+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9f05d4d] was not registered for synchronization because synchronization is not active
2026-02-09T11:44:28.950+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:44:28.952+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:44:28.961+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1793684328 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:44:29.050+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:44:29.058+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:44:29.065+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@25718940 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:44:29.070+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:44:29.085+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:44:29.100+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:44:29.088+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:44:29.090+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:44:29.090+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73b369b2]
2026-02-09T11:44:29.099+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:44:29.101+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:44:29.101+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:44:29.119+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:44:29.120+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:44:29.121+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:44:29.102+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:44:29.105+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:44:29.115+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:44:29.118+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:44:29.122+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:44:29.137+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ce31d50] was not registered for synchronization because synchronization is not active
2026-02-09T11:44:29.122+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:44:29.129+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:44:29.132+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:44:29.138+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1738676259 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:44:29.139+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:44:29.139+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f112a3]
2026-02-09T11:44:29.145+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:44:29.146+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b3d09d4] was not registered for synchronization because synchronization is not active
2026-02-09T11:44:29.147+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1456765978 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:44:29.147+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:44:29.148+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:44:29.141+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:44:29.151+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:44:29.142+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:44:29.145+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:44:29.151+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:44:29.154+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:44:29.155+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:44:29.155+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:44:29.156+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:44:29.157+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:44:29.162+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:44:29.194+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:44:29.204+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7389ab66] was not registered for synchronization because synchronization is not active
2026-02-09T11:44:29.205+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9f05d4d]
2026-02-09T11:44:29.205+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:44:29.206+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:44:29.213+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46fdf4a3]
2026-02-09T11:44:29.214+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:44:29.215+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:44:29.215+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b3d09d4]
2026-02-09T11:44:29.215+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ce31d50]
2026-02-09T11:44:29.215+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:44:29.216+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:44:29.216+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:44:29.217+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:44:29.218+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:44:29.218+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32ddf03c] was not registered for synchronization because synchronization is not active
2026-02-09T11:44:29.230+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:44:29.231+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:44:29.231+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:44:29.236+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@872238957 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:44:29.238+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:44:29.238+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@464273960 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:44:29.261+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:44:29.238+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77ca0d5a] was not registered for synchronization because synchronization is not active
2026-02-09T11:44:29.240+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:44:29.246+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:44:29.257+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:44:29.258+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:44:29.262+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:44:29.262+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@405330610 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:44:29.273+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:44:29.264+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:44:29.268+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:44:29.278+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:44:29.279+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:44:29.281+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:44:29.357+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:44:29.357+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:44:29.398+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77ca0d5a]
2026-02-09T11:44:29.357+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:44:29.370+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:44:29.398+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32ddf03c]
2026-02-09T11:44:29.400+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:44:29.402+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:44:29.403+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:44:29.399+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:44:29.413+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@992265c] was not registered for synchronization because synchronization is not active
2026-02-09T11:44:29.414+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@773151465 wrapping com.mysql.cj.jdbc.ConnectionImpl@5078a5bb] will not be managed by Spring
2026-02-09T11:44:29.415+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:44:29.416+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:44:29.399+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7389ab66]
2026-02-09T11:44:29.417+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:44:29.418+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:44:29.419+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:44:29.399+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:44:29.432+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:44:29.433+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:44:29.433+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a90dbc8] was not registered for synchronization because synchronization is not active
2026-02-09T11:44:29.435+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1822785407 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:44:29.436+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:44:29.439+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:44:29.476+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:44:29.477+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:44:29.480+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@992265c]
2026-02-09T11:44:29.480+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a90dbc8]
2026-02-09T11:44:29.481+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:44:29.481+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:44:29.482+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:44:29.482+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:44:29.483+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:44:29.490+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:44:39.316+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:44:39.320+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:44:39.322+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:44:39.323+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:44:39.324+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:44:39.324+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:44:39.326+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:44:39.327+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:44:39.328+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:44:39.328+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41862b32] was not registered for synchronization because synchronization is not active
2026-02-09T11:44:39.330+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1380148067 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:44:39.331+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:44:39.341+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:44:39.381+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:44:39.382+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41862b32]
2026-02-09T11:44:39.382+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:44:39.383+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:44:39.384+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:44:39.990+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:44:40.039+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:44:40.041+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:44:40.045+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:44:40.045+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:44:40.045+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:44:40.046+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:44:40.046+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@22ccc00b and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('SUPERADMIN', 'TAX_ACCOUNTANT')]
2026-02-09T11:44:40.047+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-09T11:44:40.047+09:00  WARN 40576 --- [http-nio-8080-exec-4] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-09T11:44:40.048+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:44:40.049+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-09T11:44:40.049+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-09T11:44:40.050+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-09T11:44:51.996+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:44:52.004+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:44:52.006+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:44:52.006+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:44:52.010+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:44:52.011+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:44:52.012+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:44:52.013+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@22ccc00b and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('SUPERADMIN', 'TAX_ACCOUNTANT')]
2026-02-09T11:44:52.015+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-09T11:44:52.015+09:00  WARN 40576 --- [http-nio-8080-exec-2] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-09T11:44:52.015+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:44:52.016+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-09T11:44:52.016+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-09T11:44:52.017+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-09T11:45:11.749+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:45:11.820+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:45:11.821+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:45:11.821+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:45:11.822+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:45:11.822+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:45:11.822+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:45:11.823+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@22ccc00b and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('SUPERADMIN', 'TAX_ACCOUNTANT')]
2026-02-09T11:45:11.824+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-09T11:45:11.824+09:00  WARN 40576 --- [http-nio-8080-exec-10] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-09T11:45:11.826+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:45:11.827+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-09T11:45:11.827+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-09T11:45:11.828+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-09T11:45:17.280+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:45:17.288+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:45:17.306+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:45:17.311+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:45:17.311+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:45:17.312+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:45:17.313+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:45:17.313+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:45:17.314+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:45:17.314+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b08db5d] was not registered for synchronization because synchronization is not active
2026-02-09T11:45:17.317+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@144783908 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:45:17.318+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:45:17.321+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:45:17.328+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:45:17.328+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b08db5d]
2026-02-09T11:45:17.329+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:45:17.330+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:45:17.331+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:45:18.114+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:45:18.120+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:45:18.126+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:45:18.128+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:45:18.128+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:45:18.129+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:45:18.129+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:45:18.130+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@22ccc00b and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('SUPERADMIN', 'TAX_ACCOUNTANT')]
2026-02-09T11:45:18.131+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-09T11:45:18.131+09:00  WARN 40576 --- [http-nio-8080-exec-5] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-09T11:45:18.131+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:45:18.132+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-09T11:45:18.133+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-09T11:45:18.133+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-09T11:45:18.827+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:45:18.846+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:45:18.850+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:45:18.854+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:45:18.857+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:45:18.863+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:45:18.865+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:45:18.865+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:45:18.866+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:45:18.866+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6be9a365] was not registered for synchronization because synchronization is not active
2026-02-09T11:45:18.871+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@277002320 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:45:18.874+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:45:18.882+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:45:18.888+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:45:18.890+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6be9a365]
2026-02-09T11:45:18.894+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:45:18.895+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:45:18.896+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:45:19.965+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:45:19.969+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:45:19.970+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:45:19.970+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:45:19.971+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:45:19.971+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:45:19.971+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:45:19.972+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@22ccc00b and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('SUPERADMIN', 'TAX_ACCOUNTANT')]
2026-02-09T11:45:19.973+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-09T11:45:19.973+09:00  WARN 40576 --- [http-nio-8080-exec-2] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-09T11:45:19.974+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:45:19.978+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-09T11:45:19.979+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-09T11:45:19.980+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-09T11:45:20.619+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:45:20.621+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:45:20.623+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:45:20.631+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:45:20.632+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:45:20.633+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:45:20.635+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:45:20.636+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:45:20.636+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:45:20.637+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78c62c8d] was not registered for synchronization because synchronization is not active
2026-02-09T11:45:20.638+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@823758475 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:45:20.639+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:45:20.644+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:45:20.647+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:45:20.647+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78c62c8d]
2026-02-09T11:45:20.648+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:45:20.648+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:45:20.649+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:45:26.914+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:45:26.917+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:45:26.924+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:45:27.033+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:45:27.035+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:45:27.036+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:45:27.036+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:45:27.037+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:45:27.038+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:45:27.038+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9b1ca84] was not registered for synchronization because synchronization is not active
2026-02-09T11:45:27.040+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1570235967 wrapping com.mysql.cj.jdbc.ConnectionImpl@d5704c6] will not be managed by Spring
2026-02-09T11:45:27.044+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:45:27.049+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:45:27.056+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:45:27.056+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9b1ca84]
2026-02-09T11:45:27.057+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:45:27.060+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:45:27.062+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:47:48.294+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:47:48.296+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:47:48.297+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:47:48.297+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:47:48.298+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:47:48.298+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:47:48.298+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:47:48.299+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:47:48.299+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:47:48.300+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4385eaa0] was not registered for synchronization because synchronization is not active
2026-02-09T11:47:48.301+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1610305478 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:47:48.302+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:47:48.306+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:47:48.310+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:47:48.310+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4385eaa0]
2026-02-09T11:47:48.311+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:47:48.312+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:47:48.313+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:47:58.252+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:47:58.256+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:47:58.257+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:47:58.257+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:47:58.257+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:47:58.258+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:47:58.258+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:47:58.259+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:47:58.259+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:47:58.259+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28ba558d] was not registered for synchronization because synchronization is not active
2026-02-09T11:47:58.261+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1212196014 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:47:58.262+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:47:58.264+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:47:58.266+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:47:58.267+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28ba558d]
2026-02-09T11:47:58.267+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:47:58.268+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:47:58.269+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:48:12.855+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:48:12.857+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:48:12.858+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:48:12.859+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:48:12.860+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:48:12.860+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:48:12.860+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:48:12.861+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:48:12.861+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:48:12.861+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70bb3c9e] was not registered for synchronization because synchronization is not active
2026-02-09T11:48:12.863+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@309079714 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:48:12.864+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:48:12.866+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:48:12.868+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:48:12.868+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70bb3c9e]
2026-02-09T11:48:12.871+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:48:12.872+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:48:12.881+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:48:44.572+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:48:44.575+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:48:44.576+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:48:44.577+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:48:44.577+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:48:44.577+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:48:44.579+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:48:44.580+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:48:44.580+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:48:44.581+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29acb79b] was not registered for synchronization because synchronization is not active
2026-02-09T11:48:44.586+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1865282360 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:48:44.588+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:48:44.591+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:48:44.595+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:48:44.595+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29acb79b]
2026-02-09T11:48:44.598+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:48:44.599+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:48:44.600+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:01.226+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:49:01.229+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:49:01.230+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:49:01.230+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:49:01.230+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:49:01.231+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:49:01.231+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:49:01.232+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:49:01.232+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:01.232+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57890986] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:01.234+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1942806832 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:49:01.235+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:49:01.242+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:49:01.245+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : <==      Total: 13
2026-02-09T11:49:01.245+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57890986]
2026-02-09T11:49:01.246+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:01.246+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:49:01.247+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:16.488+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/create
2026-02-09T11:49:16.491+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/expense-categories/create
2026-02-09T11:49:16.493+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/create
2026-02-09T11:49:16.494+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/expense-categories/create
2026-02-09T11:49:16.495+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/expense-categories/create", parameters={}
2026-02-09T11:49:16.498+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#createCategory(ExpenseCategoryDto)
2026-02-09T11:49:16.500+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ExpenseCategoryDto(categoryId=null, companyId=null, categoryName=추가테스트, displayOrder=13, isActive=tr (truncated)...]
2026-02-09T11:49:16.504+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.createCategory(com.innersignature.backend.dto.ExpenseCategoryDto); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:49:16.505+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.createCategory(com.innersignature.backend.dto.ExpenseCategoryDto); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:49:16.521+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:16.522+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43d8b8d9]
2026-02-09T11:49:16.523+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@953069134 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will be managed by Spring
2026-02-09T11:49:16.524+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.existsByName                   : ==>  Preparing: SELECT COUNT(*) > 0 FROM expense_category_tb WHERE category_name = ? AND ( company_id = ? )
2026-02-09T11:49:16.525+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.existsByName                   : ==> Parameters: 추가테스트(String), 3(Long)
2026-02-09T11:49:16.529+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.existsByName                   : <==      Total: 1
2026-02-09T11:49:16.529+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43d8b8d9]
2026-02-09T11:49:16.529+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43d8b8d9] from current transaction
2026-02-09T11:49:16.530+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseCategoryMapper.insert     : ==>  Preparing: INSERT INTO expense_category_tb ( company_id, category_name, display_order, is_active, created_by ) VALUES ( ?, ?, COALESCE(?, 0), COALESCE(?, 1), ? )
2026-02-09T11:49:16.535+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseCategoryMapper.insert     : ==> Parameters: 3(Long), 추가테스트(String), 13(Integer), true(Boolean), 9(Long)
2026-02-09T11:49:16.542+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseCategoryMapper.insert     : <==    Updates: 1
2026-02-09T11:49:16.542+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43d8b8d9]
2026-02-09T11:49:16.543+09:00  INFO 40576 --- [http-nio-8080-exec-6] c.i.b.service.ExpenseCategoryService     : 항목 생성 완료 - categoryId: 15, isGlobal: false
2026-02-09T11:49:16.544+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43d8b8d9] from current transaction
2026-02-09T11:49:16.544+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseCategoryMapper.findById   : ==>  Preparing: SELECT ec.*, CASE WHEN ec.company_id IS NULL THEN 1 ELSE 0 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec LEFT JOIN user_tb u ON ec.created_by = u.user_id WHERE ec.category_id = ? AND ( ec.company_id = ? OR ec.company_id IS NULL )
2026-02-09T11:49:16.545+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseCategoryMapper.findById   : ==> Parameters: 15(Long), 3(Long)
2026-02-09T11:49:16.546+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseCategoryMapper.findById   : <==      Total: 1
2026-02-09T11:49:16.547+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43d8b8d9]
2026-02-09T11:49:16.547+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43d8b8d9]
2026-02-09T11:49:16.548+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43d8b8d9]
2026-02-09T11:49:16.548+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43d8b8d9]
2026-02-09T11:49:16.561+09:00  INFO 40576 --- [http-nio-8080-exec-6] c.i.b.c.ExpenseCategoryController        : 항목 생성 완료 - categoryId: 15
2026-02-09T11:49:16.562+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:16.562+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=항목이 생성되었습니다., data=ExpenseCategoryDto(categoryId=15, companyId=3,  (truncated)...]
2026-02-09T11:49:16.563+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:17.474+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:49:17.478+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:49:17.480+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:49:17.480+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:49:17.480+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:49:17.481+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:49:17.481+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:49:17.483+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:49:17.483+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:17.483+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b3c6b40] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:17.493+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1073380523 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:49:17.494+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:49:17.497+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:49:17.501+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-09T11:49:17.508+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b3c6b40]
2026-02-09T11:49:17.508+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:17.509+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:49:17.509+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:23.166+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/15
2026-02-09T11:49:23.169+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing PUT /api/expense-categories/15
2026-02-09T11:49:23.171+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/15
2026-02-09T11:49:23.171+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured PUT /api/expense-categories/15
2026-02-09T11:49:23.172+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : PUT "/api/expense-categories/15", parameters={}
2026-02-09T11:49:23.172+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#updateCategory(Long, ExpenseCategoryDto)
2026-02-09T11:49:23.173+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ExpenseCategoryDto(categoryId=null, companyId=null, categoryName=추가테스트2, displayOrder=13, isActive=t (truncated)...]
2026-02-09T11:49:23.173+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.updateCategory(java.lang.Long,com.innersignature.backend.dto.ExpenseCategoryDto); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:49:23.174+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.updateCategory(java.lang.Long,com.innersignature.backend.dto.ExpenseCategoryDto); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:49:23.178+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:23.178+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d019e02]
2026-02-09T11:49:23.179+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@46575628 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will be managed by Spring
2026-02-09T11:49:23.179+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseCategoryMapper.findById   : ==>  Preparing: SELECT ec.*, CASE WHEN ec.company_id IS NULL THEN 1 ELSE 0 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec LEFT JOIN user_tb u ON ec.created_by = u.user_id WHERE ec.category_id = ? AND ( ec.company_id = ? OR ec.company_id IS NULL )
2026-02-09T11:49:23.180+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseCategoryMapper.findById   : ==> Parameters: 15(Long), 3(Long)
2026-02-09T11:49:23.183+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseCategoryMapper.findById   : <==      Total: 1
2026-02-09T11:49:23.183+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d019e02]
2026-02-09T11:49:23.184+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d019e02] from current transaction
2026-02-09T11:49:23.184+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.existsByName                   : ==>  Preparing: SELECT COUNT(*) > 0 FROM expense_category_tb WHERE category_name = ? AND ( company_id = ? )
2026-02-09T11:49:23.184+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.existsByName                   : ==> Parameters: 추가테스트2(String), 3(Long)
2026-02-09T11:49:23.187+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.existsByName                   : <==      Total: 1
2026-02-09T11:49:23.187+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d019e02]
2026-02-09T11:49:23.188+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d019e02] from current transaction
2026-02-09T11:49:23.188+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseCategoryMapper.update     : ==>  Preparing: UPDATE expense_category_tb SET category_name = ?, display_order = ?, is_active = ?, updated_at = NOW() WHERE category_id = ? AND ( company_id = ? )
2026-02-09T11:49:23.189+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseCategoryMapper.update     : ==> Parameters: 추가테스트2(String), 13(Integer), true(Boolean), 15(Long), 3(Long)
2026-02-09T11:49:23.197+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseCategoryMapper.update     : <==    Updates: 1
2026-02-09T11:49:23.197+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d019e02]
2026-02-09T11:49:23.198+09:00  INFO 40576 --- [http-nio-8080-exec-3] c.i.b.service.ExpenseCategoryService     : 항목 수정 완료 - categoryId: 15, isGlobal: false
2026-02-09T11:49:23.198+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d019e02] from current transaction
2026-02-09T11:49:23.198+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseCategoryMapper.findById   : ==>  Preparing: SELECT ec.*, CASE WHEN ec.company_id IS NULL THEN 1 ELSE 0 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec LEFT JOIN user_tb u ON ec.created_by = u.user_id WHERE ec.category_id = ? AND ( ec.company_id = ? OR ec.company_id IS NULL )
2026-02-09T11:49:23.198+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseCategoryMapper.findById   : ==> Parameters: 15(Long), 3(Long)
2026-02-09T11:49:23.200+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseCategoryMapper.findById   : <==      Total: 1
2026-02-09T11:49:23.200+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d019e02]
2026-02-09T11:49:23.201+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d019e02]
2026-02-09T11:49:23.201+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d019e02]
2026-02-09T11:49:23.204+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d019e02]
2026-02-09T11:49:23.215+09:00  INFO 40576 --- [http-nio-8080-exec-3] c.i.b.c.ExpenseCategoryController        : 항목 수정 완료 - categoryId: 15
2026-02-09T11:49:23.215+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:23.216+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=항목이 수정되었습니다., data=ExpenseCategoryDto(categoryId=15, companyId=3,  (truncated)...]
2026-02-09T11:49:23.216+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:24.121+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:49:24.127+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:49:24.128+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:49:24.129+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:49:24.129+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:49:24.130+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:49:24.131+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:49:24.170+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:49:24.171+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:24.173+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d72f603] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:24.178+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1947575297 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:49:24.178+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:49:24.184+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:49:24.198+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-09T11:49:24.199+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d72f603]
2026-02-09T11:49:24.200+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:24.201+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:49:24.204+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:44.317+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:49:44.320+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-09T11:49:44.320+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-02-09T11:49:44.320+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-02-09T11:49:44.343+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:49:44.343+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-09T11:49:44.344+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-02-09T11:49:44.355+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-02-09T11:49:44.356+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:49:44.366+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/companies
2026-02-09T11:49:44.365+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-09T11:49:44.366+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:49:44.366+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/companies
2026-02-09T11:49:44.367+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-02-09T11:49:44.367+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-09T11:49:44.368+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:49:44.369+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-02-09T11:49:44.370+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-02-09T11:49:44.371+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-09T11:49:44.372+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:49:44.372+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-02-09T11:49:44.373+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:44.372+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-02-09T11:49:44.373+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-09T11:49:44.373+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-02-09T11:49:44.373+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7803c681] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:44.374+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:44.374+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:44.390+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@242157ae] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:44.374+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:44.387+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51e028e] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:44.390+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1904958744 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:49:44.391+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c0c6c65] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:44.391+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:49:44.398+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-09T11:49:44.401+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@746104228 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:49:44.401+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@837912880 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:49:44.412+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:49:44.412+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1335326015 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:49:44.415+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:49:44.416+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:49:44.425+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-02-09T11:49:44.427+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:49:44.441+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:49:44.443+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7803c681]
2026-02-09T11:49:44.444+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:49:44.445+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:44.446+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterId= (truncated)...]
2026-02-09T11:49:44.454+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:44.471+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:49:44.471+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:49:44.471+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:49:44.474+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@242157ae]
2026-02-09T11:49:44.476+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51e028e]
2026-02-09T11:49:44.479+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c0c6c65]
2026-02-09T11:49:44.479+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:44.480+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:44.480+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:44.480+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34cb7cbe] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:44.481+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=7, userId=9, companyId=3 (truncated)...]
2026-02-09T11:49:44.481+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=7, userId=9, companyId=3 (truncated)...]
2026-02-09T11:49:44.481+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@678266587 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:49:44.482+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:44.488+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:44.488+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-09T11:49:44.505+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-09T11:49:44.502+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/3/applications
2026-02-09T11:49:44.503+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company/3
2026-02-09T11:49:44.515+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/3/applications
2026-02-09T11:49:44.515+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company/3
2026-02-09T11:49:44.533+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/3/applications
2026-02-09T11:49:44.536+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/3
2026-02-09T11:49:44.537+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/3/applications
2026-02-09T11:49:44.544+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies/3/applications
2026-02-09T11:49:44.539+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/3
2026-02-09T11:49:44.544+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/company/3
2026-02-09T11:49:44.545+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/3/applications
2026-02-09T11:49:44.545+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies/3/applications
2026-02-09T11:49:44.545+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/3
2026-02-09T11:49:44.546+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/company/3
2026-02-09T11:49:44.546+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/3/applications", parameters={}
2026-02-09T11:49:44.555+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-09T11:49:44.560+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/3/applications
2026-02-09T11:49:44.571+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/3", parameters={}
2026-02-09T11:49:44.583+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/3
2026-02-09T11:49:44.583+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-02-09T11:49:44.586+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34cb7cbe]
2026-02-09T11:49:44.631+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/3/applications", parameters={}
2026-02-09T11:49:44.738+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-02-09T11:49:44.798+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/3", parameters={}
2026-02-09T11:49:44.871+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-09T11:49:44.906+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:44.916+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-02-09T11:49:44.919+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-09T11:49:44.925+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-02-09T11:49:44.926+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-09T11:49:44.926+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-09T11:49:44.944+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-09T11:49:44.944+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-09T11:49:44.945+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-09T11:49:44.945+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:44.946+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:44.947+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-02-09T11:49:44.948+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:44.948+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-02-09T11:49:44.949+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d558236] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:44.962+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:44.963+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dcb5252] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:44.964+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:44.972+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1925151302 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:49:44.977+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74cb569c] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:44.978+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50f613c] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:44.978+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:49:44.979+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1902066335 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:49:44.980+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@222743671 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:49:44.982+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:49:44.981+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:49:44.981+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:49:44.983+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:49:44.989+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:49:45.038+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:49:45.038+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1174215491 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:49:45.038+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:49:45.039+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:49:45.073+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74cb569c]
2026-02-09T11:49:45.088+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:45.073+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:49:45.073+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50f613c]
2026-02-09T11:49:45.073+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d558236]
2026-02-09T11:49:45.089+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d261ace] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:45.091+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-09T11:49:45.098+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@863490112 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:49:45.094+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:45.094+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:45.098+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-02-09T11:49:45.098+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40fd53c7] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:45.098+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ba0d303] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:45.100+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 3(Long)
2026-02-09T11:49:45.100+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1048960101 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:49:45.109+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1514519155 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:49:45.112+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-02-09T11:49:45.113+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-02-09T11:49:45.113+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:49:45.116+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 3(Long)
2026-02-09T11:49:45.120+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 3(Long)
2026-02-09T11:49:45.121+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dcb5252]
2026-02-09T11:49:45.122+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:45.127+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 1
2026-02-09T11:49:45.127+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5595cf86] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:45.134+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d261ace]
2026-02-09T11:49:45.140+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 5
2026-02-09T11:49:45.140+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 1
2026-02-09T11:49:45.142+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@808567960 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:49:45.142+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:45.142+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40fd53c7]
2026-02-09T11:49:45.143+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ba0d303]
2026-02-09T11:49:45.143+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-02-09T11:49:45.143+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=30, userId=29, companyId (truncated)...]
2026-02-09T11:49:45.144+09:00  INFO 40576 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 3, count: 5
2026-02-09T11:49:45.144+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:45.145+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 3(Long)
2026-02-09T11:49:45.145+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:45.145+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:45.146+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=30, userId=29, companyId (truncated)...]
2026-02-09T11:49:45.157+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=5, username=test_ceo, passw (truncated)...]
2026-02-09T11:49:45.161+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:45.161+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:45.263+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 5
2026-02-09T11:49:45.265+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5595cf86]
2026-02-09T11:49:45.270+09:00  INFO 40576 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 3, count: 5
2026-02-09T11:49:45.271+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:45.288+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=5, username=test_ceo, passw (truncated)...]
2026-02-09T11:49:45.290+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:50.037+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-02-09T11:49:50.057+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-02-09T11:49:50.073+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/logout
2026-02-09T11:49:50.118+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-02-09T11:49:50.182+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-02-09T11:49:50.229+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-02-09T11:49:50.324+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiI5IiwidXNlcm5hbWUiOiJ (truncated)...]
2026-02-09T11:49:50.355+09:00  INFO 40576 --- [http-nio-8080-exec-10] SECURITY                                 : LOGOUT userId=9
2026-02-09T11:49:50.371+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:50.379+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-02-09T11:49:50.423+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:54.078+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-02-09T11:49:54.093+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-02-09T11:49:54.097+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-02-09T11:49:54.106+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-02-09T11:49:54.115+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-02-09T11:49:54.116+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-02-09T11:49:54.124+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_tax, password=1234)]
2026-02-09T11:49:54.130+09:00  INFO 40576 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 로그인 시도 - username: test_tax
2026-02-09T11:49:54.131+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:54.133+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e2bcafe] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:54.138+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1925223028 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:49:54.139+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-02-09T11:49:54.140+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_tax(String)
2026-02-09T11:49:54.147+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-02-09T11:49:54.148+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e2bcafe]
2026-02-09T11:49:54.282+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:54.289+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a06791e] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:54.296+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1437547067 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:49:54.309+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:49:54.321+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-09T11:49:54.369+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:49:54.373+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a06791e]
2026-02-09T11:49:54.376+09:00  INFO 40576 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 로그인 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3
2026-02-09T11:49:54.381+09:00  INFO 40576 --- [http-nio-8080-exec-8] SECURITY                                 : LOGIN_SUCCESS userId=8 username=test_tax role=TAX_ACCOUNTANT
2026-02-09T11:49:54.383+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:54.390+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=8, username=test_tax, password=n (truncated)...]
2026-02-09T11:49:54.393+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:54.811+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-09T11:49:54.844+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-09T11:49:54.871+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/companies
2026-02-09T11:49:54.961+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-09T11:49:55.030+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-09T11:49:55.045+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-09T11:49:55.055+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:55.083+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@155f0531] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:55.162+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1048690558 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:49:55.177+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-09T11:49:55.194+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 8(Long)
2026-02-09T11:49:55.244+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-09T11:49:55.262+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@155f0531]
2026-02-09T11:49:55.278+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:55.309+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-09T11:49:55.324+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:55.596+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:49:55.598+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:49:55.598+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:55.600+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:55.648+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:49:55.603+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:49:55.604+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:55.654+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:55.632+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:55.643+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:55.662+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:55.651+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:49:55.651+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:55.655+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:49:55.659+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:55.662+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:55.666+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:49:55.672+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:49:55.677+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:55.700+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:49:55.700+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:49:55.702+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:55.703+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:55.714+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:49:55.715+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:55.715+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:49:55.716+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:49:55.721+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-09T11:49:55.721+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-09T11:49:55.722+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-09T11:49:55.733+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-09T11:49:55.734+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:49:55.734+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:49:55.735+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:55.736+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:55.736+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:49:55.739+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:55.739+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:49:55.740+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:49:55.740+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:49:55.740+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:49:55.741+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-09T11:49:55.741+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:49:55.741+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:49:55.742+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:49:55.742+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-09T11:49:55.742+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-09T11:49:55.742+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-09T11:49:55.743+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-09T11:49:55.764+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:55.743+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:55.765+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64c43324] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:55.748+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:55.748+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:55.763+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:55.763+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:55.765+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:55.771+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bd83f1d] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:55.772+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:55.773+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:55.774+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:55.781+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:55.786+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2077616266 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:49:55.793+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:55.805+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@382f95dc] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:55.793+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:55.794+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:55.803+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b6ea595] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:55.804+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:49:55.809+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2130983253 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:49:55.810+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f35419d] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:55.811+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dbc1bd2] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:55.814+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:49:55.813+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:49:55.815+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:49:55.816+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@498753466 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:49:55.816+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-02-09T11:49:55.817+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:49:55.823+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@928632474 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:49:55.823+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@225683343 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:49:55.823+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:49:55.823+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1626779873 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:49:55.823+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-09T11:49:55.823+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-09T11:49:55.824+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64c43324]
2026-02-09T11:49:55.824+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:49:55.824+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:49:55.824+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:49:55.825+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:49:55.825+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:55.825+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bd83f1d]
2026-02-09T11:49:55.825+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-09T11:49:55.826+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:49:55.826+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:55.826+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:49:55.826+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:55.826+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:55.834+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:49:55.834+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:55.837+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:49:55.837+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:49:55.838+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:49:55.838+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-09T11:49:55.838+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:49:55.838+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:55.838+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:55.838+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:49:55.838+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7634d1b2] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:55.839+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:49:55.839+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@200355004 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:49:55.839+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:49:55.839+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:55.840+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@189f78be] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:55.840+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:49:55.840+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@388214256 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:49:55.840+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:55.840+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:55.841+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:49:55.842+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-09T11:49:55.842+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dbc1bd2]
2026-02-09T11:49:55.842+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@382f95dc]
2026-02-09T11:49:55.843+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:55.843+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:55.843+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60b9a8d9] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:55.844+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@899513751 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:49:55.845+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-09T11:49:55.844+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-02-09T11:49:55.846+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b6ea595]
2026-02-09T11:49:55.846+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-09T11:49:55.846+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:55.847+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=1, pendingCount (truncated)...]
2026-02-09T11:49:55.847+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-02, complet (truncated)...]
2026-02-09T11:49:55.848+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:55.848+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:55.853+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:55.853+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:55.853+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-09T11:49:55.854+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-09T11:49:55.854+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:55.854+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:55.854+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:49:55.854+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:49:55.855+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:49:55.855+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-09T11:49:55.855+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:55.855+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:55.856+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:55.856+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ff336e1] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:55.856+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:55.856+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1617113451 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:49:55.856+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@170908b4] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:55.857+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:55.857+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1177963352 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:49:55.857+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:55.857+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-09T11:49:55.858+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:49:55.892+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:55.893+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:49:55.893+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-02-09T11:49:55.905+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@189f78be]
2026-02-09T11:49:55.905+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7634d1b2]
2026-02-09T11:49:55.906+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:55.907+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-02-09T11:49:55.907+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategorySummary          : <==      Total: 1
2026-02-09T11:49:55.909+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f35419d]
2026-02-09T11:49:55.909+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:55.910+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:55.913+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ff336e1]
2026-02-09T11:49:55.919+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@170908b4]
2026-02-09T11:49:55.926+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60b9a8d9]
2026-02-09T11:49:55.927+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:55.927+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75d2fa17] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:55.931+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:49:55.932+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:55.936+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:55.937+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:55.937+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-09T11:49:55.937+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@384513691 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:49:55.938+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:55.938+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21751abf] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:55.938+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-09T11:49:55.939+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식비/회식, totalAmou (truncated)...]
2026-02-09T11:49:55.940+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:55.940+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:55.941+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1205298254 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:49:55.941+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:55.942+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:55.942+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:55.943+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:55.943+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:55.958+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:49:55.958+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:55.958+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:55.984+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-09T11:49:55.959+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:49:55.974+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:49:55.974+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:55.985+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-09T11:49:55.985+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:55.988+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:55.991+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-09T11:49:55.991+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:49:55.992+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75d2fa17]
2026-02-09T11:49:55.995+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:55.996+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:49:55.996+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21751abf]
2026-02-09T11:49:55.997+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:49:55.997+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:49:56.007+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.007+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:49:56.008+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:49:56.011+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.026+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ab8acd7] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.014+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-09T11:49:56.023+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:49:56.024+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c665f99] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.024+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-09T11:49:56.026+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.026+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1402070493 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:49:56.026+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-09T11:49:56.027+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.027+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@235274816 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:49:56.027+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:56.028+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24218367] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.028+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:49:56.029+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:56.030+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44ffd620] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.030+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:49:56.031+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:56.033+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1191953114 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:49:56.037+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:49:56.037+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:56.040+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@826479974 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:49:56.042+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:49:56.042+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.042+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:56.043+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.044+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:49:56.052+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5686eede] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.058+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:49:56.054+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:56.056+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23b4e69c] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.058+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@447667150 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:49:56.060+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1694715135 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:49:56.060+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-02-09T11:49:56.060+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:49:56.063+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:49:56.066+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:49:56.070+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-09T11:49:56.071+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ab8acd7]
2026-02-09T11:49:56.072+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:49:56.072+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:56.073+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:49:56.077+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.077+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c665f99]
2026-02-09T11:49:56.077+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24218367]
2026-02-09T11:49:56.077+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44ffd620]
2026-02-09T11:49:56.077+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@263a6ded] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.078+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.078+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.079+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:56.079+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@964408297 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:49:56.079+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37e1b6c1] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.079+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cfe15a1] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.080+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:49:56.080+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:56.080+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1772465459 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:49:56.081+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1424788450 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:49:56.081+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:56.083+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:56.085+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:56.085+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:56.091+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.093+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:56.094+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:56.095+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-09T11:49:56.096+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-09T11:49:56.108+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.115+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:56.115+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:56.116+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5686eede]
2026-02-09T11:49:56.116+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:49:56.116+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:56.137+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:49:56.139+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cfe15a1]
2026-02-09T11:49:56.139+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@263a6ded]
2026-02-09T11:49:56.140+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:56.140+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23b4e69c]
2026-02-09T11:49:56.140+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37e1b6c1]
2026-02-09T11:49:56.141+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-09T11:49:56.141+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.141+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.142+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=1, pendingCount (truncated)...]
2026-02-09T11:49:56.142+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.143+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.143+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:56.143+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@819de98] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.144+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a1853e6] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.144+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:56.148+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2134377037 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:49:56.148+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:49:56.145+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d39a57b] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.147+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@237a275b] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.147+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:56.148+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@71733543 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:49:56.149+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.154+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:49:56.155+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@163394118 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:49:56.155+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@429378123 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:49:56.156+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.156+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:49:56.157+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-09T11:49:56.157+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-09T11:49:56.159+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-09T11:49:56.157+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:49:56.158+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23dfa808] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.159+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:49:56.160+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.163+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:49:56.164+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1941329024 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:49:56.165+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategorySummary          : <==      Total: 1
2026-02-09T11:49:56.171+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d39a57b]
2026-02-09T11:49:56.165+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:49:56.166+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:49:56.169+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-09T11:49:56.170+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:49:56.172+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:56.172+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:49:56.172+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a1853e6]
2026-02-09T11:49:56.175+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@819de98]
2026-02-09T11:49:56.175+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:49:56.176+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식비/회식, totalAmou (truncated)...]
2026-02-09T11:49:56.176+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.180+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:49:56.181+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.181+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.188+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:56.206+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e96e839] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.212+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-02-09T11:49:56.215+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1969241506 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:49:56.212+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@237a275b]
2026-02-09T11:49:56.212+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e351f7f] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.213+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dd194cf] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.214+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:49:56.215+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23dfa808]
2026-02-09T11:49:56.216+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:56.220+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.220+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1987771452 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:49:56.221+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2080006387 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:49:56.221+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:56.221+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:56.221+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:49:56.222+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77081807] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.222+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:56.223+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:56.224+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-02, complet (truncated)...]
2026-02-09T11:49:56.226+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:49:56.226+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@96119106 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:49:56.227+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:56.227+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:56.228+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:56.230+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:49:56.230+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:56.232+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:56.239+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:49:56.239+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:49:56.242+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:56.250+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e351f7f]
2026-02-09T11:49:56.249+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:56.250+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e96e839]
2026-02-09T11:49:56.250+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.252+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:49:56.253+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:56.253+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.254+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aea1434] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.254+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:49:56.255+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:56.256+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:49:56.256+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@148b4629] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.257+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1165615989 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:49:56.260+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:49:56.260+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dd194cf]
2026-02-09T11:49:56.263+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:56.265+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:56.269+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1831183265 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:49:56.269+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:49:56.271+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:49:56.272+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.272+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77081807]
2026-02-09T11:49:56.276+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.281+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:56.284+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:49:56.293+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.293+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@521782bd] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.293+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:56.294+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:56.294+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-09T11:49:56.294+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22638a95] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.294+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1674646492 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:49:56.295+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:49:56.304+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.304+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@263258464 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:49:56.305+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:49:56.306+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:56.320+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:49:56.340+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aea1434]
2026-02-09T11:49:56.341+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.321+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:49:56.333+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:49:56.340+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:49:56.341+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:56.342+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:56.353+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:49:56.343+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.351+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:49:56.353+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:49:56.353+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@148b4629]
2026-02-09T11:49:56.354+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:56.356+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.356+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:49:56.358+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.364+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.364+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@581dd0b7] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.378+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.379+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:49:56.379+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:49:56.393+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@521782bd]
2026-02-09T11:49:56.387+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35406d6b] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.388+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1651069762 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:49:56.389+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.390+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.393+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22638a95]
2026-02-09T11:49:56.393+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.394+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:56.394+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2067062756 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:49:56.395+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:49:56.397+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:56.397+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@282ad7c6] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.397+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.397+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:56.398+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:49:56.399+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:49:56.399+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.400+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1187428884 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:49:56.404+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.409+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:49:56.410+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:56.411+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.412+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:56.413+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-09T11:49:56.415+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:49:56.417+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-09T11:49:56.421+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:56.421+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.422+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-09T11:49:56.423+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.423+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:49:56.424+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:49:56.424+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:49:56.424+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-09T11:49:56.425+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-09T11:49:56.425+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-09T11:49:56.426+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:56.426+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-09T11:49:56.426+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:56.427+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:56.427+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:56.427+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:56.428+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.428+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:56.429+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.429+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6603ec0] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.429+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.429+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28dbbb92] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.430+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@832554539 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:49:56.430+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65699949] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.432+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:56.437+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1229606985 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:49:56.443+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-09T11:49:56.439+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-02-09T11:49:56.440+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:56.440+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:49:56.440+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@624683746 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:49:56.442+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@581dd0b7]
2026-02-09T11:49:56.444+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:49:56.445+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:49:56.447+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@282ad7c6]
2026-02-09T11:49:56.448+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35406d6b]
2026-02-09T11:49:56.448+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:49:56.448+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.449+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:56.454+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.455+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f29949f] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.455+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-09T11:49:56.455+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:49:56.456+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@429d3235] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.456+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@696743845 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:49:56.456+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:56.457+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1954554936 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:49:56.457+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:56.458+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.460+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-09T11:49:56.461+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-02-09T11:49:56.461+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:56.462+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:56.464+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-09T11:49:56.466+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:49:56.466+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6603ec0]
2026-02-09T11:49:56.467+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28dbbb92]
2026-02-09T11:49:56.468+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:56.468+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.472+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65699949]
2026-02-09T11:49:56.473+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:56.473+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:56.473+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:49:56.474+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.474+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=1, pendingCount (truncated)...]
2026-02-09T11:49:56.474+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-09T11:49:56.479+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:56.479+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-09T11:49:56.480+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48a57b6] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.480+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:56.481+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:56.485+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f29949f]
2026-02-09T11:49:56.486+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:56.486+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@763377087 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:49:56.491+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-09T11:49:56.487+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.493+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-09T11:49:56.488+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.490+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.491+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:56.494+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-09T11:49:56.494+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ee90a01] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.495+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-09T11:49:56.495+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.497+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ee4ff78] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.495+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.496+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1572334127 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:49:56.497+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.498+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@610602276 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:49:56.499+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:49:56.499+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:49:56.499+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:49:56.500+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-09T11:49:56.500+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:49:56.504+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:49:56.505+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:56.506+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-09T11:49:56.508+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:49:56.515+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.516+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@429d3235]
2026-02-09T11:49:56.517+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategorySummary          : <==      Total: 1
2026-02-09T11:49:56.517+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:56.523+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9044120] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.523+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.524+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48a57b6]
2026-02-09T11:49:56.524+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:56.529+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.524+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1464149984 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:49:56.525+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@701f580a] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.527+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:56.528+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:49:56.530+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1219d483] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.530+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:56.531+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1538834598 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:49:56.531+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식비/회식, totalAmou (truncated)...]
2026-02-09T11:49:56.533+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-02-09T11:49:56.536+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ee90a01]
2026-02-09T11:49:56.537+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@71434072 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:49:56.537+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:56.539+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:49:56.541+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:56.542+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ee4ff78]
2026-02-09T11:49:56.544+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.544+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-02-09T11:49:56.546+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:49:56.546+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:56.546+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28b0a766] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.547+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.547+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:49:56.556+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-02, complet (truncated)...]
2026-02-09T11:49:56.557+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1850673523 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:49:56.557+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:56.560+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9044120]
2026-02-09T11:49:56.557+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-09T11:49:56.560+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:56.560+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:56.561+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.562+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.565+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:49:56.568+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:56.569+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:49:56.572+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-09T11:49:56.577+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6753ffba] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.577+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:49:56.577+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@701f580a]
2026-02-09T11:49:56.580+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-09T11:49:56.580+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:56.580+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1219d483]
2026-02-09T11:49:56.581+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1291169585 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:49:56.581+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-09T11:49:56.582+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.582+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:49:56.582+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28b0a766]
2026-02-09T11:49:56.584+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:56.584+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:56.587+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:56.587+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3716eef5] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.588+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-09T11:49:56.589+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.590+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=1, pendingCount (truncated)...]
2026-02-09T11:49:56.590+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:56.591+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:56.592+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1027817237 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:49:56.592+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-09T11:49:56.592+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fc44171] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.592+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:56.597+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@308435576 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:49:56.595+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.596+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:56.596+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:56.598+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.599+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:49:56.604+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@138555b2] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.605+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:56.609+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:56.610+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:56.614+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-09T11:49:56.615+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:49:56.616+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@755782261 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:49:56.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6753ffba]
2026-02-09T11:49:56.623+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.624+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.631+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-09T11:49:56.633+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.633+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46583890] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.639+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:49:56.640+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:56.640+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:49:56.651+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fc44171]
2026-02-09T11:49:56.652+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.645+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:49:56.648+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@171c3e61] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.648+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@951206778 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:49:56.649+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-09T11:49:56.649+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3716eef5]
2026-02-09T11:49:56.652+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53ec4e17] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.653+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1875553559 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:49:56.660+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:49:56.660+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:56.662+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:56.662+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1312703186 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:49:56.663+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:49:56.663+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-09T11:49:56.664+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:56.665+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-02-09T11:49:56.668+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:49:56.670+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:56.673+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:49:56.674+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.677+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@138555b2]
2026-02-09T11:49:56.678+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:49:56.679+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:56.683+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:56.684+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c83aacf] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.685+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:56.685+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46583890]
2026-02-09T11:49:56.707+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.708+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76ff42ed] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.693+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.695+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1366217277 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:49:56.695+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-09T11:49:56.709+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1910794266 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:49:56.710+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-09T11:49:56.710+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-09T11:49:56.712+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:56.713+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-09T11:49:56.716+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:49:56.716+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.720+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-09T11:49:56.723+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:56.724+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:49:56.726+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:49:56.727+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53ec4e17]
2026-02-09T11:49:56.727+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@171c3e61]
2026-02-09T11:49:56.732+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-02-09T11:49:56.735+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:49:56.736+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:56.736+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.737+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c83aacf]
2026-02-09T11:49:56.744+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.745+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:49:56.745+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33308bff] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.746+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:56.746+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@270debb] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.753+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:56.755+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1168721102 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:49:56.755+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-02, complet (truncated)...]
2026-02-09T11:49:56.756+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2005070412 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:49:56.757+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:56.757+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:56.758+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:56.758+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:56.759+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:56.761+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : <==      Total: 1
2026-02-09T11:49:56.788+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76ff42ed]
2026-02-09T11:49:56.792+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:56.792+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:56.792+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:56.792+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33308bff]
2026-02-09T11:49:56.793+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@270debb]
2026-02-09T11:49:56.794+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식비/회식, totalAmou (truncated)...]
2026-02-09T11:49:56.794+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.796+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.798+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:56.798+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49ff47ac] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.799+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d864dc8] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.800+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2124894751 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:49:56.800+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2038944197 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:49:56.810+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:49:56.811+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:56.813+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:56.813+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:49:56.838+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.839+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.839+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:49:56.840+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.842+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:56.842+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:49:56.856+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.856+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d864dc8]
2026-02-09T11:49:56.856+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49ff47ac]
2026-02-09T11:49:56.857+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.857+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:56.857+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ca4adbc] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.858+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bd315f] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:56.860+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.860+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.860+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:49:56.860+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.862+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@864245741 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:49:56.862+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@852284643 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:49:56.865+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-09T11:49:56.869+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-09T11:49:56.876+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-09T11:49:56.880+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-09T11:49:56.881+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:49:56.881+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:56.882+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.884+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.885+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:49:56.886+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:56.887+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:49:56.888+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:56.984+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:49:57.005+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:49:57.006+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-09T11:49:57.006+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:49:57.007+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-09T11:49:57.008+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-09T11:49:57.008+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-09T11:49:57.008+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-09T11:49:57.009+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:57.013+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:57.088+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:57.105+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:57.105+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:49:57.145+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:57.149+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:57.150+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:57.152+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:57.152+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bd315f]
2026-02-09T11:49:57.155+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ca4adbc]
2026-02-09T11:49:57.197+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:49:57.223+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:57.232+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:57.235+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:57.236+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:57.237+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:57.238+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:57.238+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c138a8d] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:57.238+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bb63bda] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:57.238+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a820b89] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:57.238+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:49:57.238+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57783d17] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:57.240+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:57.238+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34199b3f] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:57.239+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@171063217 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:49:57.240+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@652659742 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:49:57.244+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:49:57.246+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-09T11:49:57.240+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@241742601 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:49:57.252+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:57.242+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1660440045 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:49:57.242+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:57.242+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-09T11:49:57.253+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:57.278+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-09T11:49:57.297+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-09T11:49:57.304+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:49:57.304+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:49:57.304+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1093278809 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:49:57.307+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:49:57.320+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:49:57.321+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a820b89]
2026-02-09T11:49:57.339+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:57.342+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-02-09T11:49:57.353+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:49:57.353+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:57.357+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-02-09T11:49:57.367+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57783d17]
2026-02-09T11:49:57.369+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:49:57.370+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-02-09T11:49:57.377+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:49:57.378+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15707f09] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:57.382+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bb63bda]
2026-02-09T11:49:57.383+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:57.392+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34199b3f]
2026-02-09T11:49:57.393+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:57.393+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@798285933 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:49:57.393+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:57.394+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ea4dcf1] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:57.394+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:57.394+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17b5700a] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:57.398+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-09T11:49:57.398+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-09T11:49:57.417+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c138a8d]
2026-02-09T11:49:57.407+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-09T11:49:57.410+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@681762487 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:49:57.415+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-02, complet (truncated)...]
2026-02-09T11:49:57.415+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1591956155 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:49:57.416+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-09T11:49:57.419+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:57.420+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:57.421+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:49:57.422+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:57.423+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:57.424+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=1, pendingCount (truncated)...]
2026-02-09T11:49:57.433+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:49:57.437+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:49:57.439+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:49:57.439+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:57.444+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:57.446+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:49:57.454+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : <==      Total: 1
2026-02-09T11:49:57.459+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:49:57.460+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:49:57.461+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15707f09]
2026-02-09T11:49:57.465+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:49:57.467+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:49:57.467+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:57.468+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:49:57.469+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:49:57.470+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식비/회식, totalAmou (truncated)...]
2026-02-09T11:49:57.471+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:49:57.471+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:49:57.472+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:49:57.473+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:57.473+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:49:57.477+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:57.477+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:49:57.478+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:49:57.479+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:49:57.487+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17b5700a]
2026-02-09T11:49:57.488+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ea4dcf1]
2026-02-09T11:49:57.500+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:57.500+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:49:57.500+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:49:57.501+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:57.503+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:57.503+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38e7b987] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:57.504+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:49:57.504+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:49:57.504+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@152deb34] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:57.505+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29a6a825] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:57.505+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1345863693 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:49:57.506+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:57.506+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:49:57.507+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@698674363 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:49:57.510+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@830319284 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:49:57.514+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:49:57.525+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c7b3ca3] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:57.529+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:49:57.529+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:57.540+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:57.542+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:49:57.542+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@385458205 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:49:57.543+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:49:57.543+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:57.547+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:57.552+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:49:57.553+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:57.559+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cbd1016] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:57.560+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:49:57.560+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1418049245 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:49:57.561+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:49:57.565+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:49:57.565+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38e7b987]
2026-02-09T11:49:57.570+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:49:57.571+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:57.574+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:57.574+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:57.575+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:49:57.575+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29a6a825]
2026-02-09T11:49:57.575+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@152deb34]
2026-02-09T11:49:57.576+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:57.576+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:57.577+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:57.591+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-09T11:49:57.593+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:49:57.593+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24ffb06a] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:57.593+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c7b3ca3]
2026-02-09T11:49:57.595+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:57.600+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1584503690 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:49:57.601+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:57.606+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:49:57.607+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:57.605+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:49:57.614+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:49:57.617+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-09T11:49:57.619+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cbd1016]
2026-02-09T11:49:57.625+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:57.625+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:49:57.633+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:57.641+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:49:57.660+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24ffb06a]
2026-02-09T11:49:57.664+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:57.673+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d58b187] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:57.675+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1417493670 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:49:57.682+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:57.683+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:57.709+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:57.729+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d58b187]
2026-02-09T11:49:57.731+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:57.741+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2531ed5e] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:57.741+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1840096502 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:49:57.750+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:49:57.768+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:49:57.788+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:49:57.796+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2531ed5e]
2026-02-09T11:49:57.797+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:57.797+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@441d3680] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:57.823+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1852598336 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:49:57.840+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:49:57.842+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:49:57.904+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:49:57.911+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@441d3680]
2026-02-09T11:49:57.912+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:57.913+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:49:57.917+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:49:58.295+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:49:58.314+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:49:58.325+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:49:58.327+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:49:58.331+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:49:58.335+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:49:58.338+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:49:58.345+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:49:58.355+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:49:58.357+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ab51b0c] was not registered for synchronization because synchronization is not active
2026-02-09T11:49:58.371+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1313538081 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:49:58.374+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.A.findByCompanyId                : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE company_id = ? OR company_id IS NULL ORDER BY company_id DESC, category ASC, account_name ASC
2026-02-09T11:49:58.375+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.A.findByCompanyId                : ==> Parameters: 3(Long)
2026-02-09T11:49:58.389+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.A.findByCompanyId                : <==      Total: 12
2026-02-09T11:49:58.390+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ab51b0c]
2026-02-09T11:49:58.390+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:49:58.394+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[AccountCodeMappingDto(mappingId=3, companyId=null, ca (truncated)...]
2026-02-09T11:49:58.396+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:50:01.199+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:50:01.205+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-09T11:50:01.206+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:50:01.265+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:50:01.349+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-09T11:50:01.363+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:50:01.372+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:50:01.372+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/companies
2026-02-09T11:50:01.373+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:50:01.373+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:50:01.373+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-09T11:50:01.386+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:50:01.386+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:50:01.387+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-09T11:50:01.387+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:50:01.391+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:50:01.391+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-09T11:50:01.392+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:50:01.392+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:50:01.393+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:50:01.393+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2400efae] was not registered for synchronization because synchronization is not active
2026-02-09T11:50:01.393+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:50:01.393+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8cc9d9d] was not registered for synchronization because synchronization is not active
2026-02-09T11:50:01.394+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2222dfa1] was not registered for synchronization because synchronization is not active
2026-02-09T11:50:01.399+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1059228187 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:50:01.403+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@533210907 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:50:01.403+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1655540021 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:50:01.404+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:50:01.404+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-09T11:50:01.407+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:50:01.408+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:50:01.408+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 8(Long)
2026-02-09T11:50:01.409+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:50:01.420+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:50:01.420+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-09T11:50:01.420+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:50:01.420+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2222dfa1]
2026-02-09T11:50:01.421+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8cc9d9d]
2026-02-09T11:50:01.421+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2400efae]
2026-02-09T11:50:01.422+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:50:01.422+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:50:01.423+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:50:01.424+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:50:01.424+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-09T11:50:01.425+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:50:01.425+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:50:01.426+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:50:01.426+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:50:01.467+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:50:01.489+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:50:01.505+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:50:01.512+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:50:01.529+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:50:01.530+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:50:01.531+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:50:01.532+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7746c672] was not registered for synchronization because synchronization is not active
2026-02-09T11:50:01.532+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@868173100 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:50:01.550+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:50:01.547+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:50:01.550+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:50:01.550+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:50:01.550+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:50:01.557+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:50:01.557+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:50:01.557+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:50:01.557+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:50:01.558+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:50:01.559+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:50:01.560+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:50:01.560+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:50:01.560+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:50:01.569+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:50:01.570+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:50:01.571+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:50:01.579+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7746c672]
2026-02-09T11:50:01.572+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:50:01.585+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:50:01.575+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:50:01.575+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:50:01.575+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:50:01.583+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:50:01.586+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:50:01.589+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:50:01.590+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:50:01.591+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:50:01.592+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:50:01.592+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dc33fe9] was not registered for synchronization because synchronization is not active
2026-02-09T11:50:01.592+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:50:01.593+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:50:01.593+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:50:01.594+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:50:01.596+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:50:01.597+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48d1ce69] was not registered for synchronization because synchronization is not active
2026-02-09T11:50:01.597+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:50:01.616+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:50:01.599+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:50:01.608+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1419491287 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:50:01.620+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:50:01.620+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d13a7ae] was not registered for synchronization because synchronization is not active
2026-02-09T11:50:01.621+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:50:01.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:50:01.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@249282544 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:50:01.623+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:50:01.624+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1405259249 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:50:01.626+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5207987a] was not registered for synchronization because synchronization is not active
2026-02-09T11:50:01.627+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:50:01.627+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:50:01.628+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@538228776 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:50:01.632+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:50:01.636+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:50:01.640+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:50:01.642+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:50:01.644+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48d1ce69]
2026-02-09T11:50:01.646+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:50:01.647+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:50:01.650+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:50:01.653+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:50:01.654+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-09T11:50:01.654+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:50:01.658+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dc33fe9]
2026-02-09T11:50:01.658+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d13a7ae]
2026-02-09T11:50:01.660+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:50:01.661+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:50:01.662+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:50:01.662+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:50:01.662+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:50:01.663+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:50:01.699+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-09T11:50:01.712+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5207987a]
2026-02-09T11:50:01.723+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:50:01.738+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:50:01.739+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:50:02.789+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:50:02.803+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:50:02.806+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:50:02.808+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:50:02.809+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:50:02.811+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:50:02.823+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:50:02.829+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:50:02.832+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:50:02.844+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@786c4a69] was not registered for synchronization because synchronization is not active
2026-02-09T11:50:02.870+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1040024408 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:50:02.871+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.A.findByCompanyId                : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE company_id = ? OR company_id IS NULL ORDER BY company_id DESC, category ASC, account_name ASC
2026-02-09T11:50:02.874+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.A.findByCompanyId                : ==> Parameters: 3(Long)
2026-02-09T11:50:02.878+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.A.findByCompanyId                : <==      Total: 12
2026-02-09T11:50:02.879+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@786c4a69]
2026-02-09T11:50:02.880+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:50:02.882+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[AccountCodeMappingDto(mappingId=3, companyId=null, ca (truncated)...]
2026-02-09T11:50:02.884+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:50:07.818+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:50:07.821+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-09T11:50:07.823+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:50:07.847+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:50:07.847+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-09T11:50:07.852+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:50:07.874+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:50:07.875+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/companies
2026-02-09T11:50:07.943+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:50:08.000+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:50:08.080+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-09T11:50:08.119+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:50:08.227+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:50:08.229+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:50:08.230+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:50:08.250+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:50:08.265+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:50:08.289+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:50:08.290+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7235ab38] was not registered for synchronization because synchronization is not active
2026-02-09T11:50:08.250+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-09T11:50:08.291+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-09T11:50:08.292+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:50:08.292+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@89396ff] was not registered for synchronization because synchronization is not active
2026-02-09T11:50:08.254+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:50:08.259+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:50:08.281+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:50:08.295+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:50:08.297+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:50:08.299+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:50:08.307+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a781bdf] was not registered for synchronization because synchronization is not active
2026-02-09T11:50:08.306+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:50:08.308+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:50:08.316+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:50:08.321+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@807733073 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:50:08.353+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-09T11:50:08.321+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1316649477 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:50:08.326+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:50:08.327+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:50:08.355+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 8(Long)
2026-02-09T11:50:08.357+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1513345601 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:50:08.373+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:50:08.377+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:50:08.380+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:50:08.381+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:50:08.391+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:50:08.392+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:50:08.414+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:50:08.393+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:50:08.401+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f90e42f] was not registered for synchronization because synchronization is not active
2026-02-09T11:50:08.402+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:50:08.403+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:50:08.413+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-09T11:50:08.422+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:50:08.423+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:50:08.432+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@89396ff]
2026-02-09T11:50:08.432+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:50:08.441+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:50:08.442+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:50:08.443+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1605842945 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:50:08.443+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:50:08.443+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:50:08.455+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7235ab38]
2026-02-09T11:50:08.454+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:50:08.454+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11368799] was not registered for synchronization because synchronization is not active
2026-02-09T11:50:08.454+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-09T11:50:08.454+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:50:08.455+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a781bdf]
2026-02-09T11:50:08.455+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:50:08.455+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:50:08.456+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1297605872 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:50:08.456+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:50:08.460+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:50:08.460+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:50:08.461+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:50:08.461+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:50:08.473+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56bb31fe] was not registered for synchronization because synchronization is not active
2026-02-09T11:50:08.461+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:50:08.463+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:50:08.471+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:50:08.472+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:50:08.539+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1215553416 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:50:08.539+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:50:08.539+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:50:08.560+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:50:08.561+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:50:08.565+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:50:08.573+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:50:08.588+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f90e42f]
2026-02-09T11:50:08.589+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:50:08.595+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:50:08.611+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:50:08.612+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:50:08.628+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:50:08.628+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:50:08.629+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:50:08.662+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:50:08.663+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:50:08.644+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11368799]
2026-02-09T11:50:08.645+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:50:08.645+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:50:08.646+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:50:08.663+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:50:08.664+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:50:08.664+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:50:08.665+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:50:08.670+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:50:08.670+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:50:08.678+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c72ba50] was not registered for synchronization because synchronization is not active
2026-02-09T11:50:08.671+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:50:08.675+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:50:08.677+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:50:08.679+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:50:08.681+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:50:08.682+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:50:08.690+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-09T11:50:08.695+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:50:08.695+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:50:08.710+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56bb31fe]
2026-02-09T11:50:08.710+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4096406f] was not registered for synchronization because synchronization is not active
2026-02-09T11:50:08.711+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:50:08.711+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:50:08.712+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@894644035 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:50:08.712+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:50:08.713+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:50:08.713+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:50:08.713+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:50:08.715+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1061901551 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:50:08.721+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:50:08.724+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25e605d2] was not registered for synchronization because synchronization is not active
2026-02-09T11:50:08.724+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:50:08.724+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:50:08.736+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:50:08.725+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@478564150 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:50:08.738+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:50:08.772+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:50:08.773+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-09T11:50:08.810+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:50:08.849+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4096406f]
2026-02-09T11:50:08.972+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c72ba50]
2026-02-09T11:50:08.986+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:50:08.987+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:50:08.986+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:50:08.988+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:50:08.989+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:50:09.002+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:50:09.008+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-09T11:50:09.023+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25e605d2]
2026-02-09T11:50:09.024+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:50:09.025+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:50:09.026+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:50:10.364+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:50:10.392+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:50:10.400+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:50:10.410+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:50:10.410+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:50:10.413+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:50:10.414+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:50:10.416+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:50:10.423+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:50:10.432+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cefa32b] was not registered for synchronization because synchronization is not active
2026-02-09T11:50:10.440+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1590516351 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:50:10.442+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.A.findByCompanyId                : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE company_id = ? OR company_id IS NULL ORDER BY company_id DESC, category ASC, account_name ASC
2026-02-09T11:50:10.443+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.A.findByCompanyId                : ==> Parameters: 3(Long)
2026-02-09T11:50:10.450+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.A.findByCompanyId                : <==      Total: 12
2026-02-09T11:50:10.456+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cefa32b]
2026-02-09T11:50:10.459+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:50:10.461+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[AccountCodeMappingDto(mappingId=3, companyId=null, ca (truncated)...]
2026-02-09T11:50:10.470+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:50:57.329+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:50:57.329+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:50:57.349+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:50:57.388+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-09T11:50:57.390+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:50:57.391+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:50:57.394+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:50:57.408+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:50:57.429+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:50:57.423+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:50:57.425+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:50:57.427+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-09T11:50:57.428+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:50:57.430+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:50:57.430+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:50:57.438+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:50:57.439+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:50:57.439+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/companies
2026-02-09T11:50:57.440+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:50:57.441+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:50:57.443+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:50:57.443+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:50:57.443+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:50:57.446+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:50:57.444+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-09T11:50:57.444+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:50:57.445+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:50:57.446+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:50:57.446+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:50:57.447+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:50:57.452+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-09T11:50:57.452+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:50:57.453+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:50:57.453+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:50:57.454+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:50:57.455+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:50:57.455+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-09T11:50:57.456+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:50:57.456+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:50:57.456+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:50:57.456+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:50:57.457+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:50:57.459+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:50:57.460+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:50:57.460+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d913445] was not registered for synchronization because synchronization is not active
2026-02-09T11:50:57.460+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e1ab062] was not registered for synchronization because synchronization is not active
2026-02-09T11:50:57.461+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f5e7b02] was not registered for synchronization because synchronization is not active
2026-02-09T11:50:57.461+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:50:57.461+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@394abf1d] was not registered for synchronization because synchronization is not active
2026-02-09T11:50:57.462+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@310d131e] was not registered for synchronization because synchronization is not active
2026-02-09T11:50:57.469+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49f85ffa] was not registered for synchronization because synchronization is not active
2026-02-09T11:50:57.471+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1775104556 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:50:57.472+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1178547871 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:50:57.476+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:50:57.477+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:50:57.478+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:50:57.479+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@814595359 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:50:57.480+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1683108903 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:50:57.481+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:50:57.484+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-09T11:50:57.485+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:50:57.486+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1475389129 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:50:57.486+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1526185769 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:50:57.487+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 8(Long)
2026-02-09T11:50:57.488+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:50:57.489+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:50:57.489+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:50:57.490+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:50:57.490+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:50:57.492+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e1ab062]
2026-02-09T11:50:57.494+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:50:57.495+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d913445]
2026-02-09T11:50:57.498+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:50:57.498+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:50:57.502+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:50:57.508+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:50:57.510+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-09T11:50:57.514+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:50:57.514+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:50:57.514+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f5e7b02]
2026-02-09T11:50:57.515+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@394abf1d]
2026-02-09T11:50:57.515+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:50:57.515+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:50:57.518+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:50:57.520+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:50:57.526+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:50:57.527+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-09T11:50:57.539+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49f85ffa]
2026-02-09T11:50:57.540+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:50:57.540+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:50:57.541+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:50:57.528+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:50:57.538+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:50:57.538+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-09T11:50:57.539+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@310d131e]
2026-02-09T11:50:57.561+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:50:57.561+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:50:57.564+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:50:57.567+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:50:57.568+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:50:57.652+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:50:57.660+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:50:57.662+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:50:57.660+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:50:57.663+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:50:57.770+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:50:57.780+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:50:57.786+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38a525e9] was not registered for synchronization because synchronization is not active
2026-02-09T11:50:57.787+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@495613739 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:50:57.790+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:50:57.795+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:50:57.802+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-09T11:50:57.815+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38a525e9]
2026-02-09T11:50:57.817+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:50:57.821+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:50:57.822+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:50:57.859+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:50:57.860+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:50:57.910+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:50:57.924+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:50:57.924+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:50:57.925+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:50:57.926+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:50:57.926+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:50:57.926+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:50:57.926+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:50:57.927+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:50:57.927+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:50:57.927+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77e285f2] was not registered for synchronization because synchronization is not active
2026-02-09T11:50:57.928+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:50:57.928+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1381573001 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:50:57.929+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:50:57.929+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:50:57.930+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:50:57.931+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:50:57.934+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:50:57.936+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@585e2674] was not registered for synchronization because synchronization is not active
2026-02-09T11:50:57.939+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@844087949 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:50:57.939+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:50:57.940+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:50:57.940+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77e285f2]
2026-02-09T11:50:57.942+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:50:57.942+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:50:57.942+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:50:57.943+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:50:57.954+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-09T11:50:57.954+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@585e2674]
2026-02-09T11:50:57.955+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:50:57.955+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:50:57.956+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:51:02.232+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:51:02.243+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:51:02.246+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:51:02.246+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:51:02.247+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:51:02.248+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:51:02.248+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:51:02.249+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:51:02.252+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:51:02.253+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b176492] was not registered for synchronization because synchronization is not active
2026-02-09T11:51:02.255+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1416464605 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:51:02.257+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.A.findByCompanyId                : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE company_id = ? OR company_id IS NULL ORDER BY company_id DESC, category ASC, account_name ASC
2026-02-09T11:51:02.259+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.A.findByCompanyId                : ==> Parameters: 3(Long)
2026-02-09T11:51:02.265+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.A.findByCompanyId                : <==      Total: 12
2026-02-09T11:51:02.268+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b176492]
2026-02-09T11:51:02.269+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:51:02.270+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[AccountCodeMappingDto(mappingId=3, companyId=null, ca (truncated)...]
2026-02-09T11:51:02.271+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:51:08.073+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:51:08.075+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:51:08.076+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:51:08.077+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:51:08.077+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:51:08.077+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:51:08.077+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:51:08.078+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:51:08.079+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:51:08.080+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d055ebb] was not registered for synchronization because synchronization is not active
2026-02-09T11:51:08.081+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@640332663 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:51:08.083+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.A.findByCompanyId                : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE company_id = ? OR company_id IS NULL ORDER BY company_id DESC, category ASC, account_name ASC
2026-02-09T11:51:08.085+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.A.findByCompanyId                : ==> Parameters: 3(Long)
2026-02-09T11:51:08.087+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.A.findByCompanyId                : <==      Total: 12
2026-02-09T11:51:08.087+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d055ebb]
2026-02-09T11:51:08.088+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:51:08.088+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[AccountCodeMappingDto(mappingId=3, companyId=null, ca (truncated)...]
2026-02-09T11:51:08.089+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:51:16.071+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:51:16.073+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:51:16.074+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:51:16.074+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:51:16.075+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:51:16.075+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:51:16.075+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:51:16.076+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:51:16.077+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:51:16.077+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12dbd253] was not registered for synchronization because synchronization is not active
2026-02-09T11:51:16.078+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1295858672 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:51:16.078+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.A.findByCompanyId                : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE company_id = ? OR company_id IS NULL ORDER BY company_id DESC, category ASC, account_name ASC
2026-02-09T11:51:16.079+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.A.findByCompanyId                : ==> Parameters: 3(Long)
2026-02-09T11:51:16.081+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.A.findByCompanyId                : <==      Total: 12
2026-02-09T11:51:16.081+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12dbd253]
2026-02-09T11:51:16.082+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:51:16.084+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[AccountCodeMappingDto(mappingId=3, companyId=null, ca (truncated)...]
2026-02-09T11:51:16.085+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:51:58.240+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:51:58.242+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:51:58.243+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:51:58.244+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:51:58.245+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:51:58.245+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:51:58.253+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:51:58.263+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:51:58.264+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:51:58.266+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1499df40] was not registered for synchronization because synchronization is not active
2026-02-09T11:51:58.270+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1257992751 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:51:58.271+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:51:58.276+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:51:58.279+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-09T11:51:58.280+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1499df40]
2026-02-09T11:51:58.281+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:51:58.283+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:51:58.284+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:51:58.944+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:51:58.948+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:51:58.949+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:51:58.954+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:51:58.955+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:51:58.956+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:51:58.956+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:51:58.957+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:51:58.958+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:51:58.961+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6472efca] was not registered for synchronization because synchronization is not active
2026-02-09T11:51:58.968+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1620509849 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:51:58.968+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.A.findByCompanyId                : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE company_id = ? OR company_id IS NULL ORDER BY company_id DESC, category ASC, account_name ASC
2026-02-09T11:51:58.969+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.A.findByCompanyId                : ==> Parameters: 3(Long)
2026-02-09T11:51:58.972+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.A.findByCompanyId                : <==      Total: 12
2026-02-09T11:51:58.972+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6472efca]
2026-02-09T11:51:58.973+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:51:58.973+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[AccountCodeMappingDto(mappingId=3, companyId=null, ca (truncated)...]
2026-02-09T11:51:58.974+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:55:05.773+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:55:05.774+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:55:05.781+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:55:05.784+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-09T11:55:05.784+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:55:05.784+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:55:05.808+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:55:05.818+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:55:05.818+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:55:05.818+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-09T11:55:05.819+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:55:05.820+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:55:05.821+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:55:05.822+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:55:05.823+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:55:05.823+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/companies
2026-02-09T11:55:05.824+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:55:05.824+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:55:05.824+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:55:05.825+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:55:05.826+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:55:05.829+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-09T11:55:05.829+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:55:05.830+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:55:05.830+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:55:05.830+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:55:05.831+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:55:05.831+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-09T11:55:05.831+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:55:05.831+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:55:05.832+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:55:05.832+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:55:05.833+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:55:05.833+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-09T11:55:05.833+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:55:05.833+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:55:05.834+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:55:05.834+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:55:05.834+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:55:05.835+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:55:05.835+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:55:05.836+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:55:05.836+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:55:05.837+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68e10286] was not registered for synchronization because synchronization is not active
2026-02-09T11:55:05.838+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:55:05.838+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d9cb573] was not registered for synchronization because synchronization is not active
2026-02-09T11:55:05.838+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@469f61ec] was not registered for synchronization because synchronization is not active
2026-02-09T11:55:05.839+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:55:05.839+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@276437fa] was not registered for synchronization because synchronization is not active
2026-02-09T11:55:05.840+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:55:05.845+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:55:05.846+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aeb7a42] was not registered for synchronization because synchronization is not active
2026-02-09T11:55:05.847+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@276953828 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:55:05.847+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@195319724 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:55:05.848+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17e2852c] was not registered for synchronization because synchronization is not active
2026-02-09T11:55:05.849+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1110910983 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:55:05.849+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2090546682 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:55:05.849+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:55:05.849+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-09T11:55:05.851+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:55:05.851+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:55:05.852+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:55:05.853+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 8(Long)
2026-02-09T11:55:05.854+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:55:05.856+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:55:05.857+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@334941552 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:55:05.857+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1919104270 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:55:05.862+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:55:05.862+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:55:05.862+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-09T11:55:05.864+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:55:05.864+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:55:05.868+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68e10286]
2026-02-09T11:55:05.870+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@276437fa]
2026-02-09T11:55:05.871+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d9cb573]
2026-02-09T11:55:05.873+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:55:05.880+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:55:05.882+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:55:05.883+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:55:05.884+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:55:05.886+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:55:05.888+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:55:05.900+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:55:05.888+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-09T11:55:05.889+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:55:05.906+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:55:05.918+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:55:05.920+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:55:05.923+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:55:05.923+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@469f61ec]
2026-02-09T11:55:05.924+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:55:05.924+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:55:05.959+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:55:05.962+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:55:05.924+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:55:05.956+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-09T11:55:05.956+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-09T11:55:05.983+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17e2852c]
2026-02-09T11:55:05.980+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:55:05.983+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aeb7a42]
2026-02-09T11:55:05.988+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:55:05.998+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:55:05.998+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:55:06.012+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:55:06.013+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:55:06.013+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:55:06.018+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@133402a7] was not registered for synchronization because synchronization is not active
2026-02-09T11:55:06.018+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:55:06.019+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:55:06.019+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@117900745 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:55:06.029+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:55:06.020+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:55:06.032+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:55:06.035+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:55:06.040+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:55:06.041+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:55:06.041+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:55:06.046+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:55:06.036+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:55:06.047+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:55:06.049+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:55:06.050+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:55:06.051+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:55:06.052+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:55:06.053+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:55:06.053+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58b00b21] was not registered for synchronization because synchronization is not active
2026-02-09T11:55:06.049+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:55:06.054+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1348439867 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:55:06.055+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:55:06.054+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:55:06.057+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65a90247] was not registered for synchronization because synchronization is not active
2026-02-09T11:55:06.065+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@725602144 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:55:06.066+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:55:06.069+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:55:06.056+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:55:06.091+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:55:06.091+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:55:06.091+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-09T11:55:06.096+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@133402a7]
2026-02-09T11:55:06.096+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58b00b21]
2026-02-09T11:55:06.096+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65a90247]
2026-02-09T11:55:06.097+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:55:06.097+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:55:06.097+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:55:06.098+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:55:06.098+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:55:06.098+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:55:06.099+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:55:06.099+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:55:06.102+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:55:10.135+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:55:10.401+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:55:10.407+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:55:10.408+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:55:10.409+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:55:10.411+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:55:10.412+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:55:10.414+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:55:10.417+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:55:10.418+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f3ce155] was not registered for synchronization because synchronization is not active
2026-02-09T11:55:10.422+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2039030118 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:55:10.424+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:55:10.430+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:55:10.452+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-09T11:55:10.469+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f3ce155]
2026-02-09T11:55:10.469+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:55:10.470+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:55:10.472+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:55:17.300+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:55:17.316+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:55:17.318+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:55:17.321+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:55:17.322+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:55:17.324+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:55:17.326+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:55:17.331+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:55:17.333+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:55:17.334+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bdd7475] was not registered for synchronization because synchronization is not active
2026-02-09T11:55:17.345+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1224562307 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:55:17.345+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.A.findByCompanyId                : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE company_id = ? OR company_id IS NULL ORDER BY company_id DESC, category ASC, account_name ASC
2026-02-09T11:55:17.346+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.A.findByCompanyId                : ==> Parameters: 3(Long)
2026-02-09T11:55:17.350+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.A.findByCompanyId                : <==      Total: 12
2026-02-09T11:55:17.350+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bdd7475]
2026-02-09T11:55:17.351+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:55:17.352+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[AccountCodeMappingDto(mappingId=3, companyId=null, ca (truncated)...]
2026-02-09T11:55:17.353+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:55:21.310+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:55:21.404+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:55:21.407+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:55:21.413+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:55:21.414+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:55:21.415+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:55:21.415+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:55:21.416+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:55:21.418+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:55:21.420+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4715ac8] was not registered for synchronization because synchronization is not active
2026-02-09T11:55:21.430+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1321463693 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:55:21.433+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.A.findByCompanyId                : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE company_id = ? OR company_id IS NULL ORDER BY company_id DESC, category ASC, account_name ASC
2026-02-09T11:55:21.434+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.A.findByCompanyId                : ==> Parameters: 3(Long)
2026-02-09T11:55:21.474+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.A.findByCompanyId                : <==      Total: 12
2026-02-09T11:55:21.483+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4715ac8]
2026-02-09T11:55:21.485+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:55:21.486+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[AccountCodeMappingDto(mappingId=3, companyId=null, ca (truncated)...]
2026-02-09T11:55:21.489+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:55:33.152+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:55:33.160+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:55:33.166+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:55:33.180+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:55:33.184+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:55:33.188+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:55:33.189+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:55:33.189+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:55:33.190+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:55:33.190+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1666478f] was not registered for synchronization because synchronization is not active
2026-02-09T11:55:33.192+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@451034868 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:55:33.196+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:55:33.200+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:55:33.203+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-09T11:55:33.203+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1666478f]
2026-02-09T11:55:33.203+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:55:33.204+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:55:33.205+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:55:33.941+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:55:33.946+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:55:33.950+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:55:33.952+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:55:33.953+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:55:33.953+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:55:33.954+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:55:33.956+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:55:33.956+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:55:33.956+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69d33085] was not registered for synchronization because synchronization is not active
2026-02-09T11:55:33.958+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@290734053 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:55:33.959+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.A.findByCompanyId                : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE company_id = ? OR company_id IS NULL ORDER BY company_id DESC, category ASC, account_name ASC
2026-02-09T11:55:33.964+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.A.findByCompanyId                : ==> Parameters: 3(Long)
2026-02-09T11:55:33.966+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.A.findByCompanyId                : <==      Total: 12
2026-02-09T11:55:33.966+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69d33085]
2026-02-09T11:55:33.967+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:55:33.967+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[AccountCodeMappingDto(mappingId=3, companyId=null, ca (truncated)...]
2026-02-09T11:55:33.968+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:55:42.172+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:55:42.185+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:55:42.187+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:55:42.189+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:55:42.197+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:55:42.198+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:55:42.199+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:55:42.201+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:55:42.203+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:55:42.205+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4933827e] was not registered for synchronization because synchronization is not active
2026-02-09T11:55:42.207+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1636811063 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:55:42.208+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.A.findByCompanyId                : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE company_id = ? OR company_id IS NULL ORDER BY company_id DESC, category ASC, account_name ASC
2026-02-09T11:55:42.212+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.A.findByCompanyId                : ==> Parameters: 3(Long)
2026-02-09T11:55:42.217+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.A.findByCompanyId                : <==      Total: 12
2026-02-09T11:55:42.218+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4933827e]
2026-02-09T11:55:42.218+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:55:42.221+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[AccountCodeMappingDto(mappingId=3, companyId=null, ca (truncated)...]
2026-02-09T11:55:42.222+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:56:24.870+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:56:24.934+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:56:24.950+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:56:24.953+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:56:24.954+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:56:24.955+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:56:24.957+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:56:24.960+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:56:24.963+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:56:24.964+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c6e4988] was not registered for synchronization because synchronization is not active
2026-02-09T11:56:24.970+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1750452672 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:56:24.972+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.A.findByCompanyId                : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE company_id = ? OR company_id IS NULL ORDER BY company_id DESC, category ASC, account_name ASC
2026-02-09T11:56:24.972+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.A.findByCompanyId                : ==> Parameters: 3(Long)
2026-02-09T11:56:25.030+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.A.findByCompanyId                : <==      Total: 12
2026-02-09T11:56:25.040+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c6e4988]
2026-02-09T11:56:25.051+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:56:25.052+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[AccountCodeMappingDto(mappingId=3, companyId=null, ca (truncated)...]
2026-02-09T11:56:25.053+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:56:31.111+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:56:31.113+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:56:31.114+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:56:31.114+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:56:31.115+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:56:31.115+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:56:31.115+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:56:31.116+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:56:31.116+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:56:31.117+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@256e3a4a] was not registered for synchronization because synchronization is not active
2026-02-09T11:56:31.120+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1336304534 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:56:31.120+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCompanyId                : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE company_id = ? OR company_id IS NULL ORDER BY company_id DESC, category ASC, account_name ASC
2026-02-09T11:56:31.121+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCompanyId                : ==> Parameters: 3(Long)
2026-02-09T11:56:31.126+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCompanyId                : <==      Total: 12
2026-02-09T11:56:31.126+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@256e3a4a]
2026-02-09T11:56:31.127+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:56:31.127+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[AccountCodeMappingDto(mappingId=3, companyId=null, ca (truncated)...]
2026-02-09T11:56:31.129+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:56:38.868+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:56:38.902+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:56:38.903+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:56:38.905+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:56:38.939+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:56:38.951+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:56:38.952+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:56:38.954+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:56:38.954+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:56:38.956+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b4c1e77] was not registered for synchronization because synchronization is not active
2026-02-09T11:56:38.966+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@435842693 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:56:38.966+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.A.findByCompanyId                : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE company_id = ? OR company_id IS NULL ORDER BY company_id DESC, category ASC, account_name ASC
2026-02-09T11:56:38.967+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.A.findByCompanyId                : ==> Parameters: 3(Long)
2026-02-09T11:56:38.970+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.A.findByCompanyId                : <==      Total: 12
2026-02-09T11:56:38.970+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b4c1e77]
2026-02-09T11:56:38.970+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:56:38.972+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[AccountCodeMappingDto(mappingId=3, companyId=null, ca (truncated)...]
2026-02-09T11:56:38.972+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:09.147+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-09T11:57:09.148+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-09T11:57:09.149+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/companies
2026-02-09T11:57:09.150+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-09T11:57:09.150+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-09T11:57:09.150+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-09T11:57:09.150+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:09.151+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77b49a47] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:09.152+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1359957224 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:09.153+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-09T11:57:09.154+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 8(Long)
2026-02-09T11:57:09.156+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-09T11:57:09.156+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77b49a47]
2026-02-09T11:57:09.157+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:09.158+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-09T11:57:09.159+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:13.272+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-02-09T11:57:13.274+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-02-09T11:57:13.276+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-02-09T11:57:13.279+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-02-09T11:57:13.279+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-02-09T11:57:13.280+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-02-09T11:57:13.281+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_accountant, password=1234)]
2026-02-09T11:57:13.281+09:00  INFO 40576 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 로그인 시도 - username: test_accountant
2026-02-09T11:57:13.282+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:13.282+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5535f632] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:13.284+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@925581817 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:57:13.286+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-02-09T11:57:13.288+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_accountant(String)
2026-02-09T11:57:13.289+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-02-09T11:57:13.292+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5535f632]
2026-02-09T11:57:13.392+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:13.392+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f333182] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:13.393+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1910864974 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:57:13.393+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:57:13.394+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 7(Long)
2026-02-09T11:57:13.397+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-02-09T11:57:13.398+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f333182]
2026-02-09T11:57:13.399+09:00  INFO 40576 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 로그인 성공 - userId: 7, role: ACCOUNTANT, companyId: 3
2026-02-09T11:57:13.400+09:00  INFO 40576 --- [http-nio-8080-exec-7] SECURITY                                 : LOGIN_SUCCESS userId=7 username=test_accountant role=ACCOUNTANT
2026-02-09T11:57:13.400+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:13.401+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=7, username=test_accountant, pas (truncated)...]
2026-02-09T11:57:13.402+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:13.482+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:57:13.487+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:57:13.487+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:57:13.487+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-09T11:57:13.493+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:57:13.494+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:57:13.494+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-09T11:57:13.510+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:57:13.511+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:57:13.512+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:57:13.500+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:57:13.508+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:57:13.522+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:57:13.511+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/companies
2026-02-09T11:57:13.514+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:57:13.517+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:57:13.523+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:57:13.527+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-09T11:57:13.530+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-09T11:57:13.532+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-09T11:57:13.530+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:57:13.531+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:57:13.539+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:57:13.531+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:57:13.533+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-09T11:57:13.537+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@22ccc00b and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('SUPERADMIN', 'TAX_ACCOUNTANT')]
2026-02-09T11:57:13.545+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:57:13.545+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:13.546+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:13.548+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-09T11:57:13.550+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-09T11:57:13.552+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:13.553+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1af3dc44] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:13.554+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f899823] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:13.554+09:00  WARN 40576 --- [http-nio-8080-exec-6] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-09T11:57:13.555+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/companies
2026-02-09T11:57:13.555+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aee75de] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:13.556+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1685119905 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:57:13.557+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:13.564+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-09T11:57:13.558+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-09T11:57:13.559+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-09T11:57:13.567+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-09T11:57:13.567+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-09T11:57:13.568+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 7(Long)
2026-02-09T11:57:13.569+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-09T11:57:13.569+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-09T11:57:13.575+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:13.577+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@771121c3] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:13.596+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1051667189 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:13.596+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-02-09T11:57:13.596+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1761020132 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:13.610+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:57:13.611+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f899823]
2026-02-09T11:57:13.611+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:57:13.617+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-09T11:57:13.618+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:13.618+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1259714809 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:13.619+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-09T11:57:13.629+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-09T11:57:13.630+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-09T11:57:13.631+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-02-09T11:57:13.632+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:13.637+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1af3dc44]
2026-02-09T11:57:13.637+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 7(Long)
2026-02-09T11:57:13.638+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:13.639+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=80, drafterId= (truncated)...]
2026-02-09T11:57:13.643+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:13.647+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-02-09T11:57:13.649+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@771121c3]
2026-02-09T11:57:13.649+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-02-09T11:57:13.650+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:13.661+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aee75de]
2026-02-09T11:57:13.662+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-09T11:57:13.663+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:13.664+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:13.664+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=80, drafterId= (truncated)...]
2026-02-09T11:57:13.777+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:13.812+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:57:13.821+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:57:13.884+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:57:13.886+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:57:13.965+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:57:13.967+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:57:13.968+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:57:13.969+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:57:13.970+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:57:13.971+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@22ccc00b and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('SUPERADMIN', 'TAX_ACCOUNTANT')]
2026-02-09T11:57:13.952+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:57:13.975+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-09T11:57:13.976+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:57:13.982+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:57:13.976+09:00  WARN 40576 --- [http-nio-8080-exec-1] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-09T11:57:13.982+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:57:13.983+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:13.995+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:57:13.996+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:57:14.018+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.021+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@523e30c2] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.019+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-09T11:57:14.022+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1005856235 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:14.027+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:57:14.027+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:57:14.033+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:57:14.030+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-09T11:57:14.031+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:57:14.041+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-09T11:57:14.034+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:57:14.047+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:57:14.034+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:57:14.039+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-09T11:57:14.048+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:57:14.048+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:57:14.050+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:57:14.053+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:57:14.054+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:57:14.054+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.055+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@22ccc00b and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('SUPERADMIN', 'TAX_ACCOUNTANT')]
2026-02-09T11:57:14.057+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-02-09T11:57:14.064+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@523e30c2]
2026-02-09T11:57:14.063+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f54a39a] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.064+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-09T11:57:14.064+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.065+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@213872339 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:57:14.066+09:00  WARN 40576 --- [http-nio-8080-exec-4] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-09T11:57:14.066+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=80, drafterId= (truncated)...]
2026-02-09T11:57:14.067+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:57:14.075+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.077+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.080+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-09T11:57:14.080+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-09T11:57:14.084+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-09T11:57:14.088+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-09T11:57:14.110+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-02-09T11:57:14.146+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:57:14.146+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:57:14.155+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:57:14.156+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-02-09T11:57:14.159+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.164+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f54a39a]
2026-02-09T11:57:14.166+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:57:14.203+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.203+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.204+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.204+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.204+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:57:14.206+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:57:14.204+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=80, drafterId= (truncated)...]
2026-02-09T11:57:14.205+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:57:14.208+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-02-09T11:57:14.208+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.209+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.209+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:57:14.209+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.211+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.213+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.215+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:57:14.215+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:57:14.216+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:57:14.221+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:57:14.227+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:57:14.227+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:57:14.227+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:57:14.228+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:57:14.228+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-02-09T11:57:14.228+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.228+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:57:14.229+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:57:14.230+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:57:14.232+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:57:14.233+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-09T11:57:14.234+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-09T11:57:14.234+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:57:14.234+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-09T11:57:14.234+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:57:14.234+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:57:14.234+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-02-09T11:57:14.234+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.235+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.235+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:57:14.235+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.235+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:57:14.235+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-02-09T11:57:14.235+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:14.235+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c206728] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.236+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-09T11:57:14.236+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1058ac3] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.236+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:57:14.236+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:57:14.236+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:57:14.239+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.237+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-09T11:57:14.237+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@786957595 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:14.238+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.239+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2140703605 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:57:14.239+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32efec32] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.241+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.242+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:14.243+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:57:14.243+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c0e6fee] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.243+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:57:14.246+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38660de0] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.247+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:14.248+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-09T11:57:14.249+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-09T11:57:14.250+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@849621253 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:57:14.250+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.251+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@269834244 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:14.251+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1305870248 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:14.251+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.252+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3312c613] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.252+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:57:14.252+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.253+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.255+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-02-09T11:57:14.255+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-09T11:57:14.255+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.256+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@783047840 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:14.256+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-02-09T11:57:14.256+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c206728]
2026-02-09T11:57:14.259+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-09T11:57:14.260+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1058ac3]
2026-02-09T11:57:14.260+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.262+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-09T11:57:14.262+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.262+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.262+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.262+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=80, drafterId= (truncated)...]
2026-02-09T11:57:14.263+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-02-09T11:57:14.263+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38660de0]
2026-02-09T11:57:14.263+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32efec32]
2026-02-09T11:57:14.264+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=80, drafterId= (truncated)...]
2026-02-09T11:57:14.265+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.265+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c0e6fee]
2026-02-09T11:57:14.265+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-09T11:57:14.265+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.266+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.267+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.267+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.268+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3312c613]
2026-02-09T11:57:14.268+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.268+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25037050] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.270+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4216b375] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.274+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.277+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=80, drafterId= (truncated)...]
2026-02-09T11:57:14.277+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.279+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-09T11:57:14.282+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@755134493 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:57:14.282+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@145914203 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:14.283+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.283+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-09T11:57:14.286+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-09T11:57:14.287+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.287+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.287+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.289+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:57:14.289+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.293+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.296+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:14.296+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.296+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.296+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:14.297+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:57:14.297+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-02-09T11:57:14.298+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-09T11:57:14.301+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-09T11:57:14.301+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:57:14.302+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-09T11:57:14.303+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:14.303+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:14.304+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:57:14.309+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-02-09T11:57:14.309+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:14.310+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:14.311+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:57:14.311+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.311+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.312+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-02-09T11:57:14.312+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.313+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.313+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.313+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4216b375]
2026-02-09T11:57:14.313+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25037050]
2026-02-09T11:57:14.313+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:57:14.313+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f5a8a9b] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.314+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6247d50d] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.314+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15614c90] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.314+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.314+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.315+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.315+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@457893443 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:14.316+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1104957863 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:14.316+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1972768014 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:14.317+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f0e791c] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.317+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b7136ba] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.317+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41fa344a] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.317+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-09T11:57:14.318+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-09T11:57:14.318+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:57:14.318+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@955578003 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:14.318+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@365843060 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:57:14.319+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1456947137 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:57:14.319+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-09T11:57:14.320+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:57:14.321+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-09T11:57:14.321+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:14.321+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:14.322+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.328+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:14.331+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-09T11:57:14.331+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:14.332+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-02-09T11:57:14.332+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-09T11:57:14.335+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f5a8a9b]
2026-02-09T11:57:14.332+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.333+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6247d50d]
2026-02-09T11:57:14.334+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15614c90]
2026-02-09T11:57:14.336+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.336+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.336+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.337+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:57:14.339+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=80, drafterId= (truncated)...]
2026-02-09T11:57:14.338+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-09T11:57:14.338+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.338+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-09T11:57:14.339+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b7136ba]
2026-02-09T11:57:14.340+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.340+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.342+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41fa344a]
2026-02-09T11:57:14.344+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-02-09T11:57:14.345+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.345+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.347+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.350+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:57:14.351+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.351+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f0e791c]
2026-02-09T11:57:14.353+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.353+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f9ebfcf] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.355+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ab601a7] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.355+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-09T11:57:14.358+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.355+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-09T11:57:14.355+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.356+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1568178784 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:57:14.356+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@989735135 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:57:14.356+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-09T11:57:14.360+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:14.360+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:57:14.360+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d1de787] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.360+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.360+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.360+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.361+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:57:14.361+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-09T11:57:14.361+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@928233171 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:14.361+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.362+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.362+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:14.363+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.366+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c874475] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.364+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-09T11:57:14.364+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.365+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-09T11:57:14.367+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.367+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1758857491 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:14.367+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.368+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.368+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:14.368+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f9ebfcf]
2026-02-09T11:57:14.368+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:14.368+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.368+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ab601a7]
2026-02-09T11:57:14.369+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:14.370+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.370+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:14.374+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.374+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.375+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.376+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.376+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35b8b43] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.376+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.376+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d1de787]
2026-02-09T11:57:14.376+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f81792] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.377+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d4e9a3e] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.377+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@154217504 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:57:14.377+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@472936ac] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.378+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.378+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.378+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@475629011 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:57:14.378+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1076909766 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:14.378+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:57:14.379+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@48700910 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:14.379+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-09T11:57:14.379+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c874475]
2026-02-09T11:57:14.379+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5935e980] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.379+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:14.379+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-09T11:57:14.379+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-09T11:57:14.380+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.381+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@467012862 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:14.382+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-09T11:57:14.382+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:14.383+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-09T11:57:14.383+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-09T11:57:14.383+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b975d7e] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.384+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:57:14.384+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35b8b43]
2026-02-09T11:57:14.386+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@498402965 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:14.387+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-09T11:57:14.387+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long), 76(Long), 67(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-09T11:57:14.388+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.388+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.388+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-09T11:57:14.389+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d4e9a3e]
2026-02-09T11:57:14.389+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-02-09T11:57:14.392+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.389+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b18c8db] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.390+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.391+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@472936ac]
2026-02-09T11:57:14.392+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f81792]
2026-02-09T11:57:14.392+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-09T11:57:14.393+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 18
2026-02-09T11:57:14.394+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5935e980]
2026-02-09T11:57:14.393+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1690721640 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:57:14.393+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.393+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.394+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.394+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.395+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:14.395+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.396+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-09T11:57:14.396+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@430dc645] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.396+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1808a8c0] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.397+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.400+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b975d7e]
2026-02-09T11:57:14.400+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:14.400+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.401+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@84876593 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:57:14.402+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1845963688 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:14.403+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-09T11:57:14.403+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.406+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:57:14.408+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.409+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:14.409+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.410+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@615b025c] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.411+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:57:14.411+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:57:14.411+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.413+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:14.413+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:14.413+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1074192292 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:14.413+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b18c8db]
2026-02-09T11:57:14.414+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:57:14.415+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-09T11:57:14.415+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:14.415+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.416+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:57:14.417+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:14.417+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.418+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:14.418+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a7cb17e] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.419+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:57:14.419+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-02-09T11:57:14.419+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:14.420+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@430dc645]
2026-02-09T11:57:14.420+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@400552698 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:57:14.420+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.420+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1808a8c0]
2026-02-09T11:57:14.422+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.422+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.422+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.422+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d84453a] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.422+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.425+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66232130] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.422+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f9fd822] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.423+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:57:14.423+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55f063ea] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.423+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.424+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@849250774 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:14.425+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1559629495 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:14.426+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@615b025c]
2026-02-09T11:57:14.426+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2027459349 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:14.426+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2019735807 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:57:14.426+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:57:14.427+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.427+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.428+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-09T11:57:14.428+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.428+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:57:14.428+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.428+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-09T11:57:14.428+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28c9c29a] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.429+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a7cb17e]
2026-02-09T11:57:14.429+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:57:14.429+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long), 76(Long), 67(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-09T11:57:14.431+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@288975933 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:14.431+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.433+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.434+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-02-09T11:57:14.435+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-09T11:57:14.435+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 18
2026-02-09T11:57:14.435+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.436+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1408fc71] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.436+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66232130]
2026-02-09T11:57:14.436+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d84453a]
2026-02-09T11:57:14.436+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f9fd822]
2026-02-09T11:57:14.436+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55f063ea]
2026-02-09T11:57:14.436+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.437+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@460347599 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:57:14.437+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.437+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.437+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.437+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.438+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:57:14.439+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35ad9f5c] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.439+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=80, drafterId= (truncated)...]
2026-02-09T11:57:14.439+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-09T11:57:14.439+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.439+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13fd5131] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.442+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-09T11:57:14.442+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1257767544 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:14.443+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.443+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.443+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28c9c29a]
2026-02-09T11:57:14.444+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1170513815 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:57:14.445+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:57:14.446+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.447+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:57:14.449+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.450+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:14.450+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-09T11:57:14.451+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long), 76(Long), 67(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-09T11:57:14.451+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-09T11:57:14.452+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:57:14.452+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5209028] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.454+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1408fc71]
2026-02-09T11:57:14.455+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:14.455+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.456+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:57:14.457+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1671122692 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:14.460+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.460+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:14.461+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 18
2026-02-09T11:57:14.463+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:57:14.463+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:57:14.463+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:57:14.463+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:57:14.464+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-02-09T11:57:14.464+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35ad9f5c]
2026-02-09T11:57:14.464+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:57:14.464+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-09T11:57:14.465+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.465+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13fd5131]
2026-02-09T11:57:14.469+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.466+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.466+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.466+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.469+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.469+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11fb3bc0] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.470+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:57:14.470+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-09T11:57:14.471+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.470+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cf6deb8] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.470+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@639cd0ba] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.471+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-09T11:57:14.478+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@445739297 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:57:14.471+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@183399734 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:14.472+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.476+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:57:14.477+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1891998102 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:14.478+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5209028]
2026-02-09T11:57:14.478+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.480+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.479+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.479+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:14.480+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:57:14.480+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:57:14.480+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.481+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.482+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:57:14.484+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.484+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-09T11:57:14.485+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:57:14.485+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dbb8cce] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.485+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@639cd0ba]
2026-02-09T11:57:14.485+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.488+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:57:14.489+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2090590849 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:14.489+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.489+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fdd5527] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.489+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:57:14.489+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.490+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-02-09T11:57:14.492+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11fb3bc0]
2026-02-09T11:57:14.491+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:14.491+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@301b88d8] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.492+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@375103880 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:14.492+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.492+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cf6deb8]
2026-02-09T11:57:14.492+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.494+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:14.494+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@898074465 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:57:14.494+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.494+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ac7ff01] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.494+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.494+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4996e6f1] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.495+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:57:14.496+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.496+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@609562787 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:14.496+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=80, drafterId= (truncated)...]
2026-02-09T11:57:14.496+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@33284408 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:14.497+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long), 76(Long), 67(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-09T11:57:14.497+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:57:14.498+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:57:14.498+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.498+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.501+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-09T11:57:14.502+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.503+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dbb8cce]
2026-02-09T11:57:14.503+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 18
2026-02-09T11:57:14.504+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.509+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fdd5527]
2026-02-09T11:57:14.510+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.515+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@301b88d8]
2026-02-09T11:57:14.517+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.517+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30d371e0] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.518+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-02-09T11:57:14.519+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.519+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@845ac15] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.520+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@288315080 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:14.520+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.520+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ac7ff01]
2026-02-09T11:57:14.520+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:57:14.521+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1842656343 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:14.521+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.522+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4996e6f1]
2026-02-09T11:57:14.522+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.523+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.523+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.526+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.526+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.527+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=80, drafterId= (truncated)...]
2026-02-09T11:57:14.527+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.529+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6998e278] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.531+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.535+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@390537428 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:14.538+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:14.543+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:14.544+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.545+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30d371e0]
2026-02-09T11:57:14.545+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.546+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.547+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c07c416] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.547+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@845ac15]
2026-02-09T11:57:14.548+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1475409415 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:14.548+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:57:14.548+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.549+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:57:14.549+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6998e278]
2026-02-09T11:57:14.549+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@86640f5] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.549+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-09T11:57:14.549+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.550+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@761684200 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:14.550+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a62f13f] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.550+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:14.550+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@877091625 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:14.552+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-09T11:57:14.552+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.552+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c07c416]
2026-02-09T11:57:14.552+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:14.553+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.553+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.554+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:57:14.554+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.555+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.559+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a62f13f]
2026-02-09T11:57:14.559+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.560+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c5c244c] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.560+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@29022193 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:14.561+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:57:14.562+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:57:14.563+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@86640f5]
2026-02-09T11:57:14.563+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-09T11:57:14.564+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.566+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38a980f] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.567+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@970002787 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:14.567+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.567+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-09T11:57:14.567+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.568+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c5c244c]
2026-02-09T11:57:14.569+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.569+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@513b20d8] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.571+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1009254647 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:14.572+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:14.572+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.575+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:14.577+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38a980f]
2026-02-09T11:57:14.577+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.578+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ab149c] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.579+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1438035494 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:14.580+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:57:14.580+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:57:14.582+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-09T11:57:14.582+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@513b20d8]
2026-02-09T11:57:14.582+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.583+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36da07e5] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.584+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1055902726 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:14.585+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.586+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-09T11:57:14.593+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:57:14.596+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-02-09T11:57:14.597+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.597+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:57:14.599+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.600+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ab149c]
2026-02-09T11:57:14.603+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.603+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.604+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.605+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:57:14.605+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-02-09T11:57:14.607+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@311a263f] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.608+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.609+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:57:14.612+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1808784244 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:14.612+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.612+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.613+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:14.613+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.613+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:57:14.613+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-02-09T11:57:14.614+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.615+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:57:14.616+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36da07e5]
2026-02-09T11:57:14.617+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:14.617+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:57:14.618+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-09T11:57:14.618+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-09T11:57:14.618+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.618+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-09T11:57:14.618+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:57:14.619+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-02-09T11:57:14.619+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.619+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b11fda2] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.619+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:57:14.620+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:57:14.620+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-02-09T11:57:14.621+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:14.621+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:57:14.621+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@496121866 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:14.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:57:14.621+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-09T11:57:14.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:57:14.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:57:14.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:57:14.622+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@311a263f]
2026-02-09T11:57:14.626+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-09T11:57:14.626+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-09T11:57:14.627+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.627+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.627+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.627+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.628+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:14.628+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67e67f83] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.629+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c9027be] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.629+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@81db15] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.629+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63949c68] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.629+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-09T11:57:14.630+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:14.630+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2113892057 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:14.630+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1889608124 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:57:14.630+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1615474404 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:14.630+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1992181996 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:14.631+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b11fda2]
2026-02-09T11:57:14.632+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.632+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:57:14.633+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.633+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.633+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.633+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1726fa20] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.633+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.634+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.634+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-09T11:57:14.634+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.634+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.637+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.635+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1438890918 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:14.635+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:57:14.636+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.637+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c9027be]
2026-02-09T11:57:14.638+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-09T11:57:14.638+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-02-09T11:57:14.638+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.639+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@81db15]
2026-02-09T11:57:14.639+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.639+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.644+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67e67f83]
2026-02-09T11:57:14.644+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-09T11:57:14.644+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63949c68]
2026-02-09T11:57:14.644+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.647+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a91f1d9] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.644+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2acdb145] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.645+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.646+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.647+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.647+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@885443821 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:14.648+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@930991733 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:57:14.649+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=80, drafterId= (truncated)...]
2026-02-09T11:57:14.649+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f2d4a67] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.649+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-09T11:57:14.649+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:57:14.650+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.650+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-09T11:57:14.651+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.651+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@404613686 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:14.652+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.653+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-09T11:57:14.653+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.654+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1726fa20]
2026-02-09T11:57:14.654+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.655+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.655+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:14.660+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.661+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.662+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-09T11:57:14.662+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-09T11:57:14.663+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-09T11:57:14.663+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.663+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-09T11:57:14.664+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.665+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:14.665+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.665+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2acdb145]
2026-02-09T11:57:14.666+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.666+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a91f1d9]
2026-02-09T11:57:14.667+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:14.668+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f2d4a67]
2026-02-09T11:57:14.670+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.671+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a1083f3] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.668+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:14.668+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.669+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.669+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:57:14.670+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-09T11:57:14.672+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1331396772 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:14.672+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.673+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1707f658] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.673+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:57:14.677+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:57:14.678+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:14.678+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:14.678+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66192469] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.679+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1342650980 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:57:14.679+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.679+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:57:14.681+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:14.683+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:14.685+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1773867013 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:14.686+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:14.687+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-02-09T11:57:14.697+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:57:14.699+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.700+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-09T11:57:14.702+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:14.714+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-09T11:57:14.726+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:57:14.727+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:57:14.728+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ba32398] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.728+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:57:14.731+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-02-09T11:57:14.732+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.732+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a1083f3]
2026-02-09T11:57:14.733+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@720155142 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:14.736+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-02-09T11:57:14.736+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-02-09T11:57:14.736+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1490e817] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.737+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.737+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-09T11:57:14.738+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-09T11:57:14.738+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1707f658]
2026-02-09T11:57:14.738+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:57:14.739+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1202222464 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:57:14.742+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25da1f7e] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.742+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66192469]
2026-02-09T11:57:14.748+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1529552685 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:14.747+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-09T11:57:14.747+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.748+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:57:14.748+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.748+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.748+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.749+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25cd337] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.750+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-09T11:57:14.750+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3706ed9e] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.751+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-09T11:57:14.751+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-09T11:57:14.751+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.751+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@708919314 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:57:14.753+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1854456669 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:14.754+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.754+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ba32398]
2026-02-09T11:57:14.755+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.755+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.758+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.762+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.763+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.763+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.767+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-09T11:57:14.768+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.768+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-02-09T11:57:14.768+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-09T11:57:14.772+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.772+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25da1f7e]
2026-02-09T11:57:14.772+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.773+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.773+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1490e817]
2026-02-09T11:57:14.774+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.777+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:14.778+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.783+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74436df4] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.778+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3706ed9e]
2026-02-09T11:57:14.778+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25cd337]
2026-02-09T11:57:14.778+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.780+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:57:14.783+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:57:14.784+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@18329069 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:14.785+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.785+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.785+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=80, drafterId= (truncated)...]
2026-02-09T11:57:14.787+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-09T11:57:14.787+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:57:14.787+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.787+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b101383] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.787+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4864f0cc] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.788+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.788+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:57:14.791+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-09T11:57:14.791+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d25e781] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.792+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2071620450 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:14.792+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@751130524 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:57:14.794+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.795+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-09T11:57:14.798+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@154007914 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:14.799+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.800+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:57:14.801+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-09T11:57:14.801+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.801+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-09T11:57:14.802+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.804+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long), 76(Long), 67(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-09T11:57:14.806+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:14.806+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.806+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-09T11:57:14.806+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.808+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:14.808+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74436df4]
2026-02-09T11:57:14.809+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:14.810+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.810+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.811+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-09T11:57:14.811+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d8d360b] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.811+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.811+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.811+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dc87f11] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.811+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 18
2026-02-09T11:57:14.812+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:14.812+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b101383]
2026-02-09T11:57:14.812+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@315541635 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:14.812+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d25e781]
2026-02-09T11:57:14.812+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4864f0cc]
2026-02-09T11:57:14.813+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1847546360 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:14.813+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:14.813+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.813+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:14.813+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.814+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.814+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-09T11:57:14.814+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@783b5062] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.814+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.816+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@325b1589] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.817+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ba64cdd] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.817+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:14.817+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-09T11:57:14.817+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42e673ec] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.818+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@55367917 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:14.818+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1611720108 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:14.818+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1143684085 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:57:14.819+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1582780896 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:57:14.820+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:14.820+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.820+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:14.821+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-09T11:57:14.822+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-09T11:57:14.822+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:57:14.823+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.823+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:14.825+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:14.825+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dc87f11]
2026-02-09T11:57:14.825+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:57:14.825+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d8d360b]
2026-02-09T11:57:14.827+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.829+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.829+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.829+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-09T11:57:14.829+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-02-09T11:57:14.829+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-09T11:57:14.829+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-02-09T11:57:14.829+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cba4006] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.830+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@325b1589]
2026-02-09T11:57:14.830+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42e673ec]
2026-02-09T11:57:14.830+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ba64cdd]
2026-02-09T11:57:14.830+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@783b5062]
2026-02-09T11:57:14.831+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.831+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@135467252 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:14.831+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.832+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.833+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.833+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.834+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.834+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.836+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1de96e38] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.837+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-09T11:57:14.837+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68c4bc24] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.837+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ebb399b] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.837+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.838+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-09T11:57:14.839+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2012530513 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:14.839+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.841+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1897780549 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:57:14.842+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1554112110 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:14.848+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.844+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:14.844+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:14.846+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.849+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.850+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:14.853+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.853+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:14.854+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-09T11:57:14.855+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.856+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:14.856+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cba4006]
2026-02-09T11:57:14.857+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.857+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.860+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:14.860+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.861+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68c4bc24]
2026-02-09T11:57:14.861+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ebb399b]
2026-02-09T11:57:14.862+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:57:14.863+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.863+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1135942f] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.863+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.863+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.864+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1de96e38]
2026-02-09T11:57:14.864+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d48a595] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.864+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1598119039 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:14.864+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9af2ae0] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.864+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e99d279] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.864+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.865+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1327276466 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:14.865+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:57:14.865+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1153925741 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:57:14.866+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@432624592 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:14.867+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@130e8e20] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.867+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-09T11:57:14.868+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-09T11:57:14.868+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:57:14.868+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:57:14.869+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1170258647 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:14.872+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long), 76(Long), 67(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-09T11:57:14.869+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-09T11:57:14.869+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long), 76(Long), 67(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-09T11:57:14.872+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.872+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-09T11:57:14.878+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.878+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-09T11:57:14.879+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 18
2026-02-09T11:57:14.879+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1135942f]
2026-02-09T11:57:14.879+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d48a595]
2026-02-09T11:57:14.880+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e99d279]
2026-02-09T11:57:14.880+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 18
2026-02-09T11:57:14.881+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.881+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.881+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.881+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9af2ae0]
2026-02-09T11:57:14.882+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:57:14.882+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-09T11:57:14.883+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.883+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@db5c921] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.883+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.884+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.884+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.885+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@130e8e20]
2026-02-09T11:57:14.886+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2110773492 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:14.889+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:14.887+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:57:14.888+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.896+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:14.897+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.900+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@771e422d] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.901+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@268877152 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:14.911+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:57:14.920+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-02-09T11:57:14.944+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-09T11:57:14.945+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@db5c921]
2026-02-09T11:57:14.946+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.950+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28e59a5a] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.950+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@196780710 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:14.951+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-09T11:57:14.951+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.952+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@771e422d]
2026-02-09T11:57:14.952+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.952+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.953+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d79de75] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.954+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@955509981 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:14.955+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:14.957+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:14.959+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.959+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28e59a5a]
2026-02-09T11:57:14.959+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.959+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c942026] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.960+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2024231588 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:14.961+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:57:14.962+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:57:14.963+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d79de75]
2026-02-09T11:57:14.964+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long), 76(Long), 67(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-09T11:57:14.964+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.964+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48e3b60f] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.966+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@991580944 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:14.967+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-02-09T11:57:14.967+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 18
2026-02-09T11:57:14.967+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:14.968+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c942026]
2026-02-09T11:57:14.968+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 7(Long)
2026-02-09T11:57:14.969+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:14.969+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:57:14.972+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:14.972+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-02-09T11:57:14.977+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/dashboard/monthly-trend
2026-02-09T11:57:14.977+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:14.982+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-02-09T11:57:14.985+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48e3b60f]
2026-02-09T11:57:14.987+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-02-09T11:57:14.988+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.988+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-02-09T11:57:14.989+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c0b7e7a] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.989+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:14.990+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@160299066 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:14.993+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:14.993+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-09T11:57:14.995+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:14.996+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-09T11:57:14.996+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23f473f0] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:14.997+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@865562783 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:14.997+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? AND status = 'APPROVED' GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-09T11:57:14.998+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 3(Long)
2026-02-09T11:57:14.998+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-09T11:57:14.999+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c0b7e7a]
2026-02-09T11:57:15.000+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:15.000+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 3
2026-02-09T11:57:15.000+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:57:15.000+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23f473f0]
2026-02-09T11:57:15.001+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:15.001+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:15.001+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-02-09T11:57:15.002+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:16.722+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:57:16.724+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:57:16.725+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:57:16.729+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:57:16.729+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:57:16.731+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:57:16.733+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:57:16.737+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:57:16.737+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:57:16.738+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:57:16.738+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:57:16.743+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:57:16.738+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:57:16.739+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:57:16.743+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:57:16.743+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:57:16.744+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:16.747+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49e3a9fd] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:16.744+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:57:16.744+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:57:16.748+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:57:16.749+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:57:16.749+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:57:16.750+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:16.751+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:57:16.758+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:16.753+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b4ff1b5] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:16.753+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@566083648 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:16.762+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1232738c] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:16.763+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:57:16.764+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 7(Long), 3(Long)
2026-02-09T11:57:16.766+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@437682624 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:57:16.766+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1506321337 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:16.768+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:57:16.769+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:57:16.773+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:57:16.779+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-02-09T11:57:16.780+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49e3a9fd]
2026-02-09T11:57:16.780+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:57:16.783+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:16.784+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=80, drafterId= (truncated)...]
2026-02-09T11:57:16.785+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-09T11:57:16.786+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:16.786+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1232738c]
2026-02-09T11:57:16.797+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-09T11:57:16.797+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:16.798+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b4ff1b5]
2026-02-09T11:57:16.798+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:57:16.799+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:16.799+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:57:16.799+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:16.804+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:17.795+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:57:17.802+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:57:17.805+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:57:17.805+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:57:17.805+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:57:17.805+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:57:17.806+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:57:17.808+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@22ccc00b and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('SUPERADMIN', 'TAX_ACCOUNTANT')]
2026-02-09T11:57:17.812+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-09T11:57:17.813+09:00  WARN 40576 --- [http-nio-8080-exec-10] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-09T11:57:17.813+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:17.814+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-09T11:57:17.814+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-09T11:57:17.815+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-09T11:57:19.476+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:57:19.478+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:57:19.480+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:57:19.484+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:57:19.494+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:57:19.496+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:57:19.496+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:57:19.497+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:57:19.497+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:19.498+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bef06f7] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:19.500+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1939801582 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:19.500+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:57:19.502+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:57:19.506+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-09T11:57:19.508+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bef06f7]
2026-02-09T11:57:19.510+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:19.511+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:57:19.512+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:20.450+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:57:20.473+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:57:20.476+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:57:20.476+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:57:20.476+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:57:20.477+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:57:20.477+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:57:20.478+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@22ccc00b and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('SUPERADMIN', 'TAX_ACCOUNTANT')]
2026-02-09T11:57:20.479+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-09T11:57:20.479+09:00  WARN 40576 --- [http-nio-8080-exec-9] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-09T11:57:20.479+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:20.480+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-09T11:57:20.481+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-09T11:57:20.481+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-09T11:57:20.896+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:57:20.898+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:57:20.899+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:57:20.903+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:57:20.905+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:57:20.908+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:57:20.910+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:57:20.910+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:57:20.911+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:20.912+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@117a1153] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:20.916+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2091038796 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:20.917+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:57:20.921+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:57:20.925+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-09T11:57:20.925+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@117a1153]
2026-02-09T11:57:20.926+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:20.927+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:57:20.927+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:21.285+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:57:21.292+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:57:21.293+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:57:21.294+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:57:21.294+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:57:21.294+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:57:21.295+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:57:21.295+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@22ccc00b and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('SUPERADMIN', 'TAX_ACCOUNTANT')]
2026-02-09T11:57:21.296+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-09T11:57:21.296+09:00  WARN 40576 --- [http-nio-8080-exec-1] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-09T11:57:21.296+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:21.296+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-09T11:57:21.297+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-09T11:57:21.298+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-09T11:57:49.834+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-02-09T11:57:49.839+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-02-09T11:57:49.843+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 7, role: ACCOUNTANT, companyId: 3, uri: /api/logout
2026-02-09T11:57:49.846+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-02-09T11:57:49.861+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-02-09T11:57:49.879+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-02-09T11:57:49.883+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiI3IiwidXNlcm5hbWUiOiJ (truncated)...]
2026-02-09T11:57:50.004+09:00  INFO 40576 --- [http-nio-8080-exec-10] SECURITY                                 : LOGOUT userId=7
2026-02-09T11:57:50.016+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:50.033+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-02-09T11:57:50.044+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:52.872+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-02-09T11:57:52.874+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-02-09T11:57:52.875+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-02-09T11:57:52.875+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-02-09T11:57:52.875+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-02-09T11:57:52.875+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-02-09T11:57:52.876+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_tax, password=1234)]
2026-02-09T11:57:52.876+09:00  INFO 40576 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 로그인 시도 - username: test_tax
2026-02-09T11:57:52.876+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:52.877+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26718966] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:52.878+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1914541639 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:52.878+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-02-09T11:57:52.879+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_tax(String)
2026-02-09T11:57:52.883+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-02-09T11:57:52.884+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26718966]
2026-02-09T11:57:52.994+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:52.995+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a09d669] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:52.995+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1636011596 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:52.995+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:57:52.996+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-09T11:57:52.997+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:57:52.998+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a09d669]
2026-02-09T11:57:52.998+09:00  INFO 40576 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 로그인 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3
2026-02-09T11:57:52.999+09:00  INFO 40576 --- [http-nio-8080-exec-6] SECURITY                                 : LOGIN_SUCCESS userId=8 username=test_tax role=TAX_ACCOUNTANT
2026-02-09T11:57:52.999+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:52.999+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=8, username=test_tax, password=n (truncated)...]
2026-02-09T11:57:53.000+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:53.313+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-09T11:57:53.323+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-09T11:57:53.325+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/companies
2026-02-09T11:57:53.325+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-09T11:57:53.325+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-09T11:57:53.326+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-09T11:57:53.326+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:53.326+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4956e3e7] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:53.327+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@389557547 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:53.327+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-09T11:57:53.328+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 8(Long)
2026-02-09T11:57:53.331+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-09T11:57:53.332+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4956e3e7]
2026-02-09T11:57:53.336+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:53.344+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-09T11:57:53.346+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:54.110+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:57:54.112+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:57:54.114+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:54.118+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:54.120+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:57:54.177+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:57:54.121+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:54.154+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:54.170+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:54.173+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:57:54.182+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:54.182+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:54.185+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:57:54.177+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:54.180+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:54.181+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:57:54.183+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:54.211+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:57:54.212+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:54.213+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:54.214+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:57:54.224+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-09T11:57:54.214+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:54.214+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:54.223+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:57:54.224+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-09T11:57:54.225+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:54.225+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-09T11:57:54.225+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-09T11:57:54.355+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:54.226+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-09T11:57:54.226+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:57:54.237+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:54.238+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:54.346+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:57:54.361+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:54.362+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:54.365+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:57:54.366+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:54.370+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-09T11:57:54.373+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-09T11:57:54.378+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-09T11:57:54.380+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:54.382+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:57:54.383+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-09T11:57:54.384+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:54.384+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-09T11:57:54.384+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:54.392+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:54.385+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:57:54.385+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:54.396+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f61679b] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:54.387+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:54.388+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:54.390+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:54.393+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:54.394+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:54.401+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:54.401+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:54.431+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:54.431+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@596796775 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:54.437+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:57:54.432+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fc33a71] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:54.433+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2caed2ca] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:54.434+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:54.435+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35cc55bb] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:54.436+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:54.442+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:57:54.444+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70b01f62] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:54.445+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b121038] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:54.461+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@748577397 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:54.462+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@997011728 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:57:54.463+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1428276241 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:54.464+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-02-09T11:57:54.466+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:54.466+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-09T11:57:54.468+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:57:54.468+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:57:54.469+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:57:54.469+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1342373666 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:57:54.470+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1856987048 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:54.470+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:57:54.471+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:57:54.471+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-09T11:57:54.472+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f61679b]
2026-02-09T11:57:54.475+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-09T11:57:54.476+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:57:54.477+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:54.480+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:57:54.484+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:54.484+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-09T11:57:54.484+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-02-09T11:57:54.485+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:54.485+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2caed2ca]
2026-02-09T11:57:54.485+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35cc55bb]
2026-02-09T11:57:54.485+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fc33a71]
2026-02-09T11:57:54.486+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:54.486+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:54.486+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:54.486+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b5f7ce] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:54.487+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:57:54.492+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-02-09T11:57:54.493+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:57:54.493+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=1, pendingCount (truncated)...]
2026-02-09T11:57:54.495+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-02, complet (truncated)...]
2026-02-09T11:57:54.495+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1429579079 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:57:54.496+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:57:54.496+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70b01f62]
2026-02-09T11:57:54.497+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b121038]
2026-02-09T11:57:54.497+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:54.498+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:54.498+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:54.498+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:57:54.500+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:54.500+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:54.502+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:57:54.504+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:54.505+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:54.525+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:57:54.527+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-09T11:57:54.527+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78c28424] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:54.532+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-09T11:57:54.534+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-09T11:57:54.548+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:57:54.549+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:54.551+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:54.554+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@699014068 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:57:54.554+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:54.554+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:54.554+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:54.561+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:57:54.566+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b5f7ce]
2026-02-09T11:57:54.567+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-09T11:57:54.567+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:54.567+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:54.568+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d2a6c2f] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:54.569+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:54.569+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-09T11:57:54.570+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-09T11:57:54.570+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-09T11:57:54.572+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-09T11:57:54.580+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1402862518 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:54.580+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67833c5a] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:54.580+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:57:54.587+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:54.587+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:54.588+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:57:54.589+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1210559715 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:57:54.593+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-09T11:57:54.594+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:54.595+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:54.597+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategorySummary          : <==      Total: 1
2026-02-09T11:57:54.600+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:54.598+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:57:54.598+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:54.599+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-09T11:57:54.599+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:54.600+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78c28424]
2026-02-09T11:57:54.898+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:54.600+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ab9a4eb] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:54.813+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:57:54.821+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:54.892+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:54.897+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46dcf8ff] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:54.899+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식비/회식, totalAmou (truncated)...]
2026-02-09T11:57:54.899+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1036449128 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:54.900+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d2a6c2f]
2026-02-09T11:57:54.901+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:54.901+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@936680155 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:54.904+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:54.904+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-09T11:57:54.904+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:54.908+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:54.911+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:57:54.914+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-02-09T11:57:54.916+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:54.947+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-09T11:57:54.948+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:54.949+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:54.949+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-09T11:57:54.950+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:54.951+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:54.952+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:54.952+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69095dcf] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:54.953+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2099460634 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:54.953+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-09T11:57:54.959+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:57:54.918+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:57:54.918+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:57:54.961+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:54.919+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19195cf8] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:54.968+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1987017522 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:54.968+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:57:54.919+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67833c5a]
2026-02-09T11:57:54.925+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:57:54.965+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:54.971+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-09T11:57:54.989+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.001+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-02-09T11:57:55.001+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-02-09T11:57:55.004+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-09T11:57:55.017+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2088129e] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.018+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69095dcf]
2026-02-09T11:57:55.018+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ab9a4eb]
2026-02-09T11:57:55.018+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.018+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1578605369 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:57:55.019+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:55.020+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:57:55.021+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-09T11:57:55.025+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19195cf8]
2026-02-09T11:57:55.021+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:55.021+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:55.022+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:55.022+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-02, complet (truncated)...]
2026-02-09T11:57:55.025+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46dcf8ff]
2026-02-09T11:57:55.025+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.026+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-09T11:57:55.026+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:57:55.032+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:55.029+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:57:55.029+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:55.029+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:55.030+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59efdaaa] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.032+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.048+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@106d9685] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.034+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:57:55.044+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.046+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=1, pendingCount (truncated)...]
2026-02-09T11:57:55.046+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@172143603 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:55.048+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1375925922 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:55.052+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:55.049+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:57:55.050+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-09T11:57:55.050+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:55.050+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-09T11:57:55.053+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:57:55.053+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:57:55.054+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.058+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:57:55.064+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-09T11:57:55.065+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:55.065+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:57:55.065+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:55.066+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2088129e]
2026-02-09T11:57:55.066+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:57:55.067+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:57:55.069+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:57:55.069+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.070+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:57:55.070+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:55.070+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategorySummary          : <==      Total: 1
2026-02-09T11:57:55.071+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.071+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a6a573a] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.071+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.072+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:57:55.075+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@106d9685]
2026-02-09T11:57:55.075+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59efdaaa]
2026-02-09T11:57:55.076+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@156a1cf1] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.076+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2048305675 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:57:55.076+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e5f141d] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.077+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:57:55.077+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.077+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:55.077+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@513783622 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:55.078+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:55.078+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@733240952 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:55.078+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.078+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1105410d] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.078+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식비/회식, totalAmou (truncated)...]
2026-02-09T11:57:55.078+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:57:55.080+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:55.080+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:55.080+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ba46148] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.081+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1830827030 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:55.081+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:55.082+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:57:55.083+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:57:55.084+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@657145788 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:57:55.084+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:55.087+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.089+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:57:55.094+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:57:55.094+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:57:55.096+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-09T11:57:55.096+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a6a573a]
2026-02-09T11:57:55.096+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:57:55.096+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:55.097+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:57:55.097+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.097+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.097+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@156a1cf1]
2026-02-09T11:57:55.098+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e5f141d]
2026-02-09T11:57:55.098+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:55.099+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:55.099+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2085a88c] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.100+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:55.100+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.100+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:57:55.101+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:57:55.101+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1105410d]
2026-02-09T11:57:55.101+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1746855969 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:57:55.101+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:57:55.101+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33b77d5e] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.101+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ba46148]
2026-02-09T11:57:55.103+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.103+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.103+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:55.104+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:55.105+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@367945929 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:55.110+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:55.113+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:57:55.110+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67318a9b] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.110+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2050b4e2] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.111+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:57:55.111+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:55.113+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:57:55.114+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:57:55.115+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@419748166 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:55.115+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@468096204 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:55.117+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:57:55.118+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:55.119+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:57:55.120+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:55.120+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:55.134+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:57:55.134+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:57:55.136+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:55.136+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:55.136+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:55.136+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:57:55.139+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2085a88c]
2026-02-09T11:57:55.142+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33b77d5e]
2026-02-09T11:57:55.143+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.143+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:55.143+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.143+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:55.144+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:57:55.144+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e99559f] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.145+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:57:55.145+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33c8b971] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.145+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67318a9b]
2026-02-09T11:57:55.145+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2050b4e2]
2026-02-09T11:57:55.148+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.148+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c24d0ed] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.145+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2045781595 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:55.145+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:55.146+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1000177627 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:55.147+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.149+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1769376303 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:55.149+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:57:55.154+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:55.155+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@769dfeb2] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.160+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:55.161+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:57:55.162+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:55.163+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@487839656 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:55.163+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:57:55.164+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:55.165+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:57:55.166+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:57:55.167+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:55.167+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:57:55.168+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e99559f]
2026-02-09T11:57:55.168+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c24d0ed]
2026-02-09T11:57:55.168+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33c8b971]
2026-02-09T11:57:55.168+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:55.169+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:55.169+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.169+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.169+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@769dfeb2]
2026-02-09T11:57:55.169+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:57:55.170+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6529ab5b] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.170+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4476645a] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.171+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.172+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:55.172+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@266382507 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:55.172+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@847470228 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:55.177+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41f50a6b] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.179+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:55.180+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:55.180+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1485051017 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:55.182+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:55.182+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:55.182+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:57:55.185+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:55.188+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:55.188+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4476645a]
2026-02-09T11:57:55.188+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:57:55.188+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:57:55.188+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.189+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6529ab5b]
2026-02-09T11:57:55.191+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41f50a6b]
2026-02-09T11:57:55.192+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20a32947] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.192+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.193+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.196+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d95190b] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.196+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1459674557 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:55.196+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ee399ad] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.196+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1968050833 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:55.197+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:55.197+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@120348744 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:55.197+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:55.198+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:55.198+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:55.198+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:57:55.199+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:57:55.204+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:55.204+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:57:55.210+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d95190b]
2026-02-09T11:57:55.210+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20a32947]
2026-02-09T11:57:55.214+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:55.214+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.214+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:57:55.216+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:55.217+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@196cd838] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.218+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:55.219+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ee399ad]
2026-02-09T11:57:55.220+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@540816195 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:55.239+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.242+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:55.244+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dfa1926] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.246+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:57:55.246+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@531028933 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:55.247+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:55.251+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:55.263+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:55.272+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@196cd838]
2026-02-09T11:57:55.276+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:55.279+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:57:55.279+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:57:55.282+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dfa1926]
2026-02-09T11:57:55.284+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:55.285+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.293+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24a41280] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.302+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@430578715 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:55.302+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:55.303+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:57:55.309+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.310+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.313+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:57:55.314+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.316+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.327+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.327+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.329+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:57:55.329+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.329+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.337+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.337+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.342+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-09T11:57:55.343+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:55.343+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:57:55.344+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.345+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-09T11:57:55.346+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.346+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.350+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24a41280]
2026-02-09T11:57:55.352+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-09T11:57:55.352+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-09T11:57:55.352+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.357+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-09T11:57:55.361+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:55.361+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:55.362+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:57:55.371+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-09T11:57:55.376+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-09T11:57:55.377+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:55.366+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.369+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:55.369+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.370+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-09T11:57:55.370+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:57:55.380+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:55.383+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:55.384+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-09T11:57:55.384+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:55.386+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:55.386+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:55.387+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.387+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-09T11:57:55.388+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:55.388+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:57:55.394+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:55.396+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.408+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f839cbf] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.409+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:55.475+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:55.483+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.483+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.484+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1894360045 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:55.484+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-09T11:57:55.488+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:55.494+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.501+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.497+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@718512f3] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.497+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a9e0e8f] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.498+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:57:55.500+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.501+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23383d8] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.501+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16d1c9b6] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.502+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1346311996 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:55.502+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1008105119 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:55.503+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-09T11:57:55.503+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:55.504+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@420365563 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:55.504+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1732219757 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:57:55.504+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:55.504+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-02-09T11:57:55.505+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-09T11:57:55.510+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-09T11:57:55.510+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-09T11:57:55.512+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:57:55.514+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:57:55.514+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:57:55.514+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:55.515+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:57:55.516+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:57:55.516+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f839cbf]
2026-02-09T11:57:55.518+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:55.519+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:55.523+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-02-09T11:57:55.525+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-09T11:57:55.526+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.526+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.526+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@718512f3]
2026-02-09T11:57:55.527+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23383d8]
2026-02-09T11:57:55.527+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-02-09T11:57:55.527+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a9e0e8f]
2026-02-09T11:57:55.527+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d34979d] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.527+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c72a38e] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.527+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.528+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:55.528+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16d1c9b6]
2026-02-09T11:57:55.529+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:55.529+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@779195616 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:55.530+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@134427186 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:55.530+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@507994d2] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.530+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-09T11:57:55.530+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:55.530+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=1, pendingCount (truncated)...]
2026-02-09T11:57:55.531+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-09T11:57:55.531+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-09T11:57:55.532+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@162662052 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:55.532+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:55.532+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-02, complet (truncated)...]
2026-02-09T11:57:55.533+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:55.536+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-09T11:57:55.537+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:55.537+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:57:55.538+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.543+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:55.544+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:57:55.547+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:57:55.549+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-09T11:57:55.550+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-09T11:57:55.550+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.551+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:57:55.551+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:55.552+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-09T11:57:55.552+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-09T11:57:55.555+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-09T11:57:55.558+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.566+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:55.567+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:55.568+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-09T11:57:55.569+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:55.574+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.576+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e251e2a] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.570+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:55.570+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.577+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1667828394 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:57:55.583+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:55.583+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-02-09T11:57:55.583+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategorySummary          : <==      Total: 1
2026-02-09T11:57:55.585+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.586+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:55.587+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-02-09T11:57:55.587+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@507994d2]
2026-02-09T11:57:55.591+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c72a38e]
2026-02-09T11:57:55.592+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d34979d]
2026-02-09T11:57:55.592+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b5ab313] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.593+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:57:55.594+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.594+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:57:55.594+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:55.595+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:55.596+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2085029976 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:55.597+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.597+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@106e6c85] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.598+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-09T11:57:55.600+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식비/회식, totalAmou (truncated)...]
2026-02-09T11:57:55.601+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:57:55.601+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22d837b7] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.601+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-09T11:57:55.601+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@204318046 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:55.602+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:55.602+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:55.604+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-09T11:57:55.604+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@823715921 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:55.611+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e251e2a]
2026-02-09T11:57:55.611+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:55.613+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.628+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:55.629+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:55.631+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:55.632+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-09T11:57:55.633+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:57:55.634+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=1, pendingCount (truncated)...]
2026-02-09T11:57:55.634+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:57:55.648+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b5ab313]
2026-02-09T11:57:55.638+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.647+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:55.649+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.650+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:55.650+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bcf80e5] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.652+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-09T11:57:55.653+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@629374116 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:55.653+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:55.654+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-09T11:57:55.654+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:55.656+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-09T11:57:55.659+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.662+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:57:55.664+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d385240] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.664+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@106e6c85]
2026-02-09T11:57:55.665+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategorySummary          : <==      Total: 1
2026-02-09T11:57:55.665+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:55.666+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@697066869 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:55.667+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.667+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bcf80e5]
2026-02-09T11:57:55.668+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22d837b7]
2026-02-09T11:57:55.668+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-09T11:57:55.668+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57df0718] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.669+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:55.669+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.670+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:57:55.670+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@875975458 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:55.670+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식비/회식, totalAmou (truncated)...]
2026-02-09T11:57:55.670+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aa7ce15] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.671+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:55.672+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:55.676+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@966868857 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:55.678+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:57:55.678+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:55.680+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:57:55.684+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-02-09T11:57:55.686+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d385240]
2026-02-09T11:57:55.686+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:55.694+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:55.695+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-02, complet (truncated)...]
2026-02-09T11:57:55.695+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57df0718]
2026-02-09T11:57:55.696+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:55.698+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.702+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58445991] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.704+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2005688902 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:55.716+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:55.717+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:55.721+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:55.725+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aa7ce15]
2026-02-09T11:57:55.727+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.729+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33e433a0] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.732+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1473741999 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:55.734+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:55.736+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:55.736+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:57:55.737+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58445991]
2026-02-09T11:57:55.742+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.743+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@241d8c32] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.744+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:57:55.744+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1584382449 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:55.745+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33e433a0]
2026-02-09T11:57:55.767+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.768+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4084d3b2] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.769+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1391427889 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:55.748+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:55.769+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:55.783+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:57:55.783+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:57:55.800+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:55.800+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:55.800+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4084d3b2]
2026-02-09T11:57:55.801+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@241d8c32]
2026-02-09T11:57:55.802+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.802+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:55.802+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@375bca21] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.803+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:57:55.803+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1369740859 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:55.804+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:55.804+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:55.818+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:55.812+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.813+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.815+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:57:55.815+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.816+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.837+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.839+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:57:55.846+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-09T11:57:55.846+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@375bca21]
2026-02-09T11:57:55.847+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.847+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.847+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.848+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:55.848+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-09T11:57:55.848+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@723ede98] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.849+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-09T11:57:55.849+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.849+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@467474492 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:55.851+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:55.850+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:55.851+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:55.852+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:57:55.853+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:55.853+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-09T11:57:55.854+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.854+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:55.855+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@612db6c1] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.859+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:55.859+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@658452608 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:57:55.860+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.860+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-02-09T11:57:55.894+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:55.897+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:57:55.898+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.898+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.898+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d830505] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.911+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:57:55.912+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@723ede98]
2026-02-09T11:57:55.913+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-09T11:57:55.915+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-09T11:57:55.916+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses
2026-02-09T11:57:55.916+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2057068792 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:55.920+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:55.921+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-09T11:57:55.921+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.928+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-09T11:57:55.928+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-09T11:57:55.929+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-09T11:57:55.930+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:57:55.931+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-09T11:57:55.939+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-09T11:57:55.935+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:55.936+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-09T11:57:55.936+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@612db6c1]
2026-02-09T11:57:55.944+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:55.945+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=1, pendingCount (truncated)...]
2026-02-09T11:57:55.938+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:57:55.938+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:55.942+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:55.943+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-09T11:57:55.943+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-09T11:57:55.945+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:55.965+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.976+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c9da0af] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.978+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@36625831 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:55.978+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:55.980+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:57:55.947+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:55.984+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:55.986+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cb8edc6] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:55.961+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:55.988+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-02-09T11:57:56.001+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d830505]
2026-02-09T11:57:55.992+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1669141571 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:56.001+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:56.002+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:56.010+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:57:56.011+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:56.011+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-09T11:57:56.013+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-09T11:57:56.015+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:56.021+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@171b1c92] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:56.022+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:56.029+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c9da0af]
2026-02-09T11:57:56.037+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:56.029+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1596943967 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:56.039+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55efe4fa] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:56.041+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-09T11:57:56.050+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@604417584 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:56.051+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-09T11:57:56.052+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:56.053+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:57:56.053+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:57:56.060+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cb8edc6]
2026-02-09T11:57:56.061+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-02-09T11:57:56.061+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:56.062+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@171b1c92]
2026-02-09T11:57:56.062+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36743a0b] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:56.062+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:56.062+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2104043486 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:56.062+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-02, complet (truncated)...]
2026-02-09T11:57:56.063+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-09T11:57:56.063+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:56.064+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-09T11:57:56.075+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:56.076+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55efe4fa]
2026-02-09T11:57:56.077+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : <==      Total: 1
2026-02-09T11:57:56.078+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:56.078+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36743a0b]
2026-02-09T11:57:56.078+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a93ee21] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:56.079+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:56.079+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1886460349 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:56.080+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식비/회식, totalAmou (truncated)...]
2026-02-09T11:57:56.080+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:56.080+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:56.083+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:56.089+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:57:56.094+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a93ee21]
2026-02-09T11:57:56.094+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:56.094+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d1d8861] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:56.095+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2017106693 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:56.095+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:56.095+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:57:56.098+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:56.098+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d1d8861]
2026-02-09T11:57:56.099+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:56.099+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bc78dca] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:56.099+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@180901971 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:56.099+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-09T11:57:56.101+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-09T11:57:56.104+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-09T11:57:56.104+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bc78dca]
2026-02-09T11:57:56.104+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:56.105+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5044018b] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:56.105+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@931819412 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:56.108+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-09T11:57:56.109+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 8(Long)
2026-02-09T11:57:56.111+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-09T11:57:56.111+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5044018b]
2026-02-09T11:57:56.112+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:56.112+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-09T11:57:56.112+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:56.518+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:57:56.518+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-02-09T11:57:56.520+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-02-09T11:57:56.534+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-09T11:57:56.536+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-02-09T11:57:56.537+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-02-09T11:57:56.546+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-02-09T11:57:56.547+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-09T11:57:56.667+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-02-09T11:57:56.553+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-02-09T11:57:56.556+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-02-09T11:57:56.599+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-02-09T11:57:56.655+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-09T11:57:56.668+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-02-09T11:57:56.670+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-02-09T11:57:56.680+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-02-09T11:57:56.671+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-09T11:57:56.673+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-02-09T11:57:56.678+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:57:56.681+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-02-09T11:57:56.681+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-09T11:57:56.681+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-09T11:57:56.684+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-02-09T11:57:56.685+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:57:56.685+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-02-09T11:57:56.690+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-09T11:57:56.698+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-09T11:57:56.694+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-02-09T11:57:56.695+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-09T11:57:56.696+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:57:56.696+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-09T11:57:56.698+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-02-09T11:57:56.698+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-02-09T11:57:56.699+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-02-09T11:57:56.700+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-09T11:57:56.700+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:57:56.702+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:57:56.700+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-02-09T11:57:56.701+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-02-09T11:57:56.701+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-02-09T11:57:56.701+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-09T11:57:56.702+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=APPROVED", parameters={masked}
2026-02-09T11:57:56.703+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:56.704+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-02-09T11:57:56.704+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-09T11:57:56.707+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-09T11:57:56.708+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:56.708+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-09T11:57:56.709+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72d47319] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:56.709+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-09T11:57:56.710+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:56.710+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:56.711+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:56.711+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:56.713+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:56.716+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:56.716+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:56.717+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@99963858 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:56.717+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:56.718+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:56.718+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:56.719+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:56.719+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:56.719+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:57:56.720+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dd95181] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:56.721+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:56.721+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:56.722+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30dea6da] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:56.722+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3df83b9d] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:56.726+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:57:56.727+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c9333bd] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:56.727+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a312f47] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:56.732+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@482483481 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:56.732+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1871348944 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:57:56.732+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:57:56.732+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1989206176 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:56.733+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-09T11:57:56.733+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ?
2026-02-09T11:57:56.734+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72d47319]
2026-02-09T11:57:56.735+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ?
2026-02-09T11:57:56.736+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long)
2026-02-09T11:57:56.736+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1902415861 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:57:56.737+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long)
2026-02-09T11:57:56.737+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:56.737+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2135127851 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:56.738+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long)
2026-02-09T11:57:56.740+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-09T11:57:56.741+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:57:56.741+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:57:56.743+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long)
2026-02-09T11:57:56.744+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:56.747+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-09T11:57:56.749+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-02-09T11:57:56.752+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-09T11:57:56.753+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-02-09T11:57:56.754+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-02-09T11:57:56.755+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-09T11:57:56.755+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-09T11:57:56.755+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 16
2026-02-09T11:57:56.762+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-09T11:57:56.764+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:57:56.764+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 3
2026-02-09T11:57:56.764+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3df83b9d]
2026-02-09T11:57:56.764+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dd95181]
2026-02-09T11:57:56.765+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30dea6da]
2026-02-09T11:57:56.767+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:56.767+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c9333bd]
2026-02-09T11:57:56.767+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a312f47]
2026-02-09T11:57:56.768+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:56.768+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:56.769+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:56.771+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:56.771+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:56.772+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:56.772+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=16, pendingCoun (truncated)...]
2026-02-09T11:57:56.773+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=16, pendingCoun (truncated)...]
2026-02-09T11:57:56.774+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-09T11:57:56.775+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:56.775+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23755e55] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:56.776+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-02-09T11:57:56.776+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:56.779+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:56.780+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:56.783+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@638e4822] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:56.786+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1877694131 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:56.787+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:56.788+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-09T11:57:56.789+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-02-09T11:57:56.789+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-02-09T11:57:56.810+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-09T11:57:56.792+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1008424056 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:56.793+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-09T11:57:56.795+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-02-09T11:57:56.796+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-09T11:57:56.810+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-09T11:57:56.810+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-02-09T11:57:56.811+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-09T11:57:56.827+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), APPROVED(String)
2026-02-09T11:57:56.828+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-09T11:57:56.828+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-09T11:57:56.828+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-02-09T11:57:56.828+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-02-09T11:57:56.830+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long)
2026-02-09T11:57:56.835+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=APPROVED", parameters={masked}
2026-02-09T11:57:56.844+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-09T11:57:56.836+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-02-09T11:57:56.838+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-02-09T11:57:56.841+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-09T11:57:56.844+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-02-09T11:57:56.844+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:56.845+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-02-09T11:57:56.845+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-09T11:57:56.845+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:56.846+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23755e55]
2026-02-09T11:57:56.846+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 16
2026-02-09T11:57:56.849+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:56.847+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:56.847+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-09T11:57:56.847+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:56.848+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:56.849+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@638e4822]
2026-02-09T11:57:56.849+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-02-09T11:57:56.850+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:56.850+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:56.851+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:56.851+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:56.852+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:56.852+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b5e4e36] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:56.853+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:56.858+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@601537682 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:57:56.860+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:57:56.863+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-09T11:57:56.853+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:56.855+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:56.855+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cefba19] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:56.877+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1700270297 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:56.857+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-09T11:57:56.860+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-09T11:57:56.866+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:56.867+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@699d875b] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:56.877+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-09T11:57:56.881+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:56.884+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long)
2026-02-09T11:57:56.882+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-09T11:57:56.883+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5050c805] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:56.883+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@421895098 wrapping com.mysql.cj.jdbc.ConnectionImpl@221ca963] will not be managed by Spring
2026-02-09T11:57:56.885+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-02-09T11:57:56.886+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-09T11:57:56.887+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1940358987 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:56.895+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:57:56.897+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ?
2026-02-09T11:57:56.898+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=APPROVED", parameters={masked}
2026-02-09T11:57:56.898+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-09T11:57:56.898+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-09T11:57:56.899+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b5e4e36]
2026-02-09T11:57:56.900+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 3
2026-02-09T11:57:56.902+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long)
2026-02-09T11:57:56.902+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-09T11:57:56.903+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-02-09T11:57:56.904+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long)
2026-02-09T11:57:56.904+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:56.904+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cefba19]
2026-02-09T11:57:56.909+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:56.909+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-02-09T11:57:56.914+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fd38688] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:56.914+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:56.916+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-09T11:57:56.918+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-02-09T11:57:56.917+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:56.917+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-09T11:57:56.918+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@380984506 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:57:56.918+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@699d875b]
2026-02-09T11:57:56.919+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:56.920+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:56.921+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:56.925+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-09T11:57:56.926+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:56.926+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5da02c3d] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:56.927+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-02-09T11:57:56.929+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:56.933+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), APPROVED(String)
2026-02-09T11:57:56.934+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 16
2026-02-09T11:57:56.935+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=16, pendingCoun (truncated)...]
2026-02-09T11:57:56.935+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@340583205 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:57:56.936+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/status
2026-02-09T11:57:56.936+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:56.937+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5050c805]
2026-02-09T11:57:56.937+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:56.937+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:57:56.938+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-02-09T11:57:56.948+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-02-09T11:57:56.941+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24183f97] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:56.945+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:56.946+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-02-09T11:57:56.947+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-09T11:57:56.949+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-02-09T11:57:56.950+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1063471665 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:56.950+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-09T11:57:56.952+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/pending
2026-02-09T11:57:56.961+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:56.953+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:56.954+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-02-09T11:57:56.960+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-09T11:57:56.961+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-02-09T11:57:56.962+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:56.962+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-09T11:57:56.963+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fd38688]
2026-02-09T11:57:56.967+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:56.965+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long)
2026-02-09T11:57:56.965+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-02-09T11:57:56.966+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:56.967+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/summary/by-category
2026-02-09T11:57:56.967+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-02-09T11:57:56.968+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String, Boolean)
2026-02-09T11:57:56.968+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f67acfa] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:56.969+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-02-09T11:57:56.971+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:56.971+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:56.979+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:57:56.980+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@991175297 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:56.981+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=APPROVED", parameters={masked}
2026-02-09T11:57:56.983+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-02-09T11:57:56.993+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:56.993+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5da02c3d]
2026-02-09T11:57:56.994+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 3
2026-02-09T11:57:56.995+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ?
2026-02-09T11:57:56.996+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-02-09T11:57:57.001+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 3(Long)
2026-02-09T11:57:56.997+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/tax/monthly-summary
2026-02-09T11:57:56.997+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:56.998+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:56.998+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24183f97]
2026-02-09T11:57:57.001+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:57.002+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-02-09T11:57:57.002+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44c06d82] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:57.002+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48bef1e0] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:57.002+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:57.003+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:57.003+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-02-09T11:57:57.004+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@289019190 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:57:57.004+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@346287374 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:57:57.005+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-02-09T11:57:57.018+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:57.018+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-02-09T11:57:57.018+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-02-09T11:57:57.018+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-09T11:57:57.019+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:57.021+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73582122] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:57.044+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:57.045+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 3(Long)
2026-02-09T11:57:57.045+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-02-09T11:57:57.046+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), APPROVED(String)
2026-02-09T11:57:57.047+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@334517695 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:57.048+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-09T11:57:57.054+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f67acfa]
2026-02-09T11:57:57.055+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-09T11:57:57.058+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:57.059+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:57.062+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 8(Long)
2026-02-09T11:57:57.063+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 16
2026-02-09T11:57:57.064+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c402d9] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:57.064+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-02-09T11:57:57.065+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=16, pendingCoun (truncated)...]
2026-02-09T11:57:57.067+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44c06d82]
2026-02-09T11:57:57.068+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@320505339 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:57.069+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48bef1e0]
2026-02-09T11:57:57.069+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:57.070+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-09T11:57:57.080+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:57.080+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-09T11:57:57.081+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:57.085+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73582122]
2026-02-09T11:57:57.086+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=78, drafte (truncated)...]
2026-02-09T11:57:57.087+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 3(Long)
2026-02-09T11:57:57.087+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-02-09T11:57:57.097+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:57.098+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:57.100+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:57.103+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44503e0a] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:57.136+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1991460499 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:57:57.137+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-02-09T11:57:57.139+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 3(Long), APPROVED(String)
2026-02-09T11:57:57.214+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 3
2026-02-09T11:57:57.222+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c402d9]
2026-02-09T11:57:57.228+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:57.230+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-02-09T11:57:57.231+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:57.241+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-02-09T11:57:57.253+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44503e0a]
2026-02-09T11:57:57.254+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:57.254+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-02-09T11:57:57.260+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:57.670+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:57:57.677+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:57:57.679+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:57:57.711+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:57:57.711+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:57:57.713+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:57:57.713+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:57:57.714+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:57:57.714+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:57:57.715+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:57:57.715+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:57:57.716+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:57:57.716+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:57:57.717+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:57:57.717+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:57:57.718+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:57:57.718+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:57:57.718+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:57:57.719+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:57.719+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:57:57.720+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:57:57.720+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77b411bd] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:57.720+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:57:57.721+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:57:57.728+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:57.729+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:57:57.729+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c569fac] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:57.729+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cbbab93] was not registered for synchronization because synchronization is not active
2026-02-09T11:57:57.735+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@142406817 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:57:57.739+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:57:57.743+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:57:57.743+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@742392063 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:57:57.743+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@77856254 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:57:57.744+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:57:57.744+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:57:57.746+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:57:57.748+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:57:57.750+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77b411bd]
2026-02-09T11:57:57.751+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:57:57.751+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:57.752+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:57:57.753+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:57.756+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-09T11:57:57.759+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c569fac]
2026-02-09T11:57:57.760+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:57.760+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:57:57.761+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:57:57.764+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-09T11:57:57.766+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cbbab93]
2026-02-09T11:57:57.767+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:57:57.768+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:57:57.770+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:58:00.188+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:58:00.242+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:58:00.251+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:58:00.252+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:58:00.252+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:58:00.253+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:58:00.254+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:58:00.258+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:58:00.260+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:58:00.265+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@134daf8e] was not registered for synchronization because synchronization is not active
2026-02-09T11:58:00.282+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@571955499 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:58:00.287+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.A.findByCompanyId                : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE company_id = ? OR company_id IS NULL ORDER BY company_id DESC, category ASC, account_name ASC
2026-02-09T11:58:00.304+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.A.findByCompanyId                : ==> Parameters: 3(Long)
2026-02-09T11:58:00.319+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.A.findByCompanyId                : <==      Total: 12
2026-02-09T11:58:00.326+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@134daf8e]
2026-02-09T11:58:00.334+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:58:00.335+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[AccountCodeMappingDto(mappingId=3, companyId=null, ca (truncated)...]
2026-02-09T11:58:00.343+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:59:19.759+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:59:19.835+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:59:19.836+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:59:19.840+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:59:19.840+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:59:19.843+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:59:19.844+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:59:19.845+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:59:19.846+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:59:19.847+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f5dee47] was not registered for synchronization because synchronization is not active
2026-02-09T11:59:19.848+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1485634942 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:59:19.849+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCompanyId                : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE company_id = ? OR company_id IS NULL ORDER BY company_id DESC, category ASC, account_name ASC
2026-02-09T11:59:19.849+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCompanyId                : ==> Parameters: 3(Long)
2026-02-09T11:59:19.851+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCompanyId                : <==      Total: 12
2026-02-09T11:59:19.852+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f5dee47]
2026-02-09T11:59:19.853+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:59:19.855+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[AccountCodeMappingDto(mappingId=3, companyId=null, ca (truncated)...]
2026-02-09T11:59:19.858+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:59:21.242+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:59:21.244+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:59:21.245+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:59:21.246+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:59:21.246+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:59:21.246+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:59:21.247+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:59:21.247+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69fcac35] was not registered for synchronization because synchronization is not active
2026-02-09T11:59:21.249+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1745073946 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:59:21.250+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:59:21.252+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:59:21.256+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:59:21.256+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69fcac35]
2026-02-09T11:59:21.257+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:59:21.257+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:59:21.258+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:59:21.274+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:59:21.276+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:59:21.276+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:59:21.277+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:59:21.277+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:59:21.277+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:59:21.278+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:59:21.278+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d476659] was not registered for synchronization because synchronization is not active
2026-02-09T11:59:21.280+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1422522828 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:59:21.281+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:59:21.283+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:59:21.292+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:59:21.293+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d476659]
2026-02-09T11:59:21.293+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:59:21.294+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:59:21.294+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:59:21.309+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:59:21.311+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:59:21.312+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:59:21.313+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:59:21.313+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:59:21.313+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:59:21.314+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:59:21.315+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:59:21.316+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:59:21.316+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@691967db] was not registered for synchronization because synchronization is not active
2026-02-09T11:59:21.318+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@203096864 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:59:21.322+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:59:21.324+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:59:21.328+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-09T11:59:21.328+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@691967db]
2026-02-09T11:59:21.329+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:59:21.329+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:59:21.330+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:59:21.343+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-09T11:59:21.345+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-09T11:59:21.347+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/companies
2026-02-09T11:59:21.347+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-09T11:59:21.347+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-09T11:59:21.348+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-09T11:59:21.348+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:59:21.348+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@558362a9] was not registered for synchronization because synchronization is not active
2026-02-09T11:59:21.350+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@266352461 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:59:21.351+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-09T11:59:21.352+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 8(Long)
2026-02-09T11:59:21.355+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-09T11:59:21.355+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@558362a9]
2026-02-09T11:59:21.356+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:59:21.356+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-09T11:59:21.357+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:59:21.369+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:59:21.374+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:59:21.376+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:59:21.378+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:59:21.389+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:59:21.390+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:59:21.391+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:59:21.392+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79c1caef] was not registered for synchronization because synchronization is not active
2026-02-09T11:59:21.393+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1513921366 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:59:21.394+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:59:21.395+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:59:21.398+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:59:21.398+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79c1caef]
2026-02-09T11:59:21.399+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:59:21.399+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:59:21.400+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:59:21.417+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:59:21.422+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:59:21.424+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:59:21.424+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:59:21.425+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:59:21.425+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:59:21.425+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:59:21.425+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46635460] was not registered for synchronization because synchronization is not active
2026-02-09T11:59:21.426+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@102159081 wrapping com.mysql.cj.jdbc.ConnectionImpl@2543c1c8] will not be managed by Spring
2026-02-09T11:59:21.426+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:59:21.427+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:59:21.429+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:59:21.431+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:59:21.432+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46635460]
2026-02-09T11:59:21.432+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:59:21.433+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:59:21.433+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:59:21.433+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:59:21.433+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:59:21.434+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:59:21.440+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:59:21.440+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:59:21.443+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:59:21.444+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:59:21.445+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:59:21.446+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8dd0c38] was not registered for synchronization because synchronization is not active
2026-02-09T11:59:21.449+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@627969193 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:59:21.449+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:59:21.455+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:59:21.460+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-09T11:59:21.461+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8dd0c38]
2026-02-09T11:59:21.461+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:59:21.467+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:59:21.469+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:59:21.696+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-09T11:59:21.698+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-09T11:59:21.700+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-09T11:59:21.701+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-09T11:59:21.701+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-09T11:59:21.702+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-09T11:59:21.702+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:59:21.703+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e518532] was not registered for synchronization because synchronization is not active
2026-02-09T11:59:21.705+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2117029433 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:59:21.706+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-09T11:59:21.707+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 8(Long), 3(Long)
2026-02-09T11:59:21.709+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-09T11:59:21.710+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e518532]
2026-02-09T11:59:21.711+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:59:21.712+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-09T11:59:21.712+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:59:21.729+09:00 DEBUG 40576 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:59:21.733+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:59:21.734+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:59:21.734+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:59:21.735+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:59:21.735+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:59:21.738+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:59:21.739+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:59:21.740+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:59:21.741+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e2fdc3e] was not registered for synchronization because synchronization is not active
2026-02-09T11:59:21.742+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2128196031 wrapping com.mysql.cj.jdbc.ConnectionImpl@2f7c55f0] will not be managed by Spring
2026-02-09T11:59:21.743+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:59:21.747+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:59:21.750+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-09T11:59:21.751+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e2fdc3e]
2026-02-09T11:59:21.752+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:59:21.752+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:59:21.754+09:00 DEBUG 40576 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:59:25.178+09:00 DEBUG 40576 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:59:25.179+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:59:25.180+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:59:25.181+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:59:25.181+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:59:25.181+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:59:25.182+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:59:25.182+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:59:25.183+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:59:25.183+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65195634] was not registered for synchronization because synchronization is not active
2026-02-09T11:59:25.185+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@428584492 wrapping com.mysql.cj.jdbc.ConnectionImpl@5bcf8a69] will not be managed by Spring
2026-02-09T11:59:25.185+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:59:25.190+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:59:25.192+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-09T11:59:25.193+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65195634]
2026-02-09T11:59:25.193+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:59:25.194+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:59:25.194+09:00 DEBUG 40576 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:59:25.311+09:00 DEBUG 40576 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:59:25.618+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:59:25.625+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:59:25.644+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:59:25.645+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:59:25.645+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:59:25.646+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:59:25.681+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:59:25.683+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:59:25.694+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2340fe83] was not registered for synchronization because synchronization is not active
2026-02-09T11:59:25.728+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@241177560 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:59:25.729+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.A.findByCompanyId                : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE company_id = ? OR company_id IS NULL ORDER BY company_id DESC, category ASC, account_name ASC
2026-02-09T11:59:25.730+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.A.findByCompanyId                : ==> Parameters: 3(Long)
2026-02-09T11:59:25.811+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] c.i.b.m.A.findByCompanyId                : <==      Total: 12
2026-02-09T11:59:25.832+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2340fe83]
2026-02-09T11:59:25.838+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:59:25.839+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[AccountCodeMappingDto(mappingId=3, companyId=null, ca (truncated)...]
2026-02-09T11:59:25.883+09:00 DEBUG 40576 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:59:38.758+09:00 DEBUG 40576 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-09T11:59:38.779+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-09T11:59:38.793+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/account-codes/list
2026-02-09T11:59:38.797+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-09T11:59:38.800+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-09T11:59:38.801+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-09T11:59:38.804+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:59:38.822+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-09T11:59:38.824+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:59:38.825+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d45143] was not registered for synchronization because synchronization is not active
2026-02-09T11:59:38.833+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@861303377 wrapping com.mysql.cj.jdbc.ConnectionImpl@21194522] will not be managed by Spring
2026-02-09T11:59:38.836+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.A.findByCompanyId                : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE company_id = ? OR company_id IS NULL ORDER BY company_id DESC, category ASC, account_name ASC
2026-02-09T11:59:38.838+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.A.findByCompanyId                : ==> Parameters: 3(Long)
2026-02-09T11:59:38.861+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] c.i.b.m.A.findByCompanyId                : <==      Total: 12
2026-02-09T11:59:38.864+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d45143]
2026-02-09T11:59:38.866+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:59:38.868+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[AccountCodeMappingDto(mappingId=3, companyId=null, ca (truncated)...]
2026-02-09T11:59:38.874+09:00 DEBUG 40576 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-09T11:59:40.208+09:00 DEBUG 40576 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-09T11:59:40.210+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-09T11:59:40.212+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 8, role: TAX_ACCOUNTANT, companyId: 3, uri: /api/expense-categories/merged
2026-02-09T11:59:40.213+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-09T11:59:40.213+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-09T11:59:40.213+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-09T11:59:40.214+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:59:40.214+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-09T11:59:40.215+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-09T11:59:40.215+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56e7512a] was not registered for synchronization because synchronization is not active
2026-02-09T11:59:40.216+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@548924147 wrapping com.mysql.cj.jdbc.ConnectionImpl@65a668a5] will not be managed by Spring
2026-02-09T11:59:40.217+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-09T11:59:40.223+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-09T11:59:40.226+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-09T11:59:40.226+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56e7512a]
2026-02-09T11:59:40.227+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-09T11:59:40.228+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-09T11:59:40.229+09:00 DEBUG 40576 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
