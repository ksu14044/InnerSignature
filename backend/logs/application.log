2026-01-09T13:10:24.208+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@713119211 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:10:24.219+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:10:24.220+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-09T13:10:24.223+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28b05f39]
2026-01-09T13:10:24.223+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-09T13:10:24.232+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:24.256+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e2ce8e7] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:24.260+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1414478220 wrapping com.mysql.cj.jdbc.ConnectionImpl@6c361118] will not be managed by Spring
2026-01-09T13:10:24.262+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:10:24.272+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-09T13:10:24.273+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:10:24.275+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c0cf6d2]
2026-01-09T13:10:24.285+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:24.289+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40a39819] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:24.291+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@84891039 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:10:24.302+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:10:24.302+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:10:24.304+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:10:24.313+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e2ce8e7]
2026-01-09T13:10:24.323+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:10:24.327+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:10:24.327+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=3, drafterId=2 (truncated)...]
2026-01-09T13:10:24.327+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40a39819]
2026-01-09T13:10:24.370+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:10:24.371+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=3, drafterId=2 (truncated)...]
2026-01-09T13:10:24.372+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:10:24.329+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:10:25.500+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/user
2026-01-09T13:10:25.503+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-09T13:10:25.503+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/cards/user
2026-01-09T13:10:25.504+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-09T13:10:25.520+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-09T13:10:25.520+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-09T13:10:25.522+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:25.524+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14f2cd36] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:25.526+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2093114772 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:10:25.527+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.is_default DESC, uc.created_at DESC
2026-01-09T13:10:25.528+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 2(Long)
2026-01-09T13:10:25.530+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.U.findActiveByUserId             : <==      Total: 1
2026-01-09T13:10:25.541+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14f2cd36]
2026-01-09T13:10:25.547+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:10:25.551+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[UserCardDto(cardId=2, userId=2, cardName=개인카 (truncated)...]
2026-01-09T13:10:25.553+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:10:25.606+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:10:25.608+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:10:25.609+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:10:25.610+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:10:25.611+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:10:25.611+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:10:25.616+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:10:25.616+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:10:25.617+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:10:25.617+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:10:25.617+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:10:25.617+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:25.617+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:10:25.618+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44ca78d4] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:25.618+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:25.618+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d0be050] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:25.620+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@834464509 wrapping com.mysql.cj.jdbc.ConnectionImpl@6c361118] will not be managed by Spring
2026-01-09T13:10:25.620+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@492684482 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:10:25.620+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:10:25.620+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:10:25.622+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-09T13:10:25.624+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-09T13:10:25.627+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-09T13:10:25.627+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-09T13:10:25.627+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44ca78d4]
2026-01-09T13:10:25.627+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d0be050]
2026-01-09T13:10:25.627+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:25.628+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:25.628+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aa0e199] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:25.628+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e32deeb] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:25.628+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@812203932 wrapping com.mysql.cj.jdbc.ConnectionImpl@6c361118] will not be managed by Spring
2026-01-09T13:10:25.629+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@443828114 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:10:25.629+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:10:25.629+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:10:25.629+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:10:25.629+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:10:25.632+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:10:25.633+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:10:25.633+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e32deeb]
2026-01-09T13:10:25.633+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aa0e199]
2026-01-09T13:10:25.635+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:10:25.635+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:10:25.635+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=3, drafterId=2 (truncated)...]
2026-01-09T13:10:25.635+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=3, drafterId=2 (truncated)...]
2026-01-09T13:10:25.636+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:10:25.636+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:10:26.710+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:10:26.711+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-09T13:10:26.711+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:10:26.711+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-09T13:10:26.711+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/pending
2026-01-09T13:10:26.712+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-09T13:10:26.722+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:10:26.725+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-09T13:10:26.725+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:10:26.725+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-09T13:10:26.725+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-09T13:10:26.726+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-09T13:10:26.727+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:10:26.736+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:10:26.728+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me
2026-01-09T13:10:26.729+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:10:26.730+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/companies
2026-01-09T13:10:26.735+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/companies/pending
2026-01-09T13:10:26.740+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-09T13:10:26.736+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me
2026-01-09T13:10:26.736+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:10:26.737+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-09T13:10:26.741+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:10:26.740+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:10:26.742+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:26.740+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-09T13:10:26.741+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-09T13:10:26.741+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-09T13:10:26.741+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-09T13:10:26.742+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:10:26.742+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f8d9157] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:26.742+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-09T13:10:26.742+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-09T13:10:26.743+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-09T13:10:26.745+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:26.743+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-09T13:10:26.743+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:10:26.744+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-09T13:10:26.753+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:26.745+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-09T13:10:26.745+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@345d85b0] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:26.746+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@320626000 wrapping com.mysql.cj.jdbc.ConnectionImpl@6547f1d9] will not be managed by Spring
2026-01-09T13:10:26.746+09:00  INFO 23648 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 2, companyId: 1
2026-01-09T13:10:26.747+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:26.759+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21ad4b4] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:26.756+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68a6f365] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:26.757+09:00  INFO 23648 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 2, companyId: 1
2026-01-09T13:10:26.758+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:10:26.764+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-09T13:10:26.759+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:26.761+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:26.762+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1806714480 wrapping com.mysql.cj.jdbc.ConnectionImpl@3177fe65] will not be managed by Spring
2026-01-09T13:10:26.775+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-09T13:10:26.762+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1450647287 wrapping com.mysql.cj.jdbc.ConnectionImpl@6c361118] will not be managed by Spring
2026-01-09T13:10:26.762+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@417019468 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:10:26.774+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13d17317] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:26.775+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33a230d0] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:26.777+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 2(Long), PENDING(String)
2026-01-09T13:10:26.777+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:10:26.777+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-09T13:10:26.779+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 2(Long)
2026-01-09T13:10:26.780+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-09T13:10:26.790+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-09T13:10:26.809+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1371891218 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:10:26.810+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@272700988 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:10:26.810+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f8d9157]
2026-01-09T13:10:26.810+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-09T13:10:26.826+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:10:26.826+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:10:26.826+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:26.827+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@345d85b0]
2026-01-09T13:10:26.827+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:10:26.827+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:10:26.828+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61d4a64a] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:26.828+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:10:26.842+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@432046464 wrapping com.mysql.cj.jdbc.ConnectionImpl@6547f1d9] will not be managed by Spring
2026-01-09T13:10:26.938+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:10:26.938+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:10:26.842+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-09T13:10:26.940+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:10:26.858+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:10:26.941+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21ad4b4]
2026-01-09T13:10:26.942+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:10:26.943+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:10:26.943+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-09T13:10:26.943+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:10:26.944+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:10:27.002+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:10:27.041+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:10:27.047+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68a6f365]
2026-01-09T13:10:27.051+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33a230d0]
2026-01-09T13:10:27.052+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13d17317]
2026-01-09T13:10:27.057+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61d4a64a]
2026-01-09T13:10:27.089+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:10:27.106+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:27.106+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:27.107+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:10:27.107+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=2, userId=2, companyId=1 (truncated)...]
2026-01-09T13:10:27.107+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5971dc52] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:27.107+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@629a9f4a] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:27.107+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=3, drafterId=2 (truncated)...]
2026-01-09T13:10:27.108+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:10:27.109+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1581553916 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:10:27.111+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2058629449 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:10:27.113+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:10:27.129+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-09T13:10:27.129+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-09T13:10:27.143+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-09T13:10:27.145+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-09T13:10:27.147+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-09T13:10:27.147+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-09T13:10:27.148+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5971dc52]
2026-01-09T13:10:27.153+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@629a9f4a]
2026-01-09T13:10:27.154+09:00  INFO 23648 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 2, companyId: 1, role: USER
2026-01-09T13:10:27.155+09:00  INFO 23648 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 2, companyId: 1, role: USER
2026-01-09T13:10:27.155+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:10:27.155+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:10:27.156+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=2, username=test_user1, passw (truncated)...]
2026-01-09T13:10:27.156+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=2, username=test_user1, passw (truncated)...]
2026-01-09T13:10:27.157+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:10:27.159+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:10:27.258+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:10:27.259+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:10:27.277+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:10:27.279+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:10:27.284+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:10:27.284+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:10:27.285+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:10:27.286+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:10:27.286+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:10:27.286+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:10:27.286+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:10:27.287+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:10:27.287+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:27.289+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76033d5a] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:27.288+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:27.289+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1869711533 wrapping com.mysql.cj.jdbc.ConnectionImpl@6c361118] will not be managed by Spring
2026-01-09T13:10:27.290+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a8d74c2] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:27.290+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:10:27.290+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1658512503 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:10:27.291+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-09T13:10:27.291+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:10:27.293+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-09T13:10:27.300+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-09T13:10:27.303+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76033d5a]
2026-01-09T13:10:27.304+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:27.304+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-09T13:10:27.305+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cd85159] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:27.305+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a8d74c2]
2026-01-09T13:10:27.306+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@324950645 wrapping com.mysql.cj.jdbc.ConnectionImpl@6c361118] will not be managed by Spring
2026-01-09T13:10:27.306+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:27.306+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:10:27.306+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@617fc99e] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:27.307+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:10:27.307+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1081444887 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:10:27.309+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:10:27.311+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:10:27.313+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:10:27.319+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cd85159]
2026-01-09T13:10:27.320+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:10:27.321+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=3, drafterId=2 (truncated)...]
2026-01-09T13:10:27.322+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:10:27.339+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:10:27.373+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@617fc99e]
2026-01-09T13:10:27.374+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:10:27.385+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=3, drafterId=2 (truncated)...]
2026-01-09T13:10:27.386+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:10:30.280+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:10:30.282+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:10:30.283+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-09T13:10:30.289+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-09T13:10:30.283+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:10:30.284+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:10:30.284+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-09T13:10:30.287+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:10:30.292+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:10:30.294+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-09T13:10:30.297+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:10:30.301+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:10:30.304+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:10:30.304+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:10:30.305+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-09T13:10:30.306+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-09T13:10:30.321+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:10:30.316+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:10:30.317+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:10:30.319+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:10:30.321+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-09T13:10:30.321+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:10:30.321+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-09T13:10:30.323+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:10:30.325+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:10:30.326+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:10:30.326+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-09T13:10:30.327+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:10:30.328+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-09T13:10:30.328+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:10:30.328+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:10:30.328+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:10:30.329+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-09T13:10:30.329+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:10:30.329+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-09T13:10:30.330+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:10:30.330+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:10:30.334+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:10:30.339+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-09T13:10:30.340+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.340+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-09T13:10:30.341+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:10:30.341+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:10:30.341+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.342+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.342+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49954846] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.343+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.344+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.344+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.344+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19ff91b0] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.345+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e224d57] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.345+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22c40ac9] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.346+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@720e7c0] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.347+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a0d15da] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.355+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1971582650 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:10:30.356+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@829907699 wrapping com.mysql.cj.jdbc.ConnectionImpl@3177fe65] will not be managed by Spring
2026-01-09T13:10:30.357+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1333257398 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:10:30.357+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@668010606 wrapping com.mysql.cj.jdbc.ConnectionImpl@6547f1d9] will not be managed by Spring
2026-01-09T13:10:30.360+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:10:30.360+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@714983842 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:10:30.362+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-09T13:10:30.361+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:10:30.361+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:10:30.361+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:10:30.361+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1167234211 wrapping com.mysql.cj.jdbc.ConnectionImpl@6c361118] will not be managed by Spring
2026-01-09T13:10:30.362+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:10:30.362+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 2(Long)
2026-01-09T13:10:30.363+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-09T13:10:30.363+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:10:30.363+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:10:30.364+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-09T13:10:30.369+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-09T13:10:30.371+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 2(Long)
2026-01-09T13:10:30.372+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49954846]
2026-01-09T13:10:30.372+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:10:30.376+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e224d57]
2026-01-09T13:10:30.372+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:10:30.372+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 2
2026-01-09T13:10:30.376+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.376+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.377+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19ff91b0]
2026-01-09T13:10:30.377+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:10:30.377+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-09T13:10:30.377+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22c40ac9]
2026-01-09T13:10:30.378+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d0ac6c9] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.378+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e2eb053] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.378+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:10:30.378+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a0d15da]
2026-01-09T13:10:30.378+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@720e7c0]
2026-01-09T13:10:30.379+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.384+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14ea1e02] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.379+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1462924458 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:10:30.380+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@638027907 wrapping com.mysql.cj.jdbc.ConnectionImpl@6547f1d9] will not be managed by Spring
2026-01-09T13:10:30.388+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:10:30.380+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:10:30.381+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:10:30.384+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.391+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:10:30.385+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@368150410 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:10:30.386+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:10:30.391+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:10:30.391+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:10:30.391+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@822d24a] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.392+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:10:30.392+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-09T13:10:30.393+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:10:30.394+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:10:30.394+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2037812876 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:10:30.394+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:10:30.405+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-09T13:10:30.408+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:10:30.408+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-09T13:10:30.410+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-09T13:10:30.411+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:10:30.412+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:10:30.412+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:10:30.413+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-09T13:10:30.414+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-09T13:10:30.419+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e2eb053]
2026-01-09T13:10:30.420+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d0ac6c9]
2026-01-09T13:10:30.422+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-09T13:10:30.423+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-09T13:10:30.424+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:10:30.424+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:10:30.424+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.424+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:10:30.424+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-09T13:10:30.424+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14ea1e02]
2026-01-09T13:10:30.425+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.425+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@822d24a]
2026-01-09T13:10:30.426+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b8fe3d1] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.426+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=3, drafterId=2 (truncated)...]
2026-01-09T13:10:30.427+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-09T13:10:30.427+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.429+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.427+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48125e3b] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.427+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:10:30.428+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1086874331 wrapping com.mysql.cj.jdbc.ConnectionImpl@6547f1d9] will not be managed by Spring
2026-01-09T13:10:30.429+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:10:30.429+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@250b6bd6] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.430+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@262ad2c3] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.436+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1996397817 wrapping com.mysql.cj.jdbc.ConnectionImpl@6c361118] will not be managed by Spring
2026-01-09T13:10:30.437+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=3, drafterId=2 (truncated)...]
2026-01-09T13:10:30.437+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:10:30.439+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:10:30.439+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1632992123 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:10:30.445+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:10:30.440+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@965139617 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:10:30.443+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:10:30.443+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:10:30.445+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:10:30.455+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:10:30.446+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:10:30.446+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long)
2026-01-09T13:10:30.447+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:10:30.451+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:10:30.458+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:10:30.458+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:10:30.463+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:10:30.460+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-09T13:10:30.460+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:10:30.463+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 13
2026-01-09T13:10:30.467+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:10:30.469+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:10:30.467+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:10:30.467+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b8fe3d1]
2026-01-09T13:10:30.471+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:10:30.471+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-01-09T13:10:30.473+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.473+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.473+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.474+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 2
2026-01-09T13:10:30.474+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48125e3b]
2026-01-09T13:10:30.474+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@250b6bd6]
2026-01-09T13:10:30.474+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@420b3aeb] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.474+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@119cbf3] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.475+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43f418] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.475+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@262ad2c3]
2026-01-09T13:10:30.475+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.475+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.475+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@938465940 wrapping com.mysql.cj.jdbc.ConnectionImpl@6c361118] will not be managed by Spring
2026-01-09T13:10:30.475+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1294393633 wrapping com.mysql.cj.jdbc.ConnectionImpl@3177fe65] will not be managed by Spring
2026-01-09T13:10:30.476+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1418075818 wrapping com.mysql.cj.jdbc.ConnectionImpl@6547f1d9] will not be managed by Spring
2026-01-09T13:10:30.476+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.476+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bc50014] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.476+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b50ce9] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.476+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:10:30.476+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:10:30.476+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:10:30.476+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6973e198] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.477+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1912369361 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:10:30.477+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2141094610 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:10:30.477+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 2(Long)
2026-01-09T13:10:30.479+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-09T13:10:30.479+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:10:30.480+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@431983295 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:10:30.480+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:10:30.480+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:10:30.485+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:10:30.486+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:10:30.487+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:10:30.488+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:10:30.489+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-09T13:10:30.489+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:10:30.489+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:10:30.489+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43f418]
2026-01-09T13:10:30.489+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@420b3aeb]
2026-01-09T13:10:30.490+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@119cbf3]
2026-01-09T13:10:30.493+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:10:30.491+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:10:30.492+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.492+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:10:30.493+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:10:30.493+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.493+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b50ce9]
2026-01-09T13:10:30.493+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bc50014]
2026-01-09T13:10:30.493+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@531450] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.494+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6973e198]
2026-01-09T13:10:30.495+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:10:30.495+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7002067f] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.495+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:10:30.495+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.495+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.496+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@523228022 wrapping com.mysql.cj.jdbc.ConnectionImpl@6547f1d9] will not be managed by Spring
2026-01-09T13:10:30.496+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1057689055 wrapping com.mysql.cj.jdbc.ConnectionImpl@3177fe65] will not be managed by Spring
2026-01-09T13:10:30.497+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:10:30.497+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-09T13:10:30.497+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7318b76b] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.497+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dd2faff] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.506+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1885260988 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:10:30.500+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:10:30.503+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:10:30.504+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:10:30.505+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:10:30.506+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1272685564 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:10:30.506+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:10:30.506+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:10:30.506+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:10:30.511+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:10:30.511+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:10:30.511+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:10:30.513+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:10:30.520+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:10:30.520+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:10:30.520+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 13
2026-01-09T13:10:30.521+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long)
2026-01-09T13:10:30.521+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:10:30.522+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:10:30.524+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7002067f]
2026-01-09T13:10:30.524+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@531450]
2026-01-09T13:10:30.525+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 13
2026-01-09T13:10:30.525+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:10:30.527+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:10:30.528+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:10:30.528+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-01-09T13:10:30.530+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dd2faff]
2026-01-09T13:10:30.528+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.528+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7318b76b]
2026-01-09T13:10:30.529+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:10:30.541+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:10:30.529+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.544+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.530+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=3, drafterId=2 (truncated)...]
2026-01-09T13:10:30.539+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.539+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77ed93e3] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.540+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.544+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@80499d3] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.544+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58dbe2ba] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.545+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21ffd5bb] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.545+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:10:30.546+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1862596826 wrapping com.mysql.cj.jdbc.ConnectionImpl@6547f1d9] will not be managed by Spring
2026-01-09T13:10:30.546+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28810aa0] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.547+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@450532962 wrapping com.mysql.cj.jdbc.ConnectionImpl@3177fe65] will not be managed by Spring
2026-01-09T13:10:30.547+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1358367465 wrapping com.mysql.cj.jdbc.ConnectionImpl@6c361118] will not be managed by Spring
2026-01-09T13:10:30.555+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@189843065 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:10:30.556+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:10:30.560+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@504648500 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:10:30.562+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:10:30.560+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:10:30.560+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:10:30.561+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:10:30.562+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:10:30.563+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-09T13:10:30.567+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-09T13:10:30.570+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:10:30.571+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 13
2026-01-09T13:10:30.571+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:10:30.572+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77ed93e3]
2026-01-09T13:10:30.575+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.576+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@323ea5d7] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.576+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:10:30.576+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-09T13:10:30.576+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-09T13:10:30.576+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:10:30.578+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28810aa0]
2026-01-09T13:10:30.577+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@693590776 wrapping com.mysql.cj.jdbc.ConnectionImpl@6547f1d9] will not be managed by Spring
2026-01-09T13:10:30.577+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21ffd5bb]
2026-01-09T13:10:30.577+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@80499d3]
2026-01-09T13:10:30.578+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:10:30.578+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58dbe2ba]
2026-01-09T13:10:30.578+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.578+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:10:30.578+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.579+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-09T13:10:30.579+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.580+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f6a1f3f] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.579+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484b565d] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.579+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:10:30.579+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@626fc791] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.580+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:10:30.586+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2024008794 wrapping com.mysql.cj.jdbc.ConnectionImpl@6c361118] will not be managed by Spring
2026-01-09T13:10:30.587+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1748992510 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:10:30.587+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1317601294 wrapping com.mysql.cj.jdbc.ConnectionImpl@3177fe65] will not be managed by Spring
2026-01-09T13:10:30.593+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:10:30.594+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:10:30.594+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:10:30.594+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:10:30.594+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:10:30.595+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:10:30.595+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:10:30.596+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@323ea5d7]
2026-01-09T13:10:30.603+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:10:30.603+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.603+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f6a1f3f]
2026-01-09T13:10:30.603+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@669a236e] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.604+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:10:30.608+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@558707319 wrapping com.mysql.cj.jdbc.ConnectionImpl@6547f1d9] will not be managed by Spring
2026-01-09T13:10:30.609+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=3, drafterId=2 (truncated)...]
2026-01-09T13:10:30.609+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:10:30.610+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 13
2026-01-09T13:10:30.611+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:10:30.612+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:10:30.612+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484b565d]
2026-01-09T13:10:30.618+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.618+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ce8dae] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.619+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@338025108 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:10:30.620+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:10:30.625+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:10:30.625+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@626fc791]
2026-01-09T13:10:30.627+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 13
2026-01-09T13:10:30.628+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:10:30.628+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:10:30.628+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@669a236e]
2026-01-09T13:10:30.629+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=3, drafterId=2 (truncated)...]
2026-01-09T13:10:30.635+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.636+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ea6fbe2] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.636+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:10:30.638+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@152055307 wrapping com.mysql.cj.jdbc.ConnectionImpl@6547f1d9] will not be managed by Spring
2026-01-09T13:10:30.642+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:10:30.643+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:10:30.643+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 13
2026-01-09T13:10:30.644+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ce8dae]
2026-01-09T13:10:30.645+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.646+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@233d14b3] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.647+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1366052487 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:10:30.653+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:10:30.655+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:10:30.656+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:10:30.657+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ea6fbe2]
2026-01-09T13:10:30.658+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:10:30.661+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-09T13:10:30.658+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:10:30.665+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:10:30.675+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@233d14b3]
2026-01-09T13:10:30.676+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.677+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67e6eece] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.679+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@750118413 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:10:30.681+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:10:30.684+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:10:30.706+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 13
2026-01-09T13:10:30.712+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67e6eece]
2026-01-09T13:10:30.713+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:30.728+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a96bc32] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:30.729+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@450276144 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:10:30.730+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:10:30.730+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:10:30.745+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:10:30.746+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a96bc32]
2026-01-09T13:10:30.753+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:10:30.753+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-09T13:10:30.754+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:10:31.306+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:10:31.306+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:10:31.313+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:10:31.344+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:10:31.362+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:10:31.374+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:10:31.376+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:10:31.379+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:10:31.379+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:10:31.380+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:10:31.382+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:31.380+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:10:31.383+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@486fc5a4] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:31.383+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:10:31.385+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:31.386+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46405243] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:31.390+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@450509243 wrapping com.mysql.cj.jdbc.ConnectionImpl@6c361118] will not be managed by Spring
2026-01-09T13:10:31.392+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:10:31.393+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-09T13:10:31.393+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1681410817 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:10:31.394+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:10:31.395+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-09T13:10:31.399+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-09T13:10:31.400+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46405243]
2026-01-09T13:10:31.399+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-09T13:10:31.401+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@486fc5a4]
2026-01-09T13:10:31.402+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:31.401+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:10:31.403+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a287e28] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:31.403+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40936a8e] was not registered for synchronization because synchronization is not active
2026-01-09T13:10:31.403+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1778465343 wrapping com.mysql.cj.jdbc.ConnectionImpl@6c361118] will not be managed by Spring
2026-01-09T13:10:31.404+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:10:31.403+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1912099926 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:10:31.404+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:10:31.404+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:10:31.404+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:10:31.408+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:10:31.408+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:10:31.408+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40936a8e]
2026-01-09T13:10:31.408+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a287e28]
2026-01-09T13:10:31.409+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:10:31.409+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:10:31.409+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=3, drafterId=2 (truncated)...]
2026-01-09T13:10:31.409+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=3, drafterId=2 (truncated)...]
2026-01-09T13:10:31.410+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:10:31.410+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:11:55.006+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:11:55.010+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:11:55.012+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-09T13:11:55.014+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:11:55.014+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-09T13:11:55.082+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:11:55.083+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:11:55.014+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:11:55.068+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:11:55.073+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-09T13:11:55.088+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:11:55.083+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-09T13:11:55.084+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:11:55.086+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-09T13:11:55.089+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:11:55.090+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:11:55.091+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:11:55.140+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:11:55.250+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:11:55.300+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-09T13:11:55.352+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:11:55.361+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:11:55.369+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:11:55.369+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:11:55.370+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:11:55.371+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-09T13:11:55.387+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-09T13:11:55.371+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:11:55.389+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:11:55.371+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:11:55.374+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:11:55.375+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:11:55.375+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:11:55.387+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-09T13:11:55.390+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:11:55.404+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:11:55.391+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:11:55.392+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:11:55.392+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:11:55.392+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:11:55.393+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-09T13:11:55.408+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:55.408+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:11:55.437+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-09T13:11:55.443+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:11:55.567+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-09T13:11:55.568+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:11:55.454+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-09T13:11:55.455+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-09T13:11:55.569+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/companies
2026-01-09T13:11:55.561+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:11:55.564+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:11:55.564+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:11:55.565+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@124bf724] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:55.565+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:55.565+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:55.573+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72ce1864] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:55.568+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-09T13:11:55.568+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:11:55.569+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-09T13:11:55.569+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-09T13:11:55.570+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:55.571+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:55.572+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:55.573+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bad45b] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:55.577+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-09T13:11:55.577+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:11:55.577+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-09T13:11:55.578+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-09T13:11:55.581+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fa8014] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:55.581+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10773081] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:55.581+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bacce3c] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:55.605+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-09T13:11:55.606+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-09T13:11:55.606+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:11:55.606+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-09T13:11:55.607+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-09T13:11:55.611+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@65640426 wrapping com.mysql.cj.jdbc.ConnectionImpl@3177fe65] will not be managed by Spring
2026-01-09T13:11:55.611+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@585558144 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:11:55.611+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1084804612 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:11:55.702+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@56755534 wrapping com.mysql.cj.jdbc.ConnectionImpl@6547f1d9] will not be managed by Spring
2026-01-09T13:11:55.719+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-09T13:11:55.720+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:55.720+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:55.721+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-09T13:11:55.721+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:55.728+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@179820200 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:11:55.734+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:11:55.734+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:11:55.735+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:11:55.735+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:11:55.743+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-09T13:11:55.743+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@106c24af] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:55.743+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54641ae5] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:55.743+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c80bc91] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:55.743+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:11:55.743+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:55.757+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:11:55.758+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-09T13:11:55.759+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-09T13:11:55.760+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 2(Long)
2026-01-09T13:11:55.760+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-09T13:11:55.843+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-09T13:11:55.997+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-09T13:11:55.843+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c28275b] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:55.919+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:11:55.919+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-09T13:11:55.987+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-09T13:11:55.998+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:56.001+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bad45b]
2026-01-09T13:11:56.002+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72ce1864]
2026-01-09T13:11:56.002+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@124bf724]
2026-01-09T13:11:56.019+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:56.019+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29fdd8a] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:56.002+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76a4b8d0] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:56.002+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:56.003+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1375681771 wrapping com.mysql.cj.jdbc.ConnectionImpl@3177fe65] will not be managed by Spring
2026-01-09T13:11:56.003+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:11:56.003+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-09T13:11:56.018+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:56.018+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2067498213 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:11:56.019+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1254761121 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:11:56.193+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:11:56.040+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@351651028 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:11:56.194+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-09T13:11:56.170+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62a95056] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:56.174+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:11:56.175+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fa8014]
2026-01-09T13:11:56.175+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10773081]
2026-01-09T13:11:56.185+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cbafa44] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:56.186+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:11:56.194+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 2(Long)
2026-01-09T13:11:56.199+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 2(Long)
2026-01-09T13:11:56.202+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 2(Long)
2026-01-09T13:11:56.202+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@865357830 wrapping com.mysql.cj.jdbc.ConnectionImpl@6547f1d9] will not be managed by Spring
2026-01-09T13:11:56.202+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:11:56.203+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:56.203+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2063056752 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:11:56.243+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-09T13:11:56.284+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:11:56.284+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:11:56.284+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@548522e9] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:56.406+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:11:56.284+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:11:56.360+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:11:56.383+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-09T13:11:56.384+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:11:56.384+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 2
2026-01-09T13:11:56.384+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-09T13:11:56.407+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:11:56.407+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54641ae5]
2026-01-09T13:11:56.428+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2086458272 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:11:56.432+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bacce3c]
2026-01-09T13:11:56.433+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@106c24af]
2026-01-09T13:11:56.434+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c80bc91]
2026-01-09T13:11:56.456+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 2
2026-01-09T13:11:56.461+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:11:56.463+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1587842621 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:11:56.463+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:11:56.467+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:11:56.474+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:11:56.475+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@53118901 wrapping com.mysql.cj.jdbc.ConnectionImpl@3177fe65] will not be managed by Spring
2026-01-09T13:11:56.476+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:56.476+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@419583134 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:11:56.477+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c28275b]
2026-01-09T13:11:56.477+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:11:56.477+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29fdd8a]
2026-01-09T13:11:56.477+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:11:56.477+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:11:56.524+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:11:56.585+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:11:56.604+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:11:56.604+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@713e59df] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:56.653+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:11:56.705+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:56.778+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-09T13:11:56.825+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:11:56.828+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:11:56.831+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:11:56.832+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:11:56.836+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:11:56.836+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@8802827 wrapping com.mysql.cj.jdbc.ConnectionImpl@6547f1d9] will not be managed by Spring
2026-01-09T13:11:56.837+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:11:56.837+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c1e6c58] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:56.838+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:11:56.883+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=3, drafterId=2 (truncated)...]
2026-01-09T13:11:56.888+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:11:56.903+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:11:56.918+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:11:56.919+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1095864959 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:11:56.958+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:11:56.958+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:11:56.959+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:11:56.966+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76a4b8d0]
2026-01-09T13:11:56.966+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62a95056]
2026-01-09T13:11:56.966+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:11:56.967+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:11:56.967+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cbafa44]
2026-01-09T13:11:56.970+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@548522e9]
2026-01-09T13:11:56.971+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:56.971+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:56.972+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:11:56.974+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:11:56.975+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:11:56.982+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:11:56.975+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6aef0f8c] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:56.976+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3be44fd4] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:56.977+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=3, drafterId=2 (truncated)...]
2026-01-09T13:11:56.983+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=3, drafterId=2 (truncated)...]
2026-01-09T13:11:56.983+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@713e59df]
2026-01-09T13:11:56.984+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@137185885 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:11:56.985+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@325550878 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:11:56.986+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:11:56.987+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:11:56.987+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:11:56.987+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:56.991+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59eb86e1] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:56.987+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:11:56.990+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:11:56.990+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c1e6c58]
2026-01-09T13:11:56.991+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1511578786 wrapping com.mysql.cj.jdbc.ConnectionImpl@6547f1d9] will not be managed by Spring
2026-01-09T13:11:56.991+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:11:56.993+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:11:56.993+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:56.994+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:11:57.003+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@117fa500] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:57.004+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long)
2026-01-09T13:11:57.007+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:11:57.009+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2121033691 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:11:57.010+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6aef0f8c]
2026-01-09T13:11:57.010+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:11:57.011+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:57.011+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long)
2026-01-09T13:11:57.011+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5971ad00] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:57.021+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 13
2026-01-09T13:11:57.022+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1265650381 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:11:57.025+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3be44fd4]
2026-01-09T13:11:57.025+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:11:57.025+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:57.043+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:11:57.043+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@102a10e0] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:57.050+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@162097118 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:11:57.062+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-01-09T13:11:57.069+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-01-09T13:11:57.078+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:11:57.079+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@117fa500]
2026-01-09T13:11:57.081+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59eb86e1]
2026-01-09T13:11:57.082+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:11:57.085+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:57.087+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:57.153+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@205b1bc7] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:57.152+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4431852a] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:57.155+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@671776521 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:11:57.156+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:11:57.157+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:11:57.154+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@629300643 wrapping com.mysql.cj.jdbc.ConnectionImpl@6547f1d9] will not be managed by Spring
2026-01-09T13:11:57.159+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:11:57.160+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:11:57.190+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:11:57.206+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:11:57.217+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@102a10e0]
2026-01-09T13:11:57.217+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4431852a]
2026-01-09T13:11:57.249+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-09T13:11:57.256+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:11:57.257+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:57.258+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:11:57.258+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@205b1bc7]
2026-01-09T13:11:57.267+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e08cd0a] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:57.268+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-09T13:11:57.269+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 13
2026-01-09T13:11:57.280+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5971ad00]
2026-01-09T13:11:57.281+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:57.271+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-09T13:11:57.274+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:11:57.282+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-09T13:11:57.277+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1323659579 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:11:57.279+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/companies
2026-01-09T13:11:57.281+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@972a55b] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:57.282+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:11:57.283+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:11:57.285+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:11:57.286+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-09T13:11:57.286+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1564414168 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:11:57.288+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:11:57.289+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-09T13:11:57.289+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:11:57.289+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-09T13:11:57.290+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:11:57.309+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:57.311+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e0833e3] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:57.321+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 13
2026-01-09T13:11:57.334+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:11:57.334+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1523562485 wrapping com.mysql.cj.jdbc.ConnectionImpl@6547f1d9] will not be managed by Spring
2026-01-09T13:11:57.335+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e08cd0a]
2026-01-09T13:11:57.335+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@972a55b]
2026-01-09T13:11:57.336+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-09T13:11:57.337+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:57.338+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:57.339+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 2(Long)
2026-01-09T13:11:57.343+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61700ef4] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:57.344+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@510a6c28] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:57.357+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@693698381 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:11:57.359+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1305363247 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:11:57.361+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:11:57.370+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-09T13:11:57.371+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:11:57.373+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:11:57.373+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e0833e3]
2026-01-09T13:11:57.375+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:11:57.390+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:11:57.392+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-09T13:11:57.411+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:11:57.416+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 13
2026-01-09T13:11:57.417+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 13
2026-01-09T13:11:57.427+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@510a6c28]
2026-01-09T13:11:57.441+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61700ef4]
2026-01-09T13:11:57.441+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:57.441+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:57.442+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@432bcbd8] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:57.442+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cea8d8b] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:57.443+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@583891687 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:11:57.444+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2122564882 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:11:57.450+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:11:57.450+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:11:57.451+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:11:57.453+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:11:57.457+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:11:57.458+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 13
2026-01-09T13:11:57.458+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@432bcbd8]
2026-01-09T13:11:57.460+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cea8d8b]
2026-01-09T13:11:57.461+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:57.463+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:57.466+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ea639f] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:57.467+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@385cb3b6] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:57.467+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@335682673 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:11:57.467+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@284354531 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:11:57.468+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:11:57.468+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:11:57.468+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:11:57.469+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:11:57.474+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:11:57.474+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 13
2026-01-09T13:11:57.475+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@385cb3b6]
2026-01-09T13:11:57.475+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ea639f]
2026-01-09T13:11:57.476+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:57.476+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:57.477+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@687c5efd] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:57.482+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b4dfcf1] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:57.483+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@895516999 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:11:57.484+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1105302172 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:11:57.484+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:11:57.484+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:11:57.488+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 38(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:11:57.489+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:11:57.506+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:11:57.507+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 13
2026-01-09T13:11:57.509+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b4dfcf1]
2026-01-09T13:11:57.522+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@687c5efd]
2026-01-09T13:11:57.526+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:11:57.526+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:11:57.526+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-09T13:11:57.527+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a768cc3] was not registered for synchronization because synchronization is not active
2026-01-09T13:11:57.528+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:11:57.528+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@16232646 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:11:57.531+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:11:57.532+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-09T13:11:57.538+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:11:57.539+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a768cc3]
2026-01-09T13:11:57.541+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:11:57.543+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-09T13:11:57.544+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:12:00.441+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-09T13:12:00.443+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-09T13:12:00.444+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-09T13:12:00.444+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-09T13:12:00.445+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-09T13:12:00.445+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-09T13:12:00.446+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_user3, password=1234)]
2026-01-09T13:12:00.446+09:00  INFO 23648 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 로그인 시도 - username: test_user3
2026-01-09T13:12:00.447+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:00.448+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@493b56f1] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:00.450+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@931055495 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:12:00.453+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-09T13:12:00.455+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_user3(String)
2026-01-09T13:12:00.459+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-09T13:12:00.460+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@493b56f1]
2026-01-09T13:12:00.545+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:00.545+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24c5b16c] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:00.546+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@308832056 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:12:00.546+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-09T13:12:00.546+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 4(Long)
2026-01-09T13:12:00.550+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-09T13:12:00.550+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24c5b16c]
2026-01-09T13:12:00.551+09:00  INFO 23648 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 로그인 성공 - userId: 4, role: ACCOUNTANT, companyId: 1
2026-01-09T13:12:00.551+09:00  INFO 23648 --- [http-nio-8080-exec-10] SECURITY                                 : LOGIN_SUCCESS userId=4 username=test_user3 role=ACCOUNTANT
2026-01-09T13:12:00.552+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:12:00.552+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=4, username=test_user3, password (truncated)...]
2026-01-09T13:12:00.553+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:12:00.992+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-09T13:12:00.997+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-09T13:12:00.999+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/companies
2026-01-09T13:12:01.001+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-09T13:12:01.006+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-09T13:12:01.008+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-09T13:12:01.008+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.009+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67e848d] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.019+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@977077225 wrapping com.mysql.cj.jdbc.ConnectionImpl@6547f1d9] will not be managed by Spring
2026-01-09T13:12:01.020+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-09T13:12:01.020+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 4(Long)
2026-01-09T13:12:01.023+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-01-09T13:12:01.023+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67e848d]
2026-01-09T13:12:01.024+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:12:01.024+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-09T13:12:01.025+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:12:01.190+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:12:01.199+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:12:01.200+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:12:01.203+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-09T13:12:01.207+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:12:01.207+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-09T13:12:01.239+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:12:01.241+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:12:01.252+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:12:01.241+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-09T13:12:01.241+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:12:01.249+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:12:01.251+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:12:01.254+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-09T13:12:01.254+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:12:01.272+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-09T13:12:01.256+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:12:01.257+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-09T13:12:01.266+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:12:01.273+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-09T13:12:01.271+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:12:01.274+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:12:01.272+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:12:01.272+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-09T13:12:01.273+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:12:01.274+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:12:01.274+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-09T13:12:01.275+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:12:01.276+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:12:01.277+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-09T13:12:01.278+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:12:01.281+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:12:01.282+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-09T13:12:01.339+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:12:01.348+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.348+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-09T13:12:01.353+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:12:01.354+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:12:01.368+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-09T13:12:01.368+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.368+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56ceede9] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.369+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:12:01.369+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.369+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.370+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.371+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fde90e3] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.371+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.371+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27645230] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.372+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@301d573c] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.373+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@370ed76a] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.373+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@180b2a1f] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.376+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1503421927 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:12:01.374+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2082950300 wrapping com.mysql.cj.jdbc.ConnectionImpl@6547f1d9] will not be managed by Spring
2026-01-09T13:12:01.375+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1437372205 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:12:01.376+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:12:01.376+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:01.377+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:12:01.377+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@726809540 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:12:01.377+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1713550093 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:12:01.377+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2016105591 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:12:01.377+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-09T13:12:01.377+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:01.382+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:12:01.382+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:12:01.382+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:12:01.382+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:01.385+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:01.385+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:12:01.385+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:12:01.386+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:12:01.386+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:01.386+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27645230]
2026-01-09T13:12:01.386+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:12:01.387+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fde90e3]
2026-01-09T13:12:01.389+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.389+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56ceede9]
2026-01-09T13:12:01.389+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:12:01.389+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ab0640f] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.390+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.390+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:01.391+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:12:01.391+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:12:01.391+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1598048443 wrapping com.mysql.cj.jdbc.ConnectionImpl@6547f1d9] will not be managed by Spring
2026-01-09T13:12:01.392+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:12:01.391+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@264b6748] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.391+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@370ed76a]
2026-01-09T13:12:01.397+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.397+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b5dd237] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.391+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@301d573c]
2026-01-09T13:12:01.392+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:01.393+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1306252205 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:12:01.396+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:12:01.399+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1338054188 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:12:01.399+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.400+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:01.402+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:01.408+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:01.404+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:12:01.406+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:12:01.417+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@180b2a1f]
2026-01-09T13:12:01.406+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:01.407+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51ccf11e] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.409+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:12:01.420+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.421+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:01.421+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1943911670 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:12:01.424+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:01.422+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:12:01.423+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73af28ae] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.426+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:01.427+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:01.428+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:01.435+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:12:01.435+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:01.436+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2086418134 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:12:01.437+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@264b6748]
2026-01-09T13:12:01.437+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ab0640f]
2026-01-09T13:12:01.437+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.438+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b5dd237]
2026-01-09T13:12:01.438+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:01.439+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:12:01.439+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.439+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@689bef8b] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.440+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.443+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:01.444+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:12:01.444+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1544c40e] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.444+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@123952720 wrapping com.mysql.cj.jdbc.ConnectionImpl@6547f1d9] will not be managed by Spring
2026-01-09T13:12:01.445+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@780b106e] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.446+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:12:01.448+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1275939509 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:12:01.448+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:12:01.449+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@229812530 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:12:01.454+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:01.458+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:12:01.459+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:12:01.459+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:12:01.460+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:12:01.461+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51ccf11e]
2026-01-09T13:12:01.465+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:01.471+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-09T13:12:01.473+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:12:01.474+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-09T13:12:01.477+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73af28ae]
2026-01-09T13:12:01.477+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:12:01.478+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:12:01.478+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:12:01.481+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:12:01.487+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:12:01.488+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:12:01.489+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@689bef8b]
2026-01-09T13:12:01.490+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:12:01.491+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:12:01.491+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:12:01.493+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.493+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:12:01.493+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-09T13:12:01.497+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-09T13:12:01.500+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.500+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b6d0606] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.500+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1544c40e]
2026-01-09T13:12:01.502+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-09T13:12:01.502+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1230e257] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.502+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@205345111 wrapping com.mysql.cj.jdbc.ConnectionImpl@6547f1d9] will not be managed by Spring
2026-01-09T13:12:01.502+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.504+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@254746e2] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.503+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-09T13:12:01.504+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1726885524 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:12:01.504+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:01.504+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-09T13:12:01.505+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@370180848 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:12:01.505+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-09T13:12:01.505+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:12:01.506+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:01.506+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@780b106e]
2026-01-09T13:12:01.506+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:01.506+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-09T13:12:01.507+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-09T13:12:01.508+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.509+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:01.510+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.513+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:01.517+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c8295c2] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.517+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73d4fbc6] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.517+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b6d0606]
2026-01-09T13:12:01.519+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1554670172 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:12:01.519+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:12:01.519+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@545860403 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:12:01.523+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:12:01.523+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:01.523+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1230e257]
2026-01-09T13:12:01.523+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:01.524+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:12:01.524+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:01.525+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:12:01.525+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:01.525+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:12:01.532+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:01.537+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:12:01.539+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@254746e2]
2026-01-09T13:12:01.540+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:12:01.543+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.544+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fb47759] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.545+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@274419739 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:12:01.566+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:01.569+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:12:01.569+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c8295c2]
2026-01-09T13:12:01.592+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:12:01.592+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.593+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23dd1edb] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.593+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:01.595+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1259975655 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:12:01.599+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73d4fbc6]
2026-01-09T13:12:01.600+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:12:01.600+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.601+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:12:01.601+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@363bb579] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.603+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1659200179 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:12:01.603+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:01.606+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:01.619+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-09T13:12:01.622+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fb47759]
2026-01-09T13:12:01.636+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-09T13:12:01.637+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.644+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23dd1edb]
2026-01-09T13:12:01.649+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43b2e8cc] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.650+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.651+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1863336284 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:12:01.651+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4db024b6] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.652+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:12:01.654+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:01.657+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@105959453 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:12:01.658+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-09T13:12:01.658+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@363bb579]
2026-01-09T13:12:01.659+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:12:01.660+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.661+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-09T13:12:01.668+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49ba9392] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.670+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@574715809 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:12:01.675+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-09T13:12:01.675+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:12:01.676+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43b2e8cc]
2026-01-09T13:12:01.677+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-09T13:12:01.677+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.680+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55003d28] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.681+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@27286476 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:12:01.683+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-09T13:12:01.684+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:01.684+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4db024b6]
2026-01-09T13:12:01.685+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:01.686+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.687+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@304cb1bb] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.687+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2090182288 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:12:01.693+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:01.694+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:01.699+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:01.701+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55003d28]
2026-01-09T13:12:01.705+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.709+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:01.711+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4102f2d5] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.711+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@304cb1bb]
2026-01-09T13:12:01.721+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-09T13:12:01.724+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@356478624 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:12:01.724+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.724+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49ba9392]
2026-01-09T13:12:01.725+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:12:01.725+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a7e6601] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.725+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.726+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:12:01.726+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2436c5] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.726+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@795529628 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:12:01.736+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@496960336 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:12:01.736+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:12:01.736+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:01.737+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:12:01.738+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:01.740+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-09T13:12:01.743+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4102f2d5]
2026-01-09T13:12:01.744+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.744+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:01.745+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-09T13:12:01.750+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45c634f5] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.751+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2436c5]
2026-01-09T13:12:01.751+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a7e6601]
2026-01-09T13:12:01.751+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@319087298 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:12:01.752+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.752+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.752+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:01.752+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cd7c96d] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.752+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2880795a] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.753+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:01.754+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1038374444 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:12:01.754+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@566713381 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:12:01.756+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:12:01.757+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:01.757+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:12:01.758+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:01.770+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:01.771+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:01.772+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-09T13:12:01.773+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2880795a]
2026-01-09T13:12:01.773+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45c634f5]
2026-01-09T13:12:01.773+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cd7c96d]
2026-01-09T13:12:01.774+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:12:01.775+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:12:01.775+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.776+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-09T13:12:01.776+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-09T13:12:01.776+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38b77405] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.777+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:12:01.779+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:12:01.781+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@436821727 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:12:01.782+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:12:01.784+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-09T13:12:01.823+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-09T13:12:01.842+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38b77405]
2026-01-09T13:12:01.843+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.843+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f874f20] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.878+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2090011529 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:12:01.857+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:12:01.859+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:12:01.880+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:01.882+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:01.892+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:12:01.897+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:12:01.898+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:12:01.905+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:12:01.905+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:12:01.907+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:12:01.906+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:12:01.907+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:12:01.907+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:12:01.909+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:01.914+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:12:01.915+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.920+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f874f20]
2026-01-09T13:12:01.922+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@93d4ebb] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.922+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.923+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.923+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20b738bd] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.923+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1354315682 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:12:01.924+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3017717f] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.924+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1572563652 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:12:01.926+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:12:01.927+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1974257170 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:12:01.936+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:12:01.938+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:12:01.939+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:12:01.955+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:12:01.956+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:12:01.962+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-09T13:12:01.964+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:12:01.964+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:12:01.965+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3017717f]
2026-01-09T13:12:01.965+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20b738bd]
2026-01-09T13:12:01.966+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@93d4ebb]
2026-01-09T13:12:01.966+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.967+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.975+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:01.976+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f9e4c72] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.976+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d94747c] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.976+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@440d60f3] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:01.977+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1418281591 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:12:01.977+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1417662371 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:12:01.978+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@665232991 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:12:01.978+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:01.983+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:01.984+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:01.984+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:01.984+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:01.985+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:02.000+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:02.000+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:02.001+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:02.007+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d94747c]
2026-01-09T13:12:02.007+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@440d60f3]
2026-01-09T13:12:02.008+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f9e4c72]
2026-01-09T13:12:02.018+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:12:02.021+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:12:02.021+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:12:02.022+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:12:02.038+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:12:02.039+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-09T13:12:02.039+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:12:02.040+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:12:02.041+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:12:04.481+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:12:04.481+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-09T13:12:04.481+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:12:04.481+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:12:04.481+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-09T13:12:04.482+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:12:04.485+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:12:04.488+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:12:04.490+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-09T13:12:04.492+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:12:04.496+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-09T13:12:04.498+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:12:04.503+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:12:04.505+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:12:04.505+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:12:04.506+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-09T13:12:04.508+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:12:04.511+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:12:04.554+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-09T13:12:04.555+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:12:04.644+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-09T13:12:04.648+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-09T13:12:04.557+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:12:04.558+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-09T13:12:04.631+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:12:04.644+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-09T13:12:04.650+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-09T13:12:04.650+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:12:04.650+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-09T13:12:04.651+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:12:04.651+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:12:04.651+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:12:04.651+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-09T13:12:04.652+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:12:04.653+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.652+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-09T13:12:04.652+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:12:04.653+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-09T13:12:04.653+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:12:04.653+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:12:04.653+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@108e22bf] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.654+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-09T13:12:04.654+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:12:04.654+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-09T13:12:04.654+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:12:04.655+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.657+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.657+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.659+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:12:04.659+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.682+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59f92565] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.683+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@626072912 wrapping com.mysql.cj.jdbc.ConnectionImpl@6547f1d9] will not be managed by Spring
2026-01-09T13:12:04.684+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74f0eb17] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.684+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a2a7f81] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.685+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.686+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3abb89af] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.687+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:12:04.688+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c090203] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.691+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1713204909 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:12:04.691+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:12:04.691+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1315895967 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:12:04.691+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1152147417 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:12:04.691+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@974748746 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:12:04.691+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:04.694+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:12:04.695+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:04.698+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1599948442 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:12:04.698+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:12:04.699+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:04.700+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-09T13:12:04.701+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:12:04.701+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:04.702+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:12:04.704+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:12:04.705+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@108e22bf]
2026-01-09T13:12:04.707+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-09T13:12:04.707+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:04.707+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:04.708+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.709+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:12:04.710+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3abb89af]
2026-01-09T13:12:04.710+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74f0eb17]
2026-01-09T13:12:04.714+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:12:04.714+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d796bae] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.715+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59f92565]
2026-01-09T13:12:04.716+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.716+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.716+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a2a7f81]
2026-01-09T13:12:04.717+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@484706084 wrapping com.mysql.cj.jdbc.ConnectionImpl@6547f1d9] will not be managed by Spring
2026-01-09T13:12:04.717+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.717+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5321f483] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.717+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bce9db5] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.718+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.720+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:04.720+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d2107ba] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.720+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:12:04.721+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1676232400 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:12:04.721+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2092661872 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:12:04.722+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@681ef50b] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.722+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:04.722+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1380097630 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:12:04.723+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c090203]
2026-01-09T13:12:04.724+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:04.724+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:04.724+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@448679760 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:12:04.724+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:04.725+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:12:04.725+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:04.726+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:04.726+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:04.726+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:04.726+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:04.727+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:12:04.730+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:04.732+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d796bae]
2026-01-09T13:12:04.732+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:04.733+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:04.735+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:12:04.736+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.736+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bce9db5]
2026-01-09T13:12:04.737+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5321f483]
2026-01-09T13:12:04.738+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:04.738+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@143e28e5] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.739+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.739+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:12:04.740+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.740+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d2107ba]
2026-01-09T13:12:04.742+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@42730967 wrapping com.mysql.cj.jdbc.ConnectionImpl@6547f1d9] will not be managed by Spring
2026-01-09T13:12:04.742+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29c622e6] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.742+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:04.742+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@542c0e01] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.743+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:12:04.743+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:12:04.743+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:12:04.743+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1991913822 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:12:04.743+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@681ef50b]
2026-01-09T13:12:04.744+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:12:04.745+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-09T13:12:04.747+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:12:04.751+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:12:04.751+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:12:04.754+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:12:04.763+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:12:04.767+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-09T13:12:04.767+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:12:04.769+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:12:04.769+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@938668085 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:12:04.770+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-09T13:12:04.770+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:12:04.771+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:12:04.775+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:12:04.775+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:12:04.776+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@143e28e5]
2026-01-09T13:12:04.776+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.778+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-09T13:12:04.781+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-09T13:12:04.785+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:12:04.786+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:12:04.786+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.786+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68234131] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.786+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29c622e6]
2026-01-09T13:12:04.786+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:12:04.786+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-09T13:12:04.786+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1eac93b7] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.787+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@108720093 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:12:04.787+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.788+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:12:04.788+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-09T13:12:04.788+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-09T13:12:04.788+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2075191687 wrapping com.mysql.cj.jdbc.ConnectionImpl@6547f1d9] will not be managed by Spring
2026-01-09T13:12:04.788+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:12:04.789+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7618857a] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.793+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:12:04.791+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.791+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-09T13:12:04.791+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@542c0e01]
2026-01-09T13:12:04.791+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:04.793+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1859209293 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:12:04.793+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49ca195f] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.793+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-09T13:12:04.794+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.797+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54ce86b3] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.794+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:04.794+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:04.794+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1560111211 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:12:04.800+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:12:04.796+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.799+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1795478389 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:12:04.799+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:04.800+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:12:04.800+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-09T13:12:04.800+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@527f954d] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.804+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:12:04.805+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:04.806+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68234131]
2026-01-09T13:12:04.808+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2111466761 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:12:04.808+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:04.809+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1eac93b7]
2026-01-09T13:12:04.809+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:12:04.812+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:12:04.811+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.811+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:12:04.811+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:04.811+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7618857a]
2026-01-09T13:12:04.817+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-09T13:12:04.817+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5da25c2c] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.818+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49ca195f]
2026-01-09T13:12:04.818+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:04.818+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.820+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:12:04.820+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@804955232 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:12:04.825+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:04.823+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:12:04.824+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34268396] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.824+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-09T13:12:04.826+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-09T13:12:04.826+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:04.827+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:12:04.827+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@111665981 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:12:04.835+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:12:04.833+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54ce86b3]
2026-01-09T13:12:04.833+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:04.834+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-09T13:12:04.835+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:12:04.836+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:12:04.837+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:12:04.837+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@527f954d]
2026-01-09T13:12:04.837+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-09T13:12:04.840+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:12:04.843+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-09T13:12:04.843+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.843+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-09T13:12:04.847+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:12:04.849+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-09T13:12:04.850+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d0c6687] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.851+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-09T13:12:04.855+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:12:04.857+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:12:04.858+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@595025814 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:12:04.858+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.859+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:12:04.859+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-09T13:12:04.860+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:04.860+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-09T13:12:04.860+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:04.867+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:04.860+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c251551] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.861+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:12:04.866+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-09T13:12:04.866+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5da25c2c]
2026-01-09T13:12:04.866+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34268396]
2026-01-09T13:12:04.868+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@710362058 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:12:04.873+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:12:04.874+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.874+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:12:04.887+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:12:04.875+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.887+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1eca5e22] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.875+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:12:04.885+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:12:04.886+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@344d2cd5] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.888+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:12:04.889+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@519062622 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:12:04.890+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:12:04.891+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.891+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1220723803 wrapping com.mysql.cj.jdbc.ConnectionImpl@6547f1d9] will not be managed by Spring
2026-01-09T13:12:04.893+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:12:04.895+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:12:04.895+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:04.900+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@880cadf] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.900+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:04.904+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:12:04.906+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-09T13:12:04.914+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-09T13:12:04.915+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d0c6687]
2026-01-09T13:12:04.916+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@10534333 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:12:04.916+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:04.920+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:12:04.921+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c251551]
2026-01-09T13:12:04.926+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.937+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:12:04.941+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:12:04.939+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:12:04.939+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.940+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77874fa] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.943+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:12:04.944+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@125b63b4] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.944+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1773015756 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:12:04.947+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:12:04.946+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.947+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@643851059 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:12:04.949+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-09T13:12:04.950+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-09T13:12:04.950+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28fafa3e] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.951+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:04.951+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:04.952+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1eca5e22]
2026-01-09T13:12:04.952+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:12:04.952+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1839412300 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:12:04.953+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@344d2cd5]
2026-01-09T13:12:04.953+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:04.953+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.953+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@880cadf]
2026-01-09T13:12:04.986+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.987+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77614f8f] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.988+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2042209678 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:12:04.989+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:04.990+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:04.961+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:12:04.967+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:04.994+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f26d68f] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.970+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47c352ac] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:04.983+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-09T13:12:04.993+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:04.994+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-09T13:12:04.995+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1657830970 wrapping com.mysql.cj.jdbc.ConnectionImpl@6547f1d9] will not be managed by Spring
2026-01-09T13:12:05.001+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@187973432 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:12:05.004+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77874fa]
2026-01-09T13:12:05.004+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@125b63b4]
2026-01-09T13:12:05.005+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:05.013+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77614f8f]
2026-01-09T13:12:05.007+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:05.020+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:12:05.007+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:05.008+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:05.011+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:05.019+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:12:05.020+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:05.020+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:12:05.021+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:05.021+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2362842f] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:05.021+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1966fb2b] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:05.021+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28fafa3e]
2026-01-09T13:12:05.059+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:12:05.060+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:12:05.063+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:12:05.053+09:00 DEBUG 23648 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:12:05.054+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1736047389 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:12:05.058+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1349090672 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:12:05.067+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:12:05.068+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:12:05.071+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:05.071+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:05.071+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:05.072+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:12:05.073+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:12:05.075+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:12:05.087+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47c352ac]
2026-01-09T13:12:05.088+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f26d68f]
2026-01-09T13:12:05.107+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:05.088+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:05.089+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-09T13:12:05.089+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:12:05.106+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:05.127+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f80eaaf] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:05.108+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c57ee38] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:05.109+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:12:05.124+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:12:05.125+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:05.127+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1376493505 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:12:05.132+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1976360339 wrapping com.mysql.cj.jdbc.ConnectionImpl@6547f1d9] will not be managed by Spring
2026-01-09T13:12:05.140+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:12:05.141+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-09T13:12:05.142+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:12:05.142+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2362842f]
2026-01-09T13:12:05.143+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:12:05.143+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:12:05.143+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:12:05.146+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1966fb2b]
2026-01-09T13:12:05.147+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:05.147+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:05.148+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:12:05.151+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:12:05.152+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:12:05.152+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:05.153+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20f8c502] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:05.154+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dab297c] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:05.156+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:12:05.157+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a1a2638] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:05.157+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1062329019 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:12:05.158+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1524599578 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:12:05.161+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:12:05.158+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:05.159+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@613100531 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:12:05.161+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:12:05.161+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:12:05.162+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dcb7079] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:05.164+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:05.165+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-09T13:12:05.165+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-09T13:12:05.169+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:12:05.170+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@227577965 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:12:05.170+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:05.172+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c57ee38]
2026-01-09T13:12:05.173+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f80eaaf]
2026-01-09T13:12:05.174+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:12:05.175+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:05.175+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:05.178+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d967f06] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:05.177+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:12:05.177+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cdb67ae] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:05.180+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@902512521 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:12:05.181+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-09T13:12:05.183+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dab297c]
2026-01-09T13:12:05.181+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:05.182+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:12:05.182+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@524186659 wrapping com.mysql.cj.jdbc.ConnectionImpl@6547f1d9] will not be managed by Spring
2026-01-09T13:12:05.183+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:05.183+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:05.183+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a1a2638]
2026-01-09T13:12:05.183+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20f8c502]
2026-01-09T13:12:05.186+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:12:05.186+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:05.187+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@495f4384] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:05.187+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:05.187+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:12:05.187+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:12:05.187+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:12:05.189+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@185db0d3] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:05.189+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2097898266 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:12:05.189+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-09T13:12:05.190+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dcb7079]
2026-01-09T13:12:05.190+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2120988175 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:12:05.192+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:12:05.192+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:05.193+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:05.193+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:12:05.193+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:05.195+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d967f06]
2026-01-09T13:12:05.195+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-09T13:12:05.197+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@344ab494] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:05.198+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-09T13:12:05.207+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1114915548 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:12:05.207+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:05.201+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:12:05.204+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:05.207+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:12:05.207+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cdb67ae]
2026-01-09T13:12:05.208+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:05.213+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:12:05.216+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-09T13:12:05.216+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:12:05.218+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-09T13:12:05.220+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:12:05.220+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:05.220+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:12:05.222+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-09T13:12:05.222+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@495f4384]
2026-01-09T13:12:05.223+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:12:05.224+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@185db0d3]
2026-01-09T13:12:05.224+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:05.225+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:12:05.226+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:05.226+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:12:05.226+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:12:05.226+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@344ab494]
2026-01-09T13:12:05.227+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18ada59a] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:05.228+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:05.232+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:12:05.233+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:12:05.233+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@727553640 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:12:05.234+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:05.233+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4313b6ec] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:05.234+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:12:05.234+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:12:05.235+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:05.236+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@211796382 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:12:05.238+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:12:05.242+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:12:05.244+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:12:05.245+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:05.248+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18ada59a]
2026-01-09T13:12:05.254+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:05.254+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:12:05.257+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cbff9d] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:05.258+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4313b6ec]
2026-01-09T13:12:05.259+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1992231691 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:12:05.260+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:05.266+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:12:05.266+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@758294d1] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:05.270+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:12:05.270+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@737736795 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:12:05.272+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:05.276+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:05.285+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-09T13:12:05.288+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cbff9d]
2026-01-09T13:12:05.289+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:12:05.290+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d2f3d99] was not registered for synchronization because synchronization is not active
2026-01-09T13:12:05.290+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:05.295+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@558105270 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:12:05.304+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@758294d1]
2026-01-09T13:12:05.304+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:12:05.305+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:12:05.306+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:12:05.307+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:12:05.308+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:12:05.333+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:12:05.339+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d2f3d99]
2026-01-09T13:12:05.339+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:12:05.342+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-09T13:12:05.344+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:13:20.834+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:13:20.834+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/38
2026-01-09T13:13:20.834+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:13:20.837+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-09T13:13:20.837+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/38
2026-01-09T13:13:20.838+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-09T13:13:20.838+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:13:20.838+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/38
2026-01-09T13:13:20.839+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:13:20.839+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:13:20.839+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/38
2026-01-09T13:13:20.840+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:13:20.840+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-09T13:13:20.841+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:13:20.842+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/38
2026-01-09T13:13:20.842+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:13:20.846+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-09T13:13:20.846+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/38
2026-01-09T13:13:20.846+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:13:20.850+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/38
2026-01-09T13:13:20.847+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/38", parameters={}
2026-01-09T13:13:20.847+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:13:20.848+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-09T13:13:20.849+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-09T13:13:20.850+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:13:20.851+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/38
2026-01-09T13:13:20.851+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-09T13:13:20.852+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:13:20.853+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-09T13:13:20.853+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-09T13:13:20.853+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:20.853+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/38", parameters={}
2026-01-09T13:13:20.854+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:20.854+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:20.854+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-09T13:13:20.854+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-09T13:13:20.855+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fd0776c] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:20.855+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-09T13:13:20.855+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a12d681] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:20.855+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4992335d] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:20.855+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-09T13:13:20.856+09:00  INFO 23648 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 4, companyId: 1
2026-01-09T13:13:20.856+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:20.859+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-09T13:13:20.859+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:20.860+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@709341836 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:13:20.863+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76ac4bf8] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:20.864+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@293655691 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:13:20.865+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-09T13:13:20.864+09:00  INFO 23648 --- [http-nio-8080-exec-11] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 4, companyId: 1
2026-01-09T13:13:20.864+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26fb95d8] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:20.864+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1110661259 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:13:20.866+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:13:20.865+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:13:20.865+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 38(Long), 1(Long)
2026-01-09T13:13:20.866+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:20.866+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@553300839 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:13:20.867+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1153492403 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:13:20.869+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-09T13:13:20.870+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:13:20.870+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a58e384] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:20.871+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-09T13:13:20.872+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-09T13:13:20.873+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-09T13:13:20.874+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 38(Long), 1(Long)
2026-01-09T13:13:20.875+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:13:20.875+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1413298031 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:13:20.876+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:13:20.876+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a12d681]
2026-01-09T13:13:20.878+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4992335d]
2026-01-09T13:13:20.879+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-09T13:13:20.880+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:20.881+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:13:20.881+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:13:20.881+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1933bfdb] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:20.881+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:13:20.883+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:13:20.883+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2103964799 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:13:20.885+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:13:20.887+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fd0776c]
2026-01-09T13:13:20.888+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-09T13:13:20.889+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:20.889+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-09T13:13:20.890+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-09T13:13:20.899+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 38(Long), 1(Long)
2026-01-09T13:13:20.899+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44f9ffec] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:20.900+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76ac4bf8]
2026-01-09T13:13:20.900+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26fb95d8]
2026-01-09T13:13:20.901+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1431884573 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:13:20.902+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:20.903+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:13:20.903+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-09T13:13:20.903+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-09T13:13:20.903+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:13:20.904+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a860e4b] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:20.905+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a58e384]
2026-01-09T13:13:20.905+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=6, userId=4, si (truncated)...]
2026-01-09T13:13:20.905+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1933bfdb]
2026-01-09T13:13:20.905+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:13:20.905+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@472133067 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:13:20.905+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:13:20.906+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:13:20.906+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:20.908+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-09T13:13:20.908+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=6, userId=4, si (truncated)...]
2026-01-09T13:13:20.908+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17100d62] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:20.912+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 38(Long), 1(Long)
2026-01-09T13:13:20.913+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:13:20.914+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1595025079 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:13:20.916+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-09T13:13:20.918+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 38(Long), 1(Long)
2026-01-09T13:13:20.918+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:13:20.919+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44f9ffec]
2026-01-09T13:13:20.920+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:13:20.920+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-09T13:13:20.920+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:13:20.921+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a860e4b]
2026-01-09T13:13:20.921+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-09T13:13:20.921+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:13:20.922+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:20.923+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17100d62]
2026-01-09T13:13:20.923+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b52d84e] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:20.924+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:20.926+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16966679] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:20.925+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@346590811 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:13:20.926+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-09T13:13:20.926+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@24773332 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:13:20.926+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 38(Long), 1(Long)
2026-01-09T13:13:20.929+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-09T13:13:20.931+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 38(Long), 1(Long)
2026-01-09T13:13:20.931+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-09T13:13:20.931+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b52d84e]
2026-01-09T13:13:20.932+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:20.932+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b45853d] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:20.933+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@918075059 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:13:20.936+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-09T13:13:20.936+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-09T13:13:20.936+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 38(Long), 1(Long)
2026-01-09T13:13:20.936+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16966679]
2026-01-09T13:13:20.938+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:20.938+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4caf39aa] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:20.939+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-09T13:13:20.939+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1773091816 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:13:20.939+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b45853d]
2026-01-09T13:13:20.939+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:13:20.939+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:20.939+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:13:20.940+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54700077] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:20.941+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@594221993 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:13:20.942+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:13:20.942+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:13:20.943+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:13:20.943+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4caf39aa]
2026-01-09T13:13:20.945+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:13:20.946+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=38, drafterId=2, r (truncated)...]
2026-01-09T13:13:20.948+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:13:20.949+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:13:20.950+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54700077]
2026-01-09T13:13:20.975+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:13:20.988+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=38, drafterId=2, r (truncated)...]
2026-01-09T13:13:20.991+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:13:22.946+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-09T13:13:22.946+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:13:22.946+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:13:22.946+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:13:22.946+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-09T13:13:22.946+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:13:22.950+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:13:22.950+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:13:22.952+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:13:22.951+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-09T13:13:22.953+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-09T13:13:22.954+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:13:22.954+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:13:22.955+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:13:22.956+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-09T13:13:22.957+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:13:22.964+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:13:22.964+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-09T13:13:22.967+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:13:22.969+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:13:22.969+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-09T13:13:22.969+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:13:22.971+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:13:22.971+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-09T13:13:22.972+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:13:22.973+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:13:22.973+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-09T13:13:22.974+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-09T13:13:22.974+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:13:22.974+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-09T13:13:22.975+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:13:22.975+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:13:22.975+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-09T13:13:22.980+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:13:22.981+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:13:22.981+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-09T13:13:22.985+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:13:22.986+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:13:22.986+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-09T13:13:22.988+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-09T13:13:22.988+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:22.989+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:22.996+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e0c57ff] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:22.990+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:13:22.991+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:13:22.992+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-09T13:13:22.992+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-09T13:13:22.993+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73df209] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.002+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.004+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.004+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1085927215 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:13:23.005+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.006+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.006+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e4a0435] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.008+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cbc6e51] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.009+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:13:23.013+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:13:23.009+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27b30356] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.009+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a8d8950] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.015+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@830420468 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:13:23.017+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:13:23.018+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1184134929 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:13:23.018+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:13:23.019+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@951945921 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:13:23.020+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-09T13:13:23.021+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:13:23.021+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e0c57ff]
2026-01-09T13:13:23.022+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:13:23.023+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@148449255 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:13:23.025+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-09T13:13:23.024+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1329237930 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:13:23.024+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:13:23.025+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.025+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:13:23.026+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:13:23.030+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:13:23.032+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1eedc202] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.035+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:13:23.041+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:13:23.055+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73df209]
2026-01-09T13:13:23.071+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@915284306 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:13:23.072+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:13:23.072+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:13:23.082+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:13:23.082+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:13:23.084+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-09T13:13:23.086+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:13:23.085+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cbc6e51]
2026-01-09T13:13:23.086+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e4a0435]
2026-01-09T13:13:23.088+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.086+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:13:23.086+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27b30356]
2026-01-09T13:13:23.087+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:13:23.088+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c0e6767] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.089+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:13:23.089+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:13:23.090+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.090+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:13:23.090+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@93644679 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:13:23.091+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:13:23.092+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a8d8950]
2026-01-09T13:13:23.097+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-09T13:13:23.099+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ec1319e] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.099+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:13:23.103+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@467889053 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:13:23.100+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:13:23.100+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1eedc202]
2026-01-09T13:13:23.100+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.105+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66832317] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.102+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-09T13:13:23.104+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:13:23.104+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:13:23.105+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:13:23.105+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.106+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1840026762 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:13:23.107+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-09T13:13:23.108+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:13:23.108+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:13:23.109+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d8727f7] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.109+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:13:23.109+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-09T13:13:23.114+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:13:23.116+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1024070039 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:13:23.116+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:13:23.117+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-09T13:13:23.118+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:13:23.118+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:13:23.119+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:13:23.120+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:13:23.123+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.132+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:13:23.135+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-09T13:13:23.136+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:13:23.141+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ec1319e]
2026-01-09T13:13:23.147+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c0e6767]
2026-01-09T13:13:23.148+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@655092e5] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.149+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.151+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66832317]
2026-01-09T13:13:23.151+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.152+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:13:23.155+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1042305937 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:13:23.162+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48b0bce7] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.163+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.163+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12714a3d] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.164+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:13:23.171+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:13:23.171+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf8683] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.172+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:13:23.171+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@855355245 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:13:23.172+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1442567212 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:13:23.172+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:13:23.173+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2125170230 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:13:23.175+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:13:23.175+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-09T13:13:23.176+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:13:23.180+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:13:23.182+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-09T13:13:23.186+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:13:23.188+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-09T13:13:23.188+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-09T13:13:23.191+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d8727f7]
2026-01-09T13:13:23.191+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:13:23.191+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-09T13:13:23.192+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.192+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-09T13:13:23.192+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48bb441f] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.193+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:13:23.199+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-09T13:13:23.199+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1022847584 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:13:23.201+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-09T13:13:23.200+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@655092e5]
2026-01-09T13:13:23.200+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.201+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:13:23.201+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-09T13:13:23.201+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:13:23.201+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf8683]
2026-01-09T13:13:23.201+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.201+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18d12956] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.202+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48b0bce7]
2026-01-09T13:13:23.202+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12714a3d]
2026-01-09T13:13:23.202+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:13:23.202+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.203+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@126e043] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.203+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e3106a3] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.203+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2036252876 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:13:23.203+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.203+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.206+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bf67d65] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.204+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2090898810 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:13:23.204+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@253191738 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:13:23.204+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:13:23.206+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50d90001] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.206+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:13:23.207+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@869202564 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:13:23.207+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:13:23.207+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:13:23.210+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:13:23.208+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:13:23.208+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@490985849 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:13:23.208+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48bb441f]
2026-01-09T13:13:23.208+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:13:23.210+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:13:23.214+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:13:23.215+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.216+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-09T13:13:23.217+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@126e043]
2026-01-09T13:13:23.216+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:13:23.217+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:13:23.217+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@627814bd] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.218+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:13:23.221+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1886469969 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:13:23.222+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-09T13:13:23.223+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:13:23.223+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:13:23.223+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:13:23.223+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:13:23.224+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:13:23.224+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e3106a3]
2026-01-09T13:13:23.225+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.224+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50d90001]
2026-01-09T13:13:23.224+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bf67d65]
2026-01-09T13:13:23.225+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:13:23.225+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@398c0c6e] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.230+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:13:23.231+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:13:23.232+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:13:23.233+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1609433570 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:13:23.234+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:13:23.234+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-09T13:13:23.235+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-09T13:13:23.236+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:13:23.236+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-09T13:13:23.236+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-09T13:13:23.237+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:13:23.237+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18d12956]
2026-01-09T13:13:23.238+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:13:23.241+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-09T13:13:23.241+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:13:23.242+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@627814bd]
2026-01-09T13:13:23.242+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.243+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:13:23.246+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:13:23.248+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-09T13:13:23.249+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.250+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2784e33c] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.251+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:13:23.253+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:13:23.253+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-09T13:13:23.254+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@446ba93d] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.255+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@906945795 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:13:23.256+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:13:23.256+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:13:23.257+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-09T13:13:23.257+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.258+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1712619761 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:13:23.258+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:13:23.258+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:13:23.258+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:13:23.258+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@398c0c6e]
2026-01-09T13:13:23.259+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5191183a] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.259+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:13:23.259+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:13:23.263+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:13:23.264+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:13:23.264+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.264+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1216930742 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:13:23.265+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-09T13:13:23.266+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.268+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@332b096e] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.266+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.267+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@606484fe] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.267+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:13:23.271+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@961678304 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:13:23.267+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:13:23.269+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1281277648 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:13:23.270+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bd1ce80] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.271+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2784e33c]
2026-01-09T13:13:23.271+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:13:23.271+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-09T13:13:23.271+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:13:23.272+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:13:23.274+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-09T13:13:23.272+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@217751280 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:13:23.272+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.273+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:13:23.273+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@446ba93d]
2026-01-09T13:13:23.275+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:13:23.275+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4080ebcb] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.276+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:13:23.280+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.282+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:13:23.284+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1075670500 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:13:23.284+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5191183a]
2026-01-09T13:13:23.284+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:13:23.286+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f2e5c3b] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.287+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:13:23.287+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.287+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@332b096e]
2026-01-09T13:13:23.288+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:13:23.315+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@606484fe]
2026-01-09T13:13:23.316+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.291+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1712660642 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:13:23.299+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-09T13:13:23.299+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@378633e5] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.332+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1854909927 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:13:23.351+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:13:23.300+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:13:23.318+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19bbd47b] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.354+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1564270790 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:13:23.318+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:13:23.371+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:13:23.352+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:13:23.353+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:13:23.371+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:13:23.371+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:13:23.372+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:13:23.373+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:13:23.373+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bd1ce80]
2026-01-09T13:13:23.375+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:13:23.375+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.390+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b135e39] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.390+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:13:23.390+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@771962389 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:13:23.393+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-09T13:13:23.395+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:13:23.395+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:13:23.395+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-09T13:13:23.399+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:13:23.400+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:13:23.400+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19bbd47b]
2026-01-09T13:13:23.400+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f2e5c3b]
2026-01-09T13:13:23.401+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@378633e5]
2026-01-09T13:13:23.401+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4080ebcb]
2026-01-09T13:13:23.401+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:13:23.401+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:13:23.402+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.402+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.402+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.403+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.413+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@700f51f3] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.403+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:13:23.412+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5143a14] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.413+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e0edbcc] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.413+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15c7c889] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.414+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@924201610 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:13:23.414+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.415+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1120612033 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:13:23.415+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@55349682 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:13:23.416+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@332978383 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:13:23.416+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:13:23.416+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f6c8247] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.420+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:13:23.421+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:13:23.421+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:13:23.422+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:13:23.423+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:13:23.423+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1086776210 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:13:23.423+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b135e39]
2026-01-09T13:13:23.424+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-09T13:13:23.425+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:13:23.426+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:13:23.428+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:13:23.429+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:13:23.440+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:13:23.440+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:13:23.440+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-09T13:13:23.441+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-09T13:13:23.442+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:13:23.442+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@700f51f3]
2026-01-09T13:13:23.447+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-09T13:13:23.449+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e0edbcc]
2026-01-09T13:13:23.449+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5143a14]
2026-01-09T13:13:23.450+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:13:23.453+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:13:23.453+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:13:23.455+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15c7c889]
2026-01-09T13:13:23.455+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.456+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.464+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b0c1ab0] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.457+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:13:23.458+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f6c8247]
2026-01-09T13:13:23.460+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-09T13:13:23.464+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.464+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49ee2fbd] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.466+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1869368671 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:13:23.467+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.471+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b3e97bc] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.468+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:13:23.468+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:13:23.470+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ac2f2ee] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.470+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@826691063 wrapping com.mysql.cj.jdbc.ConnectionImpl@194cfc3] will not be managed by Spring
2026-01-09T13:13:23.471+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:13:23.471+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1350262310 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:13:23.474+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:13:23.472+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:13:23.473+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1642784959 wrapping com.mysql.cj.jdbc.ConnectionImpl@736fd559] will not be managed by Spring
2026-01-09T13:13:23.473+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:13:23.474+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:13:23.476+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:13:23.478+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:13:23.478+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:13:23.478+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:13:23.479+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:13:23.483+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:13:23.485+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:13:23.487+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:13:23.487+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:13:23.487+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.538+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b3a97ad] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.489+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:13:23.537+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:13:23.539+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49ee2fbd]
2026-01-09T13:13:23.538+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b0c1ab0]
2026-01-09T13:13:23.538+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b3e97bc]
2026-01-09T13:13:23.539+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1302873201 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:13:23.540+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:13:23.547+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-09T13:13:23.540+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.541+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:13:23.541+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:13:23.549+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:13:23.555+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:13:23.559+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-09T13:13:23.563+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52c346fe] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.567+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:13:23.580+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:13:23.569+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:13:23.571+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:13:23.572+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:13:23.576+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ac2f2ee]
2026-01-09T13:13:23.579+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2033262476 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:13:23.585+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:13:23.586+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:13:23.587+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:13:23.587+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:13:23.588+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:13:23.605+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:13:23.588+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:13:23.588+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-09T13:13:23.591+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:13:23.606+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.614+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2faea417] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.606+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:13:23.607+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:13:23.608+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:13:23.615+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1151711477 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:13:23.616+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:13:23.621+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-09T13:13:23.623+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b3a97ad]
2026-01-09T13:13:23.624+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:13:23.625+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.625+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52c346fe]
2026-01-09T13:13:23.625+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.629+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a6bece8] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.626+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:13:23.626+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@155dc5b] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.628+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.631+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@88310263 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:13:23.655+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:13:23.655+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:13:23.642+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@3586270 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:13:23.642+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5688cee1] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.656+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@515147384 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:13:23.657+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:13:23.657+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:13:23.656+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:13:23.658+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:13:23.666+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:13:23.666+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:13:23.667+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:13:23.677+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5688cee1]
2026-01-09T13:13:23.696+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2faea417]
2026-01-09T13:13:23.697+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.696+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a6bece8]
2026-01-09T13:13:23.696+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:13:23.697+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ed04c21] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.698+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:13:23.698+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-09T13:13:23.699+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@335857648 wrapping com.mysql.cj.jdbc.ConnectionImpl@2bccfa42] will not be managed by Spring
2026-01-09T13:13:23.720+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:13:23.699+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:13:23.700+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:13:23.718+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:13:23.721+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:13:23.722+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:13:23.733+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@155dc5b]
2026-01-09T13:13:23.735+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:13:23.735+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70a23c66] was not registered for synchronization because synchronization is not active
2026-01-09T13:13:23.735+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1597669677 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:13:23.739+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:13:23.741+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:13:23.748+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:13:23.755+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ed04c21]
2026-01-09T13:13:23.781+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:13:23.783+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:13:23.790+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:13:23.791+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70a23c66]
2026-01-09T13:13:23.792+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:13:23.797+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:13:23.798+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:13:23.816+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:17:51.260+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:17:51.261+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:17:51.261+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-09T13:17:51.262+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:17:51.263+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-09T13:17:51.264+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:17:51.306+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:17:51.310+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:17:51.317+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:17:51.312+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-09T13:17:51.319+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:17:51.314+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:17:51.318+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-09T13:17:51.319+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-09T13:17:51.324+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:17:51.324+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:17:51.325+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:17:51.333+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:17:51.335+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:17:51.336+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-09T13:17:51.341+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:17:51.342+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:17:51.344+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:17:51.344+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:17:51.344+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-09T13:17:51.345+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:17:51.346+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-09T13:17:51.348+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:17:51.349+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:17:51.353+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:17:51.349+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:17:51.349+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-09T13:17:51.349+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:17:51.350+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-09T13:17:51.352+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:17:51.356+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:17:51.357+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:17:51.357+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-09T13:17:51.359+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:17:51.360+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-09T13:17:51.360+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:17:51.368+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.368+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:17:51.369+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-09T13:17:51.369+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:17:51.379+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-09T13:17:51.379+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.380+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60e6fffe] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.381+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:17:51.381+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.382+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.383+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-09T13:17:51.383+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21fa5fec] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.396+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.396+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21d366e5] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.397+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7286100] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.397+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.398+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e89a94f] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.399+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@676ed89a] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.447+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1849698687 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:17:51.447+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2074911895 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:17:51.449+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1604839080 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:17:51.450+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@887512204 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:17:51.465+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1246208578 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:17:51.481+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:17:51.489+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:17:51.490+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:17:51.490+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:17:51.490+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:17:51.491+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:17:51.491+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-09T13:17:51.494+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:17:51.495+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:17:51.497+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-09T13:17:51.545+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:17:51.545+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:17:51.545+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:17:51.546+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:17:51.546+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:17:51.548+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60e6fffe]
2026-01-09T13:17:51.549+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21d366e5]
2026-01-09T13:17:51.550+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7286100]
2026-01-09T13:17:51.550+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e89a94f]
2026-01-09T13:17:51.550+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21fa5fec]
2026-01-09T13:17:51.555+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:17:51.556+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@197268399 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:17:51.557+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.557+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.557+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:17:51.560+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.561+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:17:51.562+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:17:51.562+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65ca608f] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.567+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cad02c0] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.570+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:17:51.570+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5738613f] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.578+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:17:51.579+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:17:51.581+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2084583643 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:17:51.583+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2139381694 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:17:51.583+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:17:51.584+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1546459839 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:17:51.623+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:17:51.590+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-09T13:17:51.593+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:17:51.596+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:17:51.599+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:17:51.624+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:17:51.625+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-09T13:17:51.625+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:17:51.625+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:17:51.629+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:17:51.630+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-09T13:17:51.630+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-09T13:17:51.633+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@676ed89a]
2026-01-09T13:17:51.633+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:17:51.634+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-09T13:17:51.639+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.639+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-09T13:17:51.639+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-09T13:17:51.639+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ebd0191] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.640+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-09T13:17:51.640+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.640+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@128114329 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:17:51.641+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.641+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49c4ba4d] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.642+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:17:51.645+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:17:51.645+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69a90630] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.646+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@686091807 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:17:51.647+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:17:51.647+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5738613f]
2026-01-09T13:17:51.647+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:17:51.648+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:17:51.648+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@45643074 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:17:51.648+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:17:51.649+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65ca608f]
2026-01-09T13:17:51.649+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:17:51.651+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cad02c0]
2026-01-09T13:17:51.652+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:17:51.656+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:17:51.657+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.658+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:17:51.658+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:17:51.658+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:17:51.658+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:17:51.659+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65517bec] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.660+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:17:51.662+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:17:51.666+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ebd0191]
2026-01-09T13:17:51.666+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1395237329 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:17:51.667+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-09T13:17:51.668+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:17:51.675+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.676+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:17:51.678+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/companies
2026-01-09T13:17:51.684+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-09T13:17:51.681+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:17:51.682+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@164d647a] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.696+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1345998507 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:17:51.684+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-09T13:17:51.686+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:17:51.686+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:17:51.686+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-09T13:17:51.697+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:17:51.698+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-09T13:17:51.698+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69a90630]
2026-01-09T13:17:51.699+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:17:51.700+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49c4ba4d]
2026-01-09T13:17:51.701+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-09T13:17:51.707+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-09T13:17:51.708+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-09T13:17:51.708+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.708+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:17:51.708+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.709+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65517bec]
2026-01-09T13:17:51.710+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.716+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dc928e2] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.716+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:17:51.717+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30a21a22] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.717+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.719+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22f68be3] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.718+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48116437] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.718+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@665976246 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:17:51.718+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.719+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1549326505 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:17:51.720+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1284905546 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:17:51.725+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:17:51.722+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1117467663 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:17:51.723+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:17:51.724+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a3ddf61] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.724+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:17:51.725+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:17:51.726+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-09T13:17:51.732+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:17:51.733+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1387826710 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:17:51.733+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:17:51.735+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 4(Long)
2026-01-09T13:17:51.741+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:17:51.748+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:17:51.755+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:17:51.758+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:17:51.758+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-09T13:17:51.758+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:17:51.759+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:17:51.759+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-01-09T13:17:51.759+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22f68be3]
2026-01-09T13:17:51.760+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30a21a22]
2026-01-09T13:17:51.761+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@164d647a]
2026-01-09T13:17:51.761+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a3ddf61]
2026-01-09T13:17:51.762+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dc928e2]
2026-01-09T13:17:51.762+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48116437]
2026-01-09T13:17:51.763+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.763+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.764+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11d3009d] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.763+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.763+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.764+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.764+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a299c4f] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.764+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:17:51.764+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@830499727 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:17:51.764+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ae59d07] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.765+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@562af09c] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.766+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ba18d00] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.766+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2081860474 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:17:51.766+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-09T13:17:51.767+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:17:51.767+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@393632405 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:17:51.767+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1925770223 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:17:51.768+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@268116142 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:17:51.768+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:17:51.769+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:17:51.773+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-09T13:17:51.773+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:17:51.774+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:17:51.774+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:17:51.775+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:17:51.778+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:17:51.781+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:17:51.781+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:17:51.782+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:17:51.788+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:17:51.789+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-09T13:17:51.792+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:17:51.792+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11d3009d]
2026-01-09T13:17:51.792+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:17:51.794+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.796+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:17:51.796+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@620436d4] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.796+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.797+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1809454561 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:17:51.797+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ab3a282] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.797+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:17:51.798+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2076340037 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:17:51.798+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:17:51.798+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:17:51.799+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-09T13:17:51.805+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:17:51.806+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:17:51.809+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-09T13:17:51.810+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a299c4f]
2026-01-09T13:17:51.810+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ae59d07]
2026-01-09T13:17:51.810+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@562af09c]
2026-01-09T13:17:51.810+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:17:51.811+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.812+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.812+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:17:51.812+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:17:51.812+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@620436d4]
2026-01-09T13:17:51.812+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a42e1d0] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.812+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-09T13:17:51.812+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c4e534e] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.813+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ab3a282]
2026-01-09T13:17:51.813+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:17:51.814+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:17:51.815+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@212851507 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:17:51.815+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ba18d00]
2026-01-09T13:17:51.816+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2055601253 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:17:51.816+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:17:51.817+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:17:51.817+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-09T13:17:51.817+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:17:51.818+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.818+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:17:51.819+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:17:51.822+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-09T13:17:51.826+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:17:51.827+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-09T13:17:51.827+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@556c039a] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.828+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:17:51.828+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:17:51.829+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-09T13:17:51.839+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-09T13:17:51.831+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:17:51.832+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@41045434 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:17:51.835+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:17:51.842+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-09T13:17:51.842+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-09T13:17:51.843+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:17:51.844+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:17:51.844+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-09T13:17:51.846+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:17:51.848+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-09T13:17:51.851+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-09T13:17:51.848+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-09T13:17:51.849+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:17:51.850+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:17:51.850+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.851+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a42e1d0]
2026-01-09T13:17:51.851+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-09T13:17:51.852+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c4e534e]
2026-01-09T13:17:51.852+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:17:51.858+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23464a4c] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.859+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.860+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.861+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.865+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@127a3c55] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.862+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:17:51.862+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@498668644 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:17:51.862+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30a76790] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.863+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-09T13:17:51.865+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c4a66dd] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.866+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1558235511 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:17:51.866+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:51.867+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:17:51.867+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@223759413 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:17:51.867+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@556c039a]
2026-01-09T13:17:51.868+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@409985010 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:17:51.868+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:17:51.869+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19e3d7ff] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:51.871+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:17:51.874+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:17:51.875+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:17:51.876+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:17:51.877+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-09T13:17:51.879+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2101112065 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:17:51.880+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:17:51.880+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-09T13:17:51.881+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:17:51.884+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:17:51.886+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:17:51.943+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-09T13:17:51.957+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:17:51.989+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:17:51.989+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:17:52.014+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-09T13:17:52.018+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23464a4c]
2026-01-09T13:17:52.019+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30a76790]
2026-01-09T13:17:52.034+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:52.035+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6506ed76] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:52.036+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1855360417 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:17:52.039+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:17:52.020+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c4a66dd]
2026-01-09T13:17:52.020+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@127a3c55]
2026-01-09T13:17:52.031+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:52.033+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:17:52.040+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:17:52.040+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:52.040+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:52.043+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43015a01] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:52.041+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e242ffd] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:52.042+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:17:52.043+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f65e9c3] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:52.044+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@5918368 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:17:52.044+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@262214239 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:17:52.074+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:17:52.050+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:17:52.073+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1623596156 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:17:52.076+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:17:52.076+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:17:52.073+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:17:52.074+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:17:52.075+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:17:52.077+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:17:52.078+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:17:52.080+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-09T13:17:52.081+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:17:52.102+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:17:52.102+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:17:52.103+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:52.105+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6506ed76]
2026-01-09T13:17:52.106+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:17:52.107+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19e3d7ff]
2026-01-09T13:17:52.108+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43015a01]
2026-01-09T13:17:52.108+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f65e9c3]
2026-01-09T13:17:52.109+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@206a56e5] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:52.109+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:52.109+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e242ffd]
2026-01-09T13:17:52.110+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:52.111+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:52.111+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:52.113+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34148f6b] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:52.111+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1662631427 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:17:52.112+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3de7dc6e] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:52.112+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:52.113+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@343b0dde] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:52.113+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4868ee02] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:52.114+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@607081435 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:17:52.114+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:17:52.114+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1868098553 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:17:52.114+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fc1547d] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:52.115+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@861960329 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:17:52.116+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@24142940 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:17:52.116+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:17:52.117+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-09T13:17:52.117+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:17:52.117+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1353041343 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:17:52.118+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:17:52.190+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:17:52.119+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:17:52.192+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:17:52.127+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:17:52.128+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:17:52.129+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:17:52.196+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-09T13:17:52.282+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:17:52.282+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:17:52.300+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@206a56e5]
2026-01-09T13:17:52.282+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-09T13:17:52.282+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:17:52.283+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-09T13:17:52.283+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-09T13:17:52.293+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@343b0dde]
2026-01-09T13:17:52.301+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:17:52.301+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fc1547d]
2026-01-09T13:17:52.301+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3de7dc6e]
2026-01-09T13:17:52.311+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34148f6b]
2026-01-09T13:17:52.311+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4868ee02]
2026-01-09T13:17:52.322+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:17:52.322+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:17:52.323+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:52.329+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c3bf8f2] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:52.323+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:17:52.323+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:52.324+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:52.344+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5585edbc] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:52.325+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:17:52.326+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:17:52.330+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@423377332 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:17:52.331+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-09T13:17:52.340+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7414c98b] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:52.345+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1519518192 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:17:52.346+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:17:52.347+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:17:52.350+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:17:52.354+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:17:52.361+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1693155253 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:17:52.361+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:17:52.363+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:17:52.363+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:17:52.368+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:17:52.364+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:17:52.366+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:17:52.367+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:17:52.368+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:17:52.368+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:17:52.369+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:17:52.376+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:17:52.378+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:17:52.378+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:17:52.379+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:17:52.381+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:17:52.384+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:17:52.395+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:52.400+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:17:52.400+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:17:52.404+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:52.401+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@407475af] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:52.405+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:17:52.407+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49a70ff6] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:52.408+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1104925485 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:17:52.409+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:17:52.410+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@181809792 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:17:52.411+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:17:52.410+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:17:52.410+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:17:52.411+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:17:52.411+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-09T13:17:52.411+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5585edbc]
2026-01-09T13:17:52.411+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:17:52.412+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:17:52.412+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:17:52.416+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:17:52.416+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7414c98b]
2026-01-09T13:17:52.417+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:17:52.417+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c3bf8f2]
2026-01-09T13:17:52.417+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:17:52.418+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:17:52.419+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-09T13:17:52.419+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:17:52.424+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:17:52.420+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:52.423+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-09T13:17:52.425+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-09T13:17:52.426+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48f26b8f] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:52.427+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:17:52.428+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:17:52.432+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:17:52.433+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@608950962 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:17:52.434+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:17:52.434+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:17:52.436+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:17:52.439+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:17:52.440+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:17:52.441+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:17:52.441+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:17:52.436+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:17:52.438+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:17:52.440+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:17:52.442+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:52.445+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:17:52.445+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:17:52.450+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:17:52.450+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65e71209] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:52.452+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:17:52.452+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:17:52.453+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:17:52.462+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:52.459+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:17:52.461+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1122438021 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:17:52.461+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@407475af]
2026-01-09T13:17:52.461+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49a70ff6]
2026-01-09T13:17:52.463+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16594e78] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:52.472+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@358544497 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:17:52.473+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:17:52.476+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-09T13:17:52.464+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:17:52.465+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:17:52.478+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48f26b8f]
2026-01-09T13:17:52.479+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:52.479+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bf6d9df] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:52.482+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@805534013 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:17:52.482+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:17:52.483+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:17:52.468+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:17:52.485+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:17:52.468+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:52.498+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20273898] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:52.498+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1134426174 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:17:52.500+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:17:52.500+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:17:52.468+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:52.525+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4eeb26e4] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:52.526+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1069701232 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:17:52.478+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:52.527+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:17:52.543+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:17:52.527+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a0e934b] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:52.535+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:17:52.535+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:17:52.535+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:17:52.546+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1061892419 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:17:52.546+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20273898]
2026-01-09T13:17:52.547+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16594e78]
2026-01-09T13:17:52.549+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bf6d9df]
2026-01-09T13:17:52.551+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:17:52.552+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:17:52.552+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:17:52.552+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:17:52.555+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:17:52.556+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:17:52.557+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:17:52.558+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:17:52.559+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:17:52.559+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:17:52.561+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:17:52.577+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:17:52.577+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:17:52.578+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4eeb26e4]
2026-01-09T13:17:52.578+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65e71209]
2026-01-09T13:17:52.578+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:17:52.579+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:52.579+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:17:52.582+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6884cc6f] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:52.583+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:17:52.585+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@900656172 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:17:52.586+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:17:52.592+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:17:52.593+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a0e934b]
2026-01-09T13:17:52.594+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:17:52.594+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:17:52.595+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c05d0cc] was not registered for synchronization because synchronization is not active
2026-01-09T13:17:52.595+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1391434444 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:17:52.600+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:17:52.603+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:17:52.628+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:17:52.634+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6884cc6f]
2026-01-09T13:17:52.634+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:17:52.642+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:17:52.647+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:17:52.648+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c05d0cc]
2026-01-09T13:17:52.650+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:17:52.653+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:17:52.663+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:17:52.664+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:15.293+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:18:15.304+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:18:15.304+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/38
2026-01-09T13:18:15.308+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-09T13:18:15.308+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/38
2026-01-09T13:18:15.308+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-09T13:18:15.478+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:18:15.491+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:18:15.494+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:18:15.496+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:18:15.499+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:18:15.499+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:18:15.499+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:18:15.500+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:18:15.502+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/38
2026-01-09T13:18:15.505+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-09T13:18:15.511+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:15.516+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:18:15.518+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/38
2026-01-09T13:18:15.518+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24827341] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:15.518+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-09T13:18:15.522+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/38
2026-01-09T13:18:15.524+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-09T13:18:15.529+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:18:15.532+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/38
2026-01-09T13:18:15.533+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-09T13:18:15.534+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/38
2026-01-09T13:18:15.541+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:15.541+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-09T13:18:15.541+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/38", parameters={}
2026-01-09T13:18:15.541+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-09T13:18:15.550+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/38
2026-01-09T13:18:15.552+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1384528575 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:15.556+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@778915f0] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:15.557+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-09T13:18:15.557+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-09T13:18:15.560+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-09T13:18:15.560+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/38", parameters={}
2026-01-09T13:18:15.560+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:18:15.564+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-09T13:18:15.566+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:15.577+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aab8e2d] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:15.567+09:00  INFO 23648 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 4, companyId: 1
2026-01-09T13:18:15.569+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-09T13:18:15.576+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:15.576+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-09T13:18:15.579+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1307444307 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:18:15.582+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:15.583+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:15.584+09:00  INFO 23648 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 4, companyId: 1
2026-01-09T13:18:15.584+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:18:15.590+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1452251011 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:15.601+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-09T13:18:15.594+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ea24223] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:15.594+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4279dcfc] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:15.596+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:15.597+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-09T13:18:15.605+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 38(Long), 1(Long)
2026-01-09T13:18:15.605+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63d8030b] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:15.608+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:18:15.614+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24827341]
2026-01-09T13:18:15.627+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@305439273 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:18:15.627+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:18:15.627+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@512835223 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:15.629+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:15.630+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-09T13:18:15.632+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@778915f0]
2026-01-09T13:18:15.633+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-09T13:18:15.635+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1267ed2a] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:15.640+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:15.641+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:15.642+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 38(Long), 1(Long)
2026-01-09T13:18:15.643+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1353936735 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:15.644+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:18:15.645+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:15.646+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:15.646+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:15.647+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1394472345 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:15.648+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-09T13:18:15.659+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-09T13:18:15.659+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aab8e2d]
2026-01-09T13:18:15.662+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:15.662+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-09T13:18:15.667+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1267ed2a]
2026-01-09T13:18:15.663+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:15.667+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:15.667+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4279dcfc]
2026-01-09T13:18:15.671+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:15.671+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64994964] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:15.678+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-09T13:18:15.680+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:15.680+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:18:15.680+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1714171034 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:15.680+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ea24223]
2026-01-09T13:18:15.681+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2425477d] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:15.692+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:15.694+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-09T13:18:15.699+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-09T13:18:15.700+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:15.702+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@667487206 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:15.709+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63d8030b]
2026-01-09T13:18:15.711+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 38(Long), 1(Long)
2026-01-09T13:18:15.712+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=6, userId=4, si (truncated)...]
2026-01-09T13:18:15.712+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-09T13:18:15.712+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:15.713+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:15.715+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 38(Long), 1(Long)
2026-01-09T13:18:15.716+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=6, userId=4, si (truncated)...]
2026-01-09T13:18:15.717+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:15.731+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-09T13:18:15.731+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-09T13:18:15.731+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2425477d]
2026-01-09T13:18:15.732+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64994964]
2026-01-09T13:18:15.733+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:15.734+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:15.734+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@271ee09a] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:15.734+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f6ce63] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:15.735+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@697189803 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:15.735+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@722105808 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:15.735+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-09T13:18:15.742+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-09T13:18:15.743+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 38(Long), 1(Long)
2026-01-09T13:18:15.744+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 38(Long), 1(Long)
2026-01-09T13:18:15.751+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-09T13:18:15.751+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-09T13:18:15.752+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@271ee09a]
2026-01-09T13:18:15.753+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f6ce63]
2026-01-09T13:18:15.755+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:15.755+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:15.755+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2943a21b] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:15.756+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cf29208] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:15.757+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2030673305 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:15.758+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2143606819 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:15.758+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-09T13:18:15.758+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-09T13:18:15.760+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 38(Long), 1(Long)
2026-01-09T13:18:15.761+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 38(Long), 1(Long)
2026-01-09T13:18:15.765+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-09T13:18:15.765+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-09T13:18:15.766+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2943a21b]
2026-01-09T13:18:15.766+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cf29208]
2026-01-09T13:18:15.767+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:15.768+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:15.768+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b15e0c2] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:15.768+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41f6788] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:15.769+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1878180545 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:15.769+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1207119491 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:15.774+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:15.775+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:15.775+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:15.776+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:15.779+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:15.779+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:15.781+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41f6788]
2026-01-09T13:18:15.782+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b15e0c2]
2026-01-09T13:18:15.783+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:15.783+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:15.785+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=38, drafterId=2, r (truncated)...]
2026-01-09T13:18:15.793+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=38, drafterId=2, r (truncated)...]
2026-01-09T13:18:15.799+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:15.804+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:22.848+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:18:22.850+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:18:22.850+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-09T13:18:22.850+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:18:22.850+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-09T13:18:22.850+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:18:22.989+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:18:23.021+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:18:23.085+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-09T13:18:23.193+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:18:23.379+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-09T13:18:23.512+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:18:23.575+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:18:23.575+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:18:23.576+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:18:23.791+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:18:23.801+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:18:23.808+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:18:23.809+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:18:23.809+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:23.810+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fe80150] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:23.576+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:18:23.576+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-09T13:18:23.813+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:18:23.577+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:18:23.724+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-09T13:18:23.814+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:18:23.813+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-09T13:18:23.814+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:18:23.815+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-09T13:18:23.817+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-09T13:18:23.815+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:18:23.821+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:18:23.816+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-09T13:18:23.816+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:18:23.817+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-09T13:18:23.822+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:18:23.823+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-09T13:18:23.824+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:18:23.824+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-09T13:18:23.824+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:23.825+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-09T13:18:23.825+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:23.828+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:18:23.900+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:23.901+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1688361826 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:18:23.930+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-09T13:18:23.926+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e114a72] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:23.928+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:23.931+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49d3eae4] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:23.929+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@527fbdaf] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:23.930+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a471641] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:23.930+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:18:23.930+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:18:23.940+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:23.946+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-09T13:18:23.948+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1288581439 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:23.948+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1500612708 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:18:23.948+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@878597460 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:23.949+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1799531696 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:23.949+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-09T13:18:23.949+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:18:23.949+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:23.950+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:18:23.952+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:18:23.954+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:23.955+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:23.955+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:23.964+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-09T13:18:23.965+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54c49149] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:23.965+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:23.968+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:18:23.984+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fe80150]
2026-01-09T13:18:24.006+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:24.006+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:18:24.006+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:18:24.007+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.008+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49d3eae4]
2026-01-09T13:18:24.008+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@527fbdaf]
2026-01-09T13:18:24.009+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e114a72]
2026-01-09T13:18:24.009+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@164233dd] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.016+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.017+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:24.018+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.018+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1465146938 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:18:24.018+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a135cf7] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.024+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:18:24.024+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73556cd4] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.028+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@518489606 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:24.032+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:24.032+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:24.025+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:24.025+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2119696348 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:18:24.026+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:24.035+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:24.035+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:24.043+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:24.044+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1246849408 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:24.044+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-09T13:18:24.046+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:18:24.047+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:24.050+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a471641]
2026-01-09T13:18:24.050+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:24.051+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:18:24.051+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.057+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42cfb6d7] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.056+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:18:24.057+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@803525395 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:24.056+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:24.057+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:24.057+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:24.057+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:18:24.058+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:24.058+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a135cf7]
2026-01-09T13:18:24.058+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@164233dd]
2026-01-09T13:18:24.058+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73556cd4]
2026-01-09T13:18:24.062+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:18:24.062+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:24.066+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.064+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.064+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:24.066+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:24.066+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:24.067+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a889c98] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.067+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f6fe5fc] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.067+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54c49149]
2026-01-09T13:18:24.067+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:18:24.068+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:18:24.076+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:24.071+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1208108755 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:24.072+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1871440386 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:18:24.074+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.075+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:24.077+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:18:24.078+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:18:24.079+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1552fa09] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.091+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:18:24.092+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-09T13:18:24.115+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:24.150+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-09T13:18:24.131+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:24.143+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-09T13:18:24.149+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1952523560 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:24.168+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:24.150+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:18:24.174+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:18:24.174+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:18:24.176+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:18:24.150+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42cfb6d7]
2026-01-09T13:18:24.165+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-09T13:18:24.172+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:24.177+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.182+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.182+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-09T13:18:24.188+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:18:24.190+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-09T13:18:24.194+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f6fe5fc]
2026-01-09T13:18:24.193+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3834c410] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.194+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23db1006] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.194+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-09T13:18:24.194+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a889c98]
2026-01-09T13:18:24.195+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.197+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62d988c] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.195+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@468404108 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:18:24.196+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@471692196 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:24.197+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.197+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.198+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@116247984 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:24.198+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:18:24.199+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:18:24.199+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66f89fb6] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.199+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ffcc6a5] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.199+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:24.201+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:24.201+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-09T13:18:24.202+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-09T13:18:24.207+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2139265033 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:24.207+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@827259806 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:18:24.207+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:24.211+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1552fa09]
2026-01-09T13:18:24.229+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.230+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@335e6d0f] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.216+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:24.217+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:24.260+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:24.232+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@836656095 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:24.261+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:18:24.233+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:24.259+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-09T13:18:24.259+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:18:24.259+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:24.264+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:18:24.264+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23db1006]
2026-01-09T13:18:24.265+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3834c410]
2026-01-09T13:18:24.265+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62d988c]
2026-01-09T13:18:24.266+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.267+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:24.267+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.272+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@258d1b4] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.267+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a01d6e4] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.267+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:18:24.274+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1750847627 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:24.281+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1361164418 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:24.281+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:24.281+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:18:24.282+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:24.283+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:18:24.283+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:24.292+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-09T13:18:24.292+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:24.293+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:24.297+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-09T13:18:24.299+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@335e6d0f]
2026-01-09T13:18:24.309+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66f89fb6]
2026-01-09T13:18:24.310+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ffcc6a5]
2026-01-09T13:18:24.312+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-09T13:18:24.312+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.314+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:24.315+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-09T13:18:24.325+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.330+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@258d1b4]
2026-01-09T13:18:24.326+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:24.327+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-09T13:18:24.328+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1373094e] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.328+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a01d6e4]
2026-01-09T13:18:24.330+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f2006ab] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.330+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.331+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:18:24.333+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-09T13:18:24.335+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1401239610 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:24.340+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:24.342+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d0b6ba] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.342+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@755449302 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:24.343+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:24.345+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-09T13:18:24.347+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:18:24.349+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-09T13:18:24.349+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1161888325 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:24.350+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:24.367+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:24.351+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.363+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:18:24.364+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:24.365+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:18:24.367+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44b055a0] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.381+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-09T13:18:24.382+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@415689152 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:24.392+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:18:24.392+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:18:24.401+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-09T13:18:24.410+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:24.445+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-09T13:18:24.451+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:18:24.455+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1373094e]
2026-01-09T13:18:24.455+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d0b6ba]
2026-01-09T13:18:24.455+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f2006ab]
2026-01-09T13:18:24.455+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-09T13:18:24.463+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:18:24.455+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:18:24.459+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:24.461+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.461+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:24.462+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.465+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-09T13:18:24.466+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:18:24.467+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b808b0e] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.467+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-09T13:18:24.471+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@307f51e] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.472+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-09T13:18:24.472+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:18:24.473+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1877054882 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:24.474+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:24.474+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@211664523 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:24.475+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.476+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:18:24.482+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:24.483+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:18:24.500+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:18:24.500+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37ede1df] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.507+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-09T13:18:24.511+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.511+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:24.512+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:18:24.515+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-09T13:18:24.515+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@671982841 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:24.515+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44b055a0]
2026-01-09T13:18:24.517+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b82f46b] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.528+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:18:24.529+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:24.530+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.530+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@602477571 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:24.530+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:18:24.531+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:24.531+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@490bc75c] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.541+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:24.541+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:18:24.543+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:18:24.544+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@256939656 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:18:24.550+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b808b0e]
2026-01-09T13:18:24.560+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:24.561+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.561+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:24.561+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.562+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13098fad] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.561+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@226e2380] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.562+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2084482617 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:24.562+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:18:24.561+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:24.562+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@632631499 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:18:24.563+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-09T13:18:24.563+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:24.564+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:18:24.564+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:18:24.565+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@307f51e]
2026-01-09T13:18:24.565+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37ede1df]
2026-01-09T13:18:24.572+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:24.572+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.581+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.583+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ba8f132] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.593+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@735f9d7c] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.594+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@389762652 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:24.594+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@728000977 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:24.595+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:18:24.595+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-09T13:18:24.596+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:18:24.596+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:24.598+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:24.598+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:24.599+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b82f46b]
2026-01-09T13:18:24.599+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13098fad]
2026-01-09T13:18:24.601+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@226e2380]
2026-01-09T13:18:24.601+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@490bc75c]
2026-01-09T13:18:24.601+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:24.602+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:24.602+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.605+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.606+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.607+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.608+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a935eaa] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.611+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42baf423] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.614+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@643750463 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:24.613+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2af3c782] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.614+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11c1b643] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.614+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@496074558 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:24.614+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:24.615+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:24.615+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:24.617+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2035454847 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:18:24.617+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@107454976 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:18:24.619+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:24.636+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:24.640+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@735f9d7c]
2026-01-09T13:18:24.645+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ba8f132]
2026-01-09T13:18:24.645+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:24.646+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:18:24.646+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:24.647+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.647+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.648+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:24.648+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-09T13:18:24.650+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:24.650+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7da5f2d8] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.650+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6897a480] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.656+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:24.664+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-09T13:18:24.664+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:24.664+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a935eaa]
2026-01-09T13:18:24.665+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1922966637 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:24.669+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42baf423]
2026-01-09T13:18:24.669+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@73071041 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:24.673+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11c1b643]
2026-01-09T13:18:24.674+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2af3c782]
2026-01-09T13:18:24.674+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:24.674+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:18:24.675+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:24.675+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:18:24.675+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.676+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:24.676+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:18:24.679+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:18:24.679+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-09T13:18:24.679+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:18:24.682+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12526ad6] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.683+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:18:24.686+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:24.694+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:24.697+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@238925169 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:18:24.697+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-09T13:18:24.698+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:24.698+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-09T13:18:24.700+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:18:24.701+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:18:24.702+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:24.703+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7da5f2d8]
2026-01-09T13:18:24.706+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:18:24.706+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6897a480]
2026-01-09T13:18:24.717+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.718+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@219bd926] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.719+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1954400817 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:24.710+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:18:24.714+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:24.714+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.727+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:18:24.727+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:18:24.728+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d51de1b] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.730+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-09T13:18:24.730+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:18:24.734+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@27755138 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:24.740+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:18:24.740+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:18:24.740+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.741+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:18:24.745+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:24.752+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12526ad6]
2026-01-09T13:18:24.753+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:24.819+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-09T13:18:24.821+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:24.750+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:18:24.751+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50e305b6] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.829+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1323917310 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:18:24.829+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:18:24.834+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-09T13:18:24.752+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:18:24.835+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:18:24.835+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:18:24.837+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:18:24.838+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.841+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73f55af] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:24.842+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@202184063 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:24.843+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:18:24.967+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:18:24.969+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:18:24.974+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:18:24.974+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:18:24.975+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:24.975+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f8c019b] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:25.000+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2134539470 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:24.847+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-09T13:18:24.921+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:18:24.921+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-09T13:18:24.951+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:18:25.001+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:18:25.001+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@219bd926]
2026-01-09T13:18:25.014+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:25.015+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e28c00f] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:25.001+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50e305b6]
2026-01-09T13:18:25.001+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d51de1b]
2026-01-09T13:18:25.018+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:25.021+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-09T13:18:25.006+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:25.007+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:25.015+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1636136965 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:25.017+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:25.023+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:25.024+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:25.024+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:18:25.047+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:25.048+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:25.064+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:18:25.065+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:18:25.077+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f8c019b]
2026-01-09T13:18:25.077+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73f55af]
2026-01-09T13:18:25.077+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:25.077+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:25.081+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ef2b60] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:25.082+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@525858fd] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:25.082+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1235247871 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:25.082+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@792198452 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:25.082+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:25.083+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:25.084+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:25.084+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:25.085+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:25.087+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e28c00f]
2026-01-09T13:18:25.091+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:25.092+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@977e27f] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:25.093+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1359442918 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:25.094+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:25.094+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:25.094+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:18:25.094+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@525858fd]
2026-01-09T13:18:25.094+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ef2b60]
2026-01-09T13:18:25.095+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:18:25.096+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:25.097+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:25.097+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:18:25.098+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:18:25.098+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:25.099+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:25.123+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-09T13:18:25.124+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@977e27f]
2026-01-09T13:18:25.125+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:25.127+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@780a249e] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:25.128+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1322800634 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:25.130+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:25.131+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:25.146+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:25.146+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@780a249e]
2026-01-09T13:18:25.147+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:25.148+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-09T13:18:25.149+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:26.240+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:18:26.241+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:18:26.242+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/38
2026-01-09T13:18:26.242+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-09T13:18:26.242+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-09T13:18:26.242+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/38
2026-01-09T13:18:26.246+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:18:26.249+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:18:26.254+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/38
2026-01-09T13:18:26.256+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:18:26.257+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:18:26.259+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:18:26.259+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/38
2026-01-09T13:18:26.259+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:18:26.260+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:18:26.260+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-09T13:18:26.260+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/38
2026-01-09T13:18:26.261+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/38
2026-01-09T13:18:26.262+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:18:26.262+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:18:26.263+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-09T13:18:26.263+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/38", parameters={}
2026-01-09T13:18:26.263+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-09T13:18:26.264+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/38
2026-01-09T13:18:26.265+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:18:26.265+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:26.266+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-09T13:18:26.266+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-09T13:18:26.267+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-09T13:18:26.267+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/38
2026-01-09T13:18:26.268+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:26.268+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d89ef77] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:26.268+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:26.273+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cb4eb28] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:26.268+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-09T13:18:26.268+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-09T13:18:26.271+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/38", parameters={}
2026-01-09T13:18:26.272+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b5eb1a6] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:26.274+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-09T13:18:26.274+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@823993397 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:18:26.275+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-09T13:18:26.275+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@507809368 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:18:26.275+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-09T13:18:26.276+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-09T13:18:26.276+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:18:26.277+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@194507734 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:26.277+09:00  INFO 23648 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 4, companyId: 1
2026-01-09T13:18:26.277+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-09T13:18:26.278+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:26.278+09:00  INFO 23648 --- [http-nio-8080-exec-11] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 4, companyId: 1
2026-01-09T13:18:26.280+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:26.280+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:18:26.280+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:26.280+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 38(Long), 1(Long)
2026-01-09T13:18:26.283+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:18:26.281+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16b260] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:26.281+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:26.282+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-09T13:18:26.283+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c1e9b66] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:26.284+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d89ef77]
2026-01-09T13:18:26.285+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d8e95d5] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:26.285+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-09T13:18:26.286+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@57057471 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:26.288+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:26.289+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@972393521 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:18:26.291+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:18:26.291+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cb4eb28]
2026-01-09T13:18:26.291+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1499633267 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:26.291+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-09T13:18:26.291+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7164a22c] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:26.292+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-09T13:18:26.292+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b5eb1a6]
2026-01-09T13:18:26.292+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:26.292+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-09T13:18:26.292+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 38(Long), 1(Long)
2026-01-09T13:18:26.293+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:26.293+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:26.293+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bb5f7d6] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:26.294+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:26.294+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1612216784 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:26.295+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:18:26.295+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@254125752 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:18:26.297+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:26.298+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-09T13:18:26.299+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-09T13:18:26.299+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:26.301+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-09T13:18:26.301+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:26.301+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16b260]
2026-01-09T13:18:26.304+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d8e95d5]
2026-01-09T13:18:26.309+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 38(Long), 1(Long)
2026-01-09T13:18:26.310+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:26.312+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1881b6b9] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:26.311+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:26.313+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-09T13:18:26.315+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1331936553 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:26.315+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=6, userId=4, si (truncated)...]
2026-01-09T13:18:26.316+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c1e9b66]
2026-01-09T13:18:26.316+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-09T13:18:26.316+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:26.316+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-09T13:18:26.317+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:26.317+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:26.317+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bb5f7d6]
2026-01-09T13:18:26.318+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7164a22c]
2026-01-09T13:18:26.318+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 38(Long), 1(Long)
2026-01-09T13:18:26.319+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=6, userId=4, si (truncated)...]
2026-01-09T13:18:26.321+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:26.324+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@83d6d37] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:26.323+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:26.324+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:26.325+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1549938849 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:18:26.326+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-09T13:18:26.325+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:18:26.329+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 38(Long), 1(Long)
2026-01-09T13:18:26.326+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-09T13:18:26.329+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:26.329+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1881b6b9]
2026-01-09T13:18:26.332+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:26.332+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58007bb5] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:26.332+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1302407794 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:26.332+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-09T13:18:26.333+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-09T13:18:26.333+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@83d6d37]
2026-01-09T13:18:26.333+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 38(Long), 1(Long)
2026-01-09T13:18:26.334+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:26.334+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5789efc] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:26.335+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1716457393 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:18:26.337+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-09T13:18:26.339+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 38(Long), 1(Long)
2026-01-09T13:18:26.341+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-09T13:18:26.341+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58007bb5]
2026-01-09T13:18:26.343+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:26.343+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-09T13:18:26.344+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52fb8f48] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:26.345+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5789efc]
2026-01-09T13:18:26.348+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@167615345 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:26.348+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:26.348+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-09T13:18:26.348+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71f1be9b] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:26.349+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 38(Long), 1(Long)
2026-01-09T13:18:26.350+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1425645969 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:18:26.350+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:26.351+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:26.352+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:26.352+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-09T13:18:26.355+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71f1be9b]
2026-01-09T13:18:26.355+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52fb8f48]
2026-01-09T13:18:26.357+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:26.357+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:26.358+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=38, drafterId=2, r (truncated)...]
2026-01-09T13:18:26.360+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@734bb48d] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:26.361+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1619494784 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:26.361+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:26.364+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:26.364+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:26.367+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:26.368+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@734bb48d]
2026-01-09T13:18:26.372+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:26.374+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=38, drafterId=2, r (truncated)...]
2026-01-09T13:18:26.375+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:27.979+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:18:27.984+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:18:27.989+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-09T13:18:27.989+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:18:27.989+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:18:27.989+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-09T13:18:27.995+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:18:27.996+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:18:27.997+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-09T13:18:27.999+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:18:28.000+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-09T13:18:28.000+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:18:28.004+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:18:28.004+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:18:28.011+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:18:28.013+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:18:28.013+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-09T13:18:28.016+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:18:28.020+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:18:28.017+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:18:28.017+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:18:28.017+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-09T13:18:28.018+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-09T13:18:28.018+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:18:28.021+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:18:28.022+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:18:28.023+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-09T13:18:28.025+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-09T13:18:28.042+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-09T13:18:28.027+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-09T13:18:28.028+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:18:28.029+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:18:28.041+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:18:28.042+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:18:28.042+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-09T13:18:28.042+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-09T13:18:28.043+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:18:28.043+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.048+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:18:28.049+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-09T13:18:28.049+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-09T13:18:28.050+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-09T13:18:28.050+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:18:28.050+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f189600] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.058+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.062+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4055c269] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.059+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-09T13:18:28.060+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.060+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.061+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:18:28.063+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.064+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75ed2970] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.065+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2149c781] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.065+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.065+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5785d2fe] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.067+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1915187611 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:28.072+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:28.066+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@149095b8] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.066+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@255946143 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:18:28.067+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@599790838 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:18:28.067+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@169564242 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:28.073+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:28.073+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:18:28.074+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:18:28.074+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:18:28.075+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@706811669 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:28.077+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-09T13:18:28.077+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1723244342 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:28.077+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:28.078+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:28.078+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:28.078+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:28.079+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:18:28.080+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2149c781]
2026-01-09T13:18:28.081+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:28.081+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:18:28.083+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:28.088+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.091+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:18:28.096+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4055c269]
2026-01-09T13:18:28.097+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1156e1e8] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.097+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f189600]
2026-01-09T13:18:28.098+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-09T13:18:28.099+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:28.099+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1934074338 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:28.100+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.101+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75ed2970]
2026-01-09T13:18:28.102+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:18:28.105+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:28.106+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75275922] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.107+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.108+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:28.111+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:28.112+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1330433111 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:18:28.113+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@691cf322] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.114+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:28.115+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:28.116+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:18:28.118+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:18:28.128+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1232119758 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:28.128+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:28.128+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5785d2fe]
2026-01-09T13:18:28.128+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@149095b8]
2026-01-09T13:18:28.129+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:18:28.179+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:28.180+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:28.181+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.181+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.182+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fe8d14d] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.183+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@405654199 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:28.181+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:18:28.181+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1156e1e8]
2026-01-09T13:18:28.195+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.196+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26d679bf] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.196+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2725164 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:28.197+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:18:28.182+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:28.182+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@736569ed] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.184+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:28.184+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:18:28.200+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-09T13:18:28.201+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1540453006 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:28.250+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:28.250+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:28.264+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:28.269+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:18:28.311+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-09T13:18:28.275+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:28.275+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75275922]
2026-01-09T13:18:28.296+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@691cf322]
2026-01-09T13:18:28.312+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.313+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26d679bf]
2026-01-09T13:18:28.317+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.318+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59f0406a] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.314+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:28.319+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1291764074 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:28.314+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:28.316+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.324+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b0f0210] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.316+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ee93957] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.323+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:28.324+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:18:28.325+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:28.325+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1434742704 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:28.325+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@908649971 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:18:28.326+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:28.327+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:28.327+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fe8d14d]
2026-01-09T13:18:28.327+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:18:28.328+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:18:28.330+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:28.331+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-09T13:18:28.331+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-09T13:18:28.331+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:18:28.333+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:28.334+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-09T13:18:28.349+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:28.349+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:28.350+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:18:28.351+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-09T13:18:28.354+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@736569ed]
2026-01-09T13:18:28.356+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59f0406a]
2026-01-09T13:18:28.357+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.357+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@354b4dec] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.357+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-09T13:18:28.357+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-09T13:18:28.357+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.361+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1860417599 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:28.362+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:18:28.363+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:18:28.363+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-09T13:18:28.363+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-09T13:18:28.363+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15fd55b] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.363+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:18:28.364+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-09T13:18:28.365+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ee93957]
2026-01-09T13:18:28.365+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b0f0210]
2026-01-09T13:18:28.366+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-09T13:18:28.366+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1496186524 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:28.366+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:18:28.366+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-09T13:18:28.368+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:28.368+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.385+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dd0822c] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.372+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.378+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:18:28.382+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.384+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:18:28.385+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1860965892 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:28.397+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:28.388+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7152195b] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.395+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:18:28.396+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64c5cdf9] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.396+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:28.398+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:28.399+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1430275939 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:28.400+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@462310954 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:18:28.401+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-09T13:18:28.410+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-09T13:18:28.412+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:28.413+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:28.413+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@354b4dec]
2026-01-09T13:18:28.423+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.414+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-09T13:18:28.415+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:28.416+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-09T13:18:28.423+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:28.424+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41624d7c] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.424+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-09T13:18:28.427+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:28.428+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15fd55b]
2026-01-09T13:18:28.430+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@782851217 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:28.430+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-09T13:18:28.431+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dd0822c]
2026-01-09T13:18:28.431+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.432+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22831cf3] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.431+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:18:28.432+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-09T13:18:28.432+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:28.433+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1569321205 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:28.443+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-09T13:18:28.444+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.444+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-09T13:18:28.445+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:28.466+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:18:28.467+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20ec90ca] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.468+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:28.478+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:28.481+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-09T13:18:28.491+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41624d7c]
2026-01-09T13:18:28.491+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.492+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fee058d] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.492+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1010085025 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:28.493+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:28.481+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7152195b]
2026-01-09T13:18:28.483+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:18:28.483+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@811838362 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:28.484+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64c5cdf9]
2026-01-09T13:18:28.490+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:18:28.495+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:28.495+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.497+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:18:28.497+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.498+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:18:28.498+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c303466] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.507+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:28.507+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@311b91ea] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.508+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:18:28.508+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2110353018 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:28.510+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2071672885 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:18:28.512+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:28.510+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:18:28.510+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:28.512+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:28.513+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:18:28.514+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:28.515+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-09T13:18:28.524+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22831cf3]
2026-01-09T13:18:28.525+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:28.526+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-09T13:18:28.521+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:28.522+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.524+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fee058d]
2026-01-09T13:18:28.528+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:28.529+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a1f766f] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.531+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.532+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:18:28.533+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1812309673 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:28.533+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44a07bb9] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.533+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:18:28.534+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:18:28.534+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1534971085 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:28.540+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:18:28.541+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:18:28.535+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:18:28.544+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:18:28.540+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:28.545+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:18:28.546+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.547+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-09T13:18:28.550+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@311284d1] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.551+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20ec90ca]
2026-01-09T13:18:28.552+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:28.556+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@311b91ea]
2026-01-09T13:18:28.554+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-09T13:18:28.554+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:28.555+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:18:28.555+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2117285272 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:18:28.556+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.557+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.557+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44a07bb9]
2026-01-09T13:18:28.557+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c303466]
2026-01-09T13:18:28.557+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a1f766f]
2026-01-09T13:18:28.558+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:18:28.559+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46a4e609] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.561+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5855369d] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.561+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.561+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.562+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.562+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-09T13:18:28.562+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@34231511 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:28.563+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@730a06b1] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.563+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@892102844 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:18:28.563+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bda364a] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.563+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f2ef4a] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.563+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:28.564+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@884004570 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:28.564+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:18:28.565+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1993649235 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:28.567+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1085229845 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:28.567+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:28.567+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:28.567+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:18:28.569+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:18:28.569+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:18:28.569+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:28.574+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:28.574+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@311284d1]
2026-01-09T13:18:28.577+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-09T13:18:28.577+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:28.577+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:28.578+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-09T13:18:28.578+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:28.580+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:28.581+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46a4e609]
2026-01-09T13:18:28.581+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5855369d]
2026-01-09T13:18:28.581+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:18:28.582+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@730a06b1]
2026-01-09T13:18:28.582+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.583+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:28.583+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.583+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:28.583+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-09T13:18:28.583+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:28.583+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@660b19bd] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.584+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-09T13:18:28.584+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b962e92] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.587+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f2ef4a]
2026-01-09T13:18:28.588+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bda364a]
2026-01-09T13:18:28.593+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.594+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4092d904] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.595+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2051067706 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:28.589+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:18:28.590+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@125714395 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:28.591+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:28.592+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@444996771 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:18:28.592+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:28.595+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:28.596+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:18:28.596+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:18:28.597+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:18:28.598+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:18:28.599+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:18:28.599+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:28.600+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-09T13:18:28.601+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:18:28.604+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:18:28.610+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:18:28.610+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:28.612+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:18:28.612+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:18:28.627+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:18:28.627+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:18:28.628+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:28.628+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-09T13:18:28.635+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@660b19bd]
2026-01-09T13:18:28.636+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.640+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38f6c620] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.633+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.634+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:18:28.634+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4092d904]
2026-01-09T13:18:28.641+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@110032498 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:28.644+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:28.642+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5815f94b] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.642+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-09T13:18:28.644+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.644+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.645+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:28.646+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@832453053 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:28.646+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b962e92]
2026-01-09T13:18:28.647+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41f9f1f4] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.647+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c4a73b2] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.654+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2051462598 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:28.655+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:18:28.657+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:18:28.648+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:18:28.650+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:28.652+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1188907805 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:18:28.661+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:28.661+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-09T13:18:28.661+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:18:28.662+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:28.664+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:28.665+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-09T13:18:28.666+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:28.666+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38f6c620]
2026-01-09T13:18:28.667+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:18:28.667+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c4a73b2]
2026-01-09T13:18:28.672+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:28.672+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5815f94b]
2026-01-09T13:18:28.672+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.674+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-09T13:18:28.674+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.674+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b5a394] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.675+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:28.675+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@82231e3] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.676+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2048759667 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:28.677+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2139770381 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:28.677+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:18:28.678+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:18:28.678+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:28.679+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41f9f1f4]
2026-01-09T13:18:28.680+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-09T13:18:28.680+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:28.680+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.681+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@185c56af] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.682+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@371483137 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:18:28.683+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:28.684+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:28.684+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:28.685+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-09T13:18:28.685+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@82231e3]
2026-01-09T13:18:28.685+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b5a394]
2026-01-09T13:18:28.687+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:28.688+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.688+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:18:28.689+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f46d1cb] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.691+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:28.691+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@122126004 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:28.692+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:28.693+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:28.693+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@185c56af]
2026-01-09T13:18:28.694+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:28.694+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:28.695+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:18:28.696+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:28.697+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:28.698+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f46d1cb]
2026-01-09T13:18:28.698+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.698+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b9cd910] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.699+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1917682977 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:28.699+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:18:28.700+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:18:28.707+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-09T13:18:28.708+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b9cd910]
2026-01-09T13:18:28.709+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:28.710+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61a2772d] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:28.711+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1828415056 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:28.713+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:28.713+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:28.728+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:28.734+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61a2772d]
2026-01-09T13:18:28.734+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:28.735+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-09T13:18:28.747+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:28.963+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:18:28.964+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:18:29.132+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:18:29.150+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:18:29.153+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:18:29.158+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:18:29.159+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:18:29.160+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:18:29.160+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:18:29.161+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:18:29.164+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:18:29.161+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:29.164+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:18:29.165+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ba7b311] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:29.165+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:29.188+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ad555ab] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:29.198+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@969860355 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:18:29.200+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2080239675 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:29.202+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:18:29.209+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:18:29.210+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:29.211+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:29.247+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:18:29.247+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:18:29.256+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ba7b311]
2026-01-09T13:18:29.256+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ad555ab]
2026-01-09T13:18:29.257+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:29.257+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:29.257+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b74d044] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:29.257+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49503bbd] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:29.258+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1628247766 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:18:29.258+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1339141312 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:29.258+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:29.258+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:29.259+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:29.278+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:29.305+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:29.305+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:29.316+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b74d044]
2026-01-09T13:18:29.316+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49503bbd]
2026-01-09T13:18:29.316+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:29.328+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:29.340+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:18:29.341+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:18:29.341+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:29.344+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:29.758+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:18:29.758+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:18:29.759+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/12
2026-01-09T13:18:29.759+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-09T13:18:29.759+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/12
2026-01-09T13:18:29.759+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-09T13:18:29.798+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:18:29.800+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:18:29.804+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/12
2026-01-09T13:18:29.817+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:18:29.804+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-09T13:18:29.816+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:18:29.817+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/12
2026-01-09T13:18:29.822+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/12
2026-01-09T13:18:29.823+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/12", parameters={}
2026-01-09T13:18:29.818+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:18:29.820+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-09T13:18:29.821+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:18:29.824+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:18:29.824+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-09T13:18:29.825+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-09T13:18:29.825+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:18:29.825+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:18:29.825+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:29.825+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-09T13:18:29.825+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:18:29.826+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:29.827+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/12
2026-01-09T13:18:29.828+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-09T13:18:29.883+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/12
2026-01-09T13:18:29.879+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ce5c297] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:29.881+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-09T13:18:29.882+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:29.882+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27038285] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:29.883+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-09T13:18:29.883+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/12
2026-01-09T13:18:29.884+09:00  INFO 23648 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 4, companyId: 1
2026-01-09T13:18:29.884+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@362bdca7] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:29.892+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-09T13:18:29.893+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@680320232 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:18:29.895+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-09T13:18:29.893+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/12", parameters={}
2026-01-09T13:18:29.893+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@264315652 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:29.893+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:29.894+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-09T13:18:29.896+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 12(Long), 1(Long)
2026-01-09T13:18:29.896+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-09T13:18:29.896+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:18:29.897+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10e39407] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:29.898+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-09T13:18:29.899+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:29.899+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-09T13:18:29.901+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9632354] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:29.903+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1903266938 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:29.905+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:18:29.901+09:00  INFO 23648 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 4, companyId: 1
2026-01-09T13:18:29.905+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-09T13:18:29.906+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:29.907+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:18:29.907+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:29.908+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@441698317 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:29.908+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@352326802 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:29.908+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ce5c297]
2026-01-09T13:18:29.908+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27038285]
2026-01-09T13:18:29.908+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@791d4248] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:29.909+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-09T13:18:29.909+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-09T13:18:29.909+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:29.910+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:29.911+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:29.911+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:18:29.911+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 12(Long), 1(Long)
2026-01-09T13:18:29.912+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@df523b0] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:29.913+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:18:29.913+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@166486660 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:18:29.913+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@362bdca7]
2026-01-09T13:18:29.914+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1513168012 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:18:29.915+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-09T13:18:29.915+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:29.915+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-09T13:18:29.915+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:29.916+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 12(Long), 1(Long)
2026-01-09T13:18:29.917+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:29.917+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19589483] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:29.918+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-09T13:18:29.919+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-09T13:18:29.922+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2035703949 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:29.923+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10e39407]
2026-01-09T13:18:29.927+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9632354]
2026-01-09T13:18:29.928+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:29.929+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:29.930+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:29.930+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-09T13:18:29.930+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:29.930+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=6, userId=4, si (truncated)...]
2026-01-09T13:18:29.930+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7028e10f] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:29.930+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@df523b0]
2026-01-09T13:18:29.930+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-09T13:18:29.932+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:29.932+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@923722730 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:29.932+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:29.932+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@791d4248]
2026-01-09T13:18:29.933+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-09T13:18:29.933+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:29.934+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e455cf0] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:29.935+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:29.938+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 12(Long), 1(Long)
2026-01-09T13:18:29.938+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19589483]
2026-01-09T13:18:29.938+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@713623083 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:18:29.939+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=6, userId=4, si (truncated)...]
2026-01-09T13:18:29.939+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:29.939+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-09T13:18:29.940+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:29.942+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:18:29.942+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 12(Long), 1(Long)
2026-01-09T13:18:29.945+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-09T13:18:29.946+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:29.947+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7028e10f]
2026-01-09T13:18:29.951+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:29.952+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a28299d] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:29.959+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2101320014 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:29.959+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-09T13:18:29.961+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 12(Long), 1(Long)
2026-01-09T13:18:29.964+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectApprovalLines            : <==      Total: 2
2026-01-09T13:18:29.964+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 2
2026-01-09T13:18:29.965+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e455cf0]
2026-01-09T13:18:29.966+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a28299d]
2026-01-09T13:18:29.966+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:29.966+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:29.967+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b2cb435] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:29.967+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6125092d] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:29.967+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1865077628 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:18:29.968+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1783275605 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:29.968+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-09T13:18:29.968+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-09T13:18:29.971+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 12(Long), 1(Long)
2026-01-09T13:18:29.972+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 12(Long), 1(Long)
2026-01-09T13:18:29.977+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-09T13:18:29.977+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6125092d]
2026-01-09T13:18:29.978+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:29.979+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27b9d3d8] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:29.979+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-09T13:18:29.980+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1855769187 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:29.980+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b2cb435]
2026-01-09T13:18:29.980+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:29.981+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:29.981+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:29.982+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@279922] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:29.982+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@772020239 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:18:29.983+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:29.984+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:29.989+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:29.991+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:29.991+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27b9d3d8]
2026-01-09T13:18:29.992+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@279922]
2026-01-09T13:18:29.993+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:29.993+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:29.994+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=12, drafterId=1, r (truncated)...]
2026-01-09T13:18:29.994+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=12, drafterId=1, r (truncated)...]
2026-01-09T13:18:29.995+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:30.008+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:36.563+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:18:36.563+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:18:36.564+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:18:36.565+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-09T13:18:36.566+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-09T13:18:36.567+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:18:36.580+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:18:36.582+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:18:36.590+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:18:36.590+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-09T13:18:36.595+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-09T13:18:36.596+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:18:36.598+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:18:36.598+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-09T13:18:36.601+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:18:36.601+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:18:36.612+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:18:36.613+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:18:36.613+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:18:36.614+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:18:36.614+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:18:36.625+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:18:36.615+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:18:36.616+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-09T13:18:36.627+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:18:36.617+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-09T13:18:36.625+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:18:36.628+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-09T13:18:36.626+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:18:36.626+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:18:36.627+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-09T13:18:36.627+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:18:36.628+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:18:36.628+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-09T13:18:36.629+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:18:36.629+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:36.629+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-09T13:18:36.630+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:18:36.631+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:36.641+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eb719ba] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:36.631+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-09T13:18:36.631+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:18:36.631+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@238acb2] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:36.633+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-09T13:18:36.640+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:18:36.644+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-09T13:18:36.644+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:18:36.645+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-09T13:18:36.647+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:36.648+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:36.648+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1755580379 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:36.648+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@519263898 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:36.649+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:36.650+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:36.651+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5482c90b] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:36.650+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c40031] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:36.650+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f465702] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:36.650+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:18:36.651+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:18:36.651+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19bce6a6] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:36.657+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-09T13:18:36.659+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:36.663+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@785347409 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:36.664+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@394076431 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:36.664+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@462446515 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:18:36.664+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:18:36.666+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:18:36.666+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:36.666+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:36.667+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-09T13:18:36.667+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:36.668+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:18:36.671+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2013973354 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:18:36.671+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:18:36.674+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@238acb2]
2026-01-09T13:18:36.677+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:18:36.678+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eb719ba]
2026-01-09T13:18:36.678+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:36.678+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:18:36.679+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-09T13:18:36.679+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:36.680+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:36.680+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:36.681+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5482c90b]
2026-01-09T13:18:36.681+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c40031]
2026-01-09T13:18:36.682+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f465702]
2026-01-09T13:18:36.684+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:18:36.684+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@403d80dd] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:36.685+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:36.690+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:36.691+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:36.692+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:36.692+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:18:36.693+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1007781645 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:36.694+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9f6aec1] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:36.694+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:18:36.698+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e1570bd] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:36.700+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:18:36.700+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19bce6a6]
2026-01-09T13:18:36.701+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:36.702+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@794905137 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:18:36.712+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:36.713+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@992591916 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:36.714+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:36.714+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-09T13:18:36.716+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:36.717+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:36.722+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:18:36.722+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:36.724+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b05caa7] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:36.725+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:18:36.726+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:36.730+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:18:36.730+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:36.731+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1523828643 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:18:36.731+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-09T13:18:36.731+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:36.732+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:18:36.733+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:36.734+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-09T13:18:36.734+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@403d80dd]
2026-01-09T13:18:36.740+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:18:36.741+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:36.741+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:36.742+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:36.742+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:18:36.744+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b3772c5] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:36.744+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:36.747+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:18:36.747+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:36.755+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@660936200 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:36.755+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9f6aec1]
2026-01-09T13:18:36.756+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:36.760+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:36.768+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-09T13:18:36.771+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-09T13:18:36.772+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-09T13:18:36.772+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-09T13:18:36.773+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-09T13:18:36.760+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34c6f288] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:36.761+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:36.761+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:36.762+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:36.768+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b05caa7]
2026-01-09T13:18:36.777+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:36.777+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@982513142 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:36.777+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e1570bd]
2026-01-09T13:18:36.778+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:36.778+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a362003] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:36.781+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:36.784+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:18:36.781+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79e58355] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:36.781+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:18:36.781+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:36.782+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@906626850 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:18:36.784+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:36.787+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1615923363 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:36.788+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b4613b1] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:36.788+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:36.789+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:18:36.792+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-09T13:18:36.800+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-09T13:18:36.808+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@245568764 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:36.812+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-09T13:18:36.813+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-09T13:18:36.813+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-09T13:18:36.814+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:18:36.815+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:36.826+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-09T13:18:36.840+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-09T13:18:36.840+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b3772c5]
2026-01-09T13:18:36.840+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-09T13:18:36.841+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:36.842+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aac5ca1] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:36.842+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-09T13:18:36.843+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2058206315 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:36.846+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:36.846+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:36.846+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23ab80c6] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:36.847+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:18:36.848+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-09T13:18:36.848+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:36.849+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-09T13:18:36.849+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-09T13:18:36.849+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1363312769 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:18:36.849+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34c6f288]
2026-01-09T13:18:36.850+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a362003]
2026-01-09T13:18:36.851+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79e58355]
2026-01-09T13:18:36.851+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b4613b1]
2026-01-09T13:18:36.852+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:36.855+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:36.856+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:36.858+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:36.859+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:36.859+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:36.859+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:36.860+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f033d3d] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:36.860+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a3ee477] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:36.860+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-09T13:18:36.861+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aac5ca1]
2026-01-09T13:18:36.861+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ebd0549] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:36.862+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2085798631 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:36.864+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@833874699 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:18:36.864+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:36.865+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:36.866+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@355294900 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:36.866+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:36.868+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:36.877+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:36.872+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-09T13:18:36.875+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21b84bab] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:36.876+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:36.876+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:36.878+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-09T13:18:36.879+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@424235625 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:36.879+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:36.880+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-09T13:18:36.880+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:18:36.881+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:36.891+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23ab80c6]
2026-01-09T13:18:36.883+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-09T13:18:36.891+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:18:36.892+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:36.892+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-09T13:18:36.893+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1850b121] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:36.894+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:36.896+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1736621917 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:18:36.896+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b6b6b72] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:36.896+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:36.897+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1785114070 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:36.897+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:36.897+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:18:36.900+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:36.908+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:36.908+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:36.915+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f033d3d]
2026-01-09T13:18:36.924+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:36.924+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:36.924+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-09T13:18:36.927+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a3ee477]
2026-01-09T13:18:36.928+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:36.929+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ebd0549]
2026-01-09T13:18:36.931+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1850b121]
2026-01-09T13:18:36.931+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21b84bab]
2026-01-09T13:18:36.931+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:36.931+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:18:36.932+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:36.933+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:36.934+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:36.947+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b0d3797] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:36.948+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:36.951+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-09T13:18:36.951+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@211630b6] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:36.954+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4228be5d] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:36.955+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1189962205 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:18:36.958+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:18:36.962+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:36.964+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1020417036 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:18:36.964+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@556683424 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:36.965+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:18:36.965+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-09T13:18:36.972+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:18:36.966+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-09T13:18:36.967+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:18:36.971+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:18:36.971+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:18:36.972+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b6b6b72]
2026-01-09T13:18:36.979+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-09T13:18:36.980+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:18:36.981+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-09T13:18:36.984+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:18:36.984+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:36.987+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-09T13:18:36.994+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:18:36.997+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-09T13:18:37.001+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@761a8abb] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:37.001+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-09T13:18:37.001+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:18:37.004+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b0d3797]
2026-01-09T13:18:37.005+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@912936945 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:37.008+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:37.008+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:18:37.008+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:37.009+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:37.009+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ae079b1] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:37.013+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:37.014+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9e70b2c] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:37.025+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:37.026+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@208818843 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:37.026+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27d70da4] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:37.027+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-09T13:18:37.028+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-09T13:18:37.029+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1535390728 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:18:37.029+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:37.032+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@197155563 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:37.032+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4228be5d]
2026-01-09T13:18:37.032+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@211630b6]
2026-01-09T13:18:37.033+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:18:37.033+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:37.033+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:18:37.034+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:37.034+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:37.034+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:37.040+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-09T13:18:37.047+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:37.050+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-09T13:18:37.050+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@671d44be] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:37.060+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@761a8abb]
2026-01-09T13:18:37.062+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:37.063+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:37.063+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1998474091 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:18:37.096+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:37.096+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:37.065+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:37.081+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ae079b1]
2026-01-09T13:18:37.098+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:37.088+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:18:37.092+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:18:37.093+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-09T13:18:37.100+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9e70b2c]
2026-01-09T13:18:37.106+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:37.097+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ca0dc5b] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:37.098+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@175f1ab] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:37.099+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:18:37.100+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27d70da4]
2026-01-09T13:18:37.107+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fc60fac] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:37.108+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1313721382 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:37.108+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2023828933 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:37.114+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:37.109+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:18:37.111+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:37.113+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1850327315 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:18:37.113+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:18:37.114+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:37.114+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:18:37.114+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@112d0d50] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:37.115+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:37.115+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-09T13:18:37.116+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:18:37.116+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@235440380 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:37.116+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:37.118+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:37.131+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:37.140+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:37.146+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:37.147+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-09T13:18:37.155+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ca0dc5b]
2026-01-09T13:18:37.149+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1564e2a7] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:37.150+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@671d44be]
2026-01-09T13:18:37.151+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:37.154+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@175f1ab]
2026-01-09T13:18:37.157+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:37.164+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:37.164+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@814830174 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:37.164+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:37.169+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:37.173+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fc60fac]
2026-01-09T13:18:37.173+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2965ac8d] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:37.176+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:18:37.176+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54733888] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:37.176+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fe3b63f] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:37.177+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:37.211+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3050c83d] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:37.178+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1129185278 wrapping com.mysql.cj.jdbc.ConnectionImpl@78635874] will not be managed by Spring
2026-01-09T13:18:37.179+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:37.180+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1497804300 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:18:37.180+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:37.189+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1907752129 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:37.212+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1594100468 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:18:37.212+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:37.241+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:37.212+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:18:37.212+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@112d0d50]
2026-01-09T13:18:37.232+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:18:37.233+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:18:37.243+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:18:37.243+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:37.244+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:18:37.245+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:18:37.245+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:18:37.249+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:18:37.250+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1564e2a7]
2026-01-09T13:18:37.251+09:00 DEBUG 23648 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:37.251+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:37.256+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:37.258+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-09T13:18:37.259+09:00 DEBUG 23648 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:18:37.260+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60b3a1e9] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:37.260+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2965ac8d]
2026-01-09T13:18:37.260+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54733888]
2026-01-09T13:18:37.262+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1383073410 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:37.266+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:37.262+09:00 DEBUG 23648 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-09T13:18:37.262+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:37.263+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:37.267+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:37.267+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-09T13:18:37.270+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:18:37.270+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1590b4ff] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:37.273+09:00 DEBUG 23648 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:37.274+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-09T13:18:37.274+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:18:37.274+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-09T13:18:37.293+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1483368893 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:18:37.298+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:18:37.300+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-09T13:18:37.294+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-09T13:18:37.294+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3050c83d]
2026-01-09T13:18:37.296+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:18:37.297+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fe3b63f]
2026-01-09T13:18:37.308+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-09T13:18:37.310+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:37.311+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:18:37.311+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:37.312+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c0859b8] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:37.312+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-09T13:18:37.312+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57bf48b8] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:37.312+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:18:37.313+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1855471688 wrapping com.mysql.cj.jdbc.ConnectionImpl@474bdd0a] will not be managed by Spring
2026-01-09T13:18:37.313+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-09T13:18:37.314+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:37.328+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1637380946 wrapping com.mysql.cj.jdbc.ConnectionImpl@64db534b] will not be managed by Spring
2026-01-09T13:18:37.328+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:37.328+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-09T13:18:37.328+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-09T13:18:37.329+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60b3a1e9]
2026-01-09T13:18:37.329+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:37.329+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ca30267] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:37.330+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-09T13:18:37.330+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:37.330+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:37.330+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:37.331+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@973265399 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:37.340+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 28
2026-01-09T13:18:37.342+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b6057ee] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:37.343+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:18:37.343+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:18:37.343+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1590b4ff]
2026-01-09T13:18:37.344+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2084422793 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:37.344+09:00 DEBUG 23648 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:37.350+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:37.366+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:37.366+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-09T13:18:37.367+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:37.377+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f4713bb] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:37.367+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-09T13:18:37.377+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57bf48b8]
2026-01-09T13:18:37.377+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c0859b8]
2026-01-09T13:18:37.378+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1331717088 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:18:37.450+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:37.416+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-09T13:18:37.432+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:18:37.435+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:37.450+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:37.450+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-09T13:18:37.451+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ca30267]
2026-01-09T13:18:37.527+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:37.481+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 7
2026-01-09T13:18:37.492+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-09T13:18:37.497+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:37.511+09:00 DEBUG 23648 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:37.527+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b844b34] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:37.527+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b6057ee]
2026-01-09T13:18:37.528+09:00 DEBUG 23648 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:37.529+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@790681113 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ca9ee6d] will not be managed by Spring
2026-01-09T13:18:37.573+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:37.530+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:37.558+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:37.574+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:37.575+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@618b91d4] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:37.576+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f4713bb]
2026-01-09T13:18:37.588+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:37.590+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@749f2dc1] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:37.591+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@321008162 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:18:37.585+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@414020908 wrapping com.mysql.cj.jdbc.ConnectionImpl@279c6e95] will not be managed by Spring
2026-01-09T13:18:37.591+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-09T13:18:37.593+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-09T13:18:37.592+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:37.596+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:37.638+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:37.638+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-09T13:18:37.639+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:37.656+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@618b91d4]
2026-01-09T13:18:37.656+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@749f2dc1]
2026-01-09T13:18:37.657+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b844b34]
2026-01-09T13:18:37.673+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:37.693+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-09T13:18:37.693+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:37.694+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:18:37.694+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d1ec65b] was not registered for synchronization because synchronization is not active
2026-01-09T13:18:37.694+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=38, drafterId= (truncated)...]
2026-01-09T13:18:37.695+09:00 DEBUG 23648 --- [http-nio-8080-exec-11] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:37.696+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1885474076 wrapping com.mysql.cj.jdbc.ConnectionImpl@3421cc69] will not be managed by Spring
2026-01-09T13:18:37.696+09:00 DEBUG 23648 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-09T13:18:37.713+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-09T13:18:37.714+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-09T13:18:37.751+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-09T13:18:37.759+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d1ec65b]
2026-01-09T13:18:37.761+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-09T13:18:37.766+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-09T13:18:37.766+09:00 DEBUG 23648 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
